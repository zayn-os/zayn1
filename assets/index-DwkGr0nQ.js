var yF=Object.defineProperty;var vF=(t,e,n)=>e in t?yF(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Db=(t,e,n)=>vF(t,typeof e!="symbol"?e+"":e,n);function xF(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Za=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ws(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ob={exports:{}},Yf={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zN;function bF(){if(zN)return Yf;zN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var c in i)c!=="key"&&(s[c]=i[c])}else s=i;return i=s.ref,{$$typeof:t,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Yf.Fragment=e,Yf.jsx=n,Yf.jsxs=n,Yf}var UN;function _F(){return UN||(UN=1,Ob.exports=bF()),Ob.exports}var l=_F(),Lb={exports:{}},ot={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VN;function wF(){if(VN)return ot;VN=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),f=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),m=Symbol.for("react.activity"),g=Symbol.iterator;function v(G){return G===null||typeof G!="object"?null:(G=g&&G[g]||G["@@iterator"],typeof G=="function"?G:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},w=Object.assign,S={};function C(G,X,de){this.props=G,this.context=X,this.refs=S,this.updater=de||b}C.prototype.isReactComponent={},C.prototype.setState=function(G,X){if(typeof G!="object"&&typeof G!="function"&&G!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,G,X,"setState")},C.prototype.forceUpdate=function(G){this.updater.enqueueForceUpdate(this,G,"forceUpdate")};function R(){}R.prototype=C.prototype;function N(G,X,de){this.props=G,this.context=X,this.refs=S,this.updater=de||b}var O=N.prototype=new R;O.constructor=N,w(O,C.prototype),O.isPureReactComponent=!0;var k=Array.isArray;function D(){}var M={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function I(G,X,de){var ce=de.ref;return{$$typeof:t,type:G,key:X,ref:ce!==void 0?ce:null,props:de}}function U(G,X){return I(G.type,X,G.props)}function B(G){return typeof G=="object"&&G!==null&&G.$$typeof===t}function P(G){var X={"=":"=0",":":"=2"};return"$"+G.replace(/[=:]/g,function(de){return X[de]})}var F=/\/+/g;function z(G,X){return typeof G=="object"&&G!==null&&G.key!=null?P(""+G.key):X.toString(36)}function Q(G){switch(G.status){case"fulfilled":return G.value;case"rejected":throw G.reason;default:switch(typeof G.status=="string"?G.then(D,D):(G.status="pending",G.then(function(X){G.status==="pending"&&(G.status="fulfilled",G.value=X)},function(X){G.status==="pending"&&(G.status="rejected",G.reason=X)})),G.status){case"fulfilled":return G.value;case"rejected":throw G.reason}}throw G}function W(G,X,de,ce,ve){var ze=typeof G;(ze==="undefined"||ze==="boolean")&&(G=null);var je=!1;if(G===null)je=!0;else switch(ze){case"bigint":case"string":case"number":je=!0;break;case"object":switch(G.$$typeof){case t:case e:je=!0;break;case h:return je=G._init,W(je(G._payload),X,de,ce,ve)}}if(je)return ve=ve(G),je=ce===""?"."+z(G,0):ce,k(ve)?(de="",je!=null&&(de=je.replace(F,"$&/")+"/"),W(ve,X,de,"",function(Ce){return Ce})):ve!=null&&(B(ve)&&(ve=U(ve,de+(ve.key==null||G&&G.key===ve.key?"":(""+ve.key).replace(F,"$&/")+"/")+je)),X.push(ve)),1;je=0;var Fe=ce===""?".":ce+":";if(k(G))for(var fe=0;fe<G.length;fe++)ce=G[fe],ze=Fe+z(ce,fe),je+=W(ce,X,de,ze,ve);else if(fe=v(G),typeof fe=="function")for(G=fe.call(G),fe=0;!(ce=G.next()).done;)ce=ce.value,ze=Fe+z(ce,fe++),je+=W(ce,X,de,ze,ve);else if(ze==="object"){if(typeof G.then=="function")return W(Q(G),X,de,ce,ve);throw X=String(G),Error("Objects are not valid as a React child (found: "+(X==="[object Object]"?"object with keys {"+Object.keys(G).join(", ")+"}":X)+"). If you meant to render a collection of children, use an array instead.")}return je}function K(G,X,de){if(G==null)return G;var ce=[],ve=0;return W(G,ce,"","",function(ze){return X.call(de,ze,ve++)}),ce}function te(G){if(G._status===-1){var X=G._result;X=X(),X.then(function(de){(G._status===0||G._status===-1)&&(G._status=1,G._result=de)},function(de){(G._status===0||G._status===-1)&&(G._status=2,G._result=de)}),G._status===-1&&(G._status=0,G._result=X)}if(G._status===1)return G._result.default;throw G._result}var ne=typeof reportError=="function"?reportError:function(G){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var X=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof G=="object"&&G!==null&&typeof G.message=="string"?String(G.message):String(G),error:G});if(!window.dispatchEvent(X))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",G);return}console.error(G)},xe={map:K,forEach:function(G,X,de){K(G,function(){X.apply(this,arguments)},de)},count:function(G){var X=0;return K(G,function(){X++}),X},toArray:function(G){return K(G,function(X){return X})||[]},only:function(G){if(!B(G))throw Error("React.Children.only expected to receive a single React element child.");return G}};return ot.Activity=m,ot.Children=xe,ot.Component=C,ot.Fragment=n,ot.Profiler=i,ot.PureComponent=N,ot.StrictMode=r,ot.Suspense=f,ot.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,ot.__COMPILER_RUNTIME={__proto__:null,c:function(G){return M.H.useMemoCache(G)}},ot.cache=function(G){return function(){return G.apply(null,arguments)}},ot.cacheSignal=function(){return null},ot.cloneElement=function(G,X,de){if(G==null)throw Error("The argument must be a React element, but you passed "+G+".");var ce=w({},G.props),ve=G.key;if(X!=null)for(ze in X.key!==void 0&&(ve=""+X.key),X)!j.call(X,ze)||ze==="key"||ze==="__self"||ze==="__source"||ze==="ref"&&X.ref===void 0||(ce[ze]=X[ze]);var ze=arguments.length-2;if(ze===1)ce.children=de;else if(1<ze){for(var je=Array(ze),Fe=0;Fe<ze;Fe++)je[Fe]=arguments[Fe+2];ce.children=je}return I(G.type,ve,ce)},ot.createContext=function(G){return G={$$typeof:o,_currentValue:G,_currentValue2:G,_threadCount:0,Provider:null,Consumer:null},G.Provider=G,G.Consumer={$$typeof:s,_context:G},G},ot.createElement=function(G,X,de){var ce,ve={},ze=null;if(X!=null)for(ce in X.key!==void 0&&(ze=""+X.key),X)j.call(X,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(ve[ce]=X[ce]);var je=arguments.length-2;if(je===1)ve.children=de;else if(1<je){for(var Fe=Array(je),fe=0;fe<je;fe++)Fe[fe]=arguments[fe+2];ve.children=Fe}if(G&&G.defaultProps)for(ce in je=G.defaultProps,je)ve[ce]===void 0&&(ve[ce]=je[ce]);return I(G,ze,ve)},ot.createRef=function(){return{current:null}},ot.forwardRef=function(G){return{$$typeof:c,render:G}},ot.isValidElement=B,ot.lazy=function(G){return{$$typeof:h,_payload:{_status:-1,_result:G},_init:te}},ot.memo=function(G,X){return{$$typeof:d,type:G,compare:X===void 0?null:X}},ot.startTransition=function(G){var X=M.T,de={};M.T=de;try{var ce=G(),ve=M.S;ve!==null&&ve(de,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(D,ne)}catch(ze){ne(ze)}finally{X!==null&&de.types!==null&&(X.types=de.types),M.T=X}},ot.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},ot.use=function(G){return M.H.use(G)},ot.useActionState=function(G,X,de){return M.H.useActionState(G,X,de)},ot.useCallback=function(G,X){return M.H.useCallback(G,X)},ot.useContext=function(G){return M.H.useContext(G)},ot.useDebugValue=function(){},ot.useDeferredValue=function(G,X){return M.H.useDeferredValue(G,X)},ot.useEffect=function(G,X){return M.H.useEffect(G,X)},ot.useEffectEvent=function(G){return M.H.useEffectEvent(G)},ot.useId=function(){return M.H.useId()},ot.useImperativeHandle=function(G,X,de){return M.H.useImperativeHandle(G,X,de)},ot.useInsertionEffect=function(G,X){return M.H.useInsertionEffect(G,X)},ot.useLayoutEffect=function(G,X){return M.H.useLayoutEffect(G,X)},ot.useMemo=function(G,X){return M.H.useMemo(G,X)},ot.useOptimistic=function(G,X){return M.H.useOptimistic(G,X)},ot.useReducer=function(G,X,de){return M.H.useReducer(G,X,de)},ot.useRef=function(G){return M.H.useRef(G)},ot.useState=function(G){return M.H.useState(G)},ot.useSyncExternalStore=function(G,X,de){return M.H.useSyncExternalStore(G,X,de)},ot.useTransition=function(){return M.H.useTransition()},ot.version="19.2.4",ot}var FN;function Sd(){return FN||(FN=1,Lb.exports=wF()),Lb.exports}var L=Sd();const NS=ws(L),SF=xF({__proto__:null,default:NS},[L]);var zb={exports:{}},Xf={},Ub={exports:{}},Vb={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BN;function TF(){return BN||(BN=1,(function(t){function e(W,K){var te=W.length;W.push(K);e:for(;0<te;){var ne=te-1>>>1,xe=W[ne];if(0<i(xe,K))W[ne]=K,W[te]=xe,te=ne;else break e}}function n(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var K=W[0],te=W.pop();if(te!==K){W[0]=te;e:for(var ne=0,xe=W.length,G=xe>>>1;ne<G;){var X=2*(ne+1)-1,de=W[X],ce=X+1,ve=W[ce];if(0>i(de,te))ce<xe&&0>i(ve,de)?(W[ne]=ve,W[ce]=te,ne=ce):(W[ne]=de,W[X]=te,ne=X);else if(ce<xe&&0>i(ve,te))W[ne]=ve,W[ce]=te,ne=ce;else break e}}return K}function i(W,K){var te=W.sortIndex-K.sortIndex;return te!==0?te:W.id-K.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,c=o.now();t.unstable_now=function(){return o.now()-c}}var f=[],d=[],h=1,m=null,g=3,v=!1,b=!1,w=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function O(W){for(var K=n(d);K!==null;){if(K.callback===null)r(d);else if(K.startTime<=W)r(d),K.sortIndex=K.expirationTime,e(f,K);else break;K=n(d)}}function k(W){if(w=!1,O(W),!b)if(n(f)!==null)b=!0,D||(D=!0,P());else{var K=n(d);K!==null&&Q(k,K.startTime-W)}}var D=!1,M=-1,j=5,I=-1;function U(){return S?!0:!(t.unstable_now()-I<j)}function B(){if(S=!1,D){var W=t.unstable_now();I=W;var K=!0;try{e:{b=!1,w&&(w=!1,R(M),M=-1),v=!0;var te=g;try{t:{for(O(W),m=n(f);m!==null&&!(m.expirationTime>W&&U());){var ne=m.callback;if(typeof ne=="function"){m.callback=null,g=m.priorityLevel;var xe=ne(m.expirationTime<=W);if(W=t.unstable_now(),typeof xe=="function"){m.callback=xe,O(W),K=!0;break t}m===n(f)&&r(f),O(W)}else r(f);m=n(f)}if(m!==null)K=!0;else{var G=n(d);G!==null&&Q(k,G.startTime-W),K=!1}}break e}finally{m=null,g=te,v=!1}K=void 0}}finally{K?P():D=!1}}}var P;if(typeof N=="function")P=function(){N(B)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,z=F.port2;F.port1.onmessage=B,P=function(){z.postMessage(null)}}else P=function(){C(B,0)};function Q(W,K){M=C(function(){W(t.unstable_now())},K)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(W){W.callback=null},t.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<W?Math.floor(1e3/W):5},t.unstable_getCurrentPriorityLevel=function(){return g},t.unstable_next=function(W){switch(g){case 1:case 2:case 3:var K=3;break;default:K=g}var te=g;g=K;try{return W()}finally{g=te}},t.unstable_requestPaint=function(){S=!0},t.unstable_runWithPriority=function(W,K){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var te=g;g=W;try{return K()}finally{g=te}},t.unstable_scheduleCallback=function(W,K,te){var ne=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ne+te:ne):te=ne,W){case 1:var xe=-1;break;case 2:xe=250;break;case 5:xe=1073741823;break;case 4:xe=1e4;break;default:xe=5e3}return xe=te+xe,W={id:h++,callback:K,priorityLevel:W,startTime:te,expirationTime:xe,sortIndex:-1},te>ne?(W.sortIndex=te,e(d,W),n(f)===null&&W===n(d)&&(w?(R(M),M=-1):w=!0,Q(k,te-ne))):(W.sortIndex=xe,e(f,W),b||v||(b=!0,D||(D=!0,P()))),W},t.unstable_shouldYield=U,t.unstable_wrapCallback=function(W){var K=g;return function(){var te=g;g=K;try{return W.apply(this,arguments)}finally{g=te}}}})(Vb)),Vb}var HN;function EF(){return HN||(HN=1,Ub.exports=TF()),Ub.exports}var Fb={exports:{}},yr={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qN;function AF(){if(qN)return yr;qN=1;var t=Sd();function e(f){var d="https://react.dev/errors/"+f;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+f+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(f,d,h){var m=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:m==null?null:""+m,children:f,containerInfo:d,implementation:h}}var o=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function c(f,d){if(f==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return yr.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,yr.createPortal=function(f,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(e(299));return s(f,d,null,h)},yr.flushSync=function(f){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,f)return f()}finally{o.T=d,r.p=h,r.d.f()}},yr.preconnect=function(f,d){typeof f=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(f,d))},yr.prefetchDNS=function(f){typeof f=="string"&&r.d.D(f)},yr.preinit=function(f,d){if(typeof f=="string"&&d&&typeof d.as=="string"){var h=d.as,m=c(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,v=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(f,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:m,integrity:g,fetchPriority:v}):h==="script"&&r.d.X(f,{crossOrigin:m,integrity:g,fetchPriority:v,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},yr.preinitModule=function(f,d){if(typeof f=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=c(d.as,d.crossOrigin);r.d.M(f,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(f)},yr.preload=function(f,d){if(typeof f=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,m=c(h,d.crossOrigin);r.d.L(f,h,{crossOrigin:m,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},yr.preloadModule=function(f,d){if(typeof f=="string")if(d){var h=c(d.as,d.crossOrigin);r.d.m(f,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(f)},yr.requestFormReset=function(f){r.d.r(f)},yr.unstable_batchedUpdates=function(f,d){return f(d)},yr.useFormState=function(f,d,h){return o.H.useFormState(f,d,h)},yr.useFormStatus=function(){return o.H.useHostTransitionStatus()},yr.version="19.2.4",yr}var $N;function ZO(){if($N)return Fb.exports;$N=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Fb.exports=AF(),Fb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GN;function CF(){if(GN)return Xf;GN=1;var t=EF(),e=Sd(),n=ZO();function r(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var p=2;p<arguments.length;p++)u+="&args[]="+encodeURIComponent(arguments[p])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var u=a,p=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(p=u.return),a=u.return;while(a)}return u.tag===3?p:null}function o(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function c(a){if(a.tag===31){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function f(a){if(s(a)!==a)throw Error(r(188))}function d(a){var u=a.alternate;if(!u){if(u=s(a),u===null)throw Error(r(188));return u!==a?null:a}for(var p=a,y=u;;){var E=p.return;if(E===null)break;var A=E.alternate;if(A===null){if(y=E.return,y!==null){p=y;continue}break}if(E.child===A.child){for(A=E.child;A;){if(A===p)return f(E),a;if(A===y)return f(E),u;A=A.sibling}throw Error(r(188))}if(p.return!==y.return)p=E,y=A;else{for(var H=!1,Y=E.child;Y;){if(Y===p){H=!0,p=E,y=A;break}if(Y===y){H=!0,y=E,p=A;break}Y=Y.sibling}if(!H){for(Y=A.child;Y;){if(Y===p){H=!0,p=A,y=E;break}if(Y===y){H=!0,y=A,p=E;break}Y=Y.sibling}if(!H)throw Error(r(189))}}if(p.alternate!==y)throw Error(r(190))}if(p.tag!==3)throw Error(r(188));return p.stateNode.current===p?a:u}function h(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=h(a),u!==null)return u;a=a.sibling}return null}var m=Object.assign,g=Symbol.for("react.element"),v=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),w=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),C=Symbol.for("react.profiler"),R=Symbol.for("react.consumer"),N=Symbol.for("react.context"),O=Symbol.for("react.forward_ref"),k=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),U=Symbol.for("react.memo_cache_sentinel"),B=Symbol.iterator;function P(a){return a===null||typeof a!="object"?null:(a=B&&a[B]||a["@@iterator"],typeof a=="function"?a:null)}var F=Symbol.for("react.client.reference");function z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===F?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case w:return"Fragment";case C:return"Profiler";case S:return"StrictMode";case k:return"Suspense";case D:return"SuspenseList";case I:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case N:return a.displayName||"Context";case R:return(a._context.displayName||"Context")+".Consumer";case O:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case M:return u=a.displayName||null,u!==null?u:z(a.type)||"Memo";case j:u=a._payload,a=a._init;try{return z(a(u))}catch{}}return null}var Q=Array.isArray,W=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te={pending:!1,data:null,method:null,action:null},ne=[],xe=-1;function G(a){return{current:a}}function X(a){0>xe||(a.current=ne[xe],ne[xe]=null,xe--)}function de(a,u){xe++,ne[xe]=a.current,a.current=u}var ce=G(null),ve=G(null),ze=G(null),je=G(null);function Fe(a,u){switch(de(ze,u),de(ve,a),de(ce,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?aN(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=aN(u),a=lN(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}X(ce),de(ce,a)}function fe(){X(ce),X(ve),X(ze)}function Ce(a){a.memoizedState!==null&&de(je,a);var u=ce.current,p=lN(u,a.type);u!==p&&(de(ve,a),de(ce,p))}function Ve(a){ve.current===a&&(X(ce),X(ve)),je.current===a&&(X(je),$f._currentValue=te)}var Ne,ft;function q(a){if(Ne===void 0)try{throw Error()}catch(p){var u=p.stack.trim().match(/\n( *(at )?)/);Ne=u&&u[1]||"",ft=-1<p.stack.indexOf(`
    at`)?" (<anonymous>)":-1<p.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Ne+a+ft}var ie=!1;function le(a,u){if(!a||ie)return"";ie=!0;var p=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(u){var Ae=function(){throw Error()};if(Object.defineProperty(Ae.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ae,[])}catch(_e){var ye=_e}Reflect.construct(a,[],Ae)}else{try{Ae.call()}catch(_e){ye=_e}a.call(Ae.prototype)}}else{try{throw Error()}catch(_e){ye=_e}(Ae=a())&&typeof Ae.catch=="function"&&Ae.catch(function(){})}}catch(_e){if(_e&&ye&&typeof _e.stack=="string")return[_e.stack,ye.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var E=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");E&&E.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var A=y.DetermineComponentFrameRoot(),H=A[0],Y=A[1];if(H&&Y){var re=H.split(`
`),me=Y.split(`
`);for(E=y=0;y<re.length&&!re[y].includes("DetermineComponentFrameRoot");)y++;for(;E<me.length&&!me[E].includes("DetermineComponentFrameRoot");)E++;if(y===re.length||E===me.length)for(y=re.length-1,E=me.length-1;1<=y&&0<=E&&re[y]!==me[E];)E--;for(;1<=y&&0<=E;y--,E--)if(re[y]!==me[E]){if(y!==1||E!==1)do if(y--,E--,0>E||re[y]!==me[E]){var Se=`
`+re[y].replace(" at new "," at ");return a.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",a.displayName)),Se}while(1<=y&&0<=E);break}}}finally{ie=!1,Error.prepareStackTrace=p}return(p=a?a.displayName||a.name:"")?q(p):""}function Z(a,u){switch(a.tag){case 26:case 27:case 5:return q(a.type);case 16:return q("Lazy");case 13:return a.child!==u&&u!==null?q("Suspense Fallback"):q("Suspense");case 19:return q("SuspenseList");case 0:case 15:return le(a.type,!1);case 11:return le(a.type.render,!1);case 1:return le(a.type,!0);case 31:return q("Activity");default:return""}}function ee(a){try{var u="",p=null;do u+=Z(a,p),p=a,a=a.return;while(a);return u}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var oe=Object.prototype.hasOwnProperty,Te=t.unstable_scheduleCallback,Re=t.unstable_cancelCallback,ge=t.unstable_shouldYield,Me=t.unstable_requestPaint,Le=t.unstable_now,De=t.unstable_getCurrentPriorityLevel,We=t.unstable_ImmediatePriority,Et=t.unstable_UserBlockingPriority,lt=t.unstable_NormalPriority,mr=t.unstable_LowPriority,Ts=t.unstable_IdlePriority,Cr=t.log,Es=t.unstable_setDisableYieldValue,Tt=null,ln=null;function gr(a){if(typeof Cr=="function"&&Es(a),ln&&typeof ln.setStrictMode=="function")try{ln.setStrictMode(Tt,a)}catch{}}var Rt=Math.clz32?Math.clz32:Bc,Tl=Math.log,pa=Math.LN2;function Bc(a){return a>>>=0,a===0?32:31-(Tl(a)/pa|0)|0}var _i=256,As=262144,Kt=4194304;function Nr(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return a&261888;case 262144:case 524288:case 1048576:case 2097152:return a&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Cs(a,u,p){var y=a.pendingLanes;if(y===0)return 0;var E=0,A=a.suspendedLanes,H=a.pingedLanes;a=a.warmLanes;var Y=y&134217727;return Y!==0?(y=Y&~A,y!==0?E=Nr(y):(H&=Y,H!==0?E=Nr(H):p||(p=Y&~a,p!==0&&(E=Nr(p))))):(Y=y&~A,Y!==0?E=Nr(Y):H!==0?E=Nr(H):p||(p=y&~a,p!==0&&(E=Nr(p)))),E===0?0:u!==0&&u!==E&&(u&A)===0&&(A=E&-E,p=u&-u,A>=p||A===32&&(p&4194048)!==0)?u:E}function Yi(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function Uv(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function jp(){var a=Kt;return Kt<<=1,(Kt&62914560)===0&&(Kt=4194304),a}function Ns(a){for(var u=[],p=0;31>p;p++)u.push(a);return u}function El(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Vv(a,u,p,y,E,A){var H=a.pendingLanes;a.pendingLanes=p,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=p,a.entangledLanes&=p,a.errorRecoveryDisabledLanes&=p,a.shellSuspendCounter=0;var Y=a.entanglements,re=a.expirationTimes,me=a.hiddenUpdates;for(p=H&~p;0<p;){var Se=31-Rt(p),Ae=1<<Se;Y[Se]=0,re[Se]=-1;var ye=me[Se];if(ye!==null)for(me[Se]=null,Se=0;Se<ye.length;Se++){var _e=ye[Se];_e!==null&&(_e.lane&=-536870913)}p&=~Ae}y!==0&&Al(a,y,0),A!==0&&E===0&&a.tag!==0&&(a.suspendedLanes|=A&~(H&~u))}function Al(a,u,p){a.pendingLanes|=u,a.suspendedLanes&=~u;var y=31-Rt(u);a.entangledLanes|=u,a.entanglements[y]=a.entanglements[y]|1073741824|p&261930}function Yd(a,u){var p=a.entangledLanes|=u;for(a=a.entanglements;p;){var y=31-Rt(p),E=1<<y;E&u|a[y]&u&&(a[y]|=u),p&=~E}}function Xd(a,u){var p=u&-u;return p=(p&42)!==0?1:Cl(p),(p&(a.suspendedLanes|u))!==0?0:p}function Cl(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function xo(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Mp(){var a=K.p;return a!==0?a:(a=window.event,a===void 0?32:RN(a.type))}function Xi(a,u){var p=K.p;try{return K.p=a,u()}finally{K.p=p}}var Ji=Math.random().toString(36).slice(2),bn="__reactFiber$"+Ji,Ln="__reactProps$"+Ji,ks="__reactContainer$"+Ji,Hc="__reactEvents$"+Ji,Fv="__reactListeners$"+Ji,Dp="__reactHandles$"+Ji,Op="__reactResources$"+Ji,Is="__reactMarker$"+Ji;function qc(a){delete a[bn],delete a[Ln],delete a[Hc],delete a[Fv],delete a[Dp]}function Rs(a){var u=a[bn];if(u)return u;for(var p=a.parentNode;p;){if(u=p[ks]||p[bn]){if(p=u.alternate,u.child!==null||p!==null&&p.child!==null)for(a=mN(a);a!==null;){if(p=a[bn])return p;a=mN(a)}return u}a=p,p=a.parentNode}return null}function wi(a){if(a=a[bn]||a[ks]){var u=a.tag;if(u===5||u===6||u===13||u===31||u===26||u===27||u===3)return a}return null}function ei(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(r(33))}function Ps(a){var u=a[Op];return u||(u=a[Op]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function _n(a){a[Is]=!0}var Jd=new Set,Qd={};function js(a,u){Ms(a,u),Ms(a+"Capture",u)}function Ms(a,u){for(Qd[a]=u,a=0;a<u.length;a++)Jd.add(u[a])}var Zd=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ef={},tf={};function Lp(a){return oe.call(tf,a)?!0:oe.call(ef,a)?!1:Zd.test(a)?tf[a]=!0:(ef[a]=!0,!1)}function $c(a,u,p){if(Lp(u))if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var y=u.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+p)}}function ti(a,u,p){if(p===null)a.removeAttribute(u);else{switch(typeof p){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+p)}}function wn(a,u,p,y){if(y===null)a.removeAttribute(p);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(p);return}a.setAttributeNS(u,p,""+y)}}function zn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ma(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function nf(a,u,p){var y=Object.getOwnPropertyDescriptor(a.constructor.prototype,u);if(!a.hasOwnProperty(u)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var E=y.get,A=y.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return E.call(this)},set:function(H){p=""+H,A.call(this,H)}}),Object.defineProperty(a,u,{enumerable:y.enumerable}),{getValue:function(){return p},setValue:function(H){p=""+H},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function Dt(a){if(!a._valueTracker){var u=ma(a)?"checked":"value";a._valueTracker=nf(a,u,""+a[u])}}function Nl(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var p=u.getValue(),y="";return a&&(y=ma(a)?a.checked?"true":"false":a.value),a=y,a!==p?(u.setValue(a),!0):!1}function Ds(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var kl=/[\n"\\]/g;function Vr(a){return a.replace(kl,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Gc(a,u,p,y,E,A,H,Y){a.name="",H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"?a.type=H:a.removeAttribute("type"),u!=null?H==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+zn(u)):a.value!==""+zn(u)&&(a.value=""+zn(u)):H!=="submit"&&H!=="reset"||a.removeAttribute("value"),u!=null?rf(a,H,zn(u)):p!=null?rf(a,H,zn(p)):y!=null&&a.removeAttribute("value"),E==null&&A!=null&&(a.defaultChecked=!!A),E!=null&&(a.checked=E&&typeof E!="function"&&typeof E!="symbol"),Y!=null&&typeof Y!="function"&&typeof Y!="symbol"&&typeof Y!="boolean"?a.name=""+zn(Y):a.removeAttribute("name")}function zp(a,u,p,y,E,A,H,Y){if(A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"&&(a.type=A),u!=null||p!=null){if(!(A!=="submit"&&A!=="reset"||u!=null)){Dt(a);return}p=p!=null?""+zn(p):"",u=u!=null?""+zn(u):p,Y||u===a.value||(a.value=u),a.defaultValue=u}y=y??E,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=Y?a.checked:!!y,a.defaultChecked=!!y,H!=null&&typeof H!="function"&&typeof H!="symbol"&&typeof H!="boolean"&&(a.name=H),Dt(a)}function rf(a,u,p){u==="number"&&Ds(a.ownerDocument)===a||a.defaultValue===""+p||(a.defaultValue=""+p)}function ga(a,u,p,y){if(a=a.options,u){u={};for(var E=0;E<p.length;E++)u["$"+p[E]]=!0;for(p=0;p<a.length;p++)E=u.hasOwnProperty("$"+a[p].value),a[p].selected!==E&&(a[p].selected=E),E&&y&&(a[p].defaultSelected=!0)}else{for(p=""+zn(p),u=null,E=0;E<a.length;E++){if(a[E].value===p){a[E].selected=!0,y&&(a[E].defaultSelected=!0);return}u!==null||a[E].disabled||(u=a[E])}u!==null&&(u.selected=!0)}}function Up(a,u,p){if(u!=null&&(u=""+zn(u),u!==a.value&&(a.value=u),p==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=p!=null?""+zn(p):""}function ya(a,u,p,y){if(u==null){if(y!=null){if(p!=null)throw Error(r(92));if(Q(y)){if(1<y.length)throw Error(r(93));y=y[0]}p=y}p==null&&(p=""),u=p}p=zn(u),a.defaultValue=p,y=a.textContent,y===p&&y!==""&&y!==null&&(a.value=y),Dt(a)}function Fr(a,u){if(u){var p=a.firstChild;if(p&&p===a.lastChild&&p.nodeType===3){p.nodeValue=u;return}}a.textContent=u}var Vp=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function sf(a,u,p){var y=u.indexOf("--")===0;p==null||typeof p=="boolean"||p===""?y?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":y?a.setProperty(u,p):typeof p!="number"||p===0||Vp.has(u)?u==="float"?a.cssFloat=p:a[u]=(""+p).trim():a[u]=p+"px"}function of(a,u,p){if(u!=null&&typeof u!="object")throw Error(r(62));if(a=a.style,p!=null){for(var y in p)!p.hasOwnProperty(y)||u!=null&&u.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var E in u)y=u[E],u.hasOwnProperty(E)&&p[E]!==y&&sf(a,E,y)}else for(var A in u)u.hasOwnProperty(A)&&sf(a,A,u[A])}function Kc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fp=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),va=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Wc(a){return va.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}function Qi(){}var af=null;function Si(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var xa=null,Os=null;function Il(a){var u=wi(a);if(u&&(a=u.stateNode)){var p=a[Ln]||null;e:switch(a=u.stateNode,u.type){case"input":if(Gc(a,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name),u=p.name,p.type==="radio"&&u!=null){for(p=a;p.parentNode;)p=p.parentNode;for(p=p.querySelectorAll('input[name="'+Vr(""+u)+'"][type="radio"]'),u=0;u<p.length;u++){var y=p[u];if(y!==a&&y.form===a.form){var E=y[Ln]||null;if(!E)throw Error(r(90));Gc(y,E.value,E.defaultValue,E.defaultValue,E.checked,E.defaultChecked,E.type,E.name)}}for(u=0;u<p.length;u++)y=p[u],y.form===a.form&&Nl(y)}break e;case"textarea":Up(a,p.value,p.defaultValue);break e;case"select":u=p.value,u!=null&&ga(a,!!p.multiple,u,!1)}}}var Yc=!1;function ba(a,u,p){if(Yc)return a(u,p);Yc=!0;try{var y=a(u);return y}finally{if(Yc=!1,(xa!==null||Os!==null)&&(Mm(),xa&&(u=xa,a=Os,Os=xa=null,Il(u),a)))for(u=0;u<a.length;u++)Il(a[u])}}function Zi(a,u){var p=a.stateNode;if(p===null)return null;var y=p[Ln]||null;if(y===null)return null;p=y[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(p&&typeof p!="function")throw Error(r(231,u,typeof p));return p}var Ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rl=!1;if(Ti)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Rl=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch{Rl=!1}var Ls=null,lf=null,Pl=null;function cf(){if(Pl)return Pl;var a,u=lf,p=u.length,y,E="value"in Ls?Ls.value:Ls.textContent,A=E.length;for(a=0;a<p&&u[a]===E[a];a++);var H=p-a;for(y=1;y<=H&&u[p-y]===E[A-y];y++);return Pl=E.slice(a,1<y?1-y:void 0)}function jl(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function bo(){return!0}function es(){return!1}function Zn(a){function u(p,y,E,A,H){this._reactName=p,this._targetInst=E,this.type=y,this.nativeEvent=A,this.target=H,this.currentTarget=null;for(var Y in a)a.hasOwnProperty(Y)&&(p=a[Y],this[Y]=p?p(A):A[Y]);return this.isDefaultPrevented=(A.defaultPrevented!=null?A.defaultPrevented:A.returnValue===!1)?bo:es,this.isPropagationStopped=es,this}return m(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var p=this.nativeEvent;p&&(p.preventDefault?p.preventDefault():typeof p.returnValue!="unknown"&&(p.returnValue=!1),this.isDefaultPrevented=bo)},stopPropagation:function(){var p=this.nativeEvent;p&&(p.stopPropagation?p.stopPropagation():typeof p.cancelBubble!="unknown"&&(p.cancelBubble=!0),this.isPropagationStopped=bo)},persist:function(){},isPersistent:bo}),u}var _o={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},zs=Zn(_o),_a=m({},_o,{view:0,detail:0}),uf=Zn(_a),wa,Xc,Us,Jc=m({},_a,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Sa,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Us&&(Us&&a.type==="mousemove"?(wa=a.screenX-Us.screenX,Xc=a.screenY-Us.screenY):Xc=wa=0,Us=a),wa)},movementY:function(a){return"movementY"in a?a.movementY:Xc}}),df=Zn(Jc),Ml=m({},Jc,{dataTransfer:0}),Bp=Zn(Ml),Hp=m({},_a,{relatedTarget:0}),Dl=Zn(Hp),ff=m({},_o,{animationName:0,elapsedTime:0,pseudoElement:0}),qp=Zn(ff),Qc=m({},_o,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),$p=Zn(Qc),Gp=m({},_o,{data:0}),Vs=Zn(Gp),Kp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Wp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yp={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xp(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=Yp[a])?!!u[a]:!1}function Sa(){return Xp}var kr=m({},_a,{key:function(a){if(a.key){var u=Kp[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=jl(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?Wp[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Sa,charCode:function(a){return a.type==="keypress"?jl(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?jl(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),Jp=Zn(kr),Qp=m({},Jc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wo=Zn(Qp),T=m({},_a,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Sa}),V=Zn(T),$=m({},_o,{propertyName:0,elapsedTime:0,pseudoElement:0}),J=Zn($),he=m({},Jc,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),be=Zn(he),Oe=m({},_o,{newState:0,oldState:0}),ct=Zn(Oe),pn=[9,13,27,32],Pt=Ti&&"CompositionEvent"in window,Zt=null;Ti&&"documentMode"in document&&(Zt=document.documentMode);var Ei=Ti&&"TextEvent"in window&&!Zt,Fs=Ti&&(!Pt||Zt&&8<Zt&&11>=Zt),ts=" ",ns=!1;function Ol(a,u){switch(a){case"keyup":return pn.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zc(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var eu=!1;function FV(a,u){switch(a){case"compositionend":return Zc(u);case"keypress":return u.which!==32?null:(ns=!0,ts);case"textInput":return a=u.data,a===ts&&ns?null:a;default:return null}}function BV(a,u){if(eu)return a==="compositionend"||!Pt&&Ol(a,u)?(a=cf(),Pl=lf=Ls=null,eu=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Fs&&u.locale!=="ko"?null:u.data;default:return null}}var HV={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vA(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!HV[a.type]:u==="textarea"}function xA(a,u,p,y){xa?Os?Os.push(y):Os=[y]:xa=y,u=Fm(u,"onChange"),0<u.length&&(p=new zs("onChange","change",null,p,y),a.push({event:p,listeners:u}))}var hf=null,pf=null;function qV(a){tN(a,0)}function Zp(a){var u=ei(a);if(Nl(u))return a}function bA(a,u){if(a==="change")return u}var _A=!1;if(Ti){var Bv;if(Ti){var Hv="oninput"in document;if(!Hv){var wA=document.createElement("div");wA.setAttribute("oninput","return;"),Hv=typeof wA.oninput=="function"}Bv=Hv}else Bv=!1;_A=Bv&&(!document.documentMode||9<document.documentMode)}function SA(){hf&&(hf.detachEvent("onpropertychange",TA),pf=hf=null)}function TA(a){if(a.propertyName==="value"&&Zp(pf)){var u=[];xA(u,pf,a,Si(a)),ba(qV,u)}}function $V(a,u,p){a==="focusin"?(SA(),hf=u,pf=p,hf.attachEvent("onpropertychange",TA)):a==="focusout"&&SA()}function GV(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Zp(pf)}function KV(a,u){if(a==="click")return Zp(u)}function WV(a,u){if(a==="input"||a==="change")return Zp(u)}function YV(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var ni=typeof Object.is=="function"?Object.is:YV;function mf(a,u){if(ni(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var p=Object.keys(a),y=Object.keys(u);if(p.length!==y.length)return!1;for(y=0;y<p.length;y++){var E=p[y];if(!oe.call(u,E)||!ni(a[E],u[E]))return!1}return!0}function EA(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function AA(a,u){var p=EA(a);a=0;for(var y;p;){if(p.nodeType===3){if(y=a+p.textContent.length,a<=u&&y>=u)return{node:p,offset:u-a};a=y}e:{for(;p;){if(p.nextSibling){p=p.nextSibling;break e}p=p.parentNode}p=void 0}p=EA(p)}}function CA(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?CA(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function NA(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=Ds(a.document);u instanceof a.HTMLIFrameElement;){try{var p=typeof u.contentWindow.location.href=="string"}catch{p=!1}if(p)a=u.contentWindow;else break;u=Ds(a.document)}return u}function qv(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var XV=Ti&&"documentMode"in document&&11>=document.documentMode,tu=null,$v=null,gf=null,Gv=!1;function kA(a,u,p){var y=p.window===p?p.document:p.nodeType===9?p:p.ownerDocument;Gv||tu==null||tu!==Ds(y)||(y=tu,"selectionStart"in y&&qv(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),gf&&mf(gf,y)||(gf=y,y=Fm($v,"onSelect"),0<y.length&&(u=new zs("onSelect","select",null,u,p),a.push({event:u,listeners:y}),u.target=tu)))}function Ll(a,u){var p={};return p[a.toLowerCase()]=u.toLowerCase(),p["Webkit"+a]="webkit"+u,p["Moz"+a]="moz"+u,p}var nu={animationend:Ll("Animation","AnimationEnd"),animationiteration:Ll("Animation","AnimationIteration"),animationstart:Ll("Animation","AnimationStart"),transitionrun:Ll("Transition","TransitionRun"),transitionstart:Ll("Transition","TransitionStart"),transitioncancel:Ll("Transition","TransitionCancel"),transitionend:Ll("Transition","TransitionEnd")},Kv={},IA={};Ti&&(IA=document.createElement("div").style,"AnimationEvent"in window||(delete nu.animationend.animation,delete nu.animationiteration.animation,delete nu.animationstart.animation),"TransitionEvent"in window||delete nu.transitionend.transition);function zl(a){if(Kv[a])return Kv[a];if(!nu[a])return a;var u=nu[a],p;for(p in u)if(u.hasOwnProperty(p)&&p in IA)return Kv[a]=u[p];return a}var RA=zl("animationend"),PA=zl("animationiteration"),jA=zl("animationstart"),JV=zl("transitionrun"),QV=zl("transitionstart"),ZV=zl("transitioncancel"),MA=zl("transitionend"),DA=new Map,Wv="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Wv.push("scrollEnd");function rs(a,u){DA.set(a,u),js(u,[a])}var em=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)},Ai=[],ru=0,Yv=0;function tm(){for(var a=ru,u=Yv=ru=0;u<a;){var p=Ai[u];Ai[u++]=null;var y=Ai[u];Ai[u++]=null;var E=Ai[u];Ai[u++]=null;var A=Ai[u];if(Ai[u++]=null,y!==null&&E!==null){var H=y.pending;H===null?E.next=E:(E.next=H.next,H.next=E),y.pending=E}A!==0&&OA(p,E,A)}}function nm(a,u,p,y){Ai[ru++]=a,Ai[ru++]=u,Ai[ru++]=p,Ai[ru++]=y,Yv|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function Xv(a,u,p,y){return nm(a,u,p,y),rm(a)}function Ul(a,u){return nm(a,null,null,u),rm(a)}function OA(a,u,p){a.lanes|=p;var y=a.alternate;y!==null&&(y.lanes|=p);for(var E=!1,A=a.return;A!==null;)A.childLanes|=p,y=A.alternate,y!==null&&(y.childLanes|=p),A.tag===22&&(a=A.stateNode,a===null||a._visibility&1||(E=!0)),a=A,A=A.return;return a.tag===3?(A=a.stateNode,E&&u!==null&&(E=31-Rt(p),a=A.hiddenUpdates,y=a[E],y===null?a[E]=[u]:y.push(u),u.lane=p|536870912),A):null}function rm(a){if(50<zf)throw zf=0,sb=null,Error(r(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var iu={};function e9(a,u,p,y){this.tag=a,this.key=p,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ri(a,u,p,y){return new e9(a,u,p,y)}function Jv(a){return a=a.prototype,!(!a||!a.isReactComponent)}function So(a,u){var p=a.alternate;return p===null?(p=ri(a.tag,u,a.key,a.mode),p.elementType=a.elementType,p.type=a.type,p.stateNode=a.stateNode,p.alternate=a,a.alternate=p):(p.pendingProps=u,p.type=a.type,p.flags=0,p.subtreeFlags=0,p.deletions=null),p.flags=a.flags&65011712,p.childLanes=a.childLanes,p.lanes=a.lanes,p.child=a.child,p.memoizedProps=a.memoizedProps,p.memoizedState=a.memoizedState,p.updateQueue=a.updateQueue,u=a.dependencies,p.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},p.sibling=a.sibling,p.index=a.index,p.ref=a.ref,p.refCleanup=a.refCleanup,p}function LA(a,u){a.flags&=65011714;var p=a.alternate;return p===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=p.childLanes,a.lanes=p.lanes,a.child=p.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=p.memoizedProps,a.memoizedState=p.memoizedState,a.updateQueue=p.updateQueue,a.type=p.type,u=p.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function im(a,u,p,y,E,A){var H=0;if(y=a,typeof a=="function")Jv(a)&&(H=1);else if(typeof a=="string")H=sF(a,p,ce.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case I:return a=ri(31,p,u,E),a.elementType=I,a.lanes=A,a;case w:return Vl(p.children,E,A,u);case S:H=8,E|=24;break;case C:return a=ri(12,p,u,E|2),a.elementType=C,a.lanes=A,a;case k:return a=ri(13,p,u,E),a.elementType=k,a.lanes=A,a;case D:return a=ri(19,p,u,E),a.elementType=D,a.lanes=A,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case N:H=10;break e;case R:H=9;break e;case O:H=11;break e;case M:H=14;break e;case j:H=16,y=null;break e}H=29,p=Error(r(130,a===null?"null":typeof a,"")),y=null}return u=ri(H,p,u,E),u.elementType=a,u.type=y,u.lanes=A,u}function Vl(a,u,p,y){return a=ri(7,a,y,u),a.lanes=p,a}function Qv(a,u,p){return a=ri(6,a,null,u),a.lanes=p,a}function zA(a){var u=ri(18,null,null,0);return u.stateNode=a,u}function Zv(a,u,p){return u=ri(4,a.children!==null?a.children:[],a.key,u),u.lanes=p,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var UA=new WeakMap;function Ci(a,u){if(typeof a=="object"&&a!==null){var p=UA.get(a);return p!==void 0?p:(u={value:a,source:u,stack:ee(u)},UA.set(a,u),u)}return{value:a,source:u,stack:ee(u)}}var su=[],ou=0,sm=null,yf=0,Ni=[],ki=0,Ta=null,Bs=1,Hs="";function To(a,u){su[ou++]=yf,su[ou++]=sm,sm=a,yf=u}function VA(a,u,p){Ni[ki++]=Bs,Ni[ki++]=Hs,Ni[ki++]=Ta,Ta=a;var y=Bs;a=Hs;var E=32-Rt(y)-1;y&=~(1<<E),p+=1;var A=32-Rt(u)+E;if(30<A){var H=E-E%5;A=(y&(1<<H)-1).toString(32),y>>=H,E-=H,Bs=1<<32-Rt(u)+E|p<<E|y,Hs=A+a}else Bs=1<<A|p<<E|y,Hs=a}function ex(a){a.return!==null&&(To(a,1),VA(a,1,0))}function tx(a){for(;a===sm;)sm=su[--ou],su[ou]=null,yf=su[--ou],su[ou]=null;for(;a===Ta;)Ta=Ni[--ki],Ni[ki]=null,Hs=Ni[--ki],Ni[ki]=null,Bs=Ni[--ki],Ni[ki]=null}function FA(a,u){Ni[ki++]=Bs,Ni[ki++]=Hs,Ni[ki++]=Ta,Bs=u.id,Hs=u.overflow,Ta=a}var er=null,Wt=null,bt=!1,Ea=null,Ii=!1,nx=Error(r(519));function Aa(a){var u=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vf(Ci(u,a)),nx}function BA(a){var u=a.stateNode,p=a.type,y=a.memoizedProps;switch(u[bn]=a,u[Ln]=y,p){case"dialog":pt("cancel",u),pt("close",u);break;case"iframe":case"object":case"embed":pt("load",u);break;case"video":case"audio":for(p=0;p<Vf.length;p++)pt(Vf[p],u);break;case"source":pt("error",u);break;case"img":case"image":case"link":pt("error",u),pt("load",u);break;case"details":pt("toggle",u);break;case"input":pt("invalid",u),zp(u,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":pt("invalid",u);break;case"textarea":pt("invalid",u),ya(u,y.value,y.defaultValue,y.children)}p=y.children,typeof p!="string"&&typeof p!="number"&&typeof p!="bigint"||u.textContent===""+p||y.suppressHydrationWarning===!0||sN(u.textContent,p)?(y.popover!=null&&(pt("beforetoggle",u),pt("toggle",u)),y.onScroll!=null&&pt("scroll",u),y.onScrollEnd!=null&&pt("scrollend",u),y.onClick!=null&&(u.onclick=Qi),u=!0):u=!1,u||Aa(a,!0)}function HA(a){for(er=a.return;er;)switch(er.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:er=er.return}}function au(a){if(a!==er)return!1;if(!bt)return HA(a),bt=!0,!1;var u=a.tag,p;if((p=u!==3&&u!==27)&&((p=u===5)&&(p=a.type,p=!(p!=="form"&&p!=="button")||bb(a.type,a.memoizedProps)),p=!p),p&&Wt&&Aa(a),HA(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Wt=pN(a)}else if(u===31){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));Wt=pN(a)}else u===27?(u=Wt,Va(a.type)?(a=Eb,Eb=null,Wt=a):Wt=u):Wt=er?Pi(a.stateNode.nextSibling):null;return!0}function Fl(){Wt=er=null,bt=!1}function rx(){var a=Ea;return a!==null&&($r===null?$r=a:$r.push.apply($r,a),Ea=null),a}function vf(a){Ea===null?Ea=[a]:Ea.push(a)}var ix=G(null),Bl=null,Eo=null;function Ca(a,u,p){de(ix,u._currentValue),u._currentValue=p}function Ao(a){a._currentValue=ix.current,X(ix)}function sx(a,u,p){for(;a!==null;){var y=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,y!==null&&(y.childLanes|=u)):y!==null&&(y.childLanes&u)!==u&&(y.childLanes|=u),a===p)break;a=a.return}}function ox(a,u,p,y){var E=a.child;for(E!==null&&(E.return=a);E!==null;){var A=E.dependencies;if(A!==null){var H=E.child;A=A.firstContext;e:for(;A!==null;){var Y=A;A=E;for(var re=0;re<u.length;re++)if(Y.context===u[re]){A.lanes|=p,Y=A.alternate,Y!==null&&(Y.lanes|=p),sx(A.return,p,a),y||(H=null);break e}A=Y.next}}else if(E.tag===18){if(H=E.return,H===null)throw Error(r(341));H.lanes|=p,A=H.alternate,A!==null&&(A.lanes|=p),sx(H,p,a),H=null}else H=E.child;if(H!==null)H.return=E;else for(H=E;H!==null;){if(H===a){H=null;break}if(E=H.sibling,E!==null){E.return=H.return,H=E;break}H=H.return}E=H}}function lu(a,u,p,y){a=null;for(var E=u,A=!1;E!==null;){if(!A){if((E.flags&524288)!==0)A=!0;else if((E.flags&262144)!==0)break}if(E.tag===10){var H=E.alternate;if(H===null)throw Error(r(387));if(H=H.memoizedProps,H!==null){var Y=E.type;ni(E.pendingProps.value,H.value)||(a!==null?a.push(Y):a=[Y])}}else if(E===je.current){if(H=E.alternate,H===null)throw Error(r(387));H.memoizedState.memoizedState!==E.memoizedState.memoizedState&&(a!==null?a.push($f):a=[$f])}E=E.return}a!==null&&ox(u,a,p,y),u.flags|=262144}function om(a){for(a=a.firstContext;a!==null;){if(!ni(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Hl(a){Bl=a,Eo=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function tr(a){return qA(Bl,a)}function am(a,u){return Bl===null&&Hl(a),qA(a,u)}function qA(a,u){var p=u._currentValue;if(u={context:u,memoizedValue:p,next:null},Eo===null){if(a===null)throw Error(r(308));Eo=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else Eo=Eo.next=u;return p}var t9=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(p,y){a.push(y)}};this.abort=function(){u.aborted=!0,a.forEach(function(p){return p()})}},n9=t.unstable_scheduleCallback,r9=t.unstable_NormalPriority,Sn={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ax(){return{controller:new t9,data:new Map,refCount:0}}function xf(a){a.refCount--,a.refCount===0&&n9(r9,function(){a.controller.abort()})}var bf=null,lx=0,cu=0,uu=null;function i9(a,u){if(bf===null){var p=bf=[];lx=0,cu=db(),uu={status:"pending",value:void 0,then:function(y){p.push(y)}}}return lx++,u.then($A,$A),u}function $A(){if(--lx===0&&bf!==null){uu!==null&&(uu.status="fulfilled");var a=bf;bf=null,cu=0,uu=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function s9(a,u){var p=[],y={status:"pending",value:null,reason:null,then:function(E){p.push(E)}};return a.then(function(){y.status="fulfilled",y.value=u;for(var E=0;E<p.length;E++)(0,p[E])(u)},function(E){for(y.status="rejected",y.reason=E,E=0;E<p.length;E++)(0,p[E])(void 0)}),y}var GA=W.S;W.S=function(a,u){kC=Le(),typeof u=="object"&&u!==null&&typeof u.then=="function"&&i9(a,u),GA!==null&&GA(a,u)};var ql=G(null);function cx(){var a=ql.current;return a!==null?a:qt.pooledCache}function lm(a,u){u===null?de(ql,ql.current):de(ql,u.pool)}function KA(){var a=cx();return a===null?null:{parent:Sn._currentValue,pool:a}}var du=Error(r(460)),ux=Error(r(474)),cm=Error(r(542)),um={then:function(){}};function WA(a){return a=a.status,a==="fulfilled"||a==="rejected"}function YA(a,u,p){switch(p=a[p],p===void 0?a.push(u):p!==u&&(u.then(Qi,Qi),u=p),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,JA(a),a;default:if(typeof u.status=="string")u.then(Qi,Qi);else{if(a=qt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=u,a.status="pending",a.then(function(y){if(u.status==="pending"){var E=u;E.status="fulfilled",E.value=y}},function(y){if(u.status==="pending"){var E=u;E.status="rejected",E.reason=y}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,JA(a),a}throw Gl=u,du}}function $l(a){try{var u=a._init;return u(a._payload)}catch(p){throw p!==null&&typeof p=="object"&&typeof p.then=="function"?(Gl=p,du):p}}var Gl=null;function XA(){if(Gl===null)throw Error(r(459));var a=Gl;return Gl=null,a}function JA(a){if(a===du||a===cm)throw Error(r(483))}var fu=null,_f=0;function dm(a){var u=_f;return _f+=1,fu===null&&(fu=[]),YA(fu,a,u)}function wf(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function fm(a,u){throw u.$$typeof===g?Error(r(525)):(a=Object.prototype.toString.call(u),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function QA(a){function u(ue,se){if(a){var pe=ue.deletions;pe===null?(ue.deletions=[se],ue.flags|=16):pe.push(se)}}function p(ue,se){if(!a)return null;for(;se!==null;)u(ue,se),se=se.sibling;return null}function y(ue){for(var se=new Map;ue!==null;)ue.key!==null?se.set(ue.key,ue):se.set(ue.index,ue),ue=ue.sibling;return se}function E(ue,se){return ue=So(ue,se),ue.index=0,ue.sibling=null,ue}function A(ue,se,pe){return ue.index=pe,a?(pe=ue.alternate,pe!==null?(pe=pe.index,pe<se?(ue.flags|=67108866,se):pe):(ue.flags|=67108866,se)):(ue.flags|=1048576,se)}function H(ue){return a&&ue.alternate===null&&(ue.flags|=67108866),ue}function Y(ue,se,pe,Ee){return se===null||se.tag!==6?(se=Qv(pe,ue.mode,Ee),se.return=ue,se):(se=E(se,pe),se.return=ue,se)}function re(ue,se,pe,Ee){var Xe=pe.type;return Xe===w?Se(ue,se,pe.props.children,Ee,pe.key):se!==null&&(se.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===j&&$l(Xe)===se.type)?(se=E(se,pe.props),wf(se,pe),se.return=ue,se):(se=im(pe.type,pe.key,pe.props,null,ue.mode,Ee),wf(se,pe),se.return=ue,se)}function me(ue,se,pe,Ee){return se===null||se.tag!==4||se.stateNode.containerInfo!==pe.containerInfo||se.stateNode.implementation!==pe.implementation?(se=Zv(pe,ue.mode,Ee),se.return=ue,se):(se=E(se,pe.children||[]),se.return=ue,se)}function Se(ue,se,pe,Ee,Xe){return se===null||se.tag!==7?(se=Vl(pe,ue.mode,Ee,Xe),se.return=ue,se):(se=E(se,pe),se.return=ue,se)}function Ae(ue,se,pe){if(typeof se=="string"&&se!==""||typeof se=="number"||typeof se=="bigint")return se=Qv(""+se,ue.mode,pe),se.return=ue,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case v:return pe=im(se.type,se.key,se.props,null,ue.mode,pe),wf(pe,se),pe.return=ue,pe;case b:return se=Zv(se,ue.mode,pe),se.return=ue,se;case j:return se=$l(se),Ae(ue,se,pe)}if(Q(se)||P(se))return se=Vl(se,ue.mode,pe,null),se.return=ue,se;if(typeof se.then=="function")return Ae(ue,dm(se),pe);if(se.$$typeof===N)return Ae(ue,am(ue,se),pe);fm(ue,se)}return null}function ye(ue,se,pe,Ee){var Xe=se!==null?se.key:null;if(typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint")return Xe!==null?null:Y(ue,se,""+pe,Ee);if(typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:return pe.key===Xe?re(ue,se,pe,Ee):null;case b:return pe.key===Xe?me(ue,se,pe,Ee):null;case j:return pe=$l(pe),ye(ue,se,pe,Ee)}if(Q(pe)||P(pe))return Xe!==null?null:Se(ue,se,pe,Ee,null);if(typeof pe.then=="function")return ye(ue,se,dm(pe),Ee);if(pe.$$typeof===N)return ye(ue,se,am(ue,pe),Ee);fm(ue,pe)}return null}function _e(ue,se,pe,Ee,Xe){if(typeof Ee=="string"&&Ee!==""||typeof Ee=="number"||typeof Ee=="bigint")return ue=ue.get(pe)||null,Y(se,ue,""+Ee,Xe);if(typeof Ee=="object"&&Ee!==null){switch(Ee.$$typeof){case v:return ue=ue.get(Ee.key===null?pe:Ee.key)||null,re(se,ue,Ee,Xe);case b:return ue=ue.get(Ee.key===null?pe:Ee.key)||null,me(se,ue,Ee,Xe);case j:return Ee=$l(Ee),_e(ue,se,pe,Ee,Xe)}if(Q(Ee)||P(Ee))return ue=ue.get(pe)||null,Se(se,ue,Ee,Xe,null);if(typeof Ee.then=="function")return _e(ue,se,pe,dm(Ee),Xe);if(Ee.$$typeof===N)return _e(ue,se,pe,am(se,Ee),Xe);fm(se,Ee)}return null}function $e(ue,se,pe,Ee){for(var Xe=null,At=null,Ke=se,dt=se=0,gt=null;Ke!==null&&dt<pe.length;dt++){Ke.index>dt?(gt=Ke,Ke=null):gt=Ke.sibling;var Ct=ye(ue,Ke,pe[dt],Ee);if(Ct===null){Ke===null&&(Ke=gt);break}a&&Ke&&Ct.alternate===null&&u(ue,Ke),se=A(Ct,se,dt),At===null?Xe=Ct:At.sibling=Ct,At=Ct,Ke=gt}if(dt===pe.length)return p(ue,Ke),bt&&To(ue,dt),Xe;if(Ke===null){for(;dt<pe.length;dt++)Ke=Ae(ue,pe[dt],Ee),Ke!==null&&(se=A(Ke,se,dt),At===null?Xe=Ke:At.sibling=Ke,At=Ke);return bt&&To(ue,dt),Xe}for(Ke=y(Ke);dt<pe.length;dt++)gt=_e(Ke,ue,dt,pe[dt],Ee),gt!==null&&(a&&gt.alternate!==null&&Ke.delete(gt.key===null?dt:gt.key),se=A(gt,se,dt),At===null?Xe=gt:At.sibling=gt,At=gt);return a&&Ke.forEach(function($a){return u(ue,$a)}),bt&&To(ue,dt),Xe}function Ze(ue,se,pe,Ee){if(pe==null)throw Error(r(151));for(var Xe=null,At=null,Ke=se,dt=se=0,gt=null,Ct=pe.next();Ke!==null&&!Ct.done;dt++,Ct=pe.next()){Ke.index>dt?(gt=Ke,Ke=null):gt=Ke.sibling;var $a=ye(ue,Ke,Ct.value,Ee);if($a===null){Ke===null&&(Ke=gt);break}a&&Ke&&$a.alternate===null&&u(ue,Ke),se=A($a,se,dt),At===null?Xe=$a:At.sibling=$a,At=$a,Ke=gt}if(Ct.done)return p(ue,Ke),bt&&To(ue,dt),Xe;if(Ke===null){for(;!Ct.done;dt++,Ct=pe.next())Ct=Ae(ue,Ct.value,Ee),Ct!==null&&(se=A(Ct,se,dt),At===null?Xe=Ct:At.sibling=Ct,At=Ct);return bt&&To(ue,dt),Xe}for(Ke=y(Ke);!Ct.done;dt++,Ct=pe.next())Ct=_e(Ke,ue,dt,Ct.value,Ee),Ct!==null&&(a&&Ct.alternate!==null&&Ke.delete(Ct.key===null?dt:Ct.key),se=A(Ct,se,dt),At===null?Xe=Ct:At.sibling=Ct,At=Ct);return a&&Ke.forEach(function(gF){return u(ue,gF)}),bt&&To(ue,dt),Xe}function Ht(ue,se,pe,Ee){if(typeof pe=="object"&&pe!==null&&pe.type===w&&pe.key===null&&(pe=pe.props.children),typeof pe=="object"&&pe!==null){switch(pe.$$typeof){case v:e:{for(var Xe=pe.key;se!==null;){if(se.key===Xe){if(Xe=pe.type,Xe===w){if(se.tag===7){p(ue,se.sibling),Ee=E(se,pe.props.children),Ee.return=ue,ue=Ee;break e}}else if(se.elementType===Xe||typeof Xe=="object"&&Xe!==null&&Xe.$$typeof===j&&$l(Xe)===se.type){p(ue,se.sibling),Ee=E(se,pe.props),wf(Ee,pe),Ee.return=ue,ue=Ee;break e}p(ue,se);break}else u(ue,se);se=se.sibling}pe.type===w?(Ee=Vl(pe.props.children,ue.mode,Ee,pe.key),Ee.return=ue,ue=Ee):(Ee=im(pe.type,pe.key,pe.props,null,ue.mode,Ee),wf(Ee,pe),Ee.return=ue,ue=Ee)}return H(ue);case b:e:{for(Xe=pe.key;se!==null;){if(se.key===Xe)if(se.tag===4&&se.stateNode.containerInfo===pe.containerInfo&&se.stateNode.implementation===pe.implementation){p(ue,se.sibling),Ee=E(se,pe.children||[]),Ee.return=ue,ue=Ee;break e}else{p(ue,se);break}else u(ue,se);se=se.sibling}Ee=Zv(pe,ue.mode,Ee),Ee.return=ue,ue=Ee}return H(ue);case j:return pe=$l(pe),Ht(ue,se,pe,Ee)}if(Q(pe))return $e(ue,se,pe,Ee);if(P(pe)){if(Xe=P(pe),typeof Xe!="function")throw Error(r(150));return pe=Xe.call(pe),Ze(ue,se,pe,Ee)}if(typeof pe.then=="function")return Ht(ue,se,dm(pe),Ee);if(pe.$$typeof===N)return Ht(ue,se,am(ue,pe),Ee);fm(ue,pe)}return typeof pe=="string"&&pe!==""||typeof pe=="number"||typeof pe=="bigint"?(pe=""+pe,se!==null&&se.tag===6?(p(ue,se.sibling),Ee=E(se,pe),Ee.return=ue,ue=Ee):(p(ue,se),Ee=Qv(pe,ue.mode,Ee),Ee.return=ue,ue=Ee),H(ue)):p(ue,se)}return function(ue,se,pe,Ee){try{_f=0;var Xe=Ht(ue,se,pe,Ee);return fu=null,Xe}catch(Ke){if(Ke===du||Ke===cm)throw Ke;var At=ri(29,Ke,null,ue.mode);return At.lanes=Ee,At.return=ue,At}finally{}}}var Kl=QA(!0),ZA=QA(!1),Na=!1;function dx(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fx(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function ka(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Ia(a,u,p){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(jt&2)!==0){var E=y.pending;return E===null?u.next=u:(u.next=E.next,E.next=u),y.pending=u,u=rm(a),OA(a,null,p),u}return nm(a,y,u,p),rm(a)}function Sf(a,u,p){if(u=u.updateQueue,u!==null&&(u=u.shared,(p&4194048)!==0)){var y=u.lanes;y&=a.pendingLanes,p|=y,u.lanes=p,Yd(a,p)}}function hx(a,u){var p=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,p===y)){var E=null,A=null;if(p=p.firstBaseUpdate,p!==null){do{var H={lane:p.lane,tag:p.tag,payload:p.payload,callback:null,next:null};A===null?E=A=H:A=A.next=H,p=p.next}while(p!==null);A===null?E=A=u:A=A.next=u}else E=A=u;p={baseState:y.baseState,firstBaseUpdate:E,lastBaseUpdate:A,shared:y.shared,callbacks:y.callbacks},a.updateQueue=p;return}a=p.lastBaseUpdate,a===null?p.firstBaseUpdate=u:a.next=u,p.lastBaseUpdate=u}var px=!1;function Tf(){if(px){var a=uu;if(a!==null)throw a}}function Ef(a,u,p,y){px=!1;var E=a.updateQueue;Na=!1;var A=E.firstBaseUpdate,H=E.lastBaseUpdate,Y=E.shared.pending;if(Y!==null){E.shared.pending=null;var re=Y,me=re.next;re.next=null,H===null?A=me:H.next=me,H=re;var Se=a.alternate;Se!==null&&(Se=Se.updateQueue,Y=Se.lastBaseUpdate,Y!==H&&(Y===null?Se.firstBaseUpdate=me:Y.next=me,Se.lastBaseUpdate=re))}if(A!==null){var Ae=E.baseState;H=0,Se=me=re=null,Y=A;do{var ye=Y.lane&-536870913,_e=ye!==Y.lane;if(_e?(mt&ye)===ye:(y&ye)===ye){ye!==0&&ye===cu&&(px=!0),Se!==null&&(Se=Se.next={lane:0,tag:Y.tag,payload:Y.payload,callback:null,next:null});e:{var $e=a,Ze=Y;ye=u;var Ht=p;switch(Ze.tag){case 1:if($e=Ze.payload,typeof $e=="function"){Ae=$e.call(Ht,Ae,ye);break e}Ae=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=Ze.payload,ye=typeof $e=="function"?$e.call(Ht,Ae,ye):$e,ye==null)break e;Ae=m({},Ae,ye);break e;case 2:Na=!0}}ye=Y.callback,ye!==null&&(a.flags|=64,_e&&(a.flags|=8192),_e=E.callbacks,_e===null?E.callbacks=[ye]:_e.push(ye))}else _e={lane:ye,tag:Y.tag,payload:Y.payload,callback:Y.callback,next:null},Se===null?(me=Se=_e,re=Ae):Se=Se.next=_e,H|=ye;if(Y=Y.next,Y===null){if(Y=E.shared.pending,Y===null)break;_e=Y,Y=_e.next,_e.next=null,E.lastBaseUpdate=_e,E.shared.pending=null}}while(!0);Se===null&&(re=Ae),E.baseState=re,E.firstBaseUpdate=me,E.lastBaseUpdate=Se,A===null&&(E.shared.lanes=0),Da|=H,a.lanes=H,a.memoizedState=Ae}}function e2(a,u){if(typeof a!="function")throw Error(r(191,a));a.call(u)}function t2(a,u){var p=a.callbacks;if(p!==null)for(a.callbacks=null,a=0;a<p.length;a++)e2(p[a],u)}var hu=G(null),hm=G(0);function n2(a,u){a=Do,de(hm,a),de(hu,u),Do=a|u.baseLanes}function mx(){de(hm,Do),de(hu,hu.current)}function gx(){Do=hm.current,X(hu),X(hm)}var ii=G(null),Ri=null;function Ra(a){var u=a.alternate;de(mn,mn.current&1),de(ii,a),Ri===null&&(u===null||hu.current!==null||u.memoizedState!==null)&&(Ri=a)}function yx(a){de(mn,mn.current),de(ii,a),Ri===null&&(Ri=a)}function r2(a){a.tag===22?(de(mn,mn.current),de(ii,a),Ri===null&&(Ri=a)):Pa()}function Pa(){de(mn,mn.current),de(ii,ii.current)}function si(a){X(ii),Ri===a&&(Ri=null),X(mn)}var mn=G(0);function pm(a){for(var u=a;u!==null;){if(u.tag===13){var p=u.memoizedState;if(p!==null&&(p=p.dehydrated,p===null||Sb(p)||Tb(p)))return u}else if(u.tag===19&&(u.memoizedProps.revealOrder==="forwards"||u.memoizedProps.revealOrder==="backwards"||u.memoizedProps.revealOrder==="unstable_legacy-backwards"||u.memoizedProps.revealOrder==="together")){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Co=0,ut=null,Ft=null,Tn=null,mm=!1,pu=!1,Wl=!1,gm=0,Af=0,mu=null,o9=0;function cn(){throw Error(r(321))}function vx(a,u){if(u===null)return!1;for(var p=0;p<u.length&&p<a.length;p++)if(!ni(a[p],u[p]))return!1;return!0}function xx(a,u,p,y,E,A){return Co=A,ut=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,W.H=a===null||a.memoizedState===null?V2:Mx,Wl=!1,A=p(y,E),Wl=!1,pu&&(A=s2(u,p,y,E)),i2(a),A}function i2(a){W.H=kf;var u=Ft!==null&&Ft.next!==null;if(Co=0,Tn=Ft=ut=null,mm=!1,Af=0,mu=null,u)throw Error(r(300));a===null||En||(a=a.dependencies,a!==null&&om(a)&&(En=!0))}function s2(a,u,p,y){ut=a;var E=0;do{if(pu&&(mu=null),Af=0,pu=!1,25<=E)throw Error(r(301));if(E+=1,Tn=Ft=null,a.updateQueue!=null){var A=a.updateQueue;A.lastEffect=null,A.events=null,A.stores=null,A.memoCache!=null&&(A.memoCache.index=0)}W.H=F2,A=u(p,y)}while(pu);return A}function a9(){var a=W.H,u=a.useState()[0];return u=typeof u.then=="function"?Cf(u):u,a=a.useState()[0],(Ft!==null?Ft.memoizedState:null)!==a&&(ut.flags|=1024),u}function bx(){var a=gm!==0;return gm=0,a}function _x(a,u,p){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~p}function wx(a){if(mm){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}mm=!1}Co=0,Tn=Ft=ut=null,pu=!1,Af=gm=0,mu=null}function Ir(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Tn===null?ut.memoizedState=Tn=a:Tn=Tn.next=a,Tn}function gn(){if(Ft===null){var a=ut.alternate;a=a!==null?a.memoizedState:null}else a=Ft.next;var u=Tn===null?ut.memoizedState:Tn.next;if(u!==null)Tn=u,Ft=a;else{if(a===null)throw ut.alternate===null?Error(r(467)):Error(r(310));Ft=a,a={memoizedState:Ft.memoizedState,baseState:Ft.baseState,baseQueue:Ft.baseQueue,queue:Ft.queue,next:null},Tn===null?ut.memoizedState=Tn=a:Tn=Tn.next=a}return Tn}function ym(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Cf(a){var u=Af;return Af+=1,mu===null&&(mu=[]),a=YA(mu,a,u),u=ut,(Tn===null?u.memoizedState:Tn.next)===null&&(u=u.alternate,W.H=u===null||u.memoizedState===null?V2:Mx),a}function vm(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Cf(a);if(a.$$typeof===N)return tr(a)}throw Error(r(438,String(a)))}function Sx(a){var u=null,p=ut.updateQueue;if(p!==null&&(u=p.memoCache),u==null){var y=ut.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(u={data:y.data.map(function(E){return E.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),p===null&&(p=ym(),ut.updateQueue=p),p.memoCache=u,p=u.data[u.index],p===void 0)for(p=u.data[u.index]=Array(a),y=0;y<a;y++)p[y]=U;return u.index++,p}function No(a,u){return typeof u=="function"?u(a):u}function xm(a){var u=gn();return Tx(u,Ft,a)}function Tx(a,u,p){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=p;var E=a.baseQueue,A=y.pending;if(A!==null){if(E!==null){var H=E.next;E.next=A.next,A.next=H}u.baseQueue=E=A,y.pending=null}if(A=a.baseState,E===null)a.memoizedState=A;else{u=E.next;var Y=H=null,re=null,me=u,Se=!1;do{var Ae=me.lane&-536870913;if(Ae!==me.lane?(mt&Ae)===Ae:(Co&Ae)===Ae){var ye=me.revertLane;if(ye===0)re!==null&&(re=re.next={lane:0,revertLane:0,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null}),Ae===cu&&(Se=!0);else if((Co&ye)===ye){me=me.next,ye===cu&&(Se=!0);continue}else Ae={lane:0,revertLane:me.revertLane,gesture:null,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},re===null?(Y=re=Ae,H=A):re=re.next=Ae,ut.lanes|=ye,Da|=ye;Ae=me.action,Wl&&p(A,Ae),A=me.hasEagerState?me.eagerState:p(A,Ae)}else ye={lane:Ae,revertLane:me.revertLane,gesture:me.gesture,action:me.action,hasEagerState:me.hasEagerState,eagerState:me.eagerState,next:null},re===null?(Y=re=ye,H=A):re=re.next=ye,ut.lanes|=Ae,Da|=Ae;me=me.next}while(me!==null&&me!==u);if(re===null?H=A:re.next=Y,!ni(A,a.memoizedState)&&(En=!0,Se&&(p=uu,p!==null)))throw p;a.memoizedState=A,a.baseState=H,a.baseQueue=re,y.lastRenderedState=A}return E===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function Ex(a){var u=gn(),p=u.queue;if(p===null)throw Error(r(311));p.lastRenderedReducer=a;var y=p.dispatch,E=p.pending,A=u.memoizedState;if(E!==null){p.pending=null;var H=E=E.next;do A=a(A,H.action),H=H.next;while(H!==E);ni(A,u.memoizedState)||(En=!0),u.memoizedState=A,u.baseQueue===null&&(u.baseState=A),p.lastRenderedState=A}return[A,y]}function o2(a,u,p){var y=ut,E=gn(),A=bt;if(A){if(p===void 0)throw Error(r(407));p=p()}else p=u();var H=!ni((Ft||E).memoizedState,p);if(H&&(E.memoizedState=p,En=!0),E=E.queue,Nx(c2.bind(null,y,E,a),[a]),E.getSnapshot!==u||H||Tn!==null&&Tn.memoizedState.tag&1){if(y.flags|=2048,gu(9,{destroy:void 0},l2.bind(null,y,E,p,u),null),qt===null)throw Error(r(349));A||(Co&127)!==0||a2(y,u,p)}return p}function a2(a,u,p){a.flags|=16384,a={getSnapshot:u,value:p},u=ut.updateQueue,u===null?(u=ym(),ut.updateQueue=u,u.stores=[a]):(p=u.stores,p===null?u.stores=[a]:p.push(a))}function l2(a,u,p,y){u.value=p,u.getSnapshot=y,u2(u)&&d2(a)}function c2(a,u,p){return p(function(){u2(u)&&d2(a)})}function u2(a){var u=a.getSnapshot;a=a.value;try{var p=u();return!ni(a,p)}catch{return!0}}function d2(a){var u=Ul(a,2);u!==null&&Gr(u,a,2)}function Ax(a){var u=Ir();if(typeof a=="function"){var p=a;if(a=p(),Wl){gr(!0);try{p()}finally{gr(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:a},u}function f2(a,u,p,y){return a.baseState=p,Tx(a,Ft,typeof y=="function"?y:No)}function l9(a,u,p,y,E){if(wm(a))throw Error(r(485));if(a=u.action,a!==null){var A={payload:E,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(H){A.listeners.push(H)}};W.T!==null?p(!0):A.isTransition=!1,y(A),p=u.pending,p===null?(A.next=u.pending=A,h2(u,A)):(A.next=p.next,u.pending=p.next=A)}}function h2(a,u){var p=u.action,y=u.payload,E=a.state;if(u.isTransition){var A=W.T,H={};W.T=H;try{var Y=p(E,y),re=W.S;re!==null&&re(H,Y),p2(a,u,Y)}catch(me){Cx(a,u,me)}finally{A!==null&&H.types!==null&&(A.types=H.types),W.T=A}}else try{A=p(E,y),p2(a,u,A)}catch(me){Cx(a,u,me)}}function p2(a,u,p){p!==null&&typeof p=="object"&&typeof p.then=="function"?p.then(function(y){m2(a,u,y)},function(y){return Cx(a,u,y)}):m2(a,u,p)}function m2(a,u,p){u.status="fulfilled",u.value=p,g2(u),a.state=p,u=a.pending,u!==null&&(p=u.next,p===u?a.pending=null:(p=p.next,u.next=p,h2(a,p)))}function Cx(a,u,p){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do u.status="rejected",u.reason=p,g2(u),u=u.next;while(u!==y)}a.action=null}function g2(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function y2(a,u){return u}function v2(a,u){if(bt){var p=qt.formState;if(p!==null){e:{var y=ut;if(bt){if(Wt){t:{for(var E=Wt,A=Ii;E.nodeType!==8;){if(!A){E=null;break t}if(E=Pi(E.nextSibling),E===null){E=null;break t}}A=E.data,E=A==="F!"||A==="F"?E:null}if(E){Wt=Pi(E.nextSibling),y=E.data==="F!";break e}}Aa(y)}y=!1}y&&(u=p[0])}}return p=Ir(),p.memoizedState=p.baseState=u,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y2,lastRenderedState:u},p.queue=y,p=L2.bind(null,ut,y),y.dispatch=p,y=Ax(!1),A=jx.bind(null,ut,!1,y.queue),y=Ir(),E={state:u,dispatch:null,action:a,pending:null},y.queue=E,p=l9.bind(null,ut,E,A,p),E.dispatch=p,y.memoizedState=a,[u,p,!1]}function x2(a){var u=gn();return b2(u,Ft,a)}function b2(a,u,p){if(u=Tx(a,u,y2)[0],a=xm(No)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var y=Cf(u)}catch(H){throw H===du?cm:H}else y=u;u=gn();var E=u.queue,A=E.dispatch;return p!==u.memoizedState&&(ut.flags|=2048,gu(9,{destroy:void 0},c9.bind(null,E,p),null)),[y,A,a]}function c9(a,u){a.action=u}function _2(a){var u=gn(),p=Ft;if(p!==null)return b2(u,p,a);gn(),u=u.memoizedState,p=gn();var y=p.queue.dispatch;return p.memoizedState=a,[u,y,!1]}function gu(a,u,p,y){return a={tag:a,create:p,deps:y,inst:u,next:null},u=ut.updateQueue,u===null&&(u=ym(),ut.updateQueue=u),p=u.lastEffect,p===null?u.lastEffect=a.next=a:(y=p.next,p.next=a,a.next=y,u.lastEffect=a),a}function w2(){return gn().memoizedState}function bm(a,u,p,y){var E=Ir();ut.flags|=a,E.memoizedState=gu(1|u,{destroy:void 0},p,y===void 0?null:y)}function _m(a,u,p,y){var E=gn();y=y===void 0?null:y;var A=E.memoizedState.inst;Ft!==null&&y!==null&&vx(y,Ft.memoizedState.deps)?E.memoizedState=gu(u,A,p,y):(ut.flags|=a,E.memoizedState=gu(1|u,A,p,y))}function S2(a,u){bm(8390656,8,a,u)}function Nx(a,u){_m(2048,8,a,u)}function u9(a){ut.flags|=4;var u=ut.updateQueue;if(u===null)u=ym(),ut.updateQueue=u,u.events=[a];else{var p=u.events;p===null?u.events=[a]:p.push(a)}}function T2(a){var u=gn().memoizedState;return u9({ref:u,nextImpl:a}),function(){if((jt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}function E2(a,u){return _m(4,2,a,u)}function A2(a,u){return _m(4,4,a,u)}function C2(a,u){if(typeof u=="function"){a=a();var p=u(a);return function(){typeof p=="function"?p():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function N2(a,u,p){p=p!=null?p.concat([a]):null,_m(4,4,C2.bind(null,u,a),p)}function kx(){}function k2(a,u){var p=gn();u=u===void 0?null:u;var y=p.memoizedState;return u!==null&&vx(u,y[1])?y[0]:(p.memoizedState=[a,u],a)}function I2(a,u){var p=gn();u=u===void 0?null:u;var y=p.memoizedState;if(u!==null&&vx(u,y[1]))return y[0];if(y=a(),Wl){gr(!0);try{a()}finally{gr(!1)}}return p.memoizedState=[y,u],y}function Ix(a,u,p){return p===void 0||(Co&1073741824)!==0&&(mt&261930)===0?a.memoizedState=u:(a.memoizedState=p,a=RC(),ut.lanes|=a,Da|=a,p)}function R2(a,u,p,y){return ni(p,u)?p:hu.current!==null?(a=Ix(a,p,y),ni(a,u)||(En=!0),a):(Co&42)===0||(Co&1073741824)!==0&&(mt&261930)===0?(En=!0,a.memoizedState=p):(a=RC(),ut.lanes|=a,Da|=a,u)}function P2(a,u,p,y,E){var A=K.p;K.p=A!==0&&8>A?A:8;var H=W.T,Y={};W.T=Y,jx(a,!1,u,p);try{var re=E(),me=W.S;if(me!==null&&me(Y,re),re!==null&&typeof re=="object"&&typeof re.then=="function"){var Se=s9(re,y);Nf(a,u,Se,li(a))}else Nf(a,u,y,li(a))}catch(Ae){Nf(a,u,{then:function(){},status:"rejected",reason:Ae},li())}finally{K.p=A,H!==null&&Y.types!==null&&(H.types=Y.types),W.T=H}}function d9(){}function Rx(a,u,p,y){if(a.tag!==5)throw Error(r(476));var E=j2(a).queue;P2(a,E,u,te,p===null?d9:function(){return M2(a),p(y)})}function j2(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:te,baseState:te,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:te},next:null};var p={};return u.next={memoizedState:p,baseState:p,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:p},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function M2(a){var u=j2(a);u.next===null&&(u=a.alternate.memoizedState),Nf(a,u.next.queue,{},li())}function Px(){return tr($f)}function D2(){return gn().memoizedState}function O2(){return gn().memoizedState}function f9(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var p=li();a=ka(p);var y=Ia(u,a,p);y!==null&&(Gr(y,u,p),Sf(y,u,p)),u={cache:ax()},a.payload=u;return}u=u.return}}function h9(a,u,p){var y=li();p={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null},wm(a)?z2(u,p):(p=Xv(a,u,p,y),p!==null&&(Gr(p,a,y),U2(p,u,y)))}function L2(a,u,p){var y=li();Nf(a,u,p,y)}function Nf(a,u,p,y){var E={lane:y,revertLane:0,gesture:null,action:p,hasEagerState:!1,eagerState:null,next:null};if(wm(a))z2(u,E);else{var A=a.alternate;if(a.lanes===0&&(A===null||A.lanes===0)&&(A=u.lastRenderedReducer,A!==null))try{var H=u.lastRenderedState,Y=A(H,p);if(E.hasEagerState=!0,E.eagerState=Y,ni(Y,H))return nm(a,u,E,0),qt===null&&tm(),!1}catch{}finally{}if(p=Xv(a,u,E,y),p!==null)return Gr(p,a,y),U2(p,u,y),!0}return!1}function jx(a,u,p,y){if(y={lane:2,revertLane:db(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},wm(a)){if(u)throw Error(r(479))}else u=Xv(a,p,y,2),u!==null&&Gr(u,a,2)}function wm(a){var u=a.alternate;return a===ut||u!==null&&u===ut}function z2(a,u){pu=mm=!0;var p=a.pending;p===null?u.next=u:(u.next=p.next,p.next=u),a.pending=u}function U2(a,u,p){if((p&4194048)!==0){var y=u.lanes;y&=a.pendingLanes,p|=y,u.lanes=p,Yd(a,p)}}var kf={readContext:tr,use:vm,useCallback:cn,useContext:cn,useEffect:cn,useImperativeHandle:cn,useLayoutEffect:cn,useInsertionEffect:cn,useMemo:cn,useReducer:cn,useRef:cn,useState:cn,useDebugValue:cn,useDeferredValue:cn,useTransition:cn,useSyncExternalStore:cn,useId:cn,useHostTransitionStatus:cn,useFormState:cn,useActionState:cn,useOptimistic:cn,useMemoCache:cn,useCacheRefresh:cn};kf.useEffectEvent=cn;var V2={readContext:tr,use:vm,useCallback:function(a,u){return Ir().memoizedState=[a,u===void 0?null:u],a},useContext:tr,useEffect:S2,useImperativeHandle:function(a,u,p){p=p!=null?p.concat([a]):null,bm(4194308,4,C2.bind(null,u,a),p)},useLayoutEffect:function(a,u){return bm(4194308,4,a,u)},useInsertionEffect:function(a,u){bm(4,2,a,u)},useMemo:function(a,u){var p=Ir();u=u===void 0?null:u;var y=a();if(Wl){gr(!0);try{a()}finally{gr(!1)}}return p.memoizedState=[y,u],y},useReducer:function(a,u,p){var y=Ir();if(p!==void 0){var E=p(u);if(Wl){gr(!0);try{p(u)}finally{gr(!1)}}}else E=u;return y.memoizedState=y.baseState=E,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:E},y.queue=a,a=a.dispatch=h9.bind(null,ut,a),[y.memoizedState,a]},useRef:function(a){var u=Ir();return a={current:a},u.memoizedState=a},useState:function(a){a=Ax(a);var u=a.queue,p=L2.bind(null,ut,u);return u.dispatch=p,[a.memoizedState,p]},useDebugValue:kx,useDeferredValue:function(a,u){var p=Ir();return Ix(p,a,u)},useTransition:function(){var a=Ax(!1);return a=P2.bind(null,ut,a.queue,!0,!1),Ir().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,p){var y=ut,E=Ir();if(bt){if(p===void 0)throw Error(r(407));p=p()}else{if(p=u(),qt===null)throw Error(r(349));(mt&127)!==0||a2(y,u,p)}E.memoizedState=p;var A={value:p,getSnapshot:u};return E.queue=A,S2(c2.bind(null,y,A,a),[a]),y.flags|=2048,gu(9,{destroy:void 0},l2.bind(null,y,A,p,u),null),p},useId:function(){var a=Ir(),u=qt.identifierPrefix;if(bt){var p=Hs,y=Bs;p=(y&~(1<<32-Rt(y)-1)).toString(32)+p,u="_"+u+"R_"+p,p=gm++,0<p&&(u+="H"+p.toString(32)),u+="_"}else p=o9++,u="_"+u+"r_"+p.toString(32)+"_";return a.memoizedState=u},useHostTransitionStatus:Px,useFormState:v2,useActionState:v2,useOptimistic:function(a){var u=Ir();u.memoizedState=u.baseState=a;var p={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=p,u=jx.bind(null,ut,!0,p),p.dispatch=u,[a,u]},useMemoCache:Sx,useCacheRefresh:function(){return Ir().memoizedState=f9.bind(null,ut)},useEffectEvent:function(a){var u=Ir(),p={impl:a};return u.memoizedState=p,function(){if((jt&2)!==0)throw Error(r(440));return p.impl.apply(void 0,arguments)}}},Mx={readContext:tr,use:vm,useCallback:k2,useContext:tr,useEffect:Nx,useImperativeHandle:N2,useInsertionEffect:E2,useLayoutEffect:A2,useMemo:I2,useReducer:xm,useRef:w2,useState:function(){return xm(No)},useDebugValue:kx,useDeferredValue:function(a,u){var p=gn();return R2(p,Ft.memoizedState,a,u)},useTransition:function(){var a=xm(No)[0],u=gn().memoizedState;return[typeof a=="boolean"?a:Cf(a),u]},useSyncExternalStore:o2,useId:D2,useHostTransitionStatus:Px,useFormState:x2,useActionState:x2,useOptimistic:function(a,u){var p=gn();return f2(p,Ft,a,u)},useMemoCache:Sx,useCacheRefresh:O2};Mx.useEffectEvent=T2;var F2={readContext:tr,use:vm,useCallback:k2,useContext:tr,useEffect:Nx,useImperativeHandle:N2,useInsertionEffect:E2,useLayoutEffect:A2,useMemo:I2,useReducer:Ex,useRef:w2,useState:function(){return Ex(No)},useDebugValue:kx,useDeferredValue:function(a,u){var p=gn();return Ft===null?Ix(p,a,u):R2(p,Ft.memoizedState,a,u)},useTransition:function(){var a=Ex(No)[0],u=gn().memoizedState;return[typeof a=="boolean"?a:Cf(a),u]},useSyncExternalStore:o2,useId:D2,useHostTransitionStatus:Px,useFormState:_2,useActionState:_2,useOptimistic:function(a,u){var p=gn();return Ft!==null?f2(p,Ft,a,u):(p.baseState=a,[a,p.queue.dispatch])},useMemoCache:Sx,useCacheRefresh:O2};F2.useEffectEvent=T2;function Dx(a,u,p,y){u=a.memoizedState,p=p(y,u),p=p==null?u:m({},u,p),a.memoizedState=p,a.lanes===0&&(a.updateQueue.baseState=p)}var Ox={enqueueSetState:function(a,u,p){a=a._reactInternals;var y=li(),E=ka(y);E.payload=u,p!=null&&(E.callback=p),u=Ia(a,E,y),u!==null&&(Gr(u,a,y),Sf(u,a,y))},enqueueReplaceState:function(a,u,p){a=a._reactInternals;var y=li(),E=ka(y);E.tag=1,E.payload=u,p!=null&&(E.callback=p),u=Ia(a,E,y),u!==null&&(Gr(u,a,y),Sf(u,a,y))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var p=li(),y=ka(p);y.tag=2,u!=null&&(y.callback=u),u=Ia(a,y,p),u!==null&&(Gr(u,a,p),Sf(u,a,p))}};function B2(a,u,p,y,E,A,H){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,A,H):u.prototype&&u.prototype.isPureReactComponent?!mf(p,y)||!mf(E,A):!0}function H2(a,u,p,y){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(p,y),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(p,y),u.state!==a&&Ox.enqueueReplaceState(u,u.state,null)}function Yl(a,u){var p=u;if("ref"in u){p={};for(var y in u)y!=="ref"&&(p[y]=u[y])}if(a=a.defaultProps){p===u&&(p=m({},p));for(var E in a)p[E]===void 0&&(p[E]=a[E])}return p}function q2(a){em(a)}function $2(a){console.error(a)}function G2(a){em(a)}function Sm(a,u){try{var p=a.onUncaughtError;p(u.value,{componentStack:u.stack})}catch(y){setTimeout(function(){throw y})}}function K2(a,u,p){try{var y=a.onCaughtError;y(p.value,{componentStack:p.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(E){setTimeout(function(){throw E})}}function Lx(a,u,p){return p=ka(p),p.tag=3,p.payload={element:null},p.callback=function(){Sm(a,u)},p}function W2(a){return a=ka(a),a.tag=3,a}function Y2(a,u,p,y){var E=p.type.getDerivedStateFromError;if(typeof E=="function"){var A=y.value;a.payload=function(){return E(A)},a.callback=function(){K2(u,p,y)}}var H=p.stateNode;H!==null&&typeof H.componentDidCatch=="function"&&(a.callback=function(){K2(u,p,y),typeof E!="function"&&(Oa===null?Oa=new Set([this]):Oa.add(this));var Y=y.stack;this.componentDidCatch(y.value,{componentStack:Y!==null?Y:""})})}function p9(a,u,p,y,E){if(p.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(u=p.alternate,u!==null&&lu(u,p,E,!0),p=ii.current,p!==null){switch(p.tag){case 31:case 13:return Ri===null?Dm():p.alternate===null&&un===0&&(un=3),p.flags&=-257,p.flags|=65536,p.lanes=E,y===um?p.flags|=16384:(u=p.updateQueue,u===null?p.updateQueue=new Set([y]):u.add(y),lb(a,y,E)),!1;case 22:return p.flags|=65536,y===um?p.flags|=16384:(u=p.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([y])},p.updateQueue=u):(p=u.retryQueue,p===null?u.retryQueue=new Set([y]):p.add(y)),lb(a,y,E)),!1}throw Error(r(435,p.tag))}return lb(a,y,E),Dm(),!1}if(bt)return u=ii.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=E,y!==nx&&(a=Error(r(422),{cause:y}),vf(Ci(a,p)))):(y!==nx&&(u=Error(r(423),{cause:y}),vf(Ci(u,p))),a=a.current.alternate,a.flags|=65536,E&=-E,a.lanes|=E,y=Ci(y,p),E=Lx(a.stateNode,y,E),hx(a,E),un!==4&&(un=2)),!1;var A=Error(r(520),{cause:y});if(A=Ci(A,p),Lf===null?Lf=[A]:Lf.push(A),un!==4&&(un=2),u===null)return!0;y=Ci(y,p),p=u;do{switch(p.tag){case 3:return p.flags|=65536,a=E&-E,p.lanes|=a,a=Lx(p.stateNode,y,a),hx(p,a),!1;case 1:if(u=p.type,A=p.stateNode,(p.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Oa===null||!Oa.has(A))))return p.flags|=65536,E&=-E,p.lanes|=E,E=W2(E),Y2(E,a,p,y),hx(p,E),!1}p=p.return}while(p!==null);return!1}var zx=Error(r(461)),En=!1;function nr(a,u,p,y){u.child=a===null?ZA(u,null,p,y):Kl(u,a.child,p,y)}function X2(a,u,p,y,E){p=p.render;var A=u.ref;if("ref"in y){var H={};for(var Y in y)Y!=="ref"&&(H[Y]=y[Y])}else H=y;return Hl(u),y=xx(a,u,p,H,A,E),Y=bx(),a!==null&&!En?(_x(a,u,E),ko(a,u,E)):(bt&&Y&&ex(u),u.flags|=1,nr(a,u,y,E),u.child)}function J2(a,u,p,y,E){if(a===null){var A=p.type;return typeof A=="function"&&!Jv(A)&&A.defaultProps===void 0&&p.compare===null?(u.tag=15,u.type=A,Q2(a,u,A,y,E)):(a=im(p.type,null,y,u,u.mode,E),a.ref=u.ref,a.return=u,u.child=a)}if(A=a.child,!Gx(a,E)){var H=A.memoizedProps;if(p=p.compare,p=p!==null?p:mf,p(H,y)&&a.ref===u.ref)return ko(a,u,E)}return u.flags|=1,a=So(A,y),a.ref=u.ref,a.return=u,u.child=a}function Q2(a,u,p,y,E){if(a!==null){var A=a.memoizedProps;if(mf(A,y)&&a.ref===u.ref)if(En=!1,u.pendingProps=y=A,Gx(a,E))(a.flags&131072)!==0&&(En=!0);else return u.lanes=a.lanes,ko(a,u,E)}return Ux(a,u,p,y,E)}function Z2(a,u,p,y){var E=y.children,A=a!==null?a.memoizedState:null;if(a===null&&u.stateNode===null&&(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((u.flags&128)!==0){if(A=A!==null?A.baseLanes|p:p,a!==null){for(y=u.child=a.child,E=0;y!==null;)E=E|y.lanes|y.childLanes,y=y.sibling;y=E&~A}else y=0,u.child=null;return eC(a,u,A,p,y)}if((p&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&lm(u,A!==null?A.cachePool:null),A!==null?n2(u,A):mx(),r2(u);else return y=u.lanes=536870912,eC(a,u,A!==null?A.baseLanes|p:p,p,y)}else A!==null?(lm(u,A.cachePool),n2(u,A),Pa(),u.memoizedState=null):(a!==null&&lm(u,null),mx(),Pa());return nr(a,u,E,p),u.child}function If(a,u){return a!==null&&a.tag===22||u.stateNode!==null||(u.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),u.sibling}function eC(a,u,p,y,E){var A=cx();return A=A===null?null:{parent:Sn._currentValue,pool:A},u.memoizedState={baseLanes:p,cachePool:A},a!==null&&lm(u,null),mx(),r2(u),a!==null&&lu(a,u,y,!0),u.childLanes=E,null}function Tm(a,u){return u=Am({mode:u.mode,children:u.children},a.mode),u.ref=a.ref,a.child=u,u.return=a,u}function tC(a,u,p){return Kl(u,a.child,null,p),a=Tm(u,u.pendingProps),a.flags|=2,si(u),u.memoizedState=null,a}function m9(a,u,p){var y=u.pendingProps,E=(u.flags&128)!==0;if(u.flags&=-129,a===null){if(bt){if(y.mode==="hidden")return a=Tm(u,y),u.lanes=536870912,If(null,a);if(yx(u),(a=Wt)?(a=hN(a,Ii),a=a!==null&&a.data==="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:Ta!==null?{id:Bs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},p=zA(a),p.return=u,u.child=p,er=u,Wt=null)):a=null,a===null)throw Aa(u);return u.lanes=536870912,null}return Tm(u,y)}var A=a.memoizedState;if(A!==null){var H=A.dehydrated;if(yx(u),E)if(u.flags&256)u.flags&=-257,u=tC(a,u,p);else if(u.memoizedState!==null)u.child=a.child,u.flags|=128,u=null;else throw Error(r(558));else if(En||lu(a,u,p,!1),E=(p&a.childLanes)!==0,En||E){if(y=qt,y!==null&&(H=Xd(y,p),H!==0&&H!==A.retryLane))throw A.retryLane=H,Ul(a,H),Gr(y,a,H),zx;Dm(),u=tC(a,u,p)}else a=A.treeContext,Wt=Pi(H.nextSibling),er=u,bt=!0,Ea=null,Ii=!1,a!==null&&FA(u,a),u=Tm(u,y),u.flags|=4096;return u}return a=So(a.child,{mode:y.mode,children:y.children}),a.ref=u.ref,u.child=a,a.return=u,a}function Em(a,u){var p=u.ref;if(p===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof p!="function"&&typeof p!="object")throw Error(r(284));(a===null||a.ref!==p)&&(u.flags|=4194816)}}function Ux(a,u,p,y,E){return Hl(u),p=xx(a,u,p,y,void 0,E),y=bx(),a!==null&&!En?(_x(a,u,E),ko(a,u,E)):(bt&&y&&ex(u),u.flags|=1,nr(a,u,p,E),u.child)}function nC(a,u,p,y,E,A){return Hl(u),u.updateQueue=null,p=s2(u,y,p,E),i2(a),y=bx(),a!==null&&!En?(_x(a,u,A),ko(a,u,A)):(bt&&y&&ex(u),u.flags|=1,nr(a,u,p,A),u.child)}function rC(a,u,p,y,E){if(Hl(u),u.stateNode===null){var A=iu,H=p.contextType;typeof H=="object"&&H!==null&&(A=tr(H)),A=new p(y,A),u.memoizedState=A.state!==null&&A.state!==void 0?A.state:null,A.updater=Ox,u.stateNode=A,A._reactInternals=u,A=u.stateNode,A.props=y,A.state=u.memoizedState,A.refs={},dx(u),H=p.contextType,A.context=typeof H=="object"&&H!==null?tr(H):iu,A.state=u.memoizedState,H=p.getDerivedStateFromProps,typeof H=="function"&&(Dx(u,p,H,y),A.state=u.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof A.getSnapshotBeforeUpdate=="function"||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(H=A.state,typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount(),H!==A.state&&Ox.enqueueReplaceState(A,A.state,null),Ef(u,y,A,E),Tf(),A.state=u.memoizedState),typeof A.componentDidMount=="function"&&(u.flags|=4194308),y=!0}else if(a===null){A=u.stateNode;var Y=u.memoizedProps,re=Yl(p,Y);A.props=re;var me=A.context,Se=p.contextType;H=iu,typeof Se=="object"&&Se!==null&&(H=tr(Se));var Ae=p.getDerivedStateFromProps;Se=typeof Ae=="function"||typeof A.getSnapshotBeforeUpdate=="function",Y=u.pendingProps!==Y,Se||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(Y||me!==H)&&H2(u,A,y,H),Na=!1;var ye=u.memoizedState;A.state=ye,Ef(u,y,A,E),Tf(),me=u.memoizedState,Y||ye!==me||Na?(typeof Ae=="function"&&(Dx(u,p,Ae,y),me=u.memoizedState),(re=Na||B2(u,p,re,y,ye,me,H))?(Se||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(u.flags|=4194308)):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=y,u.memoizedState=me),A.props=y,A.state=me,A.context=H,y=re):(typeof A.componentDidMount=="function"&&(u.flags|=4194308),y=!1)}else{A=u.stateNode,fx(a,u),H=u.memoizedProps,Se=Yl(p,H),A.props=Se,Ae=u.pendingProps,ye=A.context,me=p.contextType,re=iu,typeof me=="object"&&me!==null&&(re=tr(me)),Y=p.getDerivedStateFromProps,(me=typeof Y=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(H!==Ae||ye!==re)&&H2(u,A,y,re),Na=!1,ye=u.memoizedState,A.state=ye,Ef(u,y,A,E),Tf();var _e=u.memoizedState;H!==Ae||ye!==_e||Na||a!==null&&a.dependencies!==null&&om(a.dependencies)?(typeof Y=="function"&&(Dx(u,p,Y,y),_e=u.memoizedState),(Se=Na||B2(u,p,Se,y,ye,_e,re)||a!==null&&a.dependencies!==null&&om(a.dependencies))?(me||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(y,_e,re),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(y,_e,re)),typeof A.componentDidUpdate=="function"&&(u.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof A.componentDidUpdate!="function"||H===a.memoizedProps&&ye===a.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&ye===a.memoizedState||(u.flags|=1024),u.memoizedProps=y,u.memoizedState=_e),A.props=y,A.state=_e,A.context=re,y=Se):(typeof A.componentDidUpdate!="function"||H===a.memoizedProps&&ye===a.memoizedState||(u.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||H===a.memoizedProps&&ye===a.memoizedState||(u.flags|=1024),y=!1)}return A=y,Em(a,u),y=(u.flags&128)!==0,A||y?(A=u.stateNode,p=y&&typeof p.getDerivedStateFromError!="function"?null:A.render(),u.flags|=1,a!==null&&y?(u.child=Kl(u,a.child,null,E),u.child=Kl(u,null,p,E)):nr(a,u,p,E),u.memoizedState=A.state,a=u.child):a=ko(a,u,E),a}function iC(a,u,p,y){return Fl(),u.flags|=256,nr(a,u,p,y),u.child}var Vx={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fx(a){return{baseLanes:a,cachePool:KA()}}function Bx(a,u,p){return a=a!==null?a.childLanes&~p:0,u&&(a|=ai),a}function sC(a,u,p){var y=u.pendingProps,E=!1,A=(u.flags&128)!==0,H;if((H=A)||(H=a!==null&&a.memoizedState===null?!1:(mn.current&2)!==0),H&&(E=!0,u.flags&=-129),H=(u.flags&32)!==0,u.flags&=-33,a===null){if(bt){if(E?Ra(u):Pa(),(a=Wt)?(a=hN(a,Ii),a=a!==null&&a.data!=="&"?a:null,a!==null&&(u.memoizedState={dehydrated:a,treeContext:Ta!==null?{id:Bs,overflow:Hs}:null,retryLane:536870912,hydrationErrors:null},p=zA(a),p.return=u,u.child=p,er=u,Wt=null)):a=null,a===null)throw Aa(u);return Tb(a)?u.lanes=32:u.lanes=536870912,null}var Y=y.children;return y=y.fallback,E?(Pa(),E=u.mode,Y=Am({mode:"hidden",children:Y},E),y=Vl(y,E,p,null),Y.return=u,y.return=u,Y.sibling=y,u.child=Y,y=u.child,y.memoizedState=Fx(p),y.childLanes=Bx(a,H,p),u.memoizedState=Vx,If(null,y)):(Ra(u),Hx(u,Y))}var re=a.memoizedState;if(re!==null&&(Y=re.dehydrated,Y!==null)){if(A)u.flags&256?(Ra(u),u.flags&=-257,u=qx(a,u,p)):u.memoizedState!==null?(Pa(),u.child=a.child,u.flags|=128,u=null):(Pa(),Y=y.fallback,E=u.mode,y=Am({mode:"visible",children:y.children},E),Y=Vl(Y,E,p,null),Y.flags|=2,y.return=u,Y.return=u,y.sibling=Y,u.child=y,Kl(u,a.child,null,p),y=u.child,y.memoizedState=Fx(p),y.childLanes=Bx(a,H,p),u.memoizedState=Vx,u=If(null,y));else if(Ra(u),Tb(Y)){if(H=Y.nextSibling&&Y.nextSibling.dataset,H)var me=H.dgst;H=me,y=Error(r(419)),y.stack="",y.digest=H,vf({value:y,source:null,stack:null}),u=qx(a,u,p)}else if(En||lu(a,u,p,!1),H=(p&a.childLanes)!==0,En||H){if(H=qt,H!==null&&(y=Xd(H,p),y!==0&&y!==re.retryLane))throw re.retryLane=y,Ul(a,y),Gr(H,a,y),zx;Sb(Y)||Dm(),u=qx(a,u,p)}else Sb(Y)?(u.flags|=192,u.child=a.child,u=null):(a=re.treeContext,Wt=Pi(Y.nextSibling),er=u,bt=!0,Ea=null,Ii=!1,a!==null&&FA(u,a),u=Hx(u,y.children),u.flags|=4096);return u}return E?(Pa(),Y=y.fallback,E=u.mode,re=a.child,me=re.sibling,y=So(re,{mode:"hidden",children:y.children}),y.subtreeFlags=re.subtreeFlags&65011712,me!==null?Y=So(me,Y):(Y=Vl(Y,E,p,null),Y.flags|=2),Y.return=u,y.return=u,y.sibling=Y,u.child=y,If(null,y),y=u.child,Y=a.child.memoizedState,Y===null?Y=Fx(p):(E=Y.cachePool,E!==null?(re=Sn._currentValue,E=E.parent!==re?{parent:re,pool:re}:E):E=KA(),Y={baseLanes:Y.baseLanes|p,cachePool:E}),y.memoizedState=Y,y.childLanes=Bx(a,H,p),u.memoizedState=Vx,If(a.child,y)):(Ra(u),p=a.child,a=p.sibling,p=So(p,{mode:"visible",children:y.children}),p.return=u,p.sibling=null,a!==null&&(H=u.deletions,H===null?(u.deletions=[a],u.flags|=16):H.push(a)),u.child=p,u.memoizedState=null,p)}function Hx(a,u){return u=Am({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function Am(a,u){return a=ri(22,a,null,u),a.lanes=0,a}function qx(a,u,p){return Kl(u,a.child,null,p),a=Hx(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function oC(a,u,p){a.lanes|=u;var y=a.alternate;y!==null&&(y.lanes|=u),sx(a.return,u,p)}function $x(a,u,p,y,E,A){var H=a.memoizedState;H===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:y,tail:p,tailMode:E,treeForkCount:A}:(H.isBackwards=u,H.rendering=null,H.renderingStartTime=0,H.last=y,H.tail=p,H.tailMode=E,H.treeForkCount=A)}function aC(a,u,p){var y=u.pendingProps,E=y.revealOrder,A=y.tail;y=y.children;var H=mn.current,Y=(H&2)!==0;if(Y?(H=H&1|2,u.flags|=128):H&=1,de(mn,H),nr(a,u,y,p),y=bt?yf:0,!Y&&a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&oC(a,p,u);else if(a.tag===19)oC(a,p,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}switch(E){case"forwards":for(p=u.child,E=null;p!==null;)a=p.alternate,a!==null&&pm(a)===null&&(E=p),p=p.sibling;p=E,p===null?(E=u.child,u.child=null):(E=p.sibling,p.sibling=null),$x(u,!1,E,p,A,y);break;case"backwards":case"unstable_legacy-backwards":for(p=null,E=u.child,u.child=null;E!==null;){if(a=E.alternate,a!==null&&pm(a)===null){u.child=E;break}a=E.sibling,E.sibling=p,p=E,E=a}$x(u,!0,p,null,A,y);break;case"together":$x(u,!1,null,null,void 0,y);break;default:u.memoizedState=null}return u.child}function ko(a,u,p){if(a!==null&&(u.dependencies=a.dependencies),Da|=u.lanes,(p&u.childLanes)===0)if(a!==null){if(lu(a,u,p,!1),(p&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(r(153));if(u.child!==null){for(a=u.child,p=So(a,a.pendingProps),u.child=p,p.return=u;a.sibling!==null;)a=a.sibling,p=p.sibling=So(a,a.pendingProps),p.return=u;p.sibling=null}return u.child}function Gx(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&om(a)))}function g9(a,u,p){switch(u.tag){case 3:Fe(u,u.stateNode.containerInfo),Ca(u,Sn,a.memoizedState.cache),Fl();break;case 27:case 5:Ce(u);break;case 4:Fe(u,u.stateNode.containerInfo);break;case 10:Ca(u,u.type,u.memoizedProps.value);break;case 31:if(u.memoizedState!==null)return u.flags|=128,yx(u),null;break;case 13:var y=u.memoizedState;if(y!==null)return y.dehydrated!==null?(Ra(u),u.flags|=128,null):(p&u.child.childLanes)!==0?sC(a,u,p):(Ra(u),a=ko(a,u,p),a!==null?a.sibling:null);Ra(u);break;case 19:var E=(a.flags&128)!==0;if(y=(p&u.childLanes)!==0,y||(lu(a,u,p,!1),y=(p&u.childLanes)!==0),E){if(y)return aC(a,u,p);u.flags|=128}if(E=u.memoizedState,E!==null&&(E.rendering=null,E.tail=null,E.lastEffect=null),de(mn,mn.current),y)break;return null;case 22:return u.lanes=0,Z2(a,u,p,u.pendingProps);case 24:Ca(u,Sn,a.memoizedState.cache)}return ko(a,u,p)}function lC(a,u,p){if(a!==null)if(a.memoizedProps!==u.pendingProps)En=!0;else{if(!Gx(a,p)&&(u.flags&128)===0)return En=!1,g9(a,u,p);En=(a.flags&131072)!==0}else En=!1,bt&&(u.flags&1048576)!==0&&VA(u,yf,u.index);switch(u.lanes=0,u.tag){case 16:e:{var y=u.pendingProps;if(a=$l(u.elementType),u.type=a,typeof a=="function")Jv(a)?(y=Yl(a,y),u.tag=1,u=rC(null,u,a,y,p)):(u.tag=0,u=Ux(null,u,a,y,p));else{if(a!=null){var E=a.$$typeof;if(E===O){u.tag=11,u=X2(null,u,a,y,p);break e}else if(E===M){u.tag=14,u=J2(null,u,a,y,p);break e}}throw u=z(a)||a,Error(r(306,u,""))}}return u;case 0:return Ux(a,u,u.type,u.pendingProps,p);case 1:return y=u.type,E=Yl(y,u.pendingProps),rC(a,u,y,E,p);case 3:e:{if(Fe(u,u.stateNode.containerInfo),a===null)throw Error(r(387));y=u.pendingProps;var A=u.memoizedState;E=A.element,fx(a,u),Ef(u,y,null,p);var H=u.memoizedState;if(y=H.cache,Ca(u,Sn,y),y!==A.cache&&ox(u,[Sn],p,!0),Tf(),y=H.element,A.isDehydrated)if(A={element:y,isDehydrated:!1,cache:H.cache},u.updateQueue.baseState=A,u.memoizedState=A,u.flags&256){u=iC(a,u,y,p);break e}else if(y!==E){E=Ci(Error(r(424)),u),vf(E),u=iC(a,u,y,p);break e}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Wt=Pi(a.firstChild),er=u,bt=!0,Ea=null,Ii=!0,p=ZA(u,null,y,p),u.child=p;p;)p.flags=p.flags&-3|4096,p=p.sibling}else{if(Fl(),y===E){u=ko(a,u,p);break e}nr(a,u,y,p)}u=u.child}return u;case 26:return Em(a,u),a===null?(p=xN(u.type,null,u.pendingProps,null))?u.memoizedState=p:bt||(p=u.type,a=u.pendingProps,y=Bm(ze.current).createElement(p),y[bn]=u,y[Ln]=a,rr(y,p,a),_n(y),u.stateNode=y):u.memoizedState=xN(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return Ce(u),a===null&&bt&&(y=u.stateNode=gN(u.type,u.pendingProps,ze.current),er=u,Ii=!0,E=Wt,Va(u.type)?(Eb=E,Wt=Pi(y.firstChild)):Wt=E),nr(a,u,u.pendingProps.children,p),Em(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&bt&&((E=y=Wt)&&(y=G9(y,u.type,u.pendingProps,Ii),y!==null?(u.stateNode=y,er=u,Wt=Pi(y.firstChild),Ii=!1,E=!0):E=!1),E||Aa(u)),Ce(u),E=u.type,A=u.pendingProps,H=a!==null?a.memoizedProps:null,y=A.children,bb(E,A)?y=null:H!==null&&bb(E,H)&&(u.flags|=32),u.memoizedState!==null&&(E=xx(a,u,a9,null,null,p),$f._currentValue=E),Em(a,u),nr(a,u,y,p),u.child;case 6:return a===null&&bt&&((a=p=Wt)&&(p=K9(p,u.pendingProps,Ii),p!==null?(u.stateNode=p,er=u,Wt=null,a=!0):a=!1),a||Aa(u)),null;case 13:return sC(a,u,p);case 4:return Fe(u,u.stateNode.containerInfo),y=u.pendingProps,a===null?u.child=Kl(u,null,y,p):nr(a,u,y,p),u.child;case 11:return X2(a,u,u.type,u.pendingProps,p);case 7:return nr(a,u,u.pendingProps,p),u.child;case 8:return nr(a,u,u.pendingProps.children,p),u.child;case 12:return nr(a,u,u.pendingProps.children,p),u.child;case 10:return y=u.pendingProps,Ca(u,u.type,y.value),nr(a,u,y.children,p),u.child;case 9:return E=u.type._context,y=u.pendingProps.children,Hl(u),E=tr(E),y=y(E),u.flags|=1,nr(a,u,y,p),u.child;case 14:return J2(a,u,u.type,u.pendingProps,p);case 15:return Q2(a,u,u.type,u.pendingProps,p);case 19:return aC(a,u,p);case 31:return m9(a,u,p);case 22:return Z2(a,u,p,u.pendingProps);case 24:return Hl(u),y=tr(Sn),a===null?(E=cx(),E===null&&(E=qt,A=ax(),E.pooledCache=A,A.refCount++,A!==null&&(E.pooledCacheLanes|=p),E=A),u.memoizedState={parent:y,cache:E},dx(u),Ca(u,Sn,E)):((a.lanes&p)!==0&&(fx(a,u),Ef(u,null,null,p),Tf()),E=a.memoizedState,A=u.memoizedState,E.parent!==y?(E={parent:y,cache:y},u.memoizedState=E,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=E),Ca(u,Sn,y)):(y=A.cache,Ca(u,Sn,y),y!==E.cache&&ox(u,[Sn],p,!0))),nr(a,u,u.pendingProps.children,p),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Io(a){a.flags|=4}function Kx(a,u,p,y,E){if((u=(a.mode&32)!==0)&&(u=!1),u){if(a.flags|=16777216,(E&335544128)===E)if(a.stateNode.complete)a.flags|=8192;else if(DC())a.flags|=8192;else throw Gl=um,ux}else a.flags&=-16777217}function cC(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!TN(u))if(DC())a.flags|=8192;else throw Gl=um,ux}function Cm(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?jp():536870912,a.lanes|=u,bu|=u)}function Rf(a,u){if(!bt)switch(a.tailMode){case"hidden":u=a.tail;for(var p=null;u!==null;)u.alternate!==null&&(p=u),u=u.sibling;p===null?a.tail=null:p.sibling=null;break;case"collapsed":p=a.tail;for(var y=null;p!==null;)p.alternate!==null&&(y=p),p=p.sibling;y===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Yt(a){var u=a.alternate!==null&&a.alternate.child===a.child,p=0,y=0;if(u)for(var E=a.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags&65011712,y|=E.flags&65011712,E.return=a,E=E.sibling;else for(E=a.child;E!==null;)p|=E.lanes|E.childLanes,y|=E.subtreeFlags,y|=E.flags,E.return=a,E=E.sibling;return a.subtreeFlags|=y,a.childLanes=p,u}function y9(a,u,p){var y=u.pendingProps;switch(tx(u),u.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yt(u),null;case 1:return Yt(u),null;case 3:return p=u.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),u.memoizedState.cache!==y&&(u.flags|=2048),Ao(Sn),fe(),p.pendingContext&&(p.context=p.pendingContext,p.pendingContext=null),(a===null||a.child===null)&&(au(u)?Io(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,rx())),Yt(u),null;case 26:var E=u.type,A=u.memoizedState;return a===null?(Io(u),A!==null?(Yt(u),cC(u,A)):(Yt(u),Kx(u,E,null,y,p))):A?A!==a.memoizedState?(Io(u),Yt(u),cC(u,A)):(Yt(u),u.flags&=-16777217):(a=a.memoizedProps,a!==y&&Io(u),Yt(u),Kx(u,E,a,y,p)),null;case 27:if(Ve(u),p=ze.current,E=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==y&&Io(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return Yt(u),null}a=ce.current,au(u)?BA(u):(a=gN(E,y,p),u.stateNode=a,Io(u))}return Yt(u),null;case 5:if(Ve(u),E=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==y&&Io(u);else{if(!y){if(u.stateNode===null)throw Error(r(166));return Yt(u),null}if(A=ce.current,au(u))BA(u);else{var H=Bm(ze.current);switch(A){case 1:A=H.createElementNS("http://www.w3.org/2000/svg",E);break;case 2:A=H.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;default:switch(E){case"svg":A=H.createElementNS("http://www.w3.org/2000/svg",E);break;case"math":A=H.createElementNS("http://www.w3.org/1998/Math/MathML",E);break;case"script":A=H.createElement("div"),A.innerHTML="<script><\/script>",A=A.removeChild(A.firstChild);break;case"select":A=typeof y.is=="string"?H.createElement("select",{is:y.is}):H.createElement("select"),y.multiple?A.multiple=!0:y.size&&(A.size=y.size);break;default:A=typeof y.is=="string"?H.createElement(E,{is:y.is}):H.createElement(E)}}A[bn]=u,A[Ln]=y;e:for(H=u.child;H!==null;){if(H.tag===5||H.tag===6)A.appendChild(H.stateNode);else if(H.tag!==4&&H.tag!==27&&H.child!==null){H.child.return=H,H=H.child;continue}if(H===u)break e;for(;H.sibling===null;){if(H.return===null||H.return===u)break e;H=H.return}H.sibling.return=H.return,H=H.sibling}u.stateNode=A;e:switch(rr(A,E,y),E){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&Io(u)}}return Yt(u),Kx(u,u.type,a===null?null:a.memoizedProps,u.pendingProps,p),null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==y&&Io(u);else{if(typeof y!="string"&&u.stateNode===null)throw Error(r(166));if(a=ze.current,au(u)){if(a=u.stateNode,p=u.memoizedProps,y=null,E=er,E!==null)switch(E.tag){case 27:case 5:y=E.memoizedProps}a[bn]=u,a=!!(a.nodeValue===p||y!==null&&y.suppressHydrationWarning===!0||sN(a.nodeValue,p)),a||Aa(u,!0)}else a=Bm(a).createTextNode(y),a[bn]=u,u.stateNode=a}return Yt(u),null;case 31:if(p=u.memoizedState,a===null||a.memoizedState!==null){if(y=au(u),p!==null){if(a===null){if(!y)throw Error(r(318));if(a=u.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(557));a[bn]=u}else Fl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yt(u),a=!1}else p=rx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=p),a=!0;if(!a)return u.flags&256?(si(u),u):(si(u),null);if((u.flags&128)!==0)throw Error(r(558))}return Yt(u),null;case 13:if(y=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(E=au(u),y!==null&&y.dehydrated!==null){if(a===null){if(!E)throw Error(r(318));if(E=u.memoizedState,E=E!==null?E.dehydrated:null,!E)throw Error(r(317));E[bn]=u}else Fl(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;Yt(u),E=!1}else E=rx(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=E),E=!0;if(!E)return u.flags&256?(si(u),u):(si(u),null)}return si(u),(u.flags&128)!==0?(u.lanes=p,u):(p=y!==null,a=a!==null&&a.memoizedState!==null,p&&(y=u.child,E=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(E=y.alternate.memoizedState.cachePool.pool),A=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(A=y.memoizedState.cachePool.pool),A!==E&&(y.flags|=2048)),p!==a&&p&&(u.child.flags|=8192),Cm(u,u.updateQueue),Yt(u),null);case 4:return fe(),a===null&&mb(u.stateNode.containerInfo),Yt(u),null;case 10:return Ao(u.type),Yt(u),null;case 19:if(X(mn),y=u.memoizedState,y===null)return Yt(u),null;if(E=(u.flags&128)!==0,A=y.rendering,A===null)if(E)Rf(y,!1);else{if(un!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(A=pm(a),A!==null){for(u.flags|=128,Rf(y,!1),a=A.updateQueue,u.updateQueue=a,Cm(u,a),u.subtreeFlags=0,a=p,p=u.child;p!==null;)LA(p,a),p=p.sibling;return de(mn,mn.current&1|2),bt&&To(u,y.treeForkCount),u.child}a=a.sibling}y.tail!==null&&Le()>Pm&&(u.flags|=128,E=!0,Rf(y,!1),u.lanes=4194304)}else{if(!E)if(a=pm(A),a!==null){if(u.flags|=128,E=!0,a=a.updateQueue,u.updateQueue=a,Cm(u,a),Rf(y,!0),y.tail===null&&y.tailMode==="hidden"&&!A.alternate&&!bt)return Yt(u),null}else 2*Le()-y.renderingStartTime>Pm&&p!==536870912&&(u.flags|=128,E=!0,Rf(y,!1),u.lanes=4194304);y.isBackwards?(A.sibling=u.child,u.child=A):(a=y.last,a!==null?a.sibling=A:u.child=A,y.last=A)}return y.tail!==null?(a=y.tail,y.rendering=a,y.tail=a.sibling,y.renderingStartTime=Le(),a.sibling=null,p=mn.current,de(mn,E?p&1|2:p&1),bt&&To(u,y.treeForkCount),a):(Yt(u),null);case 22:case 23:return si(u),gx(),y=u.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(u.flags|=8192):y&&(u.flags|=8192),y?(p&536870912)!==0&&(u.flags&128)===0&&(Yt(u),u.subtreeFlags&6&&(u.flags|=8192)):Yt(u),p=u.updateQueue,p!==null&&Cm(u,p.retryQueue),p=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),y=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(y=u.memoizedState.cachePool.pool),y!==p&&(u.flags|=2048),a!==null&&X(ql),null;case 24:return p=null,a!==null&&(p=a.memoizedState.cache),u.memoizedState.cache!==p&&(u.flags|=2048),Ao(Sn),Yt(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function v9(a,u){switch(tx(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return Ao(Sn),fe(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return Ve(u),null;case 31:if(u.memoizedState!==null){if(si(u),u.alternate===null)throw Error(r(340));Fl()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 13:if(si(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(r(340));Fl()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return X(mn),null;case 4:return fe(),null;case 10:return Ao(u.type),null;case 22:case 23:return si(u),gx(),a!==null&&X(ql),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return Ao(Sn),null;case 25:return null;default:return null}}function uC(a,u){switch(tx(u),u.tag){case 3:Ao(Sn),fe();break;case 26:case 27:case 5:Ve(u);break;case 4:fe();break;case 31:u.memoizedState!==null&&si(u);break;case 13:si(u);break;case 19:X(mn);break;case 10:Ao(u.type);break;case 22:case 23:si(u),gx(),a!==null&&X(ql);break;case 24:Ao(Sn)}}function Pf(a,u){try{var p=u.updateQueue,y=p!==null?p.lastEffect:null;if(y!==null){var E=y.next;p=E;do{if((p.tag&a)===a){y=void 0;var A=p.create,H=p.inst;y=A(),H.destroy=y}p=p.next}while(p!==E)}}catch(Y){Lt(u,u.return,Y)}}function ja(a,u,p){try{var y=u.updateQueue,E=y!==null?y.lastEffect:null;if(E!==null){var A=E.next;y=A;do{if((y.tag&a)===a){var H=y.inst,Y=H.destroy;if(Y!==void 0){H.destroy=void 0,E=u;var re=p,me=Y;try{me()}catch(Se){Lt(E,re,Se)}}}y=y.next}while(y!==A)}}catch(Se){Lt(u,u.return,Se)}}function dC(a){var u=a.updateQueue;if(u!==null){var p=a.stateNode;try{t2(u,p)}catch(y){Lt(a,a.return,y)}}}function fC(a,u,p){p.props=Yl(a.type,a.memoizedProps),p.state=a.memoizedState;try{p.componentWillUnmount()}catch(y){Lt(a,u,y)}}function jf(a,u){try{var p=a.ref;if(p!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof p=="function"?a.refCleanup=p(y):p.current=y}}catch(E){Lt(a,u,E)}}function qs(a,u){var p=a.ref,y=a.refCleanup;if(p!==null)if(typeof y=="function")try{y()}catch(E){Lt(a,u,E)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof p=="function")try{p(null)}catch(E){Lt(a,u,E)}else p.current=null}function hC(a){var u=a.type,p=a.memoizedProps,y=a.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":p.autoFocus&&y.focus();break e;case"img":p.src?y.src=p.src:p.srcSet&&(y.srcset=p.srcSet)}}catch(E){Lt(a,a.return,E)}}function Wx(a,u,p){try{var y=a.stateNode;V9(y,a.type,p,u),y[Ln]=u}catch(E){Lt(a,a.return,E)}}function pC(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Va(a.type)||a.tag===4}function Yx(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||pC(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Va(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Xx(a,u,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?(p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p).insertBefore(a,u):(u=p.nodeType===9?p.body:p.nodeName==="HTML"?p.ownerDocument.body:p,u.appendChild(a),p=p._reactRootContainer,p!=null||u.onclick!==null||(u.onclick=Qi));else if(y!==4&&(y===27&&Va(a.type)&&(p=a.stateNode,u=null),a=a.child,a!==null))for(Xx(a,u,p),a=a.sibling;a!==null;)Xx(a,u,p),a=a.sibling}function Nm(a,u,p){var y=a.tag;if(y===5||y===6)a=a.stateNode,u?p.insertBefore(a,u):p.appendChild(a);else if(y!==4&&(y===27&&Va(a.type)&&(p=a.stateNode),a=a.child,a!==null))for(Nm(a,u,p),a=a.sibling;a!==null;)Nm(a,u,p),a=a.sibling}function mC(a){var u=a.stateNode,p=a.memoizedProps;try{for(var y=a.type,E=u.attributes;E.length;)u.removeAttributeNode(E[0]);rr(u,y,p),u[bn]=a,u[Ln]=p}catch(A){Lt(a,a.return,A)}}var Ro=!1,An=!1,Jx=!1,gC=typeof WeakSet=="function"?WeakSet:Set,Un=null;function x9(a,u){if(a=a.containerInfo,vb=Ym,a=NA(a),qv(a)){if("selectionStart"in a)var p={start:a.selectionStart,end:a.selectionEnd};else e:{p=(p=a.ownerDocument)&&p.defaultView||window;var y=p.getSelection&&p.getSelection();if(y&&y.rangeCount!==0){p=y.anchorNode;var E=y.anchorOffset,A=y.focusNode;y=y.focusOffset;try{p.nodeType,A.nodeType}catch{p=null;break e}var H=0,Y=-1,re=-1,me=0,Se=0,Ae=a,ye=null;t:for(;;){for(var _e;Ae!==p||E!==0&&Ae.nodeType!==3||(Y=H+E),Ae!==A||y!==0&&Ae.nodeType!==3||(re=H+y),Ae.nodeType===3&&(H+=Ae.nodeValue.length),(_e=Ae.firstChild)!==null;)ye=Ae,Ae=_e;for(;;){if(Ae===a)break t;if(ye===p&&++me===E&&(Y=H),ye===A&&++Se===y&&(re=H),(_e=Ae.nextSibling)!==null)break;Ae=ye,ye=Ae.parentNode}Ae=_e}p=Y===-1||re===-1?null:{start:Y,end:re}}else p=null}p=p||{start:0,end:0}}else p=null;for(xb={focusedElem:a,selectionRange:p},Ym=!1,Un=u;Un!==null;)if(u=Un,a=u.child,(u.subtreeFlags&1028)!==0&&a!==null)a.return=u,Un=a;else for(;Un!==null;){switch(u=Un,A=u.alternate,a=u.flags,u.tag){case 0:if((a&4)!==0&&(a=u.updateQueue,a=a!==null?a.events:null,a!==null))for(p=0;p<a.length;p++)E=a[p],E.ref.impl=E.nextImpl;break;case 11:case 15:break;case 1:if((a&1024)!==0&&A!==null){a=void 0,p=u,E=A.memoizedProps,A=A.memoizedState,y=p.stateNode;try{var $e=Yl(p.type,E);a=y.getSnapshotBeforeUpdate($e,A),y.__reactInternalSnapshotBeforeUpdate=a}catch(Ze){Lt(p,p.return,Ze)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,p=a.nodeType,p===9)wb(a);else if(p===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":wb(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=u.sibling,a!==null){a.return=u.return,Un=a;break}Un=u.return}}function yC(a,u,p){var y=p.flags;switch(p.tag){case 0:case 11:case 15:jo(a,p),y&4&&Pf(5,p);break;case 1:if(jo(a,p),y&4)if(a=p.stateNode,u===null)try{a.componentDidMount()}catch(H){Lt(p,p.return,H)}else{var E=Yl(p.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(E,u,a.__reactInternalSnapshotBeforeUpdate)}catch(H){Lt(p,p.return,H)}}y&64&&dC(p),y&512&&jf(p,p.return);break;case 3:if(jo(a,p),y&64&&(a=p.updateQueue,a!==null)){if(u=null,p.child!==null)switch(p.child.tag){case 27:case 5:u=p.child.stateNode;break;case 1:u=p.child.stateNode}try{t2(a,u)}catch(H){Lt(p,p.return,H)}}break;case 27:u===null&&y&4&&mC(p);case 26:case 5:jo(a,p),u===null&&y&4&&hC(p),y&512&&jf(p,p.return);break;case 12:jo(a,p);break;case 31:jo(a,p),y&4&&bC(a,p);break;case 13:jo(a,p),y&4&&_C(a,p),y&64&&(a=p.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(p=N9.bind(null,p),W9(a,p))));break;case 22:if(y=p.memoizedState!==null||Ro,!y){u=u!==null&&u.memoizedState!==null||An,E=Ro;var A=An;Ro=y,(An=u)&&!A?Mo(a,p,(p.subtreeFlags&8772)!==0):jo(a,p),Ro=E,An=A}break;case 30:break;default:jo(a,p)}}function vC(a){var u=a.alternate;u!==null&&(a.alternate=null,vC(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&qc(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var en=null,Br=!1;function Po(a,u,p){for(p=p.child;p!==null;)xC(a,u,p),p=p.sibling}function xC(a,u,p){if(ln&&typeof ln.onCommitFiberUnmount=="function")try{ln.onCommitFiberUnmount(Tt,p)}catch{}switch(p.tag){case 26:An||qs(p,u),Po(a,u,p),p.memoizedState?p.memoizedState.count--:p.stateNode&&(p=p.stateNode,p.parentNode.removeChild(p));break;case 27:An||qs(p,u);var y=en,E=Br;Va(p.type)&&(en=p.stateNode,Br=!1),Po(a,u,p),Bf(p.stateNode),en=y,Br=E;break;case 5:An||qs(p,u);case 6:if(y=en,E=Br,en=null,Po(a,u,p),en=y,Br=E,en!==null)if(Br)try{(en.nodeType===9?en.body:en.nodeName==="HTML"?en.ownerDocument.body:en).removeChild(p.stateNode)}catch(A){Lt(p,u,A)}else try{en.removeChild(p.stateNode)}catch(A){Lt(p,u,A)}break;case 18:en!==null&&(Br?(a=en,dN(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,p.stateNode),Nu(a)):dN(en,p.stateNode));break;case 4:y=en,E=Br,en=p.stateNode.containerInfo,Br=!0,Po(a,u,p),en=y,Br=E;break;case 0:case 11:case 14:case 15:ja(2,p,u),An||ja(4,p,u),Po(a,u,p);break;case 1:An||(qs(p,u),y=p.stateNode,typeof y.componentWillUnmount=="function"&&fC(p,u,y)),Po(a,u,p);break;case 21:Po(a,u,p);break;case 22:An=(y=An)||p.memoizedState!==null,Po(a,u,p),An=y;break;default:Po(a,u,p)}}function bC(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null))){a=a.dehydrated;try{Nu(a)}catch(p){Lt(u,u.return,p)}}}function _C(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Nu(a)}catch(p){Lt(u,u.return,p)}}function b9(a){switch(a.tag){case 31:case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new gC),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new gC),u;default:throw Error(r(435,a.tag))}}function km(a,u){var p=b9(a);u.forEach(function(y){if(!p.has(y)){p.add(y);var E=k9.bind(null,a,y);y.then(E,E)}})}function Hr(a,u){var p=u.deletions;if(p!==null)for(var y=0;y<p.length;y++){var E=p[y],A=a,H=u,Y=H;e:for(;Y!==null;){switch(Y.tag){case 27:if(Va(Y.type)){en=Y.stateNode,Br=!1;break e}break;case 5:en=Y.stateNode,Br=!1;break e;case 3:case 4:en=Y.stateNode.containerInfo,Br=!0;break e}Y=Y.return}if(en===null)throw Error(r(160));xC(A,H,E),en=null,Br=!1,A=E.alternate,A!==null&&(A.return=null),E.return=null}if(u.subtreeFlags&13886)for(u=u.child;u!==null;)wC(u,a),u=u.sibling}var is=null;function wC(a,u){var p=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Hr(u,a),qr(a),y&4&&(ja(3,a,a.return),Pf(3,a),ja(5,a,a.return));break;case 1:Hr(u,a),qr(a),y&512&&(An||p===null||qs(p,p.return)),y&64&&Ro&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(p=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=p===null?y:p.concat(y))));break;case 26:var E=is;if(Hr(u,a),qr(a),y&512&&(An||p===null||qs(p,p.return)),y&4){var A=p!==null?p.memoizedState:null;if(y=a.memoizedState,p===null)if(y===null)if(a.stateNode===null){e:{y=a.type,p=a.memoizedProps,E=E.ownerDocument||E;t:switch(y){case"title":A=E.getElementsByTagName("title")[0],(!A||A[Is]||A[bn]||A.namespaceURI==="http://www.w3.org/2000/svg"||A.hasAttribute("itemprop"))&&(A=E.createElement(y),E.head.insertBefore(A,E.querySelector("head > title"))),rr(A,y,p),A[bn]=a,_n(A),y=A;break e;case"link":var H=wN("link","href",E).get(y+(p.href||""));if(H){for(var Y=0;Y<H.length;Y++)if(A=H[Y],A.getAttribute("href")===(p.href==null||p.href===""?null:p.href)&&A.getAttribute("rel")===(p.rel==null?null:p.rel)&&A.getAttribute("title")===(p.title==null?null:p.title)&&A.getAttribute("crossorigin")===(p.crossOrigin==null?null:p.crossOrigin)){H.splice(Y,1);break t}}A=E.createElement(y),rr(A,y,p),E.head.appendChild(A);break;case"meta":if(H=wN("meta","content",E).get(y+(p.content||""))){for(Y=0;Y<H.length;Y++)if(A=H[Y],A.getAttribute("content")===(p.content==null?null:""+p.content)&&A.getAttribute("name")===(p.name==null?null:p.name)&&A.getAttribute("property")===(p.property==null?null:p.property)&&A.getAttribute("http-equiv")===(p.httpEquiv==null?null:p.httpEquiv)&&A.getAttribute("charset")===(p.charSet==null?null:p.charSet)){H.splice(Y,1);break t}}A=E.createElement(y),rr(A,y,p),E.head.appendChild(A);break;default:throw Error(r(468,y))}A[bn]=a,_n(A),y=A}a.stateNode=y}else SN(E,a.type,a.stateNode);else a.stateNode=_N(E,y,a.memoizedProps);else A!==y?(A===null?p.stateNode!==null&&(p=p.stateNode,p.parentNode.removeChild(p)):A.count--,y===null?SN(E,a.type,a.stateNode):_N(E,y,a.memoizedProps)):y===null&&a.stateNode!==null&&Wx(a,a.memoizedProps,p.memoizedProps)}break;case 27:Hr(u,a),qr(a),y&512&&(An||p===null||qs(p,p.return)),p!==null&&y&4&&Wx(a,a.memoizedProps,p.memoizedProps);break;case 5:if(Hr(u,a),qr(a),y&512&&(An||p===null||qs(p,p.return)),a.flags&32){E=a.stateNode;try{Fr(E,"")}catch($e){Lt(a,a.return,$e)}}y&4&&a.stateNode!=null&&(E=a.memoizedProps,Wx(a,E,p!==null?p.memoizedProps:E)),y&1024&&(Jx=!0);break;case 6:if(Hr(u,a),qr(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,p=a.stateNode;try{p.nodeValue=y}catch($e){Lt(a,a.return,$e)}}break;case 3:if($m=null,E=is,is=Hm(u.containerInfo),Hr(u,a),is=E,qr(a),y&4&&p!==null&&p.memoizedState.isDehydrated)try{Nu(u.containerInfo)}catch($e){Lt(a,a.return,$e)}Jx&&(Jx=!1,SC(a));break;case 4:y=is,is=Hm(a.stateNode.containerInfo),Hr(u,a),qr(a),is=y;break;case 12:Hr(u,a),qr(a);break;case 31:Hr(u,a),qr(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,km(a,y)));break;case 13:Hr(u,a),qr(a),a.child.flags&8192&&a.memoizedState!==null!=(p!==null&&p.memoizedState!==null)&&(Rm=Le()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,km(a,y)));break;case 22:E=a.memoizedState!==null;var re=p!==null&&p.memoizedState!==null,me=Ro,Se=An;if(Ro=me||E,An=Se||re,Hr(u,a),An=Se,Ro=me,qr(a),y&8192)e:for(u=a.stateNode,u._visibility=E?u._visibility&-2:u._visibility|1,E&&(p===null||re||Ro||An||Xl(a)),p=null,u=a;;){if(u.tag===5||u.tag===26){if(p===null){re=p=u;try{if(A=re.stateNode,E)H=A.style,typeof H.setProperty=="function"?H.setProperty("display","none","important"):H.display="none";else{Y=re.stateNode;var Ae=re.memoizedProps.style,ye=Ae!=null&&Ae.hasOwnProperty("display")?Ae.display:null;Y.style.display=ye==null||typeof ye=="boolean"?"":(""+ye).trim()}}catch($e){Lt(re,re.return,$e)}}}else if(u.tag===6){if(p===null){re=u;try{re.stateNode.nodeValue=E?"":re.memoizedProps}catch($e){Lt(re,re.return,$e)}}}else if(u.tag===18){if(p===null){re=u;try{var _e=re.stateNode;E?fN(_e,!0):fN(re.stateNode,!1)}catch($e){Lt(re,re.return,$e)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;p===u&&(p=null),u=u.return}p===u&&(p=null),u.sibling.return=u.return,u=u.sibling}y&4&&(y=a.updateQueue,y!==null&&(p=y.retryQueue,p!==null&&(y.retryQueue=null,km(a,p))));break;case 19:Hr(u,a),qr(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,km(a,y)));break;case 30:break;case 21:break;default:Hr(u,a),qr(a)}}function qr(a){var u=a.flags;if(u&2){try{for(var p,y=a.return;y!==null;){if(pC(y)){p=y;break}y=y.return}if(p==null)throw Error(r(160));switch(p.tag){case 27:var E=p.stateNode,A=Yx(a);Nm(a,A,E);break;case 5:var H=p.stateNode;p.flags&32&&(Fr(H,""),p.flags&=-33);var Y=Yx(a);Nm(a,Y,H);break;case 3:case 4:var re=p.stateNode.containerInfo,me=Yx(a);Xx(a,me,re);break;default:throw Error(r(161))}}catch(Se){Lt(a,a.return,Se)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function SC(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;SC(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function jo(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)yC(a,u.alternate,u),u=u.sibling}function Xl(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:ja(4,u,u.return),Xl(u);break;case 1:qs(u,u.return);var p=u.stateNode;typeof p.componentWillUnmount=="function"&&fC(u,u.return,p),Xl(u);break;case 27:Bf(u.stateNode);case 26:case 5:qs(u,u.return),Xl(u);break;case 22:u.memoizedState===null&&Xl(u);break;case 30:Xl(u);break;default:Xl(u)}a=a.sibling}}function Mo(a,u,p){for(p=p&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var y=u.alternate,E=a,A=u,H=A.flags;switch(A.tag){case 0:case 11:case 15:Mo(E,A,p),Pf(4,A);break;case 1:if(Mo(E,A,p),y=A,E=y.stateNode,typeof E.componentDidMount=="function")try{E.componentDidMount()}catch(me){Lt(y,y.return,me)}if(y=A,E=y.updateQueue,E!==null){var Y=y.stateNode;try{var re=E.shared.hiddenCallbacks;if(re!==null)for(E.shared.hiddenCallbacks=null,E=0;E<re.length;E++)e2(re[E],Y)}catch(me){Lt(y,y.return,me)}}p&&H&64&&dC(A),jf(A,A.return);break;case 27:mC(A);case 26:case 5:Mo(E,A,p),p&&y===null&&H&4&&hC(A),jf(A,A.return);break;case 12:Mo(E,A,p);break;case 31:Mo(E,A,p),p&&H&4&&bC(E,A);break;case 13:Mo(E,A,p),p&&H&4&&_C(E,A);break;case 22:A.memoizedState===null&&Mo(E,A,p),jf(A,A.return);break;case 30:break;default:Mo(E,A,p)}u=u.sibling}}function Qx(a,u){var p=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(p=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==p&&(a!=null&&a.refCount++,p!=null&&xf(p))}function Zx(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&xf(a))}function ss(a,u,p,y){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)TC(a,u,p,y),u=u.sibling}function TC(a,u,p,y){var E=u.flags;switch(u.tag){case 0:case 11:case 15:ss(a,u,p,y),E&2048&&Pf(9,u);break;case 1:ss(a,u,p,y);break;case 3:ss(a,u,p,y),E&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&xf(a)));break;case 12:if(E&2048){ss(a,u,p,y),a=u.stateNode;try{var A=u.memoizedProps,H=A.id,Y=A.onPostCommit;typeof Y=="function"&&Y(H,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(re){Lt(u,u.return,re)}}else ss(a,u,p,y);break;case 31:ss(a,u,p,y);break;case 13:ss(a,u,p,y);break;case 23:break;case 22:A=u.stateNode,H=u.alternate,u.memoizedState!==null?A._visibility&2?ss(a,u,p,y):Mf(a,u):A._visibility&2?ss(a,u,p,y):(A._visibility|=2,yu(a,u,p,y,(u.subtreeFlags&10256)!==0||!1)),E&2048&&Qx(H,u);break;case 24:ss(a,u,p,y),E&2048&&Zx(u.alternate,u);break;default:ss(a,u,p,y)}}function yu(a,u,p,y,E){for(E=E&&((u.subtreeFlags&10256)!==0||!1),u=u.child;u!==null;){var A=a,H=u,Y=p,re=y,me=H.flags;switch(H.tag){case 0:case 11:case 15:yu(A,H,Y,re,E),Pf(8,H);break;case 23:break;case 22:var Se=H.stateNode;H.memoizedState!==null?Se._visibility&2?yu(A,H,Y,re,E):Mf(A,H):(Se._visibility|=2,yu(A,H,Y,re,E)),E&&me&2048&&Qx(H.alternate,H);break;case 24:yu(A,H,Y,re,E),E&&me&2048&&Zx(H.alternate,H);break;default:yu(A,H,Y,re,E)}u=u.sibling}}function Mf(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var p=a,y=u,E=y.flags;switch(y.tag){case 22:Mf(p,y),E&2048&&Qx(y.alternate,y);break;case 24:Mf(p,y),E&2048&&Zx(y.alternate,y);break;default:Mf(p,y)}u=u.sibling}}var Df=8192;function vu(a,u,p){if(a.subtreeFlags&Df)for(a=a.child;a!==null;)EC(a,u,p),a=a.sibling}function EC(a,u,p){switch(a.tag){case 26:vu(a,u,p),a.flags&Df&&a.memoizedState!==null&&oF(p,is,a.memoizedState,a.memoizedProps);break;case 5:vu(a,u,p);break;case 3:case 4:var y=is;is=Hm(a.stateNode.containerInfo),vu(a,u,p),is=y;break;case 22:a.memoizedState===null&&(y=a.alternate,y!==null&&y.memoizedState!==null?(y=Df,Df=16777216,vu(a,u,p),Df=y):vu(a,u,p));break;default:vu(a,u,p)}}function AC(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function Of(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Un=y,NC(y,a)}AC(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)CC(a),a=a.sibling}function CC(a){switch(a.tag){case 0:case 11:case 15:Of(a),a.flags&2048&&ja(9,a,a.return);break;case 3:Of(a);break;case 12:Of(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,Im(a)):Of(a);break;default:Of(a)}}function Im(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var p=0;p<u.length;p++){var y=u[p];Un=y,NC(y,a)}AC(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:ja(8,u,u.return),Im(u);break;case 22:p=u.stateNode,p._visibility&2&&(p._visibility&=-3,Im(u));break;default:Im(u)}a=a.sibling}}function NC(a,u){for(;Un!==null;){var p=Un;switch(p.tag){case 0:case 11:case 15:ja(8,p,u);break;case 23:case 22:if(p.memoizedState!==null&&p.memoizedState.cachePool!==null){var y=p.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:xf(p.memoizedState.cache)}if(y=p.child,y!==null)y.return=p,Un=y;else e:for(p=a;Un!==null;){y=Un;var E=y.sibling,A=y.return;if(vC(y),y===p){Un=null;break e}if(E!==null){E.return=A,Un=E;break e}Un=A}}}var _9={getCacheForType:function(a){var u=tr(Sn),p=u.data.get(a);return p===void 0&&(p=a(),u.data.set(a,p)),p},cacheSignal:function(){return tr(Sn).controller.signal}},w9=typeof WeakMap=="function"?WeakMap:Map,jt=0,qt=null,ht=null,mt=0,Ot=0,oi=null,Ma=!1,xu=!1,eb=!1,Do=0,un=0,Da=0,Jl=0,tb=0,ai=0,bu=0,Lf=null,$r=null,nb=!1,Rm=0,kC=0,Pm=1/0,jm=null,Oa=null,Rn=0,La=null,_u=null,Oo=0,rb=0,ib=null,IC=null,zf=0,sb=null;function li(){return(jt&2)!==0&&mt!==0?mt&-mt:W.T!==null?db():Mp()}function RC(){if(ai===0)if((mt&536870912)===0||bt){var a=As;As<<=1,(As&3932160)===0&&(As=262144),ai=a}else ai=536870912;return a=ii.current,a!==null&&(a.flags|=32),ai}function Gr(a,u,p){(a===qt&&(Ot===2||Ot===9)||a.cancelPendingCommit!==null)&&(wu(a,0),za(a,mt,ai,!1)),El(a,p),((jt&2)===0||a!==qt)&&(a===qt&&((jt&2)===0&&(Jl|=p),un===4&&za(a,mt,ai,!1)),$s(a))}function PC(a,u,p){if((jt&6)!==0)throw Error(r(327));var y=!p&&(u&127)===0&&(u&a.expiredLanes)===0||Yi(a,u),E=y?E9(a,u):ab(a,u,!0),A=y;do{if(E===0){xu&&!y&&za(a,u,0,!1);break}else{if(p=a.current.alternate,A&&!S9(p)){E=ab(a,u,!1),A=!1;continue}if(E===2){if(A=u,a.errorRecoveryDisabledLanes&A)var H=0;else H=a.pendingLanes&-536870913,H=H!==0?H:H&536870912?536870912:0;if(H!==0){u=H;e:{var Y=a;E=Lf;var re=Y.current.memoizedState.isDehydrated;if(re&&(wu(Y,H).flags|=256),H=ab(Y,H,!1),H!==2){if(eb&&!re){Y.errorRecoveryDisabledLanes|=A,Jl|=A,E=4;break e}A=$r,$r=E,A!==null&&($r===null?$r=A:$r.push.apply($r,A))}E=H}if(A=!1,E!==2)continue}}if(E===1){wu(a,0),za(a,u,0,!0);break}e:{switch(y=a,A=E,A){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:za(y,u,ai,!Ma);break e;case 2:$r=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(E=Rm+300-Le(),10<E)){if(za(y,u,ai,!Ma),Cs(y,0,!0)!==0)break e;Oo=u,y.timeoutHandle=cN(jC.bind(null,y,p,$r,jm,nb,u,ai,Jl,bu,Ma,A,"Throttled",-0,0),E);break e}jC(y,p,$r,jm,nb,u,ai,Jl,bu,Ma,A,null,-0,0)}}break}while(!0);$s(a)}function jC(a,u,p,y,E,A,H,Y,re,me,Se,Ae,ye,_e){if(a.timeoutHandle=-1,Ae=u.subtreeFlags,Ae&8192||(Ae&16785408)===16785408){Ae={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Qi},EC(u,A,Ae);var $e=(A&62914560)===A?Rm-Le():(A&4194048)===A?kC-Le():0;if($e=aF(Ae,$e),$e!==null){Oo=A,a.cancelPendingCommit=$e(FC.bind(null,a,u,A,p,y,E,H,Y,re,Se,Ae,null,ye,_e)),za(a,A,H,!me);return}}FC(a,u,A,p,y,E,H,Y,re)}function S9(a){for(var u=a;;){var p=u.tag;if((p===0||p===11||p===15)&&u.flags&16384&&(p=u.updateQueue,p!==null&&(p=p.stores,p!==null)))for(var y=0;y<p.length;y++){var E=p[y],A=E.getSnapshot;E=E.value;try{if(!ni(A(),E))return!1}catch{return!1}}if(p=u.child,u.subtreeFlags&16384&&p!==null)p.return=u,u=p;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function za(a,u,p,y){u&=~tb,u&=~Jl,a.suspendedLanes|=u,a.pingedLanes&=~u,y&&(a.warmLanes|=u),y=a.expirationTimes;for(var E=u;0<E;){var A=31-Rt(E),H=1<<A;y[A]=-1,E&=~H}p!==0&&Al(a,p,u)}function Mm(){return(jt&6)===0?(Uf(0),!1):!0}function ob(){if(ht!==null){if(Ot===0)var a=ht.return;else a=ht,Eo=Bl=null,wx(a),fu=null,_f=0,a=ht;for(;a!==null;)uC(a.alternate,a),a=a.return;ht=null}}function wu(a,u){var p=a.timeoutHandle;p!==-1&&(a.timeoutHandle=-1,H9(p)),p=a.cancelPendingCommit,p!==null&&(a.cancelPendingCommit=null,p()),Oo=0,ob(),qt=a,ht=p=So(a.current,null),mt=u,Ot=0,oi=null,Ma=!1,xu=Yi(a,u),eb=!1,bu=ai=tb=Jl=Da=un=0,$r=Lf=null,nb=!1,(u&8)!==0&&(u|=u&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=u;0<y;){var E=31-Rt(y),A=1<<E;u|=a[E],y&=~A}return Do=u,tm(),p}function MC(a,u){ut=null,W.H=kf,u===du||u===cm?(u=XA(),Ot=3):u===ux?(u=XA(),Ot=4):Ot=u===zx?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,oi=u,ht===null&&(un=1,Sm(a,Ci(u,a.current)))}function DC(){var a=ii.current;return a===null?!0:(mt&4194048)===mt?Ri===null:(mt&62914560)===mt||(mt&536870912)!==0?a===Ri:!1}function OC(){var a=W.H;return W.H=kf,a===null?kf:a}function LC(){var a=W.A;return W.A=_9,a}function Dm(){un=4,Ma||(mt&4194048)!==mt&&ii.current!==null||(xu=!0),(Da&134217727)===0&&(Jl&134217727)===0||qt===null||za(qt,mt,ai,!1)}function ab(a,u,p){var y=jt;jt|=2;var E=OC(),A=LC();(qt!==a||mt!==u)&&(jm=null,wu(a,u)),u=!1;var H=un;e:do try{if(Ot!==0&&ht!==null){var Y=ht,re=oi;switch(Ot){case 8:ob(),H=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(u=!0);var me=Ot;if(Ot=0,oi=null,Su(a,Y,re,me),p&&xu){H=0;break e}break;default:me=Ot,Ot=0,oi=null,Su(a,Y,re,me)}}T9(),H=un;break}catch(Se){MC(a,Se)}while(!0);return u&&a.shellSuspendCounter++,Eo=Bl=null,jt=y,W.H=E,W.A=A,ht===null&&(qt=null,mt=0,tm()),H}function T9(){for(;ht!==null;)zC(ht)}function E9(a,u){var p=jt;jt|=2;var y=OC(),E=LC();qt!==a||mt!==u?(jm=null,Pm=Le()+500,wu(a,u)):xu=Yi(a,u);e:do try{if(Ot!==0&&ht!==null){u=ht;var A=oi;t:switch(Ot){case 1:Ot=0,oi=null,Su(a,u,A,1);break;case 2:case 9:if(WA(A)){Ot=0,oi=null,UC(u);break}u=function(){Ot!==2&&Ot!==9||qt!==a||(Ot=7),$s(a)},A.then(u,u);break e;case 3:Ot=7;break e;case 4:Ot=5;break e;case 7:WA(A)?(Ot=0,oi=null,UC(u)):(Ot=0,oi=null,Su(a,u,A,7));break;case 5:var H=null;switch(ht.tag){case 26:H=ht.memoizedState;case 5:case 27:var Y=ht;if(H?TN(H):Y.stateNode.complete){Ot=0,oi=null;var re=Y.sibling;if(re!==null)ht=re;else{var me=Y.return;me!==null?(ht=me,Om(me)):ht=null}break t}}Ot=0,oi=null,Su(a,u,A,5);break;case 6:Ot=0,oi=null,Su(a,u,A,6);break;case 8:ob(),un=6;break e;default:throw Error(r(462))}}A9();break}catch(Se){MC(a,Se)}while(!0);return Eo=Bl=null,W.H=y,W.A=E,jt=p,ht!==null?0:(qt=null,mt=0,tm(),un)}function A9(){for(;ht!==null&&!ge();)zC(ht)}function zC(a){var u=lC(a.alternate,a,Do);a.memoizedProps=a.pendingProps,u===null?Om(a):ht=u}function UC(a){var u=a,p=u.alternate;switch(u.tag){case 15:case 0:u=nC(p,u,u.pendingProps,u.type,void 0,mt);break;case 11:u=nC(p,u,u.pendingProps,u.type.render,u.ref,mt);break;case 5:wx(u);default:uC(p,u),u=ht=LA(u,Do),u=lC(p,u,Do)}a.memoizedProps=a.pendingProps,u===null?Om(a):ht=u}function Su(a,u,p,y){Eo=Bl=null,wx(u),fu=null,_f=0;var E=u.return;try{if(p9(a,E,u,p,mt)){un=1,Sm(a,Ci(p,a.current)),ht=null;return}}catch(A){if(E!==null)throw ht=E,A;un=1,Sm(a,Ci(p,a.current)),ht=null;return}u.flags&32768?(bt||y===1?a=!0:xu||(mt&536870912)!==0?a=!1:(Ma=a=!0,(y===2||y===9||y===3||y===6)&&(y=ii.current,y!==null&&y.tag===13&&(y.flags|=16384))),VC(u,a)):Om(u)}function Om(a){var u=a;do{if((u.flags&32768)!==0){VC(u,Ma);return}a=u.return;var p=y9(u.alternate,u,Do);if(p!==null){ht=p;return}if(u=u.sibling,u!==null){ht=u;return}ht=u=a}while(u!==null);un===0&&(un=5)}function VC(a,u){do{var p=v9(a.alternate,a);if(p!==null){p.flags&=32767,ht=p;return}if(p=a.return,p!==null&&(p.flags|=32768,p.subtreeFlags=0,p.deletions=null),!u&&(a=a.sibling,a!==null)){ht=a;return}ht=a=p}while(a!==null);un=6,ht=null}function FC(a,u,p,y,E,A,H,Y,re){a.cancelPendingCommit=null;do Lm();while(Rn!==0);if((jt&6)!==0)throw Error(r(327));if(u!==null){if(u===a.current)throw Error(r(177));if(A=u.lanes|u.childLanes,A|=Yv,Vv(a,p,A,H,Y,re),a===qt&&(ht=qt=null,mt=0),_u=u,La=a,Oo=p,rb=A,ib=E,IC=y,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,I9(lt,function(){return GC(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||y){y=W.T,W.T=null,E=K.p,K.p=2,H=jt,jt|=4;try{x9(a,u,p)}finally{jt=H,K.p=E,W.T=y}}Rn=1,BC(),HC(),qC()}}function BC(){if(Rn===1){Rn=0;var a=La,u=_u,p=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||p){p=W.T,W.T=null;var y=K.p;K.p=2;var E=jt;jt|=4;try{wC(u,a);var A=xb,H=NA(a.containerInfo),Y=A.focusedElem,re=A.selectionRange;if(H!==Y&&Y&&Y.ownerDocument&&CA(Y.ownerDocument.documentElement,Y)){if(re!==null&&qv(Y)){var me=re.start,Se=re.end;if(Se===void 0&&(Se=me),"selectionStart"in Y)Y.selectionStart=me,Y.selectionEnd=Math.min(Se,Y.value.length);else{var Ae=Y.ownerDocument||document,ye=Ae&&Ae.defaultView||window;if(ye.getSelection){var _e=ye.getSelection(),$e=Y.textContent.length,Ze=Math.min(re.start,$e),Ht=re.end===void 0?Ze:Math.min(re.end,$e);!_e.extend&&Ze>Ht&&(H=Ht,Ht=Ze,Ze=H);var ue=AA(Y,Ze),se=AA(Y,Ht);if(ue&&se&&(_e.rangeCount!==1||_e.anchorNode!==ue.node||_e.anchorOffset!==ue.offset||_e.focusNode!==se.node||_e.focusOffset!==se.offset)){var pe=Ae.createRange();pe.setStart(ue.node,ue.offset),_e.removeAllRanges(),Ze>Ht?(_e.addRange(pe),_e.extend(se.node,se.offset)):(pe.setEnd(se.node,se.offset),_e.addRange(pe))}}}}for(Ae=[],_e=Y;_e=_e.parentNode;)_e.nodeType===1&&Ae.push({element:_e,left:_e.scrollLeft,top:_e.scrollTop});for(typeof Y.focus=="function"&&Y.focus(),Y=0;Y<Ae.length;Y++){var Ee=Ae[Y];Ee.element.scrollLeft=Ee.left,Ee.element.scrollTop=Ee.top}}Ym=!!vb,xb=vb=null}finally{jt=E,K.p=y,W.T=p}}a.current=u,Rn=2}}function HC(){if(Rn===2){Rn=0;var a=La,u=_u,p=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||p){p=W.T,W.T=null;var y=K.p;K.p=2;var E=jt;jt|=4;try{yC(a,u.alternate,u)}finally{jt=E,K.p=y,W.T=p}}Rn=3}}function qC(){if(Rn===4||Rn===3){Rn=0,Me();var a=La,u=_u,p=Oo,y=IC;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?Rn=5:(Rn=0,_u=La=null,$C(a,a.pendingLanes));var E=a.pendingLanes;if(E===0&&(Oa=null),xo(p),u=u.stateNode,ln&&typeof ln.onCommitFiberRoot=="function")try{ln.onCommitFiberRoot(Tt,u,void 0,(u.current.flags&128)===128)}catch{}if(y!==null){u=W.T,E=K.p,K.p=2,W.T=null;try{for(var A=a.onRecoverableError,H=0;H<y.length;H++){var Y=y[H];A(Y.value,{componentStack:Y.stack})}}finally{W.T=u,K.p=E}}(Oo&3)!==0&&Lm(),$s(a),E=a.pendingLanes,(p&261930)!==0&&(E&42)!==0?a===sb?zf++:(zf=0,sb=a):zf=0,Uf(0)}}function $C(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,xf(u)))}function Lm(){return BC(),HC(),qC(),GC()}function GC(){if(Rn!==5)return!1;var a=La,u=rb;rb=0;var p=xo(Oo),y=W.T,E=K.p;try{K.p=32>p?32:p,W.T=null,p=ib,ib=null;var A=La,H=Oo;if(Rn=0,_u=La=null,Oo=0,(jt&6)!==0)throw Error(r(331));var Y=jt;if(jt|=4,CC(A.current),TC(A,A.current,H,p),jt=Y,Uf(0,!1),ln&&typeof ln.onPostCommitFiberRoot=="function")try{ln.onPostCommitFiberRoot(Tt,A)}catch{}return!0}finally{K.p=E,W.T=y,$C(a,u)}}function KC(a,u,p){u=Ci(p,u),u=Lx(a.stateNode,u,2),a=Ia(a,u,2),a!==null&&(El(a,2),$s(a))}function Lt(a,u,p){if(a.tag===3)KC(a,a,p);else for(;u!==null;){if(u.tag===3){KC(u,a,p);break}else if(u.tag===1){var y=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Oa===null||!Oa.has(y))){a=Ci(p,a),p=W2(2),y=Ia(u,p,2),y!==null&&(Y2(p,y,u,a),El(y,2),$s(y));break}}u=u.return}}function lb(a,u,p){var y=a.pingCache;if(y===null){y=a.pingCache=new w9;var E=new Set;y.set(u,E)}else E=y.get(u),E===void 0&&(E=new Set,y.set(u,E));E.has(p)||(eb=!0,E.add(p),a=C9.bind(null,a,u,p),u.then(a,a))}function C9(a,u,p){var y=a.pingCache;y!==null&&y.delete(u),a.pingedLanes|=a.suspendedLanes&p,a.warmLanes&=~p,qt===a&&(mt&p)===p&&(un===4||un===3&&(mt&62914560)===mt&&300>Le()-Rm?(jt&2)===0&&wu(a,0):tb|=p,bu===mt&&(bu=0)),$s(a)}function WC(a,u){u===0&&(u=jp()),a=Ul(a,u),a!==null&&(El(a,u),$s(a))}function N9(a){var u=a.memoizedState,p=0;u!==null&&(p=u.retryLane),WC(a,p)}function k9(a,u){var p=0;switch(a.tag){case 31:case 13:var y=a.stateNode,E=a.memoizedState;E!==null&&(p=E.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(u),WC(a,p)}function I9(a,u){return Te(a,u)}var zm=null,Tu=null,cb=!1,Um=!1,ub=!1,Ua=0;function $s(a){a!==Tu&&a.next===null&&(Tu===null?zm=Tu=a:Tu=Tu.next=a),Um=!0,cb||(cb=!0,P9())}function Uf(a,u){if(!ub&&Um){ub=!0;do for(var p=!1,y=zm;y!==null;){if(a!==0){var E=y.pendingLanes;if(E===0)var A=0;else{var H=y.suspendedLanes,Y=y.pingedLanes;A=(1<<31-Rt(42|a)+1)-1,A&=E&~(H&~Y),A=A&201326741?A&201326741|1:A?A|2:0}A!==0&&(p=!0,QC(y,A))}else A=mt,A=Cs(y,y===qt?A:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(A&3)===0||Yi(y,A)||(p=!0,QC(y,A));y=y.next}while(p);ub=!1}}function R9(){YC()}function YC(){Um=cb=!1;var a=0;Ua!==0&&B9()&&(a=Ua);for(var u=Le(),p=null,y=zm;y!==null;){var E=y.next,A=XC(y,u);A===0?(y.next=null,p===null?zm=E:p.next=E,E===null&&(Tu=p)):(p=y,(a!==0||(A&3)!==0)&&(Um=!0)),y=E}Rn!==0&&Rn!==5||Uf(a),Ua!==0&&(Ua=0)}function XC(a,u){for(var p=a.suspendedLanes,y=a.pingedLanes,E=a.expirationTimes,A=a.pendingLanes&-62914561;0<A;){var H=31-Rt(A),Y=1<<H,re=E[H];re===-1?((Y&p)===0||(Y&y)!==0)&&(E[H]=Uv(Y,u)):re<=u&&(a.expiredLanes|=Y),A&=~Y}if(u=qt,p=mt,p=Cs(a,a===u?p:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,p===0||a===u&&(Ot===2||Ot===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&Re(y),a.callbackNode=null,a.callbackPriority=0;if((p&3)===0||Yi(a,p)){if(u=p&-p,u===a.callbackPriority)return u;switch(y!==null&&Re(y),xo(p)){case 2:case 8:p=Et;break;case 32:p=lt;break;case 268435456:p=Ts;break;default:p=lt}return y=JC.bind(null,a),p=Te(p,y),a.callbackPriority=u,a.callbackNode=p,u}return y!==null&&y!==null&&Re(y),a.callbackPriority=2,a.callbackNode=null,2}function JC(a,u){if(Rn!==0&&Rn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var p=a.callbackNode;if(Lm()&&a.callbackNode!==p)return null;var y=mt;return y=Cs(a,a===qt?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(PC(a,y,u),XC(a,Le()),a.callbackNode!=null&&a.callbackNode===p?JC.bind(null,a):null)}function QC(a,u){if(Lm())return null;PC(a,u,!0)}function P9(){q9(function(){(jt&6)!==0?Te(We,R9):YC()})}function db(){if(Ua===0){var a=cu;a===0&&(a=_i,_i<<=1,(_i&261888)===0&&(_i=256)),Ua=a}return Ua}function ZC(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Wc(""+a)}function eN(a,u){var p=u.ownerDocument.createElement("input");return p.name=u.name,p.value=u.value,a.id&&p.setAttribute("form",a.id),u.parentNode.insertBefore(p,u),a=new FormData(a),p.parentNode.removeChild(p),a}function j9(a,u,p,y,E){if(u==="submit"&&p&&p.stateNode===E){var A=ZC((E[Ln]||null).action),H=y.submitter;H&&(u=(u=H[Ln]||null)?ZC(u.formAction):H.getAttribute("formAction"),u!==null&&(A=u,H=null));var Y=new zs("action","action",null,y,E);a.push({event:Y,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Ua!==0){var re=H?eN(E,H):new FormData(E);Rx(p,{pending:!0,data:re,method:E.method,action:A},null,re)}}else typeof A=="function"&&(Y.preventDefault(),re=H?eN(E,H):new FormData(E),Rx(p,{pending:!0,data:re,method:E.method,action:A},A,re))},currentTarget:E}]})}}for(var fb=0;fb<Wv.length;fb++){var hb=Wv[fb],M9=hb.toLowerCase(),D9=hb[0].toUpperCase()+hb.slice(1);rs(M9,"on"+D9)}rs(RA,"onAnimationEnd"),rs(PA,"onAnimationIteration"),rs(jA,"onAnimationStart"),rs("dblclick","onDoubleClick"),rs("focusin","onFocus"),rs("focusout","onBlur"),rs(JV,"onTransitionRun"),rs(QV,"onTransitionStart"),rs(ZV,"onTransitionCancel"),rs(MA,"onTransitionEnd"),Ms("onMouseEnter",["mouseout","mouseover"]),Ms("onMouseLeave",["mouseout","mouseover"]),Ms("onPointerEnter",["pointerout","pointerover"]),Ms("onPointerLeave",["pointerout","pointerover"]),js("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),js("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),js("onBeforeInput",["compositionend","keypress","textInput","paste"]),js("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),js("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Vf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),O9=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Vf));function tN(a,u){u=(u&4)!==0;for(var p=0;p<a.length;p++){var y=a[p],E=y.event;y=y.listeners;e:{var A=void 0;if(u)for(var H=y.length-1;0<=H;H--){var Y=y[H],re=Y.instance,me=Y.currentTarget;if(Y=Y.listener,re!==A&&E.isPropagationStopped())break e;A=Y,E.currentTarget=me;try{A(E)}catch(Se){em(Se)}E.currentTarget=null,A=re}else for(H=0;H<y.length;H++){if(Y=y[H],re=Y.instance,me=Y.currentTarget,Y=Y.listener,re!==A&&E.isPropagationStopped())break e;A=Y,E.currentTarget=me;try{A(E)}catch(Se){em(Se)}E.currentTarget=null,A=re}}}}function pt(a,u){var p=u[Hc];p===void 0&&(p=u[Hc]=new Set);var y=a+"__bubble";p.has(y)||(nN(u,a,2,!1),p.add(y))}function pb(a,u,p){var y=0;u&&(y|=4),nN(p,a,y,u)}var Vm="_reactListening"+Math.random().toString(36).slice(2);function mb(a){if(!a[Vm]){a[Vm]=!0,Jd.forEach(function(p){p!=="selectionchange"&&(O9.has(p)||pb(p,!1,a),pb(p,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[Vm]||(u[Vm]=!0,pb("selectionchange",!1,u))}}function nN(a,u,p,y){switch(RN(u)){case 2:var E=uF;break;case 8:E=dF;break;default:E=Ib}p=E.bind(null,u,p,a),E=void 0,!Rl||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(E=!0),y?E!==void 0?a.addEventListener(u,p,{capture:!0,passive:E}):a.addEventListener(u,p,!0):E!==void 0?a.addEventListener(u,p,{passive:E}):a.addEventListener(u,p,!1)}function gb(a,u,p,y,E){var A=y;if((u&1)===0&&(u&2)===0&&y!==null)e:for(;;){if(y===null)return;var H=y.tag;if(H===3||H===4){var Y=y.stateNode.containerInfo;if(Y===E)break;if(H===4)for(H=y.return;H!==null;){var re=H.tag;if((re===3||re===4)&&H.stateNode.containerInfo===E)return;H=H.return}for(;Y!==null;){if(H=Rs(Y),H===null)return;if(re=H.tag,re===5||re===6||re===26||re===27){y=A=H;continue e}Y=Y.parentNode}}y=y.return}ba(function(){var me=A,Se=Si(p),Ae=[];e:{var ye=DA.get(a);if(ye!==void 0){var _e=zs,$e=a;switch(a){case"keypress":if(jl(p)===0)break e;case"keydown":case"keyup":_e=Jp;break;case"focusin":$e="focus",_e=Dl;break;case"focusout":$e="blur",_e=Dl;break;case"beforeblur":case"afterblur":_e=Dl;break;case"click":if(p.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":_e=df;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":_e=Bp;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":_e=V;break;case RA:case PA:case jA:_e=qp;break;case MA:_e=J;break;case"scroll":case"scrollend":_e=uf;break;case"wheel":_e=be;break;case"copy":case"cut":case"paste":_e=$p;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":_e=wo;break;case"toggle":case"beforetoggle":_e=ct}var Ze=(u&4)!==0,Ht=!Ze&&(a==="scroll"||a==="scrollend"),ue=Ze?ye!==null?ye+"Capture":null:ye;Ze=[];for(var se=me,pe;se!==null;){var Ee=se;if(pe=Ee.stateNode,Ee=Ee.tag,Ee!==5&&Ee!==26&&Ee!==27||pe===null||ue===null||(Ee=Zi(se,ue),Ee!=null&&Ze.push(Ff(se,Ee,pe))),Ht)break;se=se.return}0<Ze.length&&(ye=new _e(ye,$e,null,p,Se),Ae.push({event:ye,listeners:Ze}))}}if((u&7)===0){e:{if(ye=a==="mouseover"||a==="pointerover",_e=a==="mouseout"||a==="pointerout",ye&&p!==af&&($e=p.relatedTarget||p.fromElement)&&(Rs($e)||$e[ks]))break e;if((_e||ye)&&(ye=Se.window===Se?Se:(ye=Se.ownerDocument)?ye.defaultView||ye.parentWindow:window,_e?($e=p.relatedTarget||p.toElement,_e=me,$e=$e?Rs($e):null,$e!==null&&(Ht=s($e),Ze=$e.tag,$e!==Ht||Ze!==5&&Ze!==27&&Ze!==6)&&($e=null)):(_e=null,$e=me),_e!==$e)){if(Ze=df,Ee="onMouseLeave",ue="onMouseEnter",se="mouse",(a==="pointerout"||a==="pointerover")&&(Ze=wo,Ee="onPointerLeave",ue="onPointerEnter",se="pointer"),Ht=_e==null?ye:ei(_e),pe=$e==null?ye:ei($e),ye=new Ze(Ee,se+"leave",_e,p,Se),ye.target=Ht,ye.relatedTarget=pe,Ee=null,Rs(Se)===me&&(Ze=new Ze(ue,se+"enter",$e,p,Se),Ze.target=pe,Ze.relatedTarget=Ht,Ee=Ze),Ht=Ee,_e&&$e)t:{for(Ze=L9,ue=_e,se=$e,pe=0,Ee=ue;Ee;Ee=Ze(Ee))pe++;Ee=0;for(var Xe=se;Xe;Xe=Ze(Xe))Ee++;for(;0<pe-Ee;)ue=Ze(ue),pe--;for(;0<Ee-pe;)se=Ze(se),Ee--;for(;pe--;){if(ue===se||se!==null&&ue===se.alternate){Ze=ue;break t}ue=Ze(ue),se=Ze(se)}Ze=null}else Ze=null;_e!==null&&rN(Ae,ye,_e,Ze,!1),$e!==null&&Ht!==null&&rN(Ae,Ht,$e,Ze,!0)}}e:{if(ye=me?ei(me):window,_e=ye.nodeName&&ye.nodeName.toLowerCase(),_e==="select"||_e==="input"&&ye.type==="file")var At=bA;else if(vA(ye))if(_A)At=WV;else{At=GV;var Ke=$V}else _e=ye.nodeName,!_e||_e.toLowerCase()!=="input"||ye.type!=="checkbox"&&ye.type!=="radio"?me&&Kc(me.elementType)&&(At=bA):At=KV;if(At&&(At=At(a,me))){xA(Ae,At,p,Se);break e}Ke&&Ke(a,ye,me),a==="focusout"&&me&&ye.type==="number"&&me.memoizedProps.value!=null&&rf(ye,"number",ye.value)}switch(Ke=me?ei(me):window,a){case"focusin":(vA(Ke)||Ke.contentEditable==="true")&&(tu=Ke,$v=me,gf=null);break;case"focusout":gf=$v=tu=null;break;case"mousedown":Gv=!0;break;case"contextmenu":case"mouseup":case"dragend":Gv=!1,kA(Ae,p,Se);break;case"selectionchange":if(XV)break;case"keydown":case"keyup":kA(Ae,p,Se)}var dt;if(Pt)e:{switch(a){case"compositionstart":var gt="onCompositionStart";break e;case"compositionend":gt="onCompositionEnd";break e;case"compositionupdate":gt="onCompositionUpdate";break e}gt=void 0}else eu?Ol(a,p)&&(gt="onCompositionEnd"):a==="keydown"&&p.keyCode===229&&(gt="onCompositionStart");gt&&(Fs&&p.locale!=="ko"&&(eu||gt!=="onCompositionStart"?gt==="onCompositionEnd"&&eu&&(dt=cf()):(Ls=Se,lf="value"in Ls?Ls.value:Ls.textContent,eu=!0)),Ke=Fm(me,gt),0<Ke.length&&(gt=new Vs(gt,a,null,p,Se),Ae.push({event:gt,listeners:Ke}),dt?gt.data=dt:(dt=Zc(p),dt!==null&&(gt.data=dt)))),(dt=Ei?FV(a,p):BV(a,p))&&(gt=Fm(me,"onBeforeInput"),0<gt.length&&(Ke=new Vs("onBeforeInput","beforeinput",null,p,Se),Ae.push({event:Ke,listeners:gt}),Ke.data=dt)),j9(Ae,a,me,p,Se)}tN(Ae,u)})}function Ff(a,u,p){return{instance:a,listener:u,currentTarget:p}}function Fm(a,u){for(var p=u+"Capture",y=[];a!==null;){var E=a,A=E.stateNode;if(E=E.tag,E!==5&&E!==26&&E!==27||A===null||(E=Zi(a,p),E!=null&&y.unshift(Ff(a,E,A)),E=Zi(a,u),E!=null&&y.push(Ff(a,E,A))),a.tag===3)return y;a=a.return}return[]}function L9(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function rN(a,u,p,y,E){for(var A=u._reactName,H=[];p!==null&&p!==y;){var Y=p,re=Y.alternate,me=Y.stateNode;if(Y=Y.tag,re!==null&&re===y)break;Y!==5&&Y!==26&&Y!==27||me===null||(re=me,E?(me=Zi(p,A),me!=null&&H.unshift(Ff(p,me,re))):E||(me=Zi(p,A),me!=null&&H.push(Ff(p,me,re)))),p=p.return}H.length!==0&&a.push({event:u,listeners:H})}var z9=/\r\n?/g,U9=/\u0000|\uFFFD/g;function iN(a){return(typeof a=="string"?a:""+a).replace(z9,`
`).replace(U9,"")}function sN(a,u){return u=iN(u),iN(a)===u}function Bt(a,u,p,y,E,A){switch(p){case"children":typeof y=="string"?u==="body"||u==="textarea"&&y===""||Fr(a,y):(typeof y=="number"||typeof y=="bigint")&&u!=="body"&&Fr(a,""+y);break;case"className":ti(a,"class",y);break;case"tabIndex":ti(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":ti(a,p,y);break;case"style":of(a,y,A);break;case"data":if(u!=="object"){ti(a,"data",y);break}case"src":case"href":if(y===""&&(u!=="a"||p!=="href")){a.removeAttribute(p);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(p);break}y=Wc(""+y),a.setAttribute(p,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(p,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof A=="function"&&(p==="formAction"?(u!=="input"&&Bt(a,u,"name",E.name,E,null),Bt(a,u,"formEncType",E.formEncType,E,null),Bt(a,u,"formMethod",E.formMethod,E,null),Bt(a,u,"formTarget",E.formTarget,E,null)):(Bt(a,u,"encType",E.encType,E,null),Bt(a,u,"method",E.method,E,null),Bt(a,u,"target",E.target,E,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(p);break}y=Wc(""+y),a.setAttribute(p,y);break;case"onClick":y!=null&&(a.onclick=Qi);break;case"onScroll":y!=null&&pt("scroll",a);break;case"onScrollEnd":y!=null&&pt("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));a.innerHTML=p}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}p=Wc(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",p);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,""+y):a.removeAttribute(p);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,""):a.removeAttribute(p);break;case"capture":case"download":y===!0?a.setAttribute(p,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(p,y):a.removeAttribute(p);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(p,y):a.removeAttribute(p);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(p):a.setAttribute(p,y);break;case"popover":pt("beforetoggle",a),pt("toggle",a),$c(a,"popover",y);break;case"xlinkActuate":wn(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":wn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":wn(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":wn(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":wn(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":wn(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":wn(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":wn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":wn(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":$c(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<p.length)||p[0]!=="o"&&p[0]!=="O"||p[1]!=="n"&&p[1]!=="N")&&(p=Fp.get(p)||p,$c(a,p,y))}}function yb(a,u,p,y,E,A){switch(p){case"style":of(a,y,A);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(p=y.__html,p!=null){if(E.children!=null)throw Error(r(60));a.innerHTML=p}}break;case"children":typeof y=="string"?Fr(a,y):(typeof y=="number"||typeof y=="bigint")&&Fr(a,""+y);break;case"onScroll":y!=null&&pt("scroll",a);break;case"onScrollEnd":y!=null&&pt("scrollend",a);break;case"onClick":y!=null&&(a.onclick=Qi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Qd.hasOwnProperty(p))e:{if(p[0]==="o"&&p[1]==="n"&&(E=p.endsWith("Capture"),u=p.slice(2,E?p.length-7:void 0),A=a[Ln]||null,A=A!=null?A[p]:null,typeof A=="function"&&a.removeEventListener(u,A,E),typeof y=="function")){typeof A!="function"&&A!==null&&(p in a?a[p]=null:a.hasAttribute(p)&&a.removeAttribute(p)),a.addEventListener(u,y,E);break e}p in a?a[p]=y:y===!0?a.setAttribute(p,""):$c(a,p,y)}}}function rr(a,u,p){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":pt("error",a),pt("load",a);var y=!1,E=!1,A;for(A in p)if(p.hasOwnProperty(A)){var H=p[A];if(H!=null)switch(A){case"src":y=!0;break;case"srcSet":E=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Bt(a,u,A,H,p,null)}}E&&Bt(a,u,"srcSet",p.srcSet,p,null),y&&Bt(a,u,"src",p.src,p,null);return;case"input":pt("invalid",a);var Y=A=H=E=null,re=null,me=null;for(y in p)if(p.hasOwnProperty(y)){var Se=p[y];if(Se!=null)switch(y){case"name":E=Se;break;case"type":H=Se;break;case"checked":re=Se;break;case"defaultChecked":me=Se;break;case"value":A=Se;break;case"defaultValue":Y=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(137,u));break;default:Bt(a,u,y,Se,p,null)}}zp(a,A,Y,re,me,H,E,!1);return;case"select":pt("invalid",a),y=H=A=null;for(E in p)if(p.hasOwnProperty(E)&&(Y=p[E],Y!=null))switch(E){case"value":A=Y;break;case"defaultValue":H=Y;break;case"multiple":y=Y;default:Bt(a,u,E,Y,p,null)}u=A,p=H,a.multiple=!!y,u!=null?ga(a,!!y,u,!1):p!=null&&ga(a,!!y,p,!0);return;case"textarea":pt("invalid",a),A=E=y=null;for(H in p)if(p.hasOwnProperty(H)&&(Y=p[H],Y!=null))switch(H){case"value":y=Y;break;case"defaultValue":E=Y;break;case"children":A=Y;break;case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(91));break;default:Bt(a,u,H,Y,p,null)}ya(a,y,E,A);return;case"option":for(re in p)if(p.hasOwnProperty(re)&&(y=p[re],y!=null))switch(re){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:Bt(a,u,re,y,p,null)}return;case"dialog":pt("beforetoggle",a),pt("toggle",a),pt("cancel",a),pt("close",a);break;case"iframe":case"object":pt("load",a);break;case"video":case"audio":for(y=0;y<Vf.length;y++)pt(Vf[y],a);break;case"image":pt("error",a),pt("load",a);break;case"details":pt("toggle",a);break;case"embed":case"source":case"link":pt("error",a),pt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(me in p)if(p.hasOwnProperty(me)&&(y=p[me],y!=null))switch(me){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:Bt(a,u,me,y,p,null)}return;default:if(Kc(u)){for(Se in p)p.hasOwnProperty(Se)&&(y=p[Se],y!==void 0&&yb(a,u,Se,y,p,void 0));return}}for(Y in p)p.hasOwnProperty(Y)&&(y=p[Y],y!=null&&Bt(a,u,Y,y,p,null))}function V9(a,u,p,y){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var E=null,A=null,H=null,Y=null,re=null,me=null,Se=null;for(_e in p){var Ae=p[_e];if(p.hasOwnProperty(_e)&&Ae!=null)switch(_e){case"checked":break;case"value":break;case"defaultValue":re=Ae;default:y.hasOwnProperty(_e)||Bt(a,u,_e,null,y,Ae)}}for(var ye in y){var _e=y[ye];if(Ae=p[ye],y.hasOwnProperty(ye)&&(_e!=null||Ae!=null))switch(ye){case"type":A=_e;break;case"name":E=_e;break;case"checked":me=_e;break;case"defaultChecked":Se=_e;break;case"value":H=_e;break;case"defaultValue":Y=_e;break;case"children":case"dangerouslySetInnerHTML":if(_e!=null)throw Error(r(137,u));break;default:_e!==Ae&&Bt(a,u,ye,_e,y,Ae)}}Gc(a,H,Y,re,me,Se,A,E);return;case"select":_e=H=Y=ye=null;for(A in p)if(re=p[A],p.hasOwnProperty(A)&&re!=null)switch(A){case"value":break;case"multiple":_e=re;default:y.hasOwnProperty(A)||Bt(a,u,A,null,y,re)}for(E in y)if(A=y[E],re=p[E],y.hasOwnProperty(E)&&(A!=null||re!=null))switch(E){case"value":ye=A;break;case"defaultValue":Y=A;break;case"multiple":H=A;default:A!==re&&Bt(a,u,E,A,y,re)}u=Y,p=H,y=_e,ye!=null?ga(a,!!p,ye,!1):!!y!=!!p&&(u!=null?ga(a,!!p,u,!0):ga(a,!!p,p?[]:"",!1));return;case"textarea":_e=ye=null;for(Y in p)if(E=p[Y],p.hasOwnProperty(Y)&&E!=null&&!y.hasOwnProperty(Y))switch(Y){case"value":break;case"children":break;default:Bt(a,u,Y,null,y,E)}for(H in y)if(E=y[H],A=p[H],y.hasOwnProperty(H)&&(E!=null||A!=null))switch(H){case"value":ye=E;break;case"defaultValue":_e=E;break;case"children":break;case"dangerouslySetInnerHTML":if(E!=null)throw Error(r(91));break;default:E!==A&&Bt(a,u,H,E,y,A)}Up(a,ye,_e);return;case"option":for(var $e in p)if(ye=p[$e],p.hasOwnProperty($e)&&ye!=null&&!y.hasOwnProperty($e))switch($e){case"selected":a.selected=!1;break;default:Bt(a,u,$e,null,y,ye)}for(re in y)if(ye=y[re],_e=p[re],y.hasOwnProperty(re)&&ye!==_e&&(ye!=null||_e!=null))switch(re){case"selected":a.selected=ye&&typeof ye!="function"&&typeof ye!="symbol";break;default:Bt(a,u,re,ye,y,_e)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ze in p)ye=p[Ze],p.hasOwnProperty(Ze)&&ye!=null&&!y.hasOwnProperty(Ze)&&Bt(a,u,Ze,null,y,ye);for(me in y)if(ye=y[me],_e=p[me],y.hasOwnProperty(me)&&ye!==_e&&(ye!=null||_e!=null))switch(me){case"children":case"dangerouslySetInnerHTML":if(ye!=null)throw Error(r(137,u));break;default:Bt(a,u,me,ye,y,_e)}return;default:if(Kc(u)){for(var Ht in p)ye=p[Ht],p.hasOwnProperty(Ht)&&ye!==void 0&&!y.hasOwnProperty(Ht)&&yb(a,u,Ht,void 0,y,ye);for(Se in y)ye=y[Se],_e=p[Se],!y.hasOwnProperty(Se)||ye===_e||ye===void 0&&_e===void 0||yb(a,u,Se,ye,y,_e);return}}for(var ue in p)ye=p[ue],p.hasOwnProperty(ue)&&ye!=null&&!y.hasOwnProperty(ue)&&Bt(a,u,ue,null,y,ye);for(Ae in y)ye=y[Ae],_e=p[Ae],!y.hasOwnProperty(Ae)||ye===_e||ye==null&&_e==null||Bt(a,u,Ae,ye,y,_e)}function oN(a){switch(a){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function F9(){if(typeof performance.getEntriesByType=="function"){for(var a=0,u=0,p=performance.getEntriesByType("resource"),y=0;y<p.length;y++){var E=p[y],A=E.transferSize,H=E.initiatorType,Y=E.duration;if(A&&Y&&oN(H)){for(H=0,Y=E.responseEnd,y+=1;y<p.length;y++){var re=p[y],me=re.startTime;if(me>Y)break;var Se=re.transferSize,Ae=re.initiatorType;Se&&oN(Ae)&&(re=re.responseEnd,H+=Se*(re<Y?1:(Y-me)/(re-me)))}if(--y,u+=8*(A+H)/(E.duration/1e3),a++,10<a)break}}if(0<a)return u/a/1e6}return navigator.connection&&(a=navigator.connection.downlink,typeof a=="number")?a:5}var vb=null,xb=null;function Bm(a){return a.nodeType===9?a:a.ownerDocument}function aN(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function lN(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function bb(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var _b=null;function B9(){var a=window.event;return a&&a.type==="popstate"?a===_b?!1:(_b=a,!0):(_b=null,!1)}var cN=typeof setTimeout=="function"?setTimeout:void 0,H9=typeof clearTimeout=="function"?clearTimeout:void 0,uN=typeof Promise=="function"?Promise:void 0,q9=typeof queueMicrotask=="function"?queueMicrotask:typeof uN<"u"?function(a){return uN.resolve(null).then(a).catch($9)}:cN;function $9(a){setTimeout(function(){throw a})}function Va(a){return a==="head"}function dN(a,u){var p=u,y=0;do{var E=p.nextSibling;if(a.removeChild(p),E&&E.nodeType===8)if(p=E.data,p==="/$"||p==="/&"){if(y===0){a.removeChild(E),Nu(u);return}y--}else if(p==="$"||p==="$?"||p==="$~"||p==="$!"||p==="&")y++;else if(p==="html")Bf(a.ownerDocument.documentElement);else if(p==="head"){p=a.ownerDocument.head,Bf(p);for(var A=p.firstChild;A;){var H=A.nextSibling,Y=A.nodeName;A[Is]||Y==="SCRIPT"||Y==="STYLE"||Y==="LINK"&&A.rel.toLowerCase()==="stylesheet"||p.removeChild(A),A=H}}else p==="body"&&Bf(a.ownerDocument.body);p=E}while(p);Nu(u)}function fN(a,u){var p=a;a=0;do{var y=p.nextSibling;if(p.nodeType===1?u?(p._stashedDisplay=p.style.display,p.style.display="none"):(p.style.display=p._stashedDisplay||"",p.getAttribute("style")===""&&p.removeAttribute("style")):p.nodeType===3&&(u?(p._stashedText=p.nodeValue,p.nodeValue=""):p.nodeValue=p._stashedText||""),y&&y.nodeType===8)if(p=y.data,p==="/$"){if(a===0)break;a--}else p!=="$"&&p!=="$?"&&p!=="$~"&&p!=="$!"||a++;p=y}while(p)}function wb(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var p=u;switch(u=u.nextSibling,p.nodeName){case"HTML":case"HEAD":case"BODY":wb(p),qc(p);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(p.rel.toLowerCase()==="stylesheet")continue}a.removeChild(p)}}function G9(a,u,p,y){for(;a.nodeType===1;){var E=p;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[Is])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(A=a.getAttribute("rel"),A==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(A!==E.rel||a.getAttribute("href")!==(E.href==null||E.href===""?null:E.href)||a.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin)||a.getAttribute("title")!==(E.title==null?null:E.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(A=a.getAttribute("src"),(A!==(E.src==null?null:E.src)||a.getAttribute("type")!==(E.type==null?null:E.type)||a.getAttribute("crossorigin")!==(E.crossOrigin==null?null:E.crossOrigin))&&A&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var A=E.name==null?null:""+E.name;if(E.type==="hidden"&&a.getAttribute("name")===A)return a}else return a;if(a=Pi(a.nextSibling),a===null)break}return null}function K9(a,u,p){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!p||(a=Pi(a.nextSibling),a===null))return null;return a}function hN(a,u){for(;a.nodeType!==8;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!u||(a=Pi(a.nextSibling),a===null))return null;return a}function Sb(a){return a.data==="$?"||a.data==="$~"}function Tb(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState!=="loading"}function W9(a,u){var p=a.ownerDocument;if(a.data==="$~")a._reactRetry=u;else if(a.data!=="$?"||p.readyState!=="loading")u();else{var y=function(){u(),p.removeEventListener("DOMContentLoaded",y)};p.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function Pi(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"||u==="F!"||u==="F")break;if(u==="/$"||u==="/&")return null}}return a}var Eb=null;function pN(a){a=a.nextSibling;for(var u=0;a;){if(a.nodeType===8){var p=a.data;if(p==="/$"||p==="/&"){if(u===0)return Pi(a.nextSibling);u--}else p!=="$"&&p!=="$!"&&p!=="$?"&&p!=="$~"&&p!=="&"||u++}a=a.nextSibling}return null}function mN(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var p=a.data;if(p==="$"||p==="$!"||p==="$?"||p==="$~"||p==="&"){if(u===0)return a;u--}else p!=="/$"&&p!=="/&"||u++}a=a.previousSibling}return null}function gN(a,u,p){switch(u=Bm(p),a){case"html":if(a=u.documentElement,!a)throw Error(r(452));return a;case"head":if(a=u.head,!a)throw Error(r(453));return a;case"body":if(a=u.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Bf(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);qc(a)}var ji=new Map,yN=new Set;function Hm(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Lo=K.d;K.d={f:Y9,r:X9,D:J9,C:Q9,L:Z9,m:eF,X:nF,S:tF,M:rF};function Y9(){var a=Lo.f(),u=Mm();return a||u}function X9(a){var u=wi(a);u!==null&&u.tag===5&&u.type==="form"?M2(u):Lo.r(a)}var Eu=typeof document>"u"?null:document;function vN(a,u,p){var y=Eu;if(y&&typeof u=="string"&&u){var E=Vr(u);E='link[rel="'+a+'"][href="'+E+'"]',typeof p=="string"&&(E+='[crossorigin="'+p+'"]'),yN.has(E)||(yN.add(E),a={rel:a,crossOrigin:p,href:u},y.querySelector(E)===null&&(u=y.createElement("link"),rr(u,"link",a),_n(u),y.head.appendChild(u)))}}function J9(a){Lo.D(a),vN("dns-prefetch",a,null)}function Q9(a,u){Lo.C(a,u),vN("preconnect",a,u)}function Z9(a,u,p){Lo.L(a,u,p);var y=Eu;if(y&&a&&u){var E='link[rel="preload"][as="'+Vr(u)+'"]';u==="image"&&p&&p.imageSrcSet?(E+='[imagesrcset="'+Vr(p.imageSrcSet)+'"]',typeof p.imageSizes=="string"&&(E+='[imagesizes="'+Vr(p.imageSizes)+'"]')):E+='[href="'+Vr(a)+'"]';var A=E;switch(u){case"style":A=Au(a);break;case"script":A=Cu(a)}ji.has(A)||(a=m({rel:"preload",href:u==="image"&&p&&p.imageSrcSet?void 0:a,as:u},p),ji.set(A,a),y.querySelector(E)!==null||u==="style"&&y.querySelector(Hf(A))||u==="script"&&y.querySelector(qf(A))||(u=y.createElement("link"),rr(u,"link",a),_n(u),y.head.appendChild(u)))}}function eF(a,u){Lo.m(a,u);var p=Eu;if(p&&a){var y=u&&typeof u.as=="string"?u.as:"script",E='link[rel="modulepreload"][as="'+Vr(y)+'"][href="'+Vr(a)+'"]',A=E;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":A=Cu(a)}if(!ji.has(A)&&(a=m({rel:"modulepreload",href:a},u),ji.set(A,a),p.querySelector(E)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(p.querySelector(qf(A)))return}y=p.createElement("link"),rr(y,"link",a),_n(y),p.head.appendChild(y)}}}function tF(a,u,p){Lo.S(a,u,p);var y=Eu;if(y&&a){var E=Ps(y).hoistableStyles,A=Au(a);u=u||"default";var H=E.get(A);if(!H){var Y={loading:0,preload:null};if(H=y.querySelector(Hf(A)))Y.loading=5;else{a=m({rel:"stylesheet",href:a,"data-precedence":u},p),(p=ji.get(A))&&Ab(a,p);var re=H=y.createElement("link");_n(re),rr(re,"link",a),re._p=new Promise(function(me,Se){re.onload=me,re.onerror=Se}),re.addEventListener("load",function(){Y.loading|=1}),re.addEventListener("error",function(){Y.loading|=2}),Y.loading|=4,qm(H,u,y)}H={type:"stylesheet",instance:H,count:1,state:Y},E.set(A,H)}}}function nF(a,u){Lo.X(a,u);var p=Eu;if(p&&a){var y=Ps(p).hoistableScripts,E=Cu(a),A=y.get(E);A||(A=p.querySelector(qf(E)),A||(a=m({src:a,async:!0},u),(u=ji.get(E))&&Cb(a,u),A=p.createElement("script"),_n(A),rr(A,"link",a),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},y.set(E,A))}}function rF(a,u){Lo.M(a,u);var p=Eu;if(p&&a){var y=Ps(p).hoistableScripts,E=Cu(a),A=y.get(E);A||(A=p.querySelector(qf(E)),A||(a=m({src:a,async:!0,type:"module"},u),(u=ji.get(E))&&Cb(a,u),A=p.createElement("script"),_n(A),rr(A,"link",a),p.head.appendChild(A)),A={type:"script",instance:A,count:1,state:null},y.set(E,A))}}function xN(a,u,p,y){var E=(E=ze.current)?Hm(E):null;if(!E)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof p.precedence=="string"&&typeof p.href=="string"?(u=Au(p.href),p=Ps(E).hoistableStyles,y=p.get(u),y||(y={type:"style",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(p.rel==="stylesheet"&&typeof p.href=="string"&&typeof p.precedence=="string"){a=Au(p.href);var A=Ps(E).hoistableStyles,H=A.get(a);if(H||(E=E.ownerDocument||E,H={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},A.set(a,H),(A=E.querySelector(Hf(a)))&&!A._p&&(H.instance=A,H.state.loading=5),ji.has(a)||(p={rel:"preload",as:"style",href:p.href,crossOrigin:p.crossOrigin,integrity:p.integrity,media:p.media,hrefLang:p.hrefLang,referrerPolicy:p.referrerPolicy},ji.set(a,p),A||iF(E,a,p,H.state))),u&&y===null)throw Error(r(528,""));return H}if(u&&y!==null)throw Error(r(529,""));return null;case"script":return u=p.async,p=p.src,typeof p=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Cu(p),p=Ps(E).hoistableScripts,y=p.get(u),y||(y={type:"script",instance:null,count:0,state:null},p.set(u,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Au(a){return'href="'+Vr(a)+'"'}function Hf(a){return'link[rel="stylesheet"]['+a+"]"}function bN(a){return m({},a,{"data-precedence":a.precedence,precedence:null})}function iF(a,u,p,y){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?y.loading=1:(u=a.createElement("link"),y.preload=u,u.addEventListener("load",function(){return y.loading|=1}),u.addEventListener("error",function(){return y.loading|=2}),rr(u,"link",p),_n(u),a.head.appendChild(u))}function Cu(a){return'[src="'+Vr(a)+'"]'}function qf(a){return"script[async]"+a}function _N(a,u,p){if(u.count++,u.instance===null)switch(u.type){case"style":var y=a.querySelector('style[data-href~="'+Vr(p.href)+'"]');if(y)return u.instance=y,_n(y),y;var E=m({},p,{"data-href":p.href,"data-precedence":p.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),_n(y),rr(y,"style",E),qm(y,p.precedence,a),u.instance=y;case"stylesheet":E=Au(p.href);var A=a.querySelector(Hf(E));if(A)return u.state.loading|=4,u.instance=A,_n(A),A;y=bN(p),(E=ji.get(E))&&Ab(y,E),A=(a.ownerDocument||a).createElement("link"),_n(A);var H=A;return H._p=new Promise(function(Y,re){H.onload=Y,H.onerror=re}),rr(A,"link",y),u.state.loading|=4,qm(A,p.precedence,a),u.instance=A;case"script":return A=Cu(p.src),(E=a.querySelector(qf(A)))?(u.instance=E,_n(E),E):(y=p,(E=ji.get(A))&&(y=m({},p),Cb(y,E)),a=a.ownerDocument||a,E=a.createElement("script"),_n(E),rr(E,"link",y),a.head.appendChild(E),u.instance=E);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(y=u.instance,u.state.loading|=4,qm(y,p.precedence,a));return u.instance}function qm(a,u,p){for(var y=p.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),E=y.length?y[y.length-1]:null,A=E,H=0;H<y.length;H++){var Y=y[H];if(Y.dataset.precedence===u)A=Y;else if(A!==E)break}A?A.parentNode.insertBefore(a,A.nextSibling):(u=p.nodeType===9?p.head:p,u.insertBefore(a,u.firstChild))}function Ab(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function Cb(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var $m=null;function wN(a,u,p){if($m===null){var y=new Map,E=$m=new Map;E.set(p,y)}else E=$m,y=E.get(p),y||(y=new Map,E.set(p,y));if(y.has(a))return y;for(y.set(a,null),p=p.getElementsByTagName(a),E=0;E<p.length;E++){var A=p[E];if(!(A[Is]||A[bn]||a==="link"&&A.getAttribute("rel")==="stylesheet")&&A.namespaceURI!=="http://www.w3.org/2000/svg"){var H=A.getAttribute(u)||"";H=a+H;var Y=y.get(H);Y?Y.push(A):y.set(H,[A])}}return y}function SN(a,u,p){a=a.ownerDocument||a,a.head.insertBefore(p,u==="title"?a.querySelector("head > title"):null)}function sF(a,u,p){if(p===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function TN(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}function oF(a,u,p,y){if(p.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(p.state.loading&4)===0){if(p.instance===null){var E=Au(y.href),A=u.querySelector(Hf(E));if(A){u=A._p,u!==null&&typeof u=="object"&&typeof u.then=="function"&&(a.count++,a=Gm.bind(a),u.then(a,a)),p.state.loading|=4,p.instance=A,_n(A);return}A=u.ownerDocument||u,y=bN(y),(E=ji.get(E))&&Ab(y,E),A=A.createElement("link"),_n(A);var H=A;H._p=new Promise(function(Y,re){H.onload=Y,H.onerror=re}),rr(A,"link",y),p.instance=A}a.stylesheets===null&&(a.stylesheets=new Map),a.stylesheets.set(p,u),(u=p.state.preload)&&(p.state.loading&3)===0&&(a.count++,p=Gm.bind(a),u.addEventListener("load",p),u.addEventListener("error",p))}}var Nb=0;function aF(a,u){return a.stylesheets&&a.count===0&&Wm(a,a.stylesheets),0<a.count||0<a.imgCount?function(p){var y=setTimeout(function(){if(a.stylesheets&&Wm(a,a.stylesheets),a.unsuspend){var A=a.unsuspend;a.unsuspend=null,A()}},6e4+u);0<a.imgBytes&&Nb===0&&(Nb=62500*F9());var E=setTimeout(function(){if(a.waitingForImages=!1,a.count===0&&(a.stylesheets&&Wm(a,a.stylesheets),a.unsuspend)){var A=a.unsuspend;a.unsuspend=null,A()}},(a.imgBytes>Nb?50:800)+u);return a.unsuspend=p,function(){a.unsuspend=null,clearTimeout(y),clearTimeout(E)}}:null}function Gm(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Wm(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Km=null;function Wm(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Km=new Map,u.forEach(lF,a),Km=null,Gm.call(a))}function lF(a,u){if(!(u.state.loading&4)){var p=Km.get(a);if(p)var y=p.get(null);else{p=new Map,Km.set(a,p);for(var E=a.querySelectorAll("link[data-precedence],style[data-precedence]"),A=0;A<E.length;A++){var H=E[A];(H.nodeName==="LINK"||H.getAttribute("media")!=="not all")&&(p.set(H.dataset.precedence,H),y=H)}y&&p.set(null,y)}E=u.instance,H=E.getAttribute("data-precedence"),A=p.get(H)||y,A===y&&p.set(null,E),p.set(H,E),this.count++,y=Gm.bind(this),E.addEventListener("load",y),E.addEventListener("error",y),A?A.parentNode.insertBefore(E,A.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(E,a.firstChild)),u.state.loading|=4}}var $f={$$typeof:N,Provider:null,Consumer:null,_currentValue:te,_currentValue2:te,_threadCount:0};function cF(a,u,p,y,E,A,H,Y,re){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ns(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ns(0),this.hiddenUpdates=Ns(null),this.identifierPrefix=y,this.onUncaughtError=E,this.onCaughtError=A,this.onRecoverableError=H,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=re,this.incompleteTransitions=new Map}function EN(a,u,p,y,E,A,H,Y,re,me,Se,Ae){return a=new cF(a,u,p,H,re,me,Se,Ae,Y),u=1,A===!0&&(u|=24),A=ri(3,null,null,u),a.current=A,A.stateNode=a,u=ax(),u.refCount++,a.pooledCache=u,u.refCount++,A.memoizedState={element:y,isDehydrated:p,cache:u},dx(A),a}function AN(a){return a?(a=iu,a):iu}function CN(a,u,p,y,E,A){E=AN(E),y.context===null?y.context=E:y.pendingContext=E,y=ka(u),y.payload={element:p},A=A===void 0?null:A,A!==null&&(y.callback=A),p=Ia(a,y,u),p!==null&&(Gr(p,a,u),Sf(p,a,u))}function NN(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var p=a.retryLane;a.retryLane=p!==0&&p<u?p:u}}function kb(a,u){NN(a,u),(a=a.alternate)&&NN(a,u)}function kN(a){if(a.tag===13||a.tag===31){var u=Ul(a,67108864);u!==null&&Gr(u,a,67108864),kb(a,67108864)}}function IN(a){if(a.tag===13||a.tag===31){var u=li();u=Cl(u);var p=Ul(a,u);p!==null&&Gr(p,a,u),kb(a,u)}}var Ym=!0;function uF(a,u,p,y){var E=W.T;W.T=null;var A=K.p;try{K.p=2,Ib(a,u,p,y)}finally{K.p=A,W.T=E}}function dF(a,u,p,y){var E=W.T;W.T=null;var A=K.p;try{K.p=8,Ib(a,u,p,y)}finally{K.p=A,W.T=E}}function Ib(a,u,p,y){if(Ym){var E=Rb(y);if(E===null)gb(a,u,y,Xm,p),PN(a,y);else if(hF(E,a,u,p,y))y.stopPropagation();else if(PN(a,y),u&4&&-1<fF.indexOf(a)){for(;E!==null;){var A=wi(E);if(A!==null)switch(A.tag){case 3:if(A=A.stateNode,A.current.memoizedState.isDehydrated){var H=Nr(A.pendingLanes);if(H!==0){var Y=A;for(Y.pendingLanes|=2,Y.entangledLanes|=2;H;){var re=1<<31-Rt(H);Y.entanglements[1]|=re,H&=~re}$s(A),(jt&6)===0&&(Pm=Le()+500,Uf(0))}}break;case 31:case 13:Y=Ul(A,2),Y!==null&&Gr(Y,A,2),Mm(),kb(A,2)}if(A=Rb(y),A===null&&gb(a,u,y,Xm,p),A===E)break;E=A}E!==null&&y.stopPropagation()}else gb(a,u,y,null,p)}}function Rb(a){return a=Si(a),Pb(a)}var Xm=null;function Pb(a){if(Xm=null,a=Rs(a),a!==null){var u=s(a);if(u===null)a=null;else{var p=u.tag;if(p===13){if(a=o(u),a!==null)return a;a=null}else if(p===31){if(a=c(u),a!==null)return a;a=null}else if(p===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return Xm=a,null}function RN(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(De()){case We:return 2;case Et:return 8;case lt:case mr:return 32;case Ts:return 268435456;default:return 32}default:return 32}}var jb=!1,Fa=null,Ba=null,Ha=null,Gf=new Map,Kf=new Map,qa=[],fF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function PN(a,u){switch(a){case"focusin":case"focusout":Fa=null;break;case"dragenter":case"dragleave":Ba=null;break;case"mouseover":case"mouseout":Ha=null;break;case"pointerover":case"pointerout":Gf.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Kf.delete(u.pointerId)}}function Wf(a,u,p,y,E,A){return a===null||a.nativeEvent!==A?(a={blockedOn:u,domEventName:p,eventSystemFlags:y,nativeEvent:A,targetContainers:[E]},u!==null&&(u=wi(u),u!==null&&kN(u)),a):(a.eventSystemFlags|=y,u=a.targetContainers,E!==null&&u.indexOf(E)===-1&&u.push(E),a)}function hF(a,u,p,y,E){switch(u){case"focusin":return Fa=Wf(Fa,a,u,p,y,E),!0;case"dragenter":return Ba=Wf(Ba,a,u,p,y,E),!0;case"mouseover":return Ha=Wf(Ha,a,u,p,y,E),!0;case"pointerover":var A=E.pointerId;return Gf.set(A,Wf(Gf.get(A)||null,a,u,p,y,E)),!0;case"gotpointercapture":return A=E.pointerId,Kf.set(A,Wf(Kf.get(A)||null,a,u,p,y,E)),!0}return!1}function jN(a){var u=Rs(a.target);if(u!==null){var p=s(u);if(p!==null){if(u=p.tag,u===13){if(u=o(p),u!==null){a.blockedOn=u,Xi(a.priority,function(){IN(p)});return}}else if(u===31){if(u=c(p),u!==null){a.blockedOn=u,Xi(a.priority,function(){IN(p)});return}}else if(u===3&&p.stateNode.current.memoizedState.isDehydrated){a.blockedOn=p.tag===3?p.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Jm(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var p=Rb(a.nativeEvent);if(p===null){p=a.nativeEvent;var y=new p.constructor(p.type,p);af=y,p.target.dispatchEvent(y),af=null}else return u=wi(p),u!==null&&kN(u),a.blockedOn=p,!1;u.shift()}return!0}function MN(a,u,p){Jm(a)&&p.delete(u)}function pF(){jb=!1,Fa!==null&&Jm(Fa)&&(Fa=null),Ba!==null&&Jm(Ba)&&(Ba=null),Ha!==null&&Jm(Ha)&&(Ha=null),Gf.forEach(MN),Kf.forEach(MN)}function Qm(a,u){a.blockedOn===u&&(a.blockedOn=null,jb||(jb=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,pF)))}var Zm=null;function DN(a){Zm!==a&&(Zm=a,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Zm===a&&(Zm=null);for(var u=0;u<a.length;u+=3){var p=a[u],y=a[u+1],E=a[u+2];if(typeof y!="function"){if(Pb(y||p)===null)continue;break}var A=wi(p);A!==null&&(a.splice(u,3),u-=3,Rx(A,{pending:!0,data:E,method:p.method,action:y},y,E))}}))}function Nu(a){function u(re){return Qm(re,a)}Fa!==null&&Qm(Fa,a),Ba!==null&&Qm(Ba,a),Ha!==null&&Qm(Ha,a),Gf.forEach(u),Kf.forEach(u);for(var p=0;p<qa.length;p++){var y=qa[p];y.blockedOn===a&&(y.blockedOn=null)}for(;0<qa.length&&(p=qa[0],p.blockedOn===null);)jN(p),p.blockedOn===null&&qa.shift();if(p=(a.ownerDocument||a).$$reactFormReplay,p!=null)for(y=0;y<p.length;y+=3){var E=p[y],A=p[y+1],H=E[Ln]||null;if(typeof A=="function")H||DN(p);else if(H){var Y=null;if(A&&A.hasAttribute("formAction")){if(E=A,H=A[Ln]||null)Y=H.formAction;else if(Pb(E)!==null)continue}else Y=H.action;typeof Y=="function"?p[y+1]=Y:(p.splice(y,3),y-=3),DN(p)}}}function ON(){function a(A){A.canIntercept&&A.info==="react-transition"&&A.intercept({handler:function(){return new Promise(function(H){return E=H})},focusReset:"manual",scroll:"manual"})}function u(){E!==null&&(E(),E=null),y||setTimeout(p,20)}function p(){if(!y&&!navigation.transition){var A=navigation.currentEntry;A&&A.url!=null&&navigation.navigate(A.url,{state:A.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,E=null;return navigation.addEventListener("navigate",a),navigation.addEventListener("navigatesuccess",u),navigation.addEventListener("navigateerror",u),setTimeout(p,100),function(){y=!0,navigation.removeEventListener("navigate",a),navigation.removeEventListener("navigatesuccess",u),navigation.removeEventListener("navigateerror",u),E!==null&&(E(),E=null)}}}function Mb(a){this._internalRoot=a}eg.prototype.render=Mb.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(r(409));var p=u.current,y=li();CN(p,y,a,u,null,null)},eg.prototype.unmount=Mb.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;CN(a.current,2,null,a,null,null),Mm(),u[ks]=null}};function eg(a){this._internalRoot=a}eg.prototype.unstable_scheduleHydration=function(a){if(a){var u=Mp();a={blockedOn:null,target:a,priority:u};for(var p=0;p<qa.length&&u!==0&&u<qa[p].priority;p++);qa.splice(p,0,a),p===0&&jN(a)}};var LN=e.version;if(LN!=="19.2.4")throw Error(r(527,LN,"19.2.4"));K.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=d(u),a=a!==null?h(a):null,a=a===null?null:a.stateNode,a};var mF={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:W,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var tg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!tg.isDisabled&&tg.supportsFiber)try{Tt=tg.inject(mF),ln=tg}catch{}}return Xf.createRoot=function(a,u){if(!i(a))throw Error(r(299));var p=!1,y="",E=q2,A=$2,H=G2;return u!=null&&(u.unstable_strictMode===!0&&(p=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(E=u.onUncaughtError),u.onCaughtError!==void 0&&(A=u.onCaughtError),u.onRecoverableError!==void 0&&(H=u.onRecoverableError)),u=EN(a,1,!1,null,null,p,y,null,E,A,H,ON),a[ks]=u.current,mb(a),new Mb(u)},Xf.hydrateRoot=function(a,u,p){if(!i(a))throw Error(r(299));var y=!1,E="",A=q2,H=$2,Y=G2,re=null;return p!=null&&(p.unstable_strictMode===!0&&(y=!0),p.identifierPrefix!==void 0&&(E=p.identifierPrefix),p.onUncaughtError!==void 0&&(A=p.onUncaughtError),p.onCaughtError!==void 0&&(H=p.onCaughtError),p.onRecoverableError!==void 0&&(Y=p.onRecoverableError),p.formState!==void 0&&(re=p.formState)),u=EN(a,1,!0,u,p??null,y,E,re,A,H,Y,ON),u.context=AN(null),p=u.current,y=li(),y=Cl(y),E=ka(y),E.callback=null,Ia(p,E,y),p=y,u.current.lanes=p,El(u,p),$s(u),a[ks]=u.current,mb(a),new eg(u)},Xf.version="19.2.4",Xf}var KN;function NF(){if(KN)return zb.exports;KN=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zb.exports=CF(),zb.exports}var kF=NF();const IF=ws(kF);var rt=(t=>(t.EASY="easy",t.NORMAL="normal",t.HARD="hard",t))(rt||{}),Pr=(t=>(t.EASY="easy",t.NORMAL="normal",t.HARD="hard",t))(Pr||{}),ae=(t=>(t.STR="STR",t.INT="INT",t.DIS="DIS",t.HEA="HEA",t.CRT="CRT",t.SPR="SPR",t.REL="REL",t.FIN="FIN",t))(ae||{});const RF=()=>{};var WN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},PF=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],c=t[n++],f=((i&7)<<18|(s&63)<<12|(o&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(f>>10)),e[r++]=String.fromCharCode(56320+(f&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},t5={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,c=o?t[i+1]:0,f=i+2<t.length,d=f?t[i+2]:0,h=s>>2,m=(s&3)<<4|c>>4;let g=(c&15)<<2|d>>6,v=d&63;f||(v=64,o||(g=64)),r.push(n[h],n[m],n[g],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(e5(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):PF(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],c=i<t.length?n[t.charAt(i)]:0;++i;const d=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||c==null||d==null||m==null)throw new jF;const g=s<<2|c>>4;if(r.push(g),d!==64){const v=c<<4&240|d>>2;if(r.push(v),m!==64){const b=d<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class jF extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const MF=function(t){const e=e5(t);return t5.encodeByteArray(e,!0)},e0=function(t){return MF(t).replace(/\./g,"")},n5=function(t){try{return t5.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DF(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OF=()=>DF().__FIREBASE_DEFAULTS__,LF=()=>{if(typeof process>"u"||typeof WN>"u")return;const t=WN.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},zF=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&n5(t[1]);return e&&JSON.parse(e)},wy=()=>{try{return RF()||OF()||LF()||zF()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},r5=t=>{var e,n;return(n=(e=wy())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},UF=t=>{const e=r5(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},i5=()=>{var t;return(t=wy())==null?void 0:t.config},s5=t=>{var e;return(e=wy())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VF{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Td(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function o5(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FF(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[e0(JSON.stringify(n)),e0(JSON.stringify(o)),""].join(".")}const xh={};function BF(){const t={prod:[],emulator:[]};for(const e of Object.keys(xh))xh[e]?t.emulator.push(e):t.prod.push(e);return t}function HF(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let YN=!1;function a5(t,e){if(typeof window>"u"||typeof document>"u"||!Td(window.location.host)||xh[t]===e||xh[t]||YN)return;xh[t]=e;function n(g){return`__firebase__banner__${g}`}const r="__firebase__banner",s=BF().prod.length>0;function o(){const g=document.getElementById(r);g&&g.remove()}function c(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function f(g,v){g.setAttribute("width","24"),g.setAttribute("id",v),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function d(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{YN=!0,o()},g}function h(g,v){g.setAttribute("id",v),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function m(){const g=HF(r),v=n("text"),b=document.getElementById(v)||document.createElement("span"),w=n("learnmore"),S=document.getElementById(w)||document.createElement("a"),C=n("preprendIcon"),R=document.getElementById(C)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const N=g.element;c(N),h(S,w);const O=d();f(R,C),N.append(R,b,S,O),document.body.appendChild(N)}s?(b.innerText="Preview backend disconnected.",R.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(R.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",v)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qF(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sr())}function $F(){var e;const t=(e=wy())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GF(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function KF(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function WF(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function YF(){const t=Sr();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function XF(){return!$F()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JF(){try{return typeof indexedDB=="object"}catch{return!1}}function QF(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF="FirebaseError";class ia extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=ZF,Object.setPrototypeOf(this,ia.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,rp.prototype.create)}}class rp{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?eB(s,r):"Error",c=`${this.serviceName}: ${o} (${i}).`;return new ia(i,c,r)}}function eB(t,e){return t.replace(tB,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const tB=/\{\$([^}]+)}/g;function nB(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function xc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(XN(s)&&XN(o)){if(!xc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function XN(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ip(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function rB(t,e){const n=new iB(t,e);return n.subscribe.bind(n)}class iB{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");sB(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Bb),i.error===void 0&&(i.error=Bb),i.complete===void 0&&(i.complete=Bb);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function sB(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Bb(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hi(t){return t&&t._delegate?t._delegate:t}class bc{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oB=class{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new VF;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(lB(e))try{this.getOrInitializeService({instanceIdentifier:tc})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=tc){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=tc){return this.instances.has(e)}getOptions(e=tc){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(s);r===c&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:aB(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=tc){return this.component?this.component.multipleInstances?e:tc:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function aB(t){return t===tc?void 0:t}function lB(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cB{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new oB(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var yt;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(yt||(yt={}));const uB={debug:yt.DEBUG,verbose:yt.VERBOSE,info:yt.INFO,warn:yt.WARN,error:yt.ERROR,silent:yt.SILENT},dB=yt.INFO,fB={[yt.DEBUG]:"log",[yt.VERBOSE]:"log",[yt.INFO]:"info",[yt.WARN]:"warn",[yt.ERROR]:"error"},hB=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=fB[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class kS{constructor(e){this.name=e,this._logLevel=dB,this._logHandler=hB,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in yt))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?uB[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,yt.DEBUG,...e),this._logHandler(this,yt.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,yt.VERBOSE,...e),this._logHandler(this,yt.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,yt.INFO,...e),this._logHandler(this,yt.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,yt.WARN,...e),this._logHandler(this,yt.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,yt.ERROR,...e),this._logHandler(this,yt.ERROR,...e)}}const pB=(t,e)=>e.some(n=>t instanceof n);let JN,QN;function mB(){return JN||(JN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function gB(){return QN||(QN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const l5=new WeakMap,H_=new WeakMap,c5=new WeakMap,Hb=new WeakMap,IS=new WeakMap;function yB(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(il(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&l5.set(n,t)}).catch(()=>{}),IS.set(e,t),e}function vB(t){if(H_.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});H_.set(t,e)}let q_={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return H_.get(t);if(e==="objectStoreNames")return t.objectStoreNames||c5.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return il(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function xB(t){q_=t(q_)}function bB(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qb(this),e,...n);return c5.set(r,e.sort?e.sort():[e]),il(r)}:gB().includes(t)?function(...e){return t.apply(qb(this),e),il(l5.get(this))}:function(...e){return il(t.apply(qb(this),e))}}function _B(t){return typeof t=="function"?bB(t):(t instanceof IDBTransaction&&vB(t),pB(t,mB())?new Proxy(t,q_):t)}function il(t){if(t instanceof IDBRequest)return yB(t);if(Hb.has(t))return Hb.get(t);const e=_B(t);return e!==t&&(Hb.set(t,e),IS.set(e,t)),e}const qb=t=>IS.get(t);function wB(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),c=il(o);return r&&o.addEventListener("upgradeneeded",f=>{r(il(o.result),f.oldVersion,f.newVersion,il(o.transaction),f)}),n&&o.addEventListener("blocked",f=>n(f.oldVersion,f.newVersion,f)),c.then(f=>{s&&f.addEventListener("close",()=>s()),i&&f.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),c}const SB=["get","getKey","getAll","getAllKeys","count"],TB=["put","add","delete","clear"],$b=new Map;function ZN(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if($b.get(e))return $b.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=TB.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SB.includes(n)))return;const s=async function(o,...c){const f=this.transaction(o,i?"readwrite":"readonly");let d=f.store;return r&&(d=d.index(c.shift())),(await Promise.all([d[n](...c),i&&f.done]))[0]};return $b.set(e,s),s}xB(t=>({...t,get:(e,n,r)=>ZN(e,n)||t.get(e,n,r),has:(e,n)=>!!ZN(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EB{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(AB(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function AB(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const $_="@firebase/app",ek="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ko=new kS("@firebase/app"),CB="@firebase/app-compat",NB="@firebase/analytics-compat",kB="@firebase/analytics",IB="@firebase/app-check-compat",RB="@firebase/app-check",PB="@firebase/auth",jB="@firebase/auth-compat",MB="@firebase/database",DB="@firebase/data-connect",OB="@firebase/database-compat",LB="@firebase/functions",zB="@firebase/functions-compat",UB="@firebase/installations",VB="@firebase/installations-compat",FB="@firebase/messaging",BB="@firebase/messaging-compat",HB="@firebase/performance",qB="@firebase/performance-compat",$B="@firebase/remote-config",GB="@firebase/remote-config-compat",KB="@firebase/storage",WB="@firebase/storage-compat",YB="@firebase/firestore",XB="@firebase/ai",JB="@firebase/firestore-compat",QB="firebase",ZB="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G_="[DEFAULT]",eH={[$_]:"fire-core",[CB]:"fire-core-compat",[kB]:"fire-analytics",[NB]:"fire-analytics-compat",[RB]:"fire-app-check",[IB]:"fire-app-check-compat",[PB]:"fire-auth",[jB]:"fire-auth-compat",[MB]:"fire-rtdb",[DB]:"fire-data-connect",[OB]:"fire-rtdb-compat",[LB]:"fire-fn",[zB]:"fire-fn-compat",[UB]:"fire-iid",[VB]:"fire-iid-compat",[FB]:"fire-fcm",[BB]:"fire-fcm-compat",[HB]:"fire-perf",[qB]:"fire-perf-compat",[$B]:"fire-rc",[GB]:"fire-rc-compat",[KB]:"fire-gcs",[WB]:"fire-gcs-compat",[YB]:"fire-fst",[JB]:"fire-fst-compat",[XB]:"fire-vertex","fire-js":"fire-js",[QB]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t0=new Map,tH=new Map,K_=new Map;function tk(t,e){try{t.container.addComponent(e)}catch(n){Ko.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function sd(t){const e=t.name;if(K_.has(e))return Ko.debug(`There were multiple attempts to register component ${e}.`),!1;K_.set(e,t);for(const n of t0.values())tk(n,t);for(const n of tH.values())tk(n,t);return!0}function RS(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function os(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nH={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},sl=new rp("app","Firebase",nH);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rH{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new bc("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw sl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed=ZB;function u5(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:G_,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw sl.create("bad-app-name",{appName:String(i)});if(n||(n=i5()),!n)throw sl.create("no-options");const s=t0.get(i);if(s){if(xc(n,s.options)&&xc(r,s.config))return s;throw sl.create("duplicate-app",{appName:i})}const o=new cB(i);for(const f of K_.values())o.addComponent(f);const c=new rH(n,r,o);return t0.set(i,c),c}function d5(t=G_){const e=t0.get(t);if(!e&&t===G_&&i5())return u5();if(!e)throw sl.create("no-app",{appName:t});return e}function ol(t,e,n){let r=eH[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Ko.warn(o.join(" "));return}sd(new bc(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iH="firebase-heartbeat-database",sH=1,kh="firebase-heartbeat-store";let Gb=null;function f5(){return Gb||(Gb=wB(iH,sH,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(kh)}catch(n){console.warn(n)}}}}).catch(t=>{throw sl.create("idb-open",{originalErrorMessage:t.message})})),Gb}async function oH(t){try{const n=(await f5()).transaction(kh),r=await n.objectStore(kh).get(h5(t));return await n.done,r}catch(e){if(e instanceof ia)Ko.warn(e.message);else{const n=sl.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Ko.warn(n.message)}}}async function nk(t,e){try{const r=(await f5()).transaction(kh,"readwrite");await r.objectStore(kh).put(e,h5(t)),await r.done}catch(n){if(n instanceof ia)Ko.warn(n.message);else{const r=sl.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Ko.warn(r.message)}}}function h5(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aH=1024,lH=30;class cH{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new dH(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=rk();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>lH){const o=fH(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Ko.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=rk(),{heartbeatsToSend:r,unsentEntries:i}=uH(this._heartbeatsCache.heartbeats),s=e0(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Ko.warn(n),""}}}function rk(){return new Date().toISOString().substring(0,10)}function uH(t,e=aH){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),ik(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),ik(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class dH{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JF()?QF().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await oH(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return nk(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function ik(t){return e0(JSON.stringify({version:2,heartbeats:t})).length}function fH(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hH(t){sd(new bc("platform-logger",e=>new EB(e),"PRIVATE")),sd(new bc("heartbeat",e=>new cH(e),"PRIVATE")),ol($_,ek,t),ol($_,ek,"esm2020"),ol("fire-js","")}hH("");var pH="firebase",mH="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ol(pH,mH,"app");function p5(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const gH=p5,m5=new rp("auth","Firebase",p5());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n0=new kS("@firebase/auth");function yH(t,...e){n0.logLevel<=yt.WARN&&n0.warn(`Auth (${Ed}): ${t}`,...e)}function jg(t,...e){n0.logLevel<=yt.ERROR&&n0.error(`Auth (${Ed}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ao(t,...e){throw jS(t,...e)}function hs(t,...e){return jS(t,...e)}function PS(t,e,n){const r={...gH(),[e]:n};return new rp("auth","Firebase",r).create(e,{appName:t.name})}function uc(t){return PS(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function g5(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&ao(t,"argument-error"),PS(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function jS(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return m5.create(t,...e)}function nt(t,e,...n){if(!t)throw jS(e,...n)}function Fo(t){const e="INTERNAL ASSERTION FAILED: "+t;throw jg(e),new Error(e)}function Wo(t,e){t||Fo(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function vH(){return sk()==="http:"||sk()==="https:"}function sk(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xH(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(vH()||KF()||"connection"in navigator)?navigator.onLine:!0}function bH(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sp{constructor(e,n){this.shortDelay=e,this.longDelay=n,Wo(n>e,"Short delay should be less than long delay!"),this.isMobile=qF()||WF()}get(){return xH()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MS(t,e){Wo(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y5{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Fo("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Fo("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Fo("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _H={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wH=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],SH=new sp(3e4,6e4);function DS(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Ad(t,e,n,r,i={}){return v5(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const c=ip({key:t.config.apiKey,...o}).slice(1),f=await t._getAdditionalHeaders();f["Content-Type"]="application/json",t.languageCode&&(f["X-Firebase-Locale"]=t.languageCode);const d={method:e,headers:f,...s};return GF()||(d.referrerPolicy="no-referrer"),t.emulatorConfig&&Td(t.emulatorConfig.host)&&(d.credentials="include"),y5.fetch()(await x5(t,t.config.apiHost,n,c),d)})}async function v5(t,e,n){t._canInitEmulator=!1;const r={..._H,...e};try{const i=new EH(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw ng(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const c=s.ok?o.errorMessage:o.error.message,[f,d]=c.split(" : ");if(f==="FEDERATED_USER_ID_ALREADY_LINKED")throw ng(t,"credential-already-in-use",o);if(f==="EMAIL_EXISTS")throw ng(t,"email-already-in-use",o);if(f==="USER_DISABLED")throw ng(t,"user-disabled",o);const h=r[f]||f.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw PS(t,h,d);ao(t,h)}}catch(i){if(i instanceof ia)throw i;ao(t,"network-request-failed",{message:String(i)})}}async function TH(t,e,n,r,i={}){const s=await Ad(t,e,n,r,i);return"mfaPendingCredential"in s&&ao(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function x5(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?MS(t.config,i):`${t.config.apiScheme}://${i}`;return wH.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}class EH{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(hs(this.auth,"network-request-failed")),SH.get())})}}function ng(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=hs(t,e,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AH(t,e){return Ad(t,"POST","/v1/accounts:delete",e)}async function r0(t,e){return Ad(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bh(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function CH(t,e=!1){const n=hi(t),r=await n.getIdToken(e),i=OS(r);nt(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:bh(Kb(i.auth_time)),issuedAtTime:bh(Kb(i.iat)),expirationTime:bh(Kb(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Kb(t){return Number(t)*1e3}function OS(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return jg("JWT malformed, contained fewer than 3 sections"),null;try{const i=n5(n);return i?JSON.parse(i):(jg("Failed to decode base64 JWT payload"),null)}catch(i){return jg("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ok(t){const e=OS(t);return nt(e,"internal-error"),nt(typeof e.exp<"u","internal-error"),nt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ih(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof ia&&NH(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function NH({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kH{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y_{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=bh(this.lastLoginAt),this.creationTime=bh(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i0(t){var m;const e=t.auth,n=await t.getIdToken(),r=await Ih(t,r0(e,{idToken:n}));nt(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(m=i.providerUserInfo)!=null&&m.length?b5(i.providerUserInfo):[],o=RH(t.providerData,s),c=t.isAnonymous,f=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),d=c?f:!1,h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Y_(i.createdAt,i.lastLoginAt),isAnonymous:d};Object.assign(t,h)}async function IH(t){const e=hi(t);await i0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function RH(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function b5(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PH(t,e){const n=await v5(t,{},async()=>{const r=ip({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await x5(t,i,"/v1/token",`key=${s}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const f={method:"POST",headers:c,body:r};return t.emulatorConfig&&Td(t.emulatorConfig.host)&&(f.credentials="include"),y5.fetch()(o,f)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jH(t,e){return Ad(t,"POST","/v2/accounts:revokeToken",DS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wu{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){nt(e.idToken,"internal-error"),nt(typeof e.idToken<"u","internal-error"),nt(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ok(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){nt(e.length!==0,"internal-error");const n=ok(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(nt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await PH(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Wu;return r&&(nt(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(nt(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(nt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Wu,this.toJSON())}_performRefresh(){return Fo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ga(t,e){nt(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class us{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new kH(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Y_(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await Ih(this,this.stsTokenManager.getToken(this.auth,e));return nt(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return CH(this,e)}reload(){return IH(this)}_assign(e){this!==e&&(nt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new us({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){nt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await i0(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(os(this.auth.app))return Promise.reject(uc(this.auth));const e=await this.getIdToken();return await Ih(this,AH(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,c=n.tenantId??void 0,f=n._redirectEventId??void 0,d=n.createdAt??void 0,h=n.lastLoginAt??void 0,{uid:m,emailVerified:g,isAnonymous:v,providerData:b,stsTokenManager:w}=n;nt(m&&w,e,"internal-error");const S=Wu.fromJSON(this.name,w);nt(typeof m=="string",e,"internal-error"),Ga(r,e.name),Ga(i,e.name),nt(typeof g=="boolean",e,"internal-error"),nt(typeof v=="boolean",e,"internal-error"),Ga(s,e.name),Ga(o,e.name),Ga(c,e.name),Ga(f,e.name),Ga(d,e.name),Ga(h,e.name);const C=new us({uid:m,auth:e,email:i,emailVerified:g,displayName:r,isAnonymous:v,photoURL:o,phoneNumber:s,tenantId:c,stsTokenManager:S,createdAt:d,lastLoginAt:h});return b&&Array.isArray(b)&&(C.providerData=b.map(R=>({...R}))),f&&(C._redirectEventId=f),C}static async _fromIdTokenResponse(e,n,r=!1){const i=new Wu;i.updateFromServerResponse(n);const s=new us({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await i0(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];nt(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?b5(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),c=new Wu;c.updateFromIdToken(r);const f=new us({uid:i.localId,auth:e,stsTokenManager:c,isAnonymous:o}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Y_(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(f,d),f}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak=new Map;function Bo(t){Wo(t instanceof Function,"Expected a class definition");let e=ak.get(t);return e?(Wo(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ak.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _5{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}_5.type="NONE";const lk=_5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mg(t,e,n){return`firebase:${t}:${e}:${n}`}class Yu{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Mg(this.userKey,i.apiKey,s),this.fullPersistenceKey=Mg("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await r0(this.auth,{idToken:e}).catch(()=>{});return n?us._fromGetAccountInfoResponse(this.auth,n,e):null}return us._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Yu(Bo(lk),e,r);const i=(await Promise.all(n.map(async d=>{if(await d._isAvailable())return d}))).filter(d=>d);let s=i[0]||Bo(lk);const o=Mg(r,e.config.apiKey,e.name);let c=null;for(const d of n)try{const h=await d._get(o);if(h){let m;if(typeof h=="string"){const g=await r0(e,{idToken:h}).catch(()=>{});if(!g)break;m=await us._fromGetAccountInfoResponse(e,g,h)}else m=us._fromJSON(e,h);d!==s&&(c=m),s=d;break}}catch{}const f=i.filter(d=>d._shouldAllowMigration);return!s._shouldAllowMigration||!f.length?new Yu(s,e,r):(s=f[0],c&&await s._set(o,c.toJSON()),await Promise.all(n.map(async d=>{if(d!==s)try{await d._remove(o)}catch{}})),new Yu(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ck(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(E5(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(w5(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(C5(e))return"Blackberry";if(N5(e))return"Webos";if(S5(e))return"Safari";if((e.includes("chrome/")||T5(e))&&!e.includes("edge/"))return"Chrome";if(A5(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function w5(t=Sr()){return/firefox\//i.test(t)}function S5(t=Sr()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function T5(t=Sr()){return/crios\//i.test(t)}function E5(t=Sr()){return/iemobile/i.test(t)}function A5(t=Sr()){return/android/i.test(t)}function C5(t=Sr()){return/blackberry/i.test(t)}function N5(t=Sr()){return/webos/i.test(t)}function LS(t=Sr()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function MH(t=Sr()){var e;return LS(t)&&!!((e=window.navigator)!=null&&e.standalone)}function DH(){return YF()&&document.documentMode===10}function k5(t=Sr()){return LS(t)||A5(t)||N5(t)||C5(t)||/windows phone/i.test(t)||E5(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I5(t,e=[]){let n;switch(t){case"Browser":n=ck(Sr());break;case"Worker":n=`${ck(Sr())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ed}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OH{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,c)=>{try{const f=e(s);o(f)}catch(f){c(f)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function LH(t,e={}){return Ad(t,"GET","/v2/passwordPolicy",DS(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zH=6;class UH{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??zH,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VH{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new uk(this),this.idTokenSubscription=new uk(this),this.beforeStateQueue=new OH(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=m5,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Bo(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Yu.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await r0(this,{idToken:e}),r=await us._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(os(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(c,c))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,c=r==null?void 0:r._redirectEventId,f=await this.tryRedirectSignIn(e);(!o||o===c)&&(f!=null&&f.user)&&(r=f.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return nt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await i0(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=bH()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(os(this.app))return Promise.reject(uc(this));const n=e?hi(e):null;return n&&nt(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&nt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return os(this.app)?Promise.reject(uc(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return os(this.app)?Promise.reject(uc(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Bo(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await LH(this),n=new UH(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new rp("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jH(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Bo(e)||this._popupRedirectResolver;nt(n,this,"argument-error"),this.redirectPersistenceManager=await Yu.create(this,[Bo(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(nt(c,this,"internal-error"),c.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const f=e.addObserver(n,r,i);return()=>{o=!0,f()}}else{const f=e.addObserver(n);return()=>{o=!0,f()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return nt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=I5(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(os(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&yH(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Sy(t){return hi(t)}class uk{constructor(e){this.auth=e,this.observer=null,this.addObserver=rB(n=>this.observer=n)}get next(){return nt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let zS={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function FH(t){zS=t}function BH(t){return zS.loadJS(t)}function HH(){return zS.gapiScript}function qH(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $H(t,e){const n=RS(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(xc(s,e??{}))return i;ao(i,"already-initialized")}return n.initialize({options:e})}function GH(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Bo);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function KH(t,e,n){const r=Sy(t);nt(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=R5(e),{host:o,port:c}=WH(e),f=c===null?"":`:${c}`,d={url:`${s}//${o}${f}/`},h=Object.freeze({host:o,port:c,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){nt(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),nt(xc(d,r.config.emulator)&&xc(h,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=d,r.emulatorConfig=h,r.settings.appVerificationDisabledForTesting=!0,Td(o)?(o5(`${s}//${o}${f}`),a5("Auth",!0)):YH()}function R5(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function WH(t){const e=R5(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:dk(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:dk(o)}}}function dk(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function YH(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P5{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Fo("not implemented")}_getIdTokenResponse(e){return Fo("not implemented")}_linkToIdToken(e,n){return Fo("not implemented")}_getReauthenticationResolver(e){return Fo("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xu(t,e){return TH(t,"POST","/v1/accounts:signInWithIdp",DS(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH="http://localhost";class _c extends P5{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new _c(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):ao("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new _c(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Xu(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Xu(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Xu(e,n)}buildRequest(){const e={requestUri:XH,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=ip(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ty{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class op extends Ty{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ya extends op{constructor(){super("facebook.com")}static credential(e){return _c._fromParams({providerId:Ya.PROVIDER_ID,signInMethod:Ya.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ya.credentialFromTaggedObject(e)}static credentialFromError(e){return Ya.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ya.credential(e.oauthAccessToken)}catch{return null}}}Ya.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ya.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Js extends op{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return _c._fromParams({providerId:Js.PROVIDER_ID,signInMethod:Js.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Js.credentialFromTaggedObject(e)}static credentialFromError(e){return Js.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Js.credential(n,r)}catch{return null}}}Js.GOOGLE_SIGN_IN_METHOD="google.com";Js.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xa extends op{constructor(){super("github.com")}static credential(e){return _c._fromParams({providerId:Xa.PROVIDER_ID,signInMethod:Xa.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Xa.credentialFromTaggedObject(e)}static credentialFromError(e){return Xa.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Xa.credential(e.oauthAccessToken)}catch{return null}}}Xa.GITHUB_SIGN_IN_METHOD="github.com";Xa.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ja extends op{constructor(){super("twitter.com")}static credential(e,n){return _c._fromParams({providerId:Ja.PROVIDER_ID,signInMethod:Ja.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ja.credentialFromTaggedObject(e)}static credentialFromError(e){return Ja.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ja.credential(n,r)}catch{return null}}}Ja.TWITTER_SIGN_IN_METHOD="twitter.com";Ja.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await us._fromIdTokenResponse(e,r,i),o=fk(r);return new od({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=fk(r);return new od({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function fk(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s0 extends ia{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,s0.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new s0(e,n,r,i)}}function j5(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?s0._fromErrorAndOperation(t,s,e,r):s})}async function JH(t,e,n=!1){const r=await Ih(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return od._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function QH(t,e,n=!1){const{auth:r}=t;if(os(r.app))return Promise.reject(uc(r));const i="reauthenticate";try{const s=await Ih(t,j5(r,i,e,t),n);nt(s.idToken,r,"internal-error");const o=OS(s.idToken);nt(o,r,"internal-error");const{sub:c}=o;return nt(t.uid===c,r,"user-mismatch"),od._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&ao(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZH(t,e,n=!1){if(os(t.app))return Promise.reject(uc(t));const r="signIn",i=await j5(t,r,e),s=await od._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}function eq(t,e,n,r){return hi(t).onIdTokenChanged(e,n,r)}function tq(t,e,n){return hi(t).beforeAuthStateChanged(e,n)}function US(t,e,n,r){return hi(t).onAuthStateChanged(e,n,r)}const o0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M5{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(o0,"1"),this.storage.removeItem(o0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nq=1e3,rq=10;class D5 extends M5{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=k5(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,c,f)=>{this.notifyListeners(o,f)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);DH()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,rq):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},nq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}D5.type="LOCAL";const iq=D5;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O5 extends M5{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}O5.type="SESSION";const L5=O5;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sq(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ey{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Ey(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const c=Array.from(o).map(async d=>d(n.origin,s)),f=await sq(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:f})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Ey.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VS(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((c,f)=>{const d=VS("",20);i.port1.start();const h=setTimeout(()=>{f(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const g=m;if(g.data.eventId===d)switch(g.data.status){case"ack":clearTimeout(h),s=setTimeout(()=>{f(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),c(g.data.response);break;default:clearTimeout(h),clearTimeout(s),f(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:d,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(){return window}function aq(t){no().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z5(){return typeof no().WorkerGlobalScope<"u"&&typeof no().importScripts=="function"}async function lq(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function cq(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function uq(){return z5()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U5="firebaseLocalStorageDb",dq=1,a0="firebaseLocalStorage",V5="fbase_key";class ap{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Ay(t,e){return t.transaction([a0],e?"readwrite":"readonly").objectStore(a0)}function fq(){const t=indexedDB.deleteDatabase(U5);return new ap(t).toPromise()}function X_(){const t=indexedDB.open(U5,dq);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(a0,{keyPath:V5})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(a0)?e(r):(r.close(),await fq(),e(await X_()))})})}async function hk(t,e,n){const r=Ay(t,!0).put({[V5]:e,value:n});return new ap(r).toPromise()}async function hq(t,e){const n=Ay(t,!1).get(e),r=await new ap(n).toPromise();return r===void 0?null:r.value}function pk(t,e){const n=Ay(t,!0).delete(e);return new ap(n).toPromise()}const pq=800,mq=3;class F5{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await X_(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>mq)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return z5()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Ey._getInstance(uq()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await lq(),!this.activeServiceWorker)return;this.sender=new oq(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||cq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await X_();return await hk(e,o0,"1"),await pk(e,o0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hk(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>hq(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>pk(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Ay(i,!1).getAll();return new ap(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}F5.type="LOCAL";const gq=F5;new sp(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FS(t,e){return e?Bo(e):(nt(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BS extends P5{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xu(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Xu(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Xu(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function yq(t){return ZH(t.auth,new BS(t),t.bypassAuthState)}function vq(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),QH(n,new BS(t),t.bypassAuthState)}async function xq(t){const{auth:e,user:n}=t;return nt(n,e,"internal-error"),JH(n,new BS(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:c}=e;if(o){this.reject(o);return}const f={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(f))}catch(d){this.reject(d)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return yq;case"linkViaPopup":case"linkViaRedirect":return xq;case"reauthViaPopup":case"reauthViaRedirect":return vq;default:ao(this.auth,"internal-error")}}resolve(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Wo(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bq=new sp(2e3,1e4);async function H5(t,e,n){if(os(t.app))return Promise.reject(hs(t,"operation-not-supported-in-this-environment"));const r=Sy(t);g5(t,e,Ty);const i=FS(r,n);return new el(r,"signInViaPopup",e,i).executeNotNull()}async function _q(t,e,n){const r=hi(t);g5(r.auth,e,Ty);const i=FS(r.auth,n);return new el(r.auth,"linkViaPopup",e,i,r).executeNotNull()}class el extends B5{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,el.currentPopupAction&&el.currentPopupAction.cancel(),el.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return nt(e,this.auth,"internal-error"),e}async onExecution(){Wo(this.filter.length===1,"Popup operations only handle one event");const e=VS();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(hs(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(hs(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,el.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(hs(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,bq.get())};e()}}el.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq="pendingRedirect",Dg=new Map;class Sq extends B5{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Dg.get(this.auth._key());if(!e){try{const r=await Tq(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Dg.set(this.auth._key(),e)}return this.bypassAuthState||Dg.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Tq(t,e){const n=Cq(e),r=Aq(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function Eq(t,e){Dg.set(t._key(),e)}function Aq(t){return Bo(t._redirectPersistence)}function Cq(t){return Mg(wq,t.config.apiKey,t.name)}async function Nq(t,e,n=!1){if(os(t.app))return Promise.reject(uc(t));const r=Sy(t),i=FS(r,e),o=await new Sq(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kq=600*1e3;class Iq{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Rq(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!q5(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(hs(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=kq&&this.cachedEventUids.clear(),this.cachedEventUids.has(mk(e))}saveEventToCache(e){this.cachedEventUids.add(mk(e)),this.lastProcessedEventTime=Date.now()}}function mk(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function q5({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function Rq(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return q5(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pq(t,e={}){return Ad(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jq=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Mq=/^https?/;async function Dq(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Pq(t);for(const n of e)try{if(Oq(n))return}catch{}ao(t,"unauthorized-domain")}function Oq(t){const e=W_(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!Mq.test(n))return!1;if(jq.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lq=new sp(3e4,6e4);function gk(){const t=no().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function zq(t){return new Promise((e,n)=>{var i,s,o;function r(){gk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gk(),n(hs(t,"network-request-failed"))},timeout:Lq.get()})}if((s=(i=no().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=no().gapi)!=null&&o.load)r();else{const c=qH("iframefcb");return no()[c]=()=>{gapi.load?r():n(hs(t,"network-request-failed"))},BH(`${HH()}?onload=${c}`).catch(f=>n(f))}}).catch(e=>{throw Og=null,e})}let Og=null;function Uq(t){return Og=Og||zq(t),Og}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vq=new sp(5e3,15e3),Fq="__/auth/iframe",Bq="emulator/auth/iframe",Hq={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qq=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function $q(t){const e=t.config;nt(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?MS(e,Bq):`https://${t.config.authDomain}/${Fq}`,r={apiKey:e.apiKey,appName:t.name,v:Ed},i=qq.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${ip(r).slice(1)}`}async function Gq(t){const e=await Uq(t),n=no().gapi;return nt(n,t,"internal-error"),e.open({where:document.body,url:$q(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Hq,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=hs(t,"network-request-failed"),c=no().setTimeout(()=>{s(o)},Vq.get());function f(){no().clearTimeout(c),i(r)}r.ping(f).then(f,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kq={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Wq=500,Yq=600,Xq="_blank",Jq="http://localhost";class yk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Qq(t,e,n,r=Wq,i=Yq){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const f={...Kq,width:r.toString(),height:i.toString(),top:s,left:o},d=Sr().toLowerCase();n&&(c=T5(d)?Xq:n),w5(d)&&(e=e||Jq,f.scrollbars="yes");const h=Object.entries(f).reduce((g,[v,b])=>`${g}${v}=${b},`,"");if(MH(d)&&c!=="_self")return Zq(e||"",c),new yk(null);const m=window.open(e||"",c,h);nt(m,t,"popup-blocked");try{m.focus()}catch{}return new yk(m)}function Zq(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e$="__/auth/handler",t$="emulator/auth/handler",n$=encodeURIComponent("fac");async function vk(t,e,n,r,i,s){nt(t.config.authDomain,t,"auth-domain-config-required"),nt(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ed,eventId:i};if(e instanceof Ty){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",nB(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[h,m]of Object.entries({}))o[h]=m}if(e instanceof op){const h=e.getScopes().filter(m=>m!=="");h.length>0&&(o.scopes=h.join(","))}t.tenantId&&(o.tid=t.tenantId);const c=o;for(const h of Object.keys(c))c[h]===void 0&&delete c[h];const f=await t._getAppCheckToken(),d=f?`#${n$}=${encodeURIComponent(f)}`:"";return`${r$(t)}?${ip(c).slice(1)}${d}`}function r$({config:t}){return t.emulator?MS(t,t$):`https://${t.authDomain}/${e$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wb="webStorageSupport";class i${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=L5,this._completeRedirectFn=Nq,this._overrideRedirectResult=Eq}async _openPopup(e,n,r,i){var o;Wo((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await vk(e,n,r,W_(),i);return Qq(e,s,VS())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await vk(e,n,r,W_(),i);return aq(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Wo(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Gq(e),r=new Iq(e);return n.register("authEvent",i=>(nt(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Wb,{type:Wb},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Wb];s!==void 0&&n(!!s),ao(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=Dq(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return k5()||S5()||LS()}}const s$=i$;var xk="@firebase/auth",bk="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){nt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a$(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l$(t){sd(new bc("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:c}=r.options;nt(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const f={apiKey:o,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:I5(t)},d=new VH(r,i,s,f);return GH(d,n),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),sd(new bc("auth-internal",e=>{const n=Sy(e.getProvider("auth").getImmediate());return(r=>new o$(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),ol(xk,bk,a$(t)),ol(xk,bk,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c$=300,u$=s5("authIdTokenMaxAge")||c$;let _k=null;const d$=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>u$)return;const i=n==null?void 0:n.token;_k!==i&&(_k=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function f$(t=d5()){const e=RS(t,"auth");if(e.isInitialized())return e.getImmediate();const n=$H(t,{popupRedirectResolver:s$,persistence:[gq,iq,L5]}),r=s5("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=d$(s.toString());tq(n,o,()=>o(n.currentUser)),eq(n,c=>o(c))}}const i=r5("auth");return i&&KH(n,`http://${i}`),n}function h$(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}FH({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=hs("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",h$().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l$("Browser");var wk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var al,$5;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(M,j){function I(){}I.prototype=j.prototype,M.F=j.prototype,M.prototype=new I,M.prototype.constructor=M,M.D=function(U,B,P){for(var F=Array(arguments.length-2),z=2;z<arguments.length;z++)F[z-2]=arguments[z];return j.prototype[B].apply(U,F)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(M,j,I){I||(I=0);const U=Array(16);if(typeof j=="string")for(var B=0;B<16;++B)U[B]=j.charCodeAt(I++)|j.charCodeAt(I++)<<8|j.charCodeAt(I++)<<16|j.charCodeAt(I++)<<24;else for(B=0;B<16;++B)U[B]=j[I++]|j[I++]<<8|j[I++]<<16|j[I++]<<24;j=M.g[0],I=M.g[1],B=M.g[2];let P=M.g[3],F;F=j+(P^I&(B^P))+U[0]+3614090360&4294967295,j=I+(F<<7&4294967295|F>>>25),F=P+(B^j&(I^B))+U[1]+3905402710&4294967295,P=j+(F<<12&4294967295|F>>>20),F=B+(I^P&(j^I))+U[2]+606105819&4294967295,B=P+(F<<17&4294967295|F>>>15),F=I+(j^B&(P^j))+U[3]+3250441966&4294967295,I=B+(F<<22&4294967295|F>>>10),F=j+(P^I&(B^P))+U[4]+4118548399&4294967295,j=I+(F<<7&4294967295|F>>>25),F=P+(B^j&(I^B))+U[5]+1200080426&4294967295,P=j+(F<<12&4294967295|F>>>20),F=B+(I^P&(j^I))+U[6]+2821735955&4294967295,B=P+(F<<17&4294967295|F>>>15),F=I+(j^B&(P^j))+U[7]+4249261313&4294967295,I=B+(F<<22&4294967295|F>>>10),F=j+(P^I&(B^P))+U[8]+1770035416&4294967295,j=I+(F<<7&4294967295|F>>>25),F=P+(B^j&(I^B))+U[9]+2336552879&4294967295,P=j+(F<<12&4294967295|F>>>20),F=B+(I^P&(j^I))+U[10]+4294925233&4294967295,B=P+(F<<17&4294967295|F>>>15),F=I+(j^B&(P^j))+U[11]+2304563134&4294967295,I=B+(F<<22&4294967295|F>>>10),F=j+(P^I&(B^P))+U[12]+1804603682&4294967295,j=I+(F<<7&4294967295|F>>>25),F=P+(B^j&(I^B))+U[13]+4254626195&4294967295,P=j+(F<<12&4294967295|F>>>20),F=B+(I^P&(j^I))+U[14]+2792965006&4294967295,B=P+(F<<17&4294967295|F>>>15),F=I+(j^B&(P^j))+U[15]+1236535329&4294967295,I=B+(F<<22&4294967295|F>>>10),F=j+(B^P&(I^B))+U[1]+4129170786&4294967295,j=I+(F<<5&4294967295|F>>>27),F=P+(I^B&(j^I))+U[6]+3225465664&4294967295,P=j+(F<<9&4294967295|F>>>23),F=B+(j^I&(P^j))+U[11]+643717713&4294967295,B=P+(F<<14&4294967295|F>>>18),F=I+(P^j&(B^P))+U[0]+3921069994&4294967295,I=B+(F<<20&4294967295|F>>>12),F=j+(B^P&(I^B))+U[5]+3593408605&4294967295,j=I+(F<<5&4294967295|F>>>27),F=P+(I^B&(j^I))+U[10]+38016083&4294967295,P=j+(F<<9&4294967295|F>>>23),F=B+(j^I&(P^j))+U[15]+3634488961&4294967295,B=P+(F<<14&4294967295|F>>>18),F=I+(P^j&(B^P))+U[4]+3889429448&4294967295,I=B+(F<<20&4294967295|F>>>12),F=j+(B^P&(I^B))+U[9]+568446438&4294967295,j=I+(F<<5&4294967295|F>>>27),F=P+(I^B&(j^I))+U[14]+3275163606&4294967295,P=j+(F<<9&4294967295|F>>>23),F=B+(j^I&(P^j))+U[3]+4107603335&4294967295,B=P+(F<<14&4294967295|F>>>18),F=I+(P^j&(B^P))+U[8]+1163531501&4294967295,I=B+(F<<20&4294967295|F>>>12),F=j+(B^P&(I^B))+U[13]+2850285829&4294967295,j=I+(F<<5&4294967295|F>>>27),F=P+(I^B&(j^I))+U[2]+4243563512&4294967295,P=j+(F<<9&4294967295|F>>>23),F=B+(j^I&(P^j))+U[7]+1735328473&4294967295,B=P+(F<<14&4294967295|F>>>18),F=I+(P^j&(B^P))+U[12]+2368359562&4294967295,I=B+(F<<20&4294967295|F>>>12),F=j+(I^B^P)+U[5]+4294588738&4294967295,j=I+(F<<4&4294967295|F>>>28),F=P+(j^I^B)+U[8]+2272392833&4294967295,P=j+(F<<11&4294967295|F>>>21),F=B+(P^j^I)+U[11]+1839030562&4294967295,B=P+(F<<16&4294967295|F>>>16),F=I+(B^P^j)+U[14]+4259657740&4294967295,I=B+(F<<23&4294967295|F>>>9),F=j+(I^B^P)+U[1]+2763975236&4294967295,j=I+(F<<4&4294967295|F>>>28),F=P+(j^I^B)+U[4]+1272893353&4294967295,P=j+(F<<11&4294967295|F>>>21),F=B+(P^j^I)+U[7]+4139469664&4294967295,B=P+(F<<16&4294967295|F>>>16),F=I+(B^P^j)+U[10]+3200236656&4294967295,I=B+(F<<23&4294967295|F>>>9),F=j+(I^B^P)+U[13]+681279174&4294967295,j=I+(F<<4&4294967295|F>>>28),F=P+(j^I^B)+U[0]+3936430074&4294967295,P=j+(F<<11&4294967295|F>>>21),F=B+(P^j^I)+U[3]+3572445317&4294967295,B=P+(F<<16&4294967295|F>>>16),F=I+(B^P^j)+U[6]+76029189&4294967295,I=B+(F<<23&4294967295|F>>>9),F=j+(I^B^P)+U[9]+3654602809&4294967295,j=I+(F<<4&4294967295|F>>>28),F=P+(j^I^B)+U[12]+3873151461&4294967295,P=j+(F<<11&4294967295|F>>>21),F=B+(P^j^I)+U[15]+530742520&4294967295,B=P+(F<<16&4294967295|F>>>16),F=I+(B^P^j)+U[2]+3299628645&4294967295,I=B+(F<<23&4294967295|F>>>9),F=j+(B^(I|~P))+U[0]+4096336452&4294967295,j=I+(F<<6&4294967295|F>>>26),F=P+(I^(j|~B))+U[7]+1126891415&4294967295,P=j+(F<<10&4294967295|F>>>22),F=B+(j^(P|~I))+U[14]+2878612391&4294967295,B=P+(F<<15&4294967295|F>>>17),F=I+(P^(B|~j))+U[5]+4237533241&4294967295,I=B+(F<<21&4294967295|F>>>11),F=j+(B^(I|~P))+U[12]+1700485571&4294967295,j=I+(F<<6&4294967295|F>>>26),F=P+(I^(j|~B))+U[3]+2399980690&4294967295,P=j+(F<<10&4294967295|F>>>22),F=B+(j^(P|~I))+U[10]+4293915773&4294967295,B=P+(F<<15&4294967295|F>>>17),F=I+(P^(B|~j))+U[1]+2240044497&4294967295,I=B+(F<<21&4294967295|F>>>11),F=j+(B^(I|~P))+U[8]+1873313359&4294967295,j=I+(F<<6&4294967295|F>>>26),F=P+(I^(j|~B))+U[15]+4264355552&4294967295,P=j+(F<<10&4294967295|F>>>22),F=B+(j^(P|~I))+U[6]+2734768916&4294967295,B=P+(F<<15&4294967295|F>>>17),F=I+(P^(B|~j))+U[13]+1309151649&4294967295,I=B+(F<<21&4294967295|F>>>11),F=j+(B^(I|~P))+U[4]+4149444226&4294967295,j=I+(F<<6&4294967295|F>>>26),F=P+(I^(j|~B))+U[11]+3174756917&4294967295,P=j+(F<<10&4294967295|F>>>22),F=B+(j^(P|~I))+U[2]+718787259&4294967295,B=P+(F<<15&4294967295|F>>>17),F=I+(P^(B|~j))+U[9]+3951481745&4294967295,M.g[0]=M.g[0]+j&4294967295,M.g[1]=M.g[1]+(B+(F<<21&4294967295|F>>>11))&4294967295,M.g[2]=M.g[2]+B&4294967295,M.g[3]=M.g[3]+P&4294967295}r.prototype.v=function(M,j){j===void 0&&(j=M.length);const I=j-this.blockSize,U=this.C;let B=this.h,P=0;for(;P<j;){if(B==0)for(;P<=I;)i(this,M,P),P+=this.blockSize;if(typeof M=="string"){for(;P<j;)if(U[B++]=M.charCodeAt(P++),B==this.blockSize){i(this,U),B=0;break}}else for(;P<j;)if(U[B++]=M[P++],B==this.blockSize){i(this,U),B=0;break}}this.h=B,this.o+=j},r.prototype.A=function(){var M=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);M[0]=128;for(var j=1;j<M.length-8;++j)M[j]=0;j=this.o*8;for(var I=M.length-8;I<M.length;++I)M[I]=j&255,j/=256;for(this.v(M),M=Array(16),j=0,I=0;I<4;++I)for(let U=0;U<32;U+=8)M[j++]=this.g[I]>>>U&255;return M};function s(M,j){var I=c;return Object.prototype.hasOwnProperty.call(I,M)?I[M]:I[M]=j(M)}function o(M,j){this.h=j;const I=[];let U=!0;for(let B=M.length-1;B>=0;B--){const P=M[B]|0;U&&P==j||(I[B]=P,U=!1)}this.g=I}var c={};function f(M){return-128<=M&&M<128?s(M,function(j){return new o([j|0],j<0?-1:0)}):new o([M|0],M<0?-1:0)}function d(M){if(isNaN(M)||!isFinite(M))return m;if(M<0)return S(d(-M));const j=[];let I=1;for(let U=0;M>=I;U++)j[U]=M/I|0,I*=4294967296;return new o(j,0)}function h(M,j){if(M.length==0)throw Error("number format error: empty string");if(j=j||10,j<2||36<j)throw Error("radix out of range: "+j);if(M.charAt(0)=="-")return S(h(M.substring(1),j));if(M.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=d(Math.pow(j,8));let U=m;for(let P=0;P<M.length;P+=8){var B=Math.min(8,M.length-P);const F=parseInt(M.substring(P,P+B),j);B<8?(B=d(Math.pow(j,B)),U=U.j(B).add(d(F))):(U=U.j(I),U=U.add(d(F)))}return U}var m=f(0),g=f(1),v=f(16777216);t=o.prototype,t.m=function(){if(w(this))return-S(this).m();let M=0,j=1;for(let I=0;I<this.g.length;I++){const U=this.i(I);M+=(U>=0?U:4294967296+U)*j,j*=4294967296}return M},t.toString=function(M){if(M=M||10,M<2||36<M)throw Error("radix out of range: "+M);if(b(this))return"0";if(w(this))return"-"+S(this).toString(M);const j=d(Math.pow(M,6));var I=this;let U="";for(;;){const B=O(I,j).g;I=C(I,B.j(j));let P=((I.g.length>0?I.g[0]:I.h)>>>0).toString(M);if(I=B,b(I))return P+U;for(;P.length<6;)P="0"+P;U=P+U}},t.i=function(M){return M<0?0:M<this.g.length?this.g[M]:this.h};function b(M){if(M.h!=0)return!1;for(let j=0;j<M.g.length;j++)if(M.g[j]!=0)return!1;return!0}function w(M){return M.h==-1}t.l=function(M){return M=C(this,M),w(M)?-1:b(M)?0:1};function S(M){const j=M.g.length,I=[];for(let U=0;U<j;U++)I[U]=~M.g[U];return new o(I,~M.h).add(g)}t.abs=function(){return w(this)?S(this):this},t.add=function(M){const j=Math.max(this.g.length,M.g.length),I=[];let U=0;for(let B=0;B<=j;B++){let P=U+(this.i(B)&65535)+(M.i(B)&65535),F=(P>>>16)+(this.i(B)>>>16)+(M.i(B)>>>16);U=F>>>16,P&=65535,F&=65535,I[B]=F<<16|P}return new o(I,I[I.length-1]&-2147483648?-1:0)};function C(M,j){return M.add(S(j))}t.j=function(M){if(b(this)||b(M))return m;if(w(this))return w(M)?S(this).j(S(M)):S(S(this).j(M));if(w(M))return S(this.j(S(M)));if(this.l(v)<0&&M.l(v)<0)return d(this.m()*M.m());const j=this.g.length+M.g.length,I=[];for(var U=0;U<2*j;U++)I[U]=0;for(U=0;U<this.g.length;U++)for(let B=0;B<M.g.length;B++){const P=this.i(U)>>>16,F=this.i(U)&65535,z=M.i(B)>>>16,Q=M.i(B)&65535;I[2*U+2*B]+=F*Q,R(I,2*U+2*B),I[2*U+2*B+1]+=P*Q,R(I,2*U+2*B+1),I[2*U+2*B+1]+=F*z,R(I,2*U+2*B+1),I[2*U+2*B+2]+=P*z,R(I,2*U+2*B+2)}for(M=0;M<j;M++)I[M]=I[2*M+1]<<16|I[2*M];for(M=j;M<2*j;M++)I[M]=0;return new o(I,0)};function R(M,j){for(;(M[j]&65535)!=M[j];)M[j+1]+=M[j]>>>16,M[j]&=65535,j++}function N(M,j){this.g=M,this.h=j}function O(M,j){if(b(j))throw Error("division by zero");if(b(M))return new N(m,m);if(w(M))return j=O(S(M),j),new N(S(j.g),S(j.h));if(w(j))return j=O(M,S(j)),new N(S(j.g),j.h);if(M.g.length>30){if(w(M)||w(j))throw Error("slowDivide_ only works with positive integers.");for(var I=g,U=j;U.l(M)<=0;)I=k(I),U=k(U);var B=D(I,1),P=D(U,1);for(U=D(U,2),I=D(I,2);!b(U);){var F=P.add(U);F.l(M)<=0&&(B=B.add(I),P=F),U=D(U,1),I=D(I,1)}return j=C(M,B.j(j)),new N(B,j)}for(B=m;M.l(j)>=0;){for(I=Math.max(1,Math.floor(M.m()/j.m())),U=Math.ceil(Math.log(I)/Math.LN2),U=U<=48?1:Math.pow(2,U-48),P=d(I),F=P.j(j);w(F)||F.l(M)>0;)I-=U,P=d(I),F=P.j(j);b(P)&&(P=g),B=B.add(P),M=C(M,F)}return new N(B,M)}t.B=function(M){return O(this,M).h},t.and=function(M){const j=Math.max(this.g.length,M.g.length),I=[];for(let U=0;U<j;U++)I[U]=this.i(U)&M.i(U);return new o(I,this.h&M.h)},t.or=function(M){const j=Math.max(this.g.length,M.g.length),I=[];for(let U=0;U<j;U++)I[U]=this.i(U)|M.i(U);return new o(I,this.h|M.h)},t.xor=function(M){const j=Math.max(this.g.length,M.g.length),I=[];for(let U=0;U<j;U++)I[U]=this.i(U)^M.i(U);return new o(I,this.h^M.h)};function k(M){const j=M.g.length+1,I=[];for(let U=0;U<j;U++)I[U]=M.i(U)<<1|M.i(U-1)>>>31;return new o(I,M.h)}function D(M,j){const I=j>>5;j%=32;const U=M.g.length-I,B=[];for(let P=0;P<U;P++)B[P]=j>0?M.i(P+I)>>>j|M.i(P+I+1)<<32-j:M.i(P+I);return new o(B,M.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,$5=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=d,o.fromString=h,al=o}).apply(typeof wk<"u"?wk:typeof self<"u"?self:typeof window<"u"?window:{});var rg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var G5,uh,K5,Lg,J_,W5,Y5,X5;(function(){var t,e=Object.defineProperty;function n(T){T=[typeof globalThis=="object"&&globalThis,T,typeof window=="object"&&window,typeof self=="object"&&self,typeof rg=="object"&&rg];for(var V=0;V<T.length;++V){var $=T[V];if($&&$.Math==Math)return $}throw Error("Cannot find global object")}var r=n(this);function i(T,V){if(V)e:{var $=r;T=T.split(".");for(var J=0;J<T.length-1;J++){var he=T[J];if(!(he in $))break e;$=$[he]}T=T[T.length-1],J=$[T],V=V(J),V!=J&&V!=null&&e($,T,{configurable:!0,writable:!0,value:V})}}i("Symbol.dispose",function(T){return T||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(T){return T||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(T){return T||function(V){var $=[],J;for(J in V)Object.prototype.hasOwnProperty.call(V,J)&&$.push([J,V[J]]);return $}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function c(T){var V=typeof T;return V=="object"&&T!=null||V=="function"}function f(T,V,$){return T.call.apply(T.bind,arguments)}function d(T,V,$){return d=f,d.apply(null,arguments)}function h(T,V){var $=Array.prototype.slice.call(arguments,1);return function(){var J=$.slice();return J.push.apply(J,arguments),T.apply(this,J)}}function m(T,V){function $(){}$.prototype=V.prototype,T.Z=V.prototype,T.prototype=new $,T.prototype.constructor=T,T.Ob=function(J,he,be){for(var Oe=Array(arguments.length-2),ct=2;ct<arguments.length;ct++)Oe[ct-2]=arguments[ct];return V.prototype[he].apply(J,Oe)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?T=>T&&AsyncContext.Snapshot.wrap(T):T=>T;function v(T){const V=T.length;if(V>0){const $=Array(V);for(let J=0;J<V;J++)$[J]=T[J];return $}return[]}function b(T,V){for(let J=1;J<arguments.length;J++){const he=arguments[J];var $=typeof he;if($=$!="object"?$:he?Array.isArray(he)?"array":$:"null",$=="array"||$=="object"&&typeof he.length=="number"){$=T.length||0;const be=he.length||0;T.length=$+be;for(let Oe=0;Oe<be;Oe++)T[$+Oe]=he[Oe]}else T.push(he)}}class w{constructor(V,$){this.i=V,this.j=$,this.h=0,this.g=null}get(){let V;return this.h>0?(this.h--,V=this.g,this.g=V.next,V.next=null):V=this.i(),V}}function S(T){o.setTimeout(()=>{throw T},0)}function C(){var T=M;let V=null;return T.g&&(V=T.g,T.g=T.g.next,T.g||(T.h=null),V.next=null),V}class R{constructor(){this.h=this.g=null}add(V,$){const J=N.get();J.set(V,$),this.h?this.h.next=J:this.g=J,this.h=J}}var N=new w(()=>new O,T=>T.reset());class O{constructor(){this.next=this.g=this.h=null}set(V,$){this.h=V,this.g=$,this.next=null}reset(){this.next=this.g=this.h=null}}let k,D=!1,M=new R,j=()=>{const T=Promise.resolve(void 0);k=()=>{T.then(I)}};function I(){for(var T;T=C();){try{T.h.call(T.g)}catch($){S($)}var V=N;V.j(T),V.h<100&&(V.h++,T.next=V.g,V.g=T)}D=!1}function U(){this.u=this.u,this.C=this.C}U.prototype.u=!1,U.prototype.dispose=function(){this.u||(this.u=!0,this.N())},U.prototype[Symbol.dispose]=function(){this.dispose()},U.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function B(T,V){this.type=T,this.g=this.target=V,this.defaultPrevented=!1}B.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var T=!1,V=Object.defineProperty({},"passive",{get:function(){T=!0}});try{const $=()=>{};o.addEventListener("test",$,V),o.removeEventListener("test",$,V)}catch{}return T})();function F(T){return/^[\s\xa0]*$/.test(T)}function z(T,V){B.call(this,T?T.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,T&&this.init(T,V)}m(z,B),z.prototype.init=function(T,V){const $=this.type=T.type,J=T.changedTouches&&T.changedTouches.length?T.changedTouches[0]:null;this.target=T.target||T.srcElement,this.g=V,V=T.relatedTarget,V||($=="mouseover"?V=T.fromElement:$=="mouseout"&&(V=T.toElement)),this.relatedTarget=V,J?(this.clientX=J.clientX!==void 0?J.clientX:J.pageX,this.clientY=J.clientY!==void 0?J.clientY:J.pageY,this.screenX=J.screenX||0,this.screenY=J.screenY||0):(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0),this.button=T.button,this.key=T.key||"",this.ctrlKey=T.ctrlKey,this.altKey=T.altKey,this.shiftKey=T.shiftKey,this.metaKey=T.metaKey,this.pointerId=T.pointerId||0,this.pointerType=T.pointerType,this.state=T.state,this.i=T,T.defaultPrevented&&z.Z.h.call(this)},z.prototype.h=function(){z.Z.h.call(this);const T=this.i;T.preventDefault?T.preventDefault():T.returnValue=!1};var Q="closure_listenable_"+(Math.random()*1e6|0),W=0;function K(T,V,$,J,he){this.listener=T,this.proxy=null,this.src=V,this.type=$,this.capture=!!J,this.ha=he,this.key=++W,this.da=this.fa=!1}function te(T){T.da=!0,T.listener=null,T.proxy=null,T.src=null,T.ha=null}function ne(T,V,$){for(const J in T)V.call($,T[J],J,T)}function xe(T,V){for(const $ in T)V.call(void 0,T[$],$,T)}function G(T){const V={};for(const $ in T)V[$]=T[$];return V}const X="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function de(T,V){let $,J;for(let he=1;he<arguments.length;he++){J=arguments[he];for($ in J)T[$]=J[$];for(let be=0;be<X.length;be++)$=X[be],Object.prototype.hasOwnProperty.call(J,$)&&(T[$]=J[$])}}function ce(T){this.src=T,this.g={},this.h=0}ce.prototype.add=function(T,V,$,J,he){const be=T.toString();T=this.g[be],T||(T=this.g[be]=[],this.h++);const Oe=ze(T,V,J,he);return Oe>-1?(V=T[Oe],$||(V.fa=!1)):(V=new K(V,this.src,be,!!J,he),V.fa=$,T.push(V)),V};function ve(T,V){const $=V.type;if($ in T.g){var J=T.g[$],he=Array.prototype.indexOf.call(J,V,void 0),be;(be=he>=0)&&Array.prototype.splice.call(J,he,1),be&&(te(V),T.g[$].length==0&&(delete T.g[$],T.h--))}}function ze(T,V,$,J){for(let he=0;he<T.length;++he){const be=T[he];if(!be.da&&be.listener==V&&be.capture==!!$&&be.ha==J)return he}return-1}var je="closure_lm_"+(Math.random()*1e6|0),Fe={};function fe(T,V,$,J,he){if(Array.isArray(V)){for(let be=0;be<V.length;be++)fe(T,V[be],$,J,he);return null}return $=ee($),T&&T[Q]?T.J(V,$,c(J)?!!J.capture:!1,he):Ce(T,V,$,!1,J,he)}function Ce(T,V,$,J,he,be){if(!V)throw Error("Invalid event type");const Oe=c(he)?!!he.capture:!!he;let ct=le(T);if(ct||(T[je]=ct=new ce(T)),$=ct.add(V,$,J,Oe,be),$.proxy)return $;if(J=Ve(),$.proxy=J,J.src=T,J.listener=$,T.addEventListener)P||(he=Oe),he===void 0&&(he=!1),T.addEventListener(V.toString(),J,he);else if(T.attachEvent)T.attachEvent(q(V.toString()),J);else if(T.addListener&&T.removeListener)T.addListener(J);else throw Error("addEventListener and attachEvent are unavailable.");return $}function Ve(){function T($){return V.call(T.src,T.listener,$)}const V=ie;return T}function Ne(T,V,$,J,he){if(Array.isArray(V))for(var be=0;be<V.length;be++)Ne(T,V[be],$,J,he);else J=c(J)?!!J.capture:!!J,$=ee($),T&&T[Q]?(T=T.i,be=String(V).toString(),be in T.g&&(V=T.g[be],$=ze(V,$,J,he),$>-1&&(te(V[$]),Array.prototype.splice.call(V,$,1),V.length==0&&(delete T.g[be],T.h--)))):T&&(T=le(T))&&(V=T.g[V.toString()],T=-1,V&&(T=ze(V,$,J,he)),($=T>-1?V[T]:null)&&ft($))}function ft(T){if(typeof T!="number"&&T&&!T.da){var V=T.src;if(V&&V[Q])ve(V.i,T);else{var $=T.type,J=T.proxy;V.removeEventListener?V.removeEventListener($,J,T.capture):V.detachEvent?V.detachEvent(q($),J):V.addListener&&V.removeListener&&V.removeListener(J),($=le(V))?(ve($,T),$.h==0&&($.src=null,V[je]=null)):te(T)}}}function q(T){return T in Fe?Fe[T]:Fe[T]="on"+T}function ie(T,V){if(T.da)T=!0;else{V=new z(V,this);const $=T.listener,J=T.ha||T.src;T.fa&&ft(T),T=$.call(J,V)}return T}function le(T){return T=T[je],T instanceof ce?T:null}var Z="__closure_events_fn_"+(Math.random()*1e9>>>0);function ee(T){return typeof T=="function"?T:(T[Z]||(T[Z]=function(V){return T.handleEvent(V)}),T[Z])}function oe(){U.call(this),this.i=new ce(this),this.M=this,this.G=null}m(oe,U),oe.prototype[Q]=!0,oe.prototype.removeEventListener=function(T,V,$,J){Ne(this,T,V,$,J)};function Te(T,V){var $,J=T.G;if(J)for($=[];J;J=J.G)$.push(J);if(T=T.M,J=V.type||V,typeof V=="string")V=new B(V,T);else if(V instanceof B)V.target=V.target||T;else{var he=V;V=new B(J,T),de(V,he)}he=!0;let be,Oe;if($)for(Oe=$.length-1;Oe>=0;Oe--)be=V.g=$[Oe],he=Re(be,J,!0,V)&&he;if(be=V.g=T,he=Re(be,J,!0,V)&&he,he=Re(be,J,!1,V)&&he,$)for(Oe=0;Oe<$.length;Oe++)be=V.g=$[Oe],he=Re(be,J,!1,V)&&he}oe.prototype.N=function(){if(oe.Z.N.call(this),this.i){var T=this.i;for(const V in T.g){const $=T.g[V];for(let J=0;J<$.length;J++)te($[J]);delete T.g[V],T.h--}}this.G=null},oe.prototype.J=function(T,V,$,J){return this.i.add(String(T),V,!1,$,J)},oe.prototype.K=function(T,V,$,J){return this.i.add(String(T),V,!0,$,J)};function Re(T,V,$,J){if(V=T.i.g[String(V)],!V)return!0;V=V.concat();let he=!0;for(let be=0;be<V.length;++be){const Oe=V[be];if(Oe&&!Oe.da&&Oe.capture==$){const ct=Oe.listener,pn=Oe.ha||Oe.src;Oe.fa&&ve(T.i,Oe),he=ct.call(pn,J)!==!1&&he}}return he&&!J.defaultPrevented}function ge(T,V){if(typeof T!="function")if(T&&typeof T.handleEvent=="function")T=d(T.handleEvent,T);else throw Error("Invalid listener argument");return Number(V)>2147483647?-1:o.setTimeout(T,V||0)}function Me(T){T.g=ge(()=>{T.g=null,T.i&&(T.i=!1,Me(T))},T.l);const V=T.h;T.h=null,T.m.apply(null,V)}class Le extends U{constructor(V,$){super(),this.m=V,this.l=$,this.h=null,this.i=!1,this.g=null}j(V){this.h=arguments,this.g?this.i=!0:Me(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function De(T){U.call(this),this.h=T,this.g={}}m(De,U);var We=[];function Et(T){ne(T.g,function(V,$){this.g.hasOwnProperty($)&&ft(V)},T),T.g={}}De.prototype.N=function(){De.Z.N.call(this),Et(this)},De.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var lt=o.JSON.stringify,mr=o.JSON.parse,Ts=class{stringify(T){return o.JSON.stringify(T,void 0)}parse(T){return o.JSON.parse(T,void 0)}};function Cr(){}function Es(){}var Tt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function ln(){B.call(this,"d")}m(ln,B);function gr(){B.call(this,"c")}m(gr,B);var Rt={},Tl=null;function pa(){return Tl=Tl||new oe}Rt.Ia="serverreachability";function Bc(T){B.call(this,Rt.Ia,T)}m(Bc,B);function _i(T){const V=pa();Te(V,new Bc(V))}Rt.STAT_EVENT="statevent";function As(T,V){B.call(this,Rt.STAT_EVENT,T),this.stat=V}m(As,B);function Kt(T){const V=pa();Te(V,new As(V,T))}Rt.Ja="timingevent";function Nr(T,V){B.call(this,Rt.Ja,T),this.size=V}m(Nr,B);function Cs(T,V){if(typeof T!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){T()},V)}function Yi(){this.g=!0}Yi.prototype.ua=function(){this.g=!1};function Uv(T,V,$,J,he,be){T.info(function(){if(T.g)if(be){var Oe="",ct=be.split("&");for(let Pt=0;Pt<ct.length;Pt++){var pn=ct[Pt].split("=");if(pn.length>1){const Zt=pn[0];pn=pn[1];const Ei=Zt.split("_");Oe=Ei.length>=2&&Ei[1]=="type"?Oe+(Zt+"="+pn+"&"):Oe+(Zt+"=redacted&")}}}else Oe=null;else Oe=be;return"XMLHTTP REQ ("+J+") [attempt "+he+"]: "+V+`
`+$+`
`+Oe})}function jp(T,V,$,J,he,be,Oe){T.info(function(){return"XMLHTTP RESP ("+J+") [ attempt "+he+"]: "+V+`
`+$+`
`+be+" "+Oe})}function Ns(T,V,$,J){T.info(function(){return"XMLHTTP TEXT ("+V+"): "+Vv(T,$)+(J?" "+J:"")})}function El(T,V){T.info(function(){return"TIMEOUT: "+V})}Yi.prototype.info=function(){};function Vv(T,V){if(!T.g)return V;if(!V)return null;try{const be=JSON.parse(V);if(be){for(T=0;T<be.length;T++)if(Array.isArray(be[T])){var $=be[T];if(!($.length<2)){var J=$[1];if(Array.isArray(J)&&!(J.length<1)){var he=J[0];if(he!="noop"&&he!="stop"&&he!="close")for(let Oe=1;Oe<J.length;Oe++)J[Oe]=""}}}}return lt(be)}catch{return V}}var Al={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Yd={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Xd;function Cl(){}m(Cl,Cr),Cl.prototype.g=function(){return new XMLHttpRequest},Xd=new Cl;function xo(T){return encodeURIComponent(String(T))}function Mp(T){var V=1;T=T.split(":");const $=[];for(;V>0&&T.length;)$.push(T.shift()),V--;return T.length&&$.push(T.join(":")),$}function Xi(T,V,$,J){this.j=T,this.i=V,this.l=$,this.S=J||1,this.V=new De(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new Ji}function Ji(){this.i=null,this.g="",this.h=!1}var bn={},Ln={};function ks(T,V,$){T.M=1,T.A=Nl(wn(V)),T.u=$,T.R=!0,Hc(T,null)}function Hc(T,V){T.F=Date.now(),Is(T),T.B=wn(T.A);var $=T.B,J=T.S;Array.isArray(J)||(J=[String(J)]),Kc($.i,"t",J),T.C=0,$=T.j.L,T.h=new Ji,T.g=Yp(T.j,$?V:null,!T.u),T.P>0&&(T.O=new Le(d(T.Y,T,T.g),T.P)),V=T.V,$=T.g,J=T.ba;var he="readystatechange";Array.isArray(he)||(he&&(We[0]=he.toString()),he=We);for(let be=0;be<he.length;be++){const Oe=fe($,he[be],J||V.handleEvent,!1,V.h||V);if(!Oe)break;V.g[Oe.key]=Oe}V=T.J?G(T.J):{},T.u?(T.v||(T.v="POST"),V["Content-Type"]="application/x-www-form-urlencoded",T.g.ea(T.B,T.v,T.u,V)):(T.v="GET",T.g.ea(T.B,T.v,null,V)),_i(),Uv(T.i,T.v,T.B,T.l,T.S,T.u)}Xi.prototype.ba=function(T){T=T.target;const V=this.O;V&&es(T)==3?V.j():this.Y(T)},Xi.prototype.Y=function(T){try{if(T==this.g)e:{const ct=es(this.g),pn=this.g.ya(),Pt=this.g.ca();if(!(ct<3)&&(ct!=3||this.g&&(this.h.h||this.g.la()||Zn(this.g)))){this.K||ct!=4||pn==7||(pn==8||Pt<=0?_i(3):_i(2)),Rs(this);var V=this.g.ca();this.X=V;var $=Fv(this);if(this.o=V==200,jp(this.i,this.v,this.B,this.l,this.S,ct,V),this.o){if(this.U&&!this.L){t:{if(this.g){var J,he=this.g;if((J=he.g?he.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!F(J)){var be=J;break t}}be=null}if(T=be)Ns(this.i,this.l,T,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Ps(this,T);else{this.o=!1,this.m=3,Kt(12),ei(this),wi(this);break e}}if(this.R){T=!0;let Zt;for(;!this.K&&this.C<$.length;)if(Zt=Op(this,$),Zt==Ln){ct==4&&(this.m=4,Kt(14),T=!1),Ns(this.i,this.l,null,"[Incomplete Response]");break}else if(Zt==bn){this.m=4,Kt(15),Ns(this.i,this.l,$,"[Invalid Chunk]"),T=!1;break}else Ns(this.i,this.l,Zt,null),Ps(this,Zt);if(Dp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ct!=4||$.length!=0||this.h.h||(this.m=1,Kt(16),T=!1),this.o=this.o&&T,!T)Ns(this.i,this.l,$,"[Invalid Chunked Response]"),ei(this),wi(this);else if($.length>0&&!this.W){this.W=!0;var Oe=this.j;Oe.g==this&&Oe.aa&&!Oe.P&&(Oe.j.info("Great, no buffering proxy detected. Bytes received: "+$.length),ff(Oe),Oe.P=!0,Kt(11))}}else Ns(this.i,this.l,$,null),Ps(this,$);ct==4&&ei(this),this.o&&!this.K&&(ct==4?$p(this.j,this):(this.o=!1,Is(this)))}else _o(this.g),V==400&&$.indexOf("Unknown SID")>0?(this.m=3,Kt(12)):(this.m=0,Kt(13)),ei(this),wi(this)}}}catch{}finally{}};function Fv(T){if(!Dp(T))return T.g.la();const V=Zn(T.g);if(V==="")return"";let $="";const J=V.length,he=es(T.g)==4;if(!T.h.i){if(typeof TextDecoder>"u")return ei(T),wi(T),"";T.h.i=new o.TextDecoder}for(let be=0;be<J;be++)T.h.h=!0,$+=T.h.i.decode(V[be],{stream:!(he&&be==J-1)});return V.length=0,T.h.g+=$,T.C=0,T.h.g}function Dp(T){return T.g?T.v=="GET"&&T.M!=2&&T.j.Aa:!1}function Op(T,V){var $=T.C,J=V.indexOf(`
`,$);return J==-1?Ln:($=Number(V.substring($,J)),isNaN($)?bn:(J+=1,J+$>V.length?Ln:(V=V.slice(J,J+$),T.C=J+$,V)))}Xi.prototype.cancel=function(){this.K=!0,ei(this)};function Is(T){T.T=Date.now()+T.H,qc(T,T.H)}function qc(T,V){if(T.D!=null)throw Error("WatchDog timer not null");T.D=Cs(d(T.aa,T),V)}function Rs(T){T.D&&(o.clearTimeout(T.D),T.D=null)}Xi.prototype.aa=function(){this.D=null;const T=Date.now();T-this.T>=0?(El(this.i,this.B),this.M!=2&&(_i(),Kt(17)),ei(this),this.m=2,wi(this)):qc(this,this.T-T)};function wi(T){T.j.I==0||T.K||$p(T.j,T)}function ei(T){Rs(T);var V=T.O;V&&typeof V.dispose=="function"&&V.dispose(),T.O=null,Et(T.V),T.g&&(V=T.g,T.g=null,V.abort(),V.dispose())}function Ps(T,V){try{var $=T.j;if($.I!=0&&($.g==T||Ms($.h,T))){if(!T.L&&Ms($.h,T)&&$.I==3){try{var J=$.Ba.g.parse(V)}catch{J=null}if(Array.isArray(J)&&J.length==3){var he=J;if(he[0]==0){e:if(!$.v){if($.g)if($.g.F+3e3<T.F)Qc($),wa($);else break e;Dl($),Kt(18)}}else $.xa=he[1],0<$.xa-$.K&&he[2]<37500&&$.F&&$.A==0&&!$.C&&($.C=Cs(d($.Va,$),6e3));js($.h)<=1&&$.ta&&($.ta=void 0)}else Vs($,11)}else if((T.L||$.g==T)&&Qc($),!F(V))for(he=$.Ba.g.parse(V),V=0;V<he.length;V++){let Pt=he[V];const Zt=Pt[0];if(!(Zt<=$.K))if($.K=Zt,Pt=Pt[1],$.I==2)if(Pt[0]=="c"){$.M=Pt[1],$.ba=Pt[2];const Ei=Pt[3];Ei!=null&&($.ka=Ei,$.j.info("VER="+$.ka));const Fs=Pt[4];Fs!=null&&($.za=Fs,$.j.info("SVER="+$.za));const ts=Pt[5];ts!=null&&typeof ts=="number"&&ts>0&&(J=1.5*ts,$.O=J,$.j.info("backChannelRequestTimeoutMs_="+J)),J=$;const ns=T.g;if(ns){const Ol=ns.g?ns.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ol){var be=J.h;be.g||Ol.indexOf("spdy")==-1&&Ol.indexOf("quic")==-1&&Ol.indexOf("h2")==-1||(be.j=be.l,be.g=new Set,be.h&&(Zd(be,be.h),be.h=null))}if(J.G){const Zc=ns.g?ns.g.getResponseHeader("X-HTTP-Session-Id"):null;Zc&&(J.wa=Zc,Dt(J.J,J.G,Zc))}}$.I=3,$.l&&$.l.ra(),$.aa&&($.T=Date.now()-T.F,$.j.info("Handshake RTT: "+$.T+"ms")),J=$;var Oe=T;if(J.na=Wp(J,J.L?J.ba:null,J.W),Oe.L){ef(J.h,Oe);var ct=Oe,pn=J.O;pn&&(ct.H=pn),ct.D&&(Rs(ct),Is(ct)),J.g=Oe}else Hp(J);$.i.length>0&&Us($)}else Pt[0]!="stop"&&Pt[0]!="close"||Vs($,7);else $.I==3&&(Pt[0]=="stop"||Pt[0]=="close"?Pt[0]=="stop"?Vs($,7):uf($):Pt[0]!="noop"&&$.l&&$.l.qa(Pt),$.A=0)}}_i(4)}catch{}}var _n=class{constructor(T,V){this.g=T,this.map=V}};function Jd(T){this.l=T||10,o.PerformanceNavigationTiming?(T=o.performance.getEntriesByType("navigation"),T=T.length>0&&(T[0].nextHopProtocol=="hq"||T[0].nextHopProtocol=="h2")):T=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=T?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Qd(T){return T.h?!0:T.g?T.g.size>=T.j:!1}function js(T){return T.h?1:T.g?T.g.size:0}function Ms(T,V){return T.h?T.h==V:T.g?T.g.has(V):!1}function Zd(T,V){T.g?T.g.add(V):T.h=V}function ef(T,V){T.h&&T.h==V?T.h=null:T.g&&T.g.has(V)&&T.g.delete(V)}Jd.prototype.cancel=function(){if(this.i=tf(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const T of this.g.values())T.cancel();this.g.clear()}};function tf(T){if(T.h!=null)return T.i.concat(T.h.G);if(T.g!=null&&T.g.size!==0){let V=T.i;for(const $ of T.g.values())V=V.concat($.G);return V}return v(T.i)}var Lp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function $c(T,V){if(T){T=T.split("&");for(let $=0;$<T.length;$++){const J=T[$].indexOf("=");let he,be=null;J>=0?(he=T[$].substring(0,J),be=T[$].substring(J+1)):he=T[$],V(he,be?decodeURIComponent(be.replace(/\+/g," ")):"")}}}function ti(T){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let V;T instanceof ti?(this.l=T.l,zn(this,T.j),this.o=T.o,this.g=T.g,ma(this,T.u),this.h=T.h,nf(this,Fp(T.i)),this.m=T.m):T&&(V=String(T).match(Lp))?(this.l=!1,zn(this,V[1]||"",!0),this.o=Ds(V[2]||""),this.g=Ds(V[3]||"",!0),ma(this,V[4]),this.h=Ds(V[5]||"",!0),nf(this,V[6]||"",!0),this.m=Ds(V[7]||"")):(this.l=!1,this.i=new ya(null,this.l))}ti.prototype.toString=function(){const T=[];var V=this.j;V&&T.push(kl(V,Gc,!0),":");var $=this.g;return($||V=="file")&&(T.push("//"),(V=this.o)&&T.push(kl(V,Gc,!0),"@"),T.push(xo($).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),$=this.u,$!=null&&T.push(":",String($))),($=this.h)&&(this.g&&$.charAt(0)!="/"&&T.push("/"),T.push(kl($,$.charAt(0)=="/"?rf:zp,!0))),($=this.i.toString())&&T.push("?",$),($=this.m)&&T.push("#",kl($,Up)),T.join("")},ti.prototype.resolve=function(T){const V=wn(this);let $=!!T.j;$?zn(V,T.j):$=!!T.o,$?V.o=T.o:$=!!T.g,$?V.g=T.g:$=T.u!=null;var J=T.h;if($)ma(V,T.u);else if($=!!T.h){if(J.charAt(0)!="/")if(this.g&&!this.h)J="/"+J;else{var he=V.h.lastIndexOf("/");he!=-1&&(J=V.h.slice(0,he+1)+J)}if(he=J,he==".."||he==".")J="";else if(he.indexOf("./")!=-1||he.indexOf("/.")!=-1){J=he.lastIndexOf("/",0)==0,he=he.split("/");const be=[];for(let Oe=0;Oe<he.length;){const ct=he[Oe++];ct=="."?J&&Oe==he.length&&be.push(""):ct==".."?((be.length>1||be.length==1&&be[0]!="")&&be.pop(),J&&Oe==he.length&&be.push("")):(be.push(ct),J=!0)}J=be.join("/")}else J=he}return $?V.h=J:$=T.i.toString()!=="",$?nf(V,Fp(T.i)):$=!!T.m,$&&(V.m=T.m),V};function wn(T){return new ti(T)}function zn(T,V,$){T.j=$?Ds(V,!0):V,T.j&&(T.j=T.j.replace(/:$/,""))}function ma(T,V){if(V){if(V=Number(V),isNaN(V)||V<0)throw Error("Bad port number "+V);T.u=V}else T.u=null}function nf(T,V,$){V instanceof ya?(T.i=V,Wc(T.i,T.l)):($||(V=kl(V,ga)),T.i=new ya(V,T.l))}function Dt(T,V,$){T.i.set(V,$)}function Nl(T){return Dt(T,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),T}function Ds(T,V){return T?V?decodeURI(T.replace(/%25/g,"%2525")):decodeURIComponent(T):""}function kl(T,V,$){return typeof T=="string"?(T=encodeURI(T).replace(V,Vr),$&&(T=T.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),T):null}function Vr(T){return T=T.charCodeAt(0),"%"+(T>>4&15).toString(16)+(T&15).toString(16)}var Gc=/[#\/\?@]/g,zp=/[#\?:]/g,rf=/[#\?]/g,ga=/[#\?@]/g,Up=/#/g;function ya(T,V){this.h=this.g=null,this.i=T||null,this.j=!!V}function Fr(T){T.g||(T.g=new Map,T.h=0,T.i&&$c(T.i,function(V,$){T.add(decodeURIComponent(V.replace(/\+/g," ")),$)}))}t=ya.prototype,t.add=function(T,V){Fr(this),this.i=null,T=va(this,T);let $=this.g.get(T);return $||this.g.set(T,$=[]),$.push(V),this.h+=1,this};function Vp(T,V){Fr(T),V=va(T,V),T.g.has(V)&&(T.i=null,T.h-=T.g.get(V).length,T.g.delete(V))}function sf(T,V){return Fr(T),V=va(T,V),T.g.has(V)}t.forEach=function(T,V){Fr(this),this.g.forEach(function($,J){$.forEach(function(he){T.call(V,he,J,this)},this)},this)};function of(T,V){Fr(T);let $=[];if(typeof V=="string")sf(T,V)&&($=$.concat(T.g.get(va(T,V))));else for(T=Array.from(T.g.values()),V=0;V<T.length;V++)$=$.concat(T[V]);return $}t.set=function(T,V){return Fr(this),this.i=null,T=va(this,T),sf(this,T)&&(this.h-=this.g.get(T).length),this.g.set(T,[V]),this.h+=1,this},t.get=function(T,V){return T?(T=of(this,T),T.length>0?String(T[0]):V):V};function Kc(T,V,$){Vp(T,V),$.length>0&&(T.i=null,T.g.set(va(T,V),v($)),T.h+=$.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const T=[],V=Array.from(this.g.keys());for(let J=0;J<V.length;J++){var $=V[J];const he=xo($);$=of(this,$);for(let be=0;be<$.length;be++){let Oe=he;$[be]!==""&&(Oe+="="+xo($[be])),T.push(Oe)}}return this.i=T.join("&")};function Fp(T){const V=new ya;return V.i=T.i,T.g&&(V.g=new Map(T.g),V.h=T.h),V}function va(T,V){return V=String(V),T.j&&(V=V.toLowerCase()),V}function Wc(T,V){V&&!T.j&&(Fr(T),T.i=null,T.g.forEach(function($,J){const he=J.toLowerCase();J!=he&&(Vp(this,J),Kc(this,he,$))},T)),T.j=V}function Qi(T,V){const $=new Yi;if(o.Image){const J=new Image;J.onload=h(Si,$,"TestLoadImage: loaded",!0,V,J),J.onerror=h(Si,$,"TestLoadImage: error",!1,V,J),J.onabort=h(Si,$,"TestLoadImage: abort",!1,V,J),J.ontimeout=h(Si,$,"TestLoadImage: timeout",!1,V,J),o.setTimeout(function(){J.ontimeout&&J.ontimeout()},1e4),J.src=T}else V(!1)}function af(T,V){const $=new Yi,J=new AbortController,he=setTimeout(()=>{J.abort(),Si($,"TestPingServer: timeout",!1,V)},1e4);fetch(T,{signal:J.signal}).then(be=>{clearTimeout(he),be.ok?Si($,"TestPingServer: ok",!0,V):Si($,"TestPingServer: server error",!1,V)}).catch(()=>{clearTimeout(he),Si($,"TestPingServer: error",!1,V)})}function Si(T,V,$,J,he){try{he&&(he.onload=null,he.onerror=null,he.onabort=null,he.ontimeout=null),J($)}catch{}}function xa(){this.g=new Ts}function Os(T){this.i=T.Sb||null,this.h=T.ab||!1}m(Os,Cr),Os.prototype.g=function(){return new Il(this.i,this.h)};function Il(T,V){oe.call(this),this.H=T,this.o=V,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(Il,oe),t=Il.prototype,t.open=function(T,V){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=T,this.D=V,this.readyState=1,Zi(this)},t.send=function(T){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const V={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};T&&(V.body=T),(this.H||o).fetch(new Request(this.D,V)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ba(this)),this.readyState=0},t.Pa=function(T){if(this.g&&(this.l=T,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=T.headers,this.readyState=2,Zi(this)),this.g&&(this.readyState=3,Zi(this),this.g)))if(this.responseType==="arraybuffer")T.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in T){if(this.j=T.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Yc(this)}else T.text().then(this.Oa.bind(this),this.ga.bind(this))};function Yc(T){T.j.read().then(T.Ma.bind(T)).catch(T.ga.bind(T))}t.Ma=function(T){if(this.g){if(this.o&&T.value)this.response.push(T.value);else if(!this.o){var V=T.value?T.value:new Uint8Array(0);(V=this.B.decode(V,{stream:!T.done}))&&(this.response=this.responseText+=V)}T.done?ba(this):Zi(this),this.readyState==3&&Yc(this)}},t.Oa=function(T){this.g&&(this.response=this.responseText=T,ba(this))},t.Na=function(T){this.g&&(this.response=T,ba(this))},t.ga=function(){this.g&&ba(this)};function ba(T){T.readyState=4,T.l=null,T.j=null,T.B=null,Zi(T)}t.setRequestHeader=function(T,V){this.A.append(T,V)},t.getResponseHeader=function(T){return this.h&&this.h.get(T.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const T=[],V=this.h.entries();for(var $=V.next();!$.done;)$=$.value,T.push($[0]+": "+$[1]),$=V.next();return T.join(`\r
`)};function Zi(T){T.onreadystatechange&&T.onreadystatechange.call(T)}Object.defineProperty(Il.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(T){this.m=T?"include":"same-origin"}});function Ti(T){let V="";return ne(T,function($,J){V+=J,V+=":",V+=$,V+=`\r
`}),V}function Rl(T,V,$){e:{for(J in $){var J=!1;break e}J=!0}J||($=Ti($),typeof T=="string"?$!=null&&xo($):Dt(T,V,$))}function Vt(T){oe.call(this),this.headers=new Map,this.L=T||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(Vt,oe);var Ls=/^https?$/i,lf=["POST","PUT"];t=Vt.prototype,t.Fa=function(T){this.H=T},t.ea=function(T,V,$,J){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+T);V=V?V.toUpperCase():"GET",this.D=T,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Xd.g(),this.g.onreadystatechange=g(d(this.Ca,this));try{this.B=!0,this.g.open(V,String(T),!0),this.B=!1}catch(be){Pl(this,be);return}if(T=$||"",$=new Map(this.headers),J)if(Object.getPrototypeOf(J)===Object.prototype)for(var he in J)$.set(he,J[he]);else if(typeof J.keys=="function"&&typeof J.get=="function")for(const be of J.keys())$.set(be,J.get(be));else throw Error("Unknown input type for opt_headers: "+String(J));J=Array.from($.keys()).find(be=>be.toLowerCase()=="content-type"),he=o.FormData&&T instanceof o.FormData,!(Array.prototype.indexOf.call(lf,V,void 0)>=0)||J||he||$.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[be,Oe]of $)this.g.setRequestHeader(be,Oe);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(T),this.v=!1}catch(be){Pl(this,be)}};function Pl(T,V){T.h=!1,T.g&&(T.j=!0,T.g.abort(),T.j=!1),T.l=V,T.o=5,cf(T),bo(T)}function cf(T){T.A||(T.A=!0,Te(T,"complete"),Te(T,"error"))}t.abort=function(T){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=T||7,Te(this,"complete"),Te(this,"abort"),bo(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),bo(this,!0)),Vt.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?jl(this):this.Xa())},t.Xa=function(){jl(this)};function jl(T){if(T.h&&typeof s<"u"){if(T.v&&es(T)==4)setTimeout(T.Ca.bind(T),0);else if(Te(T,"readystatechange"),es(T)==4){T.h=!1;try{const be=T.ca();e:switch(be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var V=!0;break e;default:V=!1}var $;if(!($=V)){var J;if(J=be===0){let Oe=String(T.D).match(Lp)[1]||null;!Oe&&o.self&&o.self.location&&(Oe=o.self.location.protocol.slice(0,-1)),J=!Ls.test(Oe?Oe.toLowerCase():"")}$=J}if($)Te(T,"complete"),Te(T,"success");else{T.o=6;try{var he=es(T)>2?T.g.statusText:""}catch{he=""}T.l=he+" ["+T.ca()+"]",cf(T)}}finally{bo(T)}}}}function bo(T,V){if(T.g){T.m&&(clearTimeout(T.m),T.m=null);const $=T.g;T.g=null,V||Te(T,"ready");try{$.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function es(T){return T.g?T.g.readyState:0}t.ca=function(){try{return es(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(T){if(this.g){var V=this.g.responseText;return T&&V.indexOf(T)==0&&(V=V.substring(T.length)),mr(V)}};function Zn(T){try{if(!T.g)return null;if("response"in T.g)return T.g.response;switch(T.F){case"":case"text":return T.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in T.g)return T.g.mozResponseArrayBuffer}return null}catch{return null}}function _o(T){const V={};T=(T.g&&es(T)>=2&&T.g.getAllResponseHeaders()||"").split(`\r
`);for(let J=0;J<T.length;J++){if(F(T[J]))continue;var $=Mp(T[J]);const he=$[0];if($=$[1],typeof $!="string")continue;$=$.trim();const be=V[he]||[];V[he]=be,be.push($)}xe(V,function(J){return J.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function zs(T,V,$){return $&&$.internalChannelParams&&$.internalChannelParams[T]||V}function _a(T){this.za=0,this.i=[],this.j=new Yi,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=zs("failFast",!1,T),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=zs("baseRetryDelayMs",5e3,T),this.Za=zs("retryDelaySeedMs",1e4,T),this.Ta=zs("forwardChannelMaxRetries",2,T),this.va=zs("forwardChannelRequestTimeoutMs",2e4,T),this.ma=T&&T.xmlHttpFactory||void 0,this.Ua=T&&T.Rb||void 0,this.Aa=T&&T.useFetchStreams||!1,this.O=void 0,this.L=T&&T.supportsCrossDomainXhr||!1,this.M="",this.h=new Jd(T&&T.concurrentRequestLimit),this.Ba=new xa,this.S=T&&T.fastHandshake||!1,this.R=T&&T.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=T&&T.Pb||!1,T&&T.ua&&this.j.ua(),T&&T.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&T&&T.detectBufferingProxy||!1,this.ia=void 0,T&&T.longPollingTimeout&&T.longPollingTimeout>0&&(this.ia=T.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=_a.prototype,t.ka=8,t.I=1,t.connect=function(T,V,$,J){Kt(0),this.W=T,this.H=V||{},$&&J!==void 0&&(this.H.OSID=$,this.H.OAID=J),this.F=this.X,this.J=Wp(this,null,this.W),Us(this)};function uf(T){if(Xc(T),T.I==3){var V=T.V++,$=wn(T.J);if(Dt($,"SID",T.M),Dt($,"RID",V),Dt($,"TYPE","terminate"),Ml(T,$),V=new Xi(T,T.j,V),V.M=2,V.A=Nl(wn($)),$=!1,o.navigator&&o.navigator.sendBeacon)try{$=o.navigator.sendBeacon(V.A.toString(),"")}catch{}!$&&o.Image&&(new Image().src=V.A,$=!0),$||(V.g=Yp(V.j,null),V.g.ea(V.A)),V.F=Date.now(),Is(V)}Kp(T)}function wa(T){T.g&&(ff(T),T.g.cancel(),T.g=null)}function Xc(T){wa(T),T.v&&(o.clearTimeout(T.v),T.v=null),Qc(T),T.h.cancel(),T.m&&(typeof T.m=="number"&&o.clearTimeout(T.m),T.m=null)}function Us(T){if(!Qd(T.h)&&!T.m){T.m=!0;var V=T.Ea;k||j(),D||(k(),D=!0),M.add(V,T),T.D=0}}function Jc(T,V){return js(T.h)>=T.h.j-(T.m?1:0)?!1:T.m?(T.i=V.G.concat(T.i),!0):T.I==1||T.I==2||T.D>=(T.Sa?0:T.Ta)?!1:(T.m=Cs(d(T.Ea,T,V),Gp(T,T.D)),T.D++,!0)}t.Ea=function(T){if(this.m)if(this.m=null,this.I==1){if(!T){this.V=Math.floor(Math.random()*1e5),T=this.V++;const he=new Xi(this,this.j,T);let be=this.o;if(this.U&&(be?(be=G(be),de(be,this.U)):be=this.U),this.u!==null||this.R||(he.J=be,be=null),this.S)e:{for(var V=0,$=0;$<this.i.length;$++){t:{var J=this.i[$];if("__data__"in J.map&&(J=J.map.__data__,typeof J=="string")){J=J.length;break t}J=void 0}if(J===void 0)break;if(V+=J,V>4096){V=$;break e}if(V===4096||$===this.i.length-1){V=$+1;break e}}V=1e3}else V=1e3;V=Bp(this,he,V),$=wn(this.J),Dt($,"RID",T),Dt($,"CVER",22),this.G&&Dt($,"X-HTTP-Session-Id",this.G),Ml(this,$),be&&(this.R?V="headers="+xo(Ti(be))+"&"+V:this.u&&Rl($,this.u,be)),Zd(this.h,he),this.Ra&&Dt($,"TYPE","init"),this.S?(Dt($,"$req",V),Dt($,"SID","null"),he.U=!0,ks(he,$,null)):ks(he,$,V),this.I=2}}else this.I==3&&(T?df(this,T):this.i.length==0||Qd(this.h)||df(this))};function df(T,V){var $;V?$=V.l:$=T.V++;const J=wn(T.J);Dt(J,"SID",T.M),Dt(J,"RID",$),Dt(J,"AID",T.K),Ml(T,J),T.u&&T.o&&Rl(J,T.u,T.o),$=new Xi(T,T.j,$,T.D+1),T.u===null&&($.J=T.o),V&&(T.i=V.G.concat(T.i)),V=Bp(T,$,1e3),$.H=Math.round(T.va*.5)+Math.round(T.va*.5*Math.random()),Zd(T.h,$),ks($,J,V)}function Ml(T,V){T.H&&ne(T.H,function($,J){Dt(V,J,$)}),T.l&&ne({},function($,J){Dt(V,J,$)})}function Bp(T,V,$){$=Math.min(T.i.length,$);const J=T.l?d(T.l.Ka,T.l,T):null;e:{var he=T.i;let ct=-1;for(;;){const pn=["count="+$];ct==-1?$>0?(ct=he[0].g,pn.push("ofs="+ct)):ct=0:pn.push("ofs="+ct);let Pt=!0;for(let Zt=0;Zt<$;Zt++){var be=he[Zt].g;const Ei=he[Zt].map;if(be-=ct,be<0)ct=Math.max(0,he[Zt].g-100),Pt=!1;else try{be="req"+be+"_"||"";try{var Oe=Ei instanceof Map?Ei:Object.entries(Ei);for(const[Fs,ts]of Oe){let ns=ts;c(ts)&&(ns=lt(ts)),pn.push(be+Fs+"="+encodeURIComponent(ns))}}catch(Fs){throw pn.push(be+"type="+encodeURIComponent("_badmap")),Fs}}catch{J&&J(Ei)}}if(Pt){Oe=pn.join("&");break e}}Oe=void 0}return T=T.i.splice(0,$),V.G=T,Oe}function Hp(T){if(!T.g&&!T.v){T.Y=1;var V=T.Da;k||j(),D||(k(),D=!0),M.add(V,T),T.A=0}}function Dl(T){return T.g||T.v||T.A>=3?!1:(T.Y++,T.v=Cs(d(T.Da,T),Gp(T,T.A)),T.A++,!0)}t.Da=function(){if(this.v=null,qp(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var T=4*this.T;this.j.info("BP detection timer enabled: "+T),this.B=Cs(d(this.Wa,this),T)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Kt(10),wa(this),qp(this))};function ff(T){T.B!=null&&(o.clearTimeout(T.B),T.B=null)}function qp(T){T.g=new Xi(T,T.j,"rpc",T.Y),T.u===null&&(T.g.J=T.o),T.g.P=0;var V=wn(T.na);Dt(V,"RID","rpc"),Dt(V,"SID",T.M),Dt(V,"AID",T.K),Dt(V,"CI",T.F?"0":"1"),!T.F&&T.ia&&Dt(V,"TO",T.ia),Dt(V,"TYPE","xmlhttp"),Ml(T,V),T.u&&T.o&&Rl(V,T.u,T.o),T.O&&(T.g.H=T.O);var $=T.g;T=T.ba,$.M=1,$.A=Nl(wn(V)),$.u=null,$.R=!0,Hc($,T)}t.Va=function(){this.C!=null&&(this.C=null,wa(this),Dl(this),Kt(19))};function Qc(T){T.C!=null&&(o.clearTimeout(T.C),T.C=null)}function $p(T,V){var $=null;if(T.g==V){Qc(T),ff(T),T.g=null;var J=2}else if(Ms(T.h,V))$=V.G,ef(T.h,V),J=1;else return;if(T.I!=0){if(V.o)if(J==1){$=V.u?V.u.length:0,V=Date.now()-V.F;var he=T.D;J=pa(),Te(J,new Nr(J,$)),Us(T)}else Hp(T);else if(he=V.m,he==3||he==0&&V.X>0||!(J==1&&Jc(T,V)||J==2&&Dl(T)))switch($&&$.length>0&&(V=T.h,V.i=V.i.concat($)),he){case 1:Vs(T,5);break;case 4:Vs(T,10);break;case 3:Vs(T,6);break;default:Vs(T,2)}}}function Gp(T,V){let $=T.Qa+Math.floor(Math.random()*T.Za);return T.isActive()||($*=2),$*V}function Vs(T,V){if(T.j.info("Error code "+V),V==2){var $=d(T.bb,T),J=T.Ua;const he=!J;J=new ti(J||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||zn(J,"https"),Nl(J),he?Qi(J.toString(),$):af(J.toString(),$)}else Kt(2);T.I=0,T.l&&T.l.pa(V),Kp(T),Xc(T)}t.bb=function(T){T?(this.j.info("Successfully pinged google.com"),Kt(2)):(this.j.info("Failed to ping google.com"),Kt(1))};function Kp(T){if(T.I=0,T.ja=[],T.l){const V=tf(T.h);(V.length!=0||T.i.length!=0)&&(b(T.ja,V),b(T.ja,T.i),T.h.i.length=0,v(T.i),T.i.length=0),T.l.oa()}}function Wp(T,V,$){var J=$ instanceof ti?wn($):new ti($);if(J.g!="")V&&(J.g=V+"."+J.g),ma(J,J.u);else{var he=o.location;J=he.protocol,V=V?V+"."+he.hostname:he.hostname,he=+he.port;const be=new ti(null);J&&zn(be,J),V&&(be.g=V),he&&ma(be,he),$&&(be.h=$),J=be}return $=T.G,V=T.wa,$&&V&&Dt(J,$,V),Dt(J,"VER",T.ka),Ml(T,J),J}function Yp(T,V,$){if(V&&!T.L)throw Error("Can't create secondary domain capable XhrIo object.");return V=T.Aa&&!T.ma?new Vt(new Os({ab:$})):new Vt(T.ma),V.Fa(T.L),V}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Xp(){}t=Xp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Sa(){}Sa.prototype.g=function(T,V){return new kr(T,V)};function kr(T,V){oe.call(this),this.g=new _a(V),this.l=T,this.h=V&&V.messageUrlParams||null,T=V&&V.messageHeaders||null,V&&V.clientProtocolHeaderRequired&&(T?T["X-Client-Protocol"]="webchannel":T={"X-Client-Protocol":"webchannel"}),this.g.o=T,T=V&&V.initMessageHeaders||null,V&&V.messageContentType&&(T?T["X-WebChannel-Content-Type"]=V.messageContentType:T={"X-WebChannel-Content-Type":V.messageContentType}),V&&V.sa&&(T?T["X-WebChannel-Client-Profile"]=V.sa:T={"X-WebChannel-Client-Profile":V.sa}),this.g.U=T,(T=V&&V.Qb)&&!F(T)&&(this.g.u=T),this.A=V&&V.supportsCrossDomainXhr||!1,this.v=V&&V.sendRawJson||!1,(V=V&&V.httpSessionIdParam)&&!F(V)&&(this.g.G=V,T=this.h,T!==null&&V in T&&(T=this.h,V in T&&delete T[V])),this.j=new wo(this)}m(kr,oe),kr.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},kr.prototype.close=function(){uf(this.g)},kr.prototype.o=function(T){var V=this.g;if(typeof T=="string"){var $={};$.__data__=T,T=$}else this.v&&($={},$.__data__=lt(T),T=$);V.i.push(new _n(V.Ya++,T)),V.I==3&&Us(V)},kr.prototype.N=function(){this.g.l=null,delete this.j,uf(this.g),delete this.g,kr.Z.N.call(this)};function Jp(T){ln.call(this),T.__headers__&&(this.headers=T.__headers__,this.statusCode=T.__status__,delete T.__headers__,delete T.__status__);var V=T.__sm__;if(V){e:{for(const $ in V){T=$;break e}T=void 0}(this.i=T)&&(T=this.i,V=V!==null&&T in V?V[T]:void 0),this.data=V}else this.data=T}m(Jp,ln);function Qp(){gr.call(this),this.status=1}m(Qp,gr);function wo(T){this.g=T}m(wo,Xp),wo.prototype.ra=function(){Te(this.g,"a")},wo.prototype.qa=function(T){Te(this.g,new Jp(T))},wo.prototype.pa=function(T){Te(this.g,new Qp)},wo.prototype.oa=function(){Te(this.g,"b")},Sa.prototype.createWebChannel=Sa.prototype.g,kr.prototype.send=kr.prototype.o,kr.prototype.open=kr.prototype.m,kr.prototype.close=kr.prototype.close,X5=function(){return new Sa},Y5=function(){return pa()},W5=Rt,J_={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Al.NO_ERROR=0,Al.TIMEOUT=8,Al.HTTP_ERROR=6,Lg=Al,Yd.COMPLETE="complete",K5=Yd,Es.EventType=Tt,Tt.OPEN="a",Tt.CLOSE="b",Tt.ERROR="c",Tt.MESSAGE="d",oe.prototype.listen=oe.prototype.J,uh=Es,Vt.prototype.listenOnce=Vt.prototype.K,Vt.prototype.getLastError=Vt.prototype.Ha,Vt.prototype.getLastErrorCode=Vt.prototype.ya,Vt.prototype.getStatus=Vt.prototype.ca,Vt.prototype.getResponseJson=Vt.prototype.La,Vt.prototype.getResponseText=Vt.prototype.la,Vt.prototype.send=Vt.prototype.ea,Vt.prototype.setWithCredentials=Vt.prototype.Fa,G5=Vt}).apply(typeof rg<"u"?rg:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let br=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};br.UNAUTHENTICATED=new br(null),br.GOOGLE_CREDENTIALS=new br("google-credentials-uid"),br.FIRST_PARTY=new br("first-party-uid"),br.MOCK_USER=new br("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Cd="12.9.0";function p$(t){Cd=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wc=new kS("@firebase/firestore");function Ou(){return wc.logLevel}function Be(t,...e){if(wc.logLevel<=yt.DEBUG){const n=e.map(HS);wc.debug(`Firestore (${Cd}): ${t}`,...n)}}function Yo(t,...e){if(wc.logLevel<=yt.ERROR){const n=e.map(HS);wc.error(`Firestore (${Cd}): ${t}`,...n)}}function Sc(t,...e){if(wc.logLevel<=yt.WARN){const n=e.map(HS);wc.warn(`Firestore (${Cd}): ${t}`,...n)}}function HS(t){if(typeof t=="string")return t;try{return(function(n){return JSON.stringify(n)})(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tt(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,J5(t,r,n)}function J5(t,e,n){let r=`FIRESTORE (${Cd}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Yo(r),new Error(r)}function Mt(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||J5(e,i,r)}function at(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Ye extends ia{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc{constructor(){this.promise=new Promise(((e,n)=>{this.resolve=e,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q5{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class m${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable((()=>n(br.UNAUTHENTICATED)))}shutdown(){}}class g${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class y${constructor(e){this.t=e,this.currentUser=br.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Mt(this.o===void 0,42304);let r=this.i;const i=f=>this.i!==r?(r=this.i,n(f)):Promise.resolve();let s=new dc;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new dc,e.enqueueRetryable((()=>i(this.currentUser)))};const o=()=>{const f=s;e.enqueueRetryable((async()=>{await f.promise,await i(this.currentUser)}))},c=f=>{Be("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=f,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((f=>c(f))),setTimeout((()=>{if(!this.auth){const f=this.t.getImmediate({optional:!0});f?c(f):(Be("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new dc)}}),0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==e?(Be("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Mt(typeof r.accessToken=="string",31837,{l:r}),new Q5(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Mt(e===null||typeof e=="string",2055,{h:e}),new br(e)}}class v${constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=br.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class x${constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new v$(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable((()=>n(br.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class Sk{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class b${constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,os(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Mt(this.o===void 0,3512);const r=s=>{s.error!=null&&Be("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,Be("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable((()=>r(s)))};const i=s=>{Be("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((s=>i(s))),setTimeout((()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):Be("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new Sk(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((n=>n?(Mt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Sk(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _$(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qS{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=_$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function vt(t,e){return t<e?-1:t>e?1:0}function Q_(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Yb(i)===Yb(s)?vt(i,s):Yb(i)?1:-1}return vt(t.length,e.length)}const w$=55296,S$=57343;function Yb(t){const e=t.charCodeAt(0);return e>=w$&&e<=S$}function ad(t,e,n){return t.length===e.length&&t.every(((r,i)=>n(r,e[i])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tk="__name__";class Ys{constructor(e,n,r){n===void 0?n=0:n>e.length&&tt(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&tt(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Ys.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Ys?e.forEach((r=>{n.push(r)})):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Ys.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return vt(e.length,n.length)}static compareSegments(e,n){const r=Ys.isNumericId(e),i=Ys.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Ys.extractNumericId(e).compare(Ys.extractNumericId(n)):Q_(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return al.fromString(e.substring(4,e.length-2))}}class sn extends Ys{construct(e,n,r){return new sn(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((i=>i.length>0)))}return new sn(n)}static emptyPath(){return new sn([])}}const T$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends Ys{construct(e,n,r){return new lr(e,n,r)}static isValidIdentifier(e){return T$.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Tk}static keyField(){return new lr([Tk])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new Ye(Pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const c=e[i];if(c==="\\"){if(i+1===e.length)throw new Ye(Pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const f=e[i+1];if(f!=="\\"&&f!=="."&&f!=="`")throw new Ye(Pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=f,i+=2}else c==="`"?(o=!o,i++):c!=="."||o?(r+=c,i++):(s(),i++)}if(s(),o)throw new Ye(Pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(n)}static emptyPath(){return new lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qe{constructor(e){this.path=e}static fromPath(e){return new Qe(sn.fromString(e))}static fromName(e){return new Qe(sn.fromString(e).popFirst(5))}static empty(){return new Qe(sn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&sn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return sn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Qe(new sn(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E$(t,e,n){if(!n)throw new Ye(Pe.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function A$(t,e,n,r){if(e===!0&&r===!0)throw new Ye(Pe.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function Ek(t){if(!Qe.isDocumentKey(t))throw new Ye(Pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Z5(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function $S(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=(function(r){return r.constructor?r.constructor.name:null})(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":tt(12329,{type:typeof t})}function Ju(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Ye(Pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=$S(t);throw new Ye(Pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(t,e){const n={typeString:t};return e&&(n.value=e),n}function lp(t,e){if(!Z5(t))throw new Ye(Pe.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new Ye(Pe.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ak=-62135596800,Ck=1e6;class Jt{static now(){return Jt.fromMillis(Date.now())}static fromDate(e){return Jt.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*Ck);return new Jt(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<Ak)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Ye(Pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Ck}_compareTo(e){return this.seconds===e.seconds?vt(this.nanoseconds,e.nanoseconds):vt(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Jt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(lp(e,Jt._jsonSchema))return new Jt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-Ak;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Jt._jsonSchemaVersion="firestore/timestamp/1.0",Jt._jsonSchema={type:Nn("string",Jt._jsonSchemaVersion),seconds:Nn("number"),nanoseconds:Nn("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class st{static fromTimestamp(e){return new st(e)}static min(){return new st(new Jt(0,0))}static max(){return new st(new Jt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rh=-1;function C$(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=st.fromTimestamp(r===1e9?new Jt(n+1,0):new Jt(n,r));return new ul(i,Qe.empty(),e)}function N$(t){return new ul(t.readTime,t.key,Rh)}class ul{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new ul(st.min(),Qe.empty(),Rh)}static max(){return new ul(st.max(),Qe.empty(),Rh)}}function k$(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=Qe.comparator(t.documentKey,e.documentKey),n!==0?n:vt(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I$="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class R${constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nd(t){if(t.code!==Pe.FAILED_PRECONDITION||t.message!==I$)throw t;Be("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&tt(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Ie(((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}}))}toPromise(){return new Promise(((e,n)=>{this.next(e,n)}))}wrapUserFunction(e){try{const n=e();return n instanceof Ie?n:Ie.resolve(n)}catch(n){return Ie.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction((()=>e(n))):Ie.reject(n)}static resolve(e){return new Ie(((n,r)=>{n(e)}))}static reject(e){return new Ie(((n,r)=>{r(e)}))}static waitFor(e){return new Ie(((n,r)=>{let i=0,s=0,o=!1;e.forEach((c=>{++i,c.next((()=>{++s,o&&s===i&&n()}),(f=>r(f)))})),o=!0,s===i&&n()}))}static or(e){let n=Ie.resolve(!1);for(const r of e)n=n.next((i=>i?Ie.resolve(i):r()));return n}static forEach(e,n){const r=[];return e.forEach(((i,s)=>{r.push(n.call(this,i,s))})),this.waitFor(r)}static mapArray(e,n){return new Ie(((r,i)=>{const s=e.length,o=new Array(s);let c=0;for(let f=0;f<s;f++){const d=f;n(e[d]).next((h=>{o[d]=h,++c,c===s&&r(o)}),(h=>i(h)))}}))}static doWhile(e,n){return new Ie(((r,i)=>{const s=()=>{e()===!0?n().next((()=>{s()}),i):r()};s()}))}}function P$(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function kd(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cy{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Cy.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GS=-1;function Ny(t){return t==null}function l0(t){return t===0&&1/t==-1/0}function j$(t){return typeof t=="number"&&Number.isInteger(t)&&!l0(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e3="";function M$(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=Nk(e)),e=D$(t.get(n),e);return Nk(e)}function D$(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case e3:n+="";break;default:n+=s}}return n}function Nk(t){return t+e3+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kk(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Pc(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function t3(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class on{constructor(e,n){this.comparator=e,this.root=n||ar.EMPTY}insert(e,n){return new on(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ar.BLACK,null,null))}remove(e){return new on(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ar.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((n,r)=>(e(n,r),!1)))}toString(){const e=[];return this.inorderTraversal(((n,r)=>(e.push(`${n}:${r}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ig(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ig(this.root,e,this.comparator,!1)}getReverseIterator(){return new ig(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ig(this.root,e,this.comparator,!0)}}class ig{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ar{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ar.RED,this.left=i??ar.EMPTY,this.right=s??ar.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ar(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ar.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ar.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ar.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ar.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw tt(43730,{key:this.key,value:this.value});if(this.right.isRed())throw tt(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw tt(27949);return e+(this.isRed()?0:1)}}ar.EMPTY=null,ar.RED=!0,ar.BLACK=!1;ar.EMPTY=new class{constructor(){this.size=0}get key(){throw tt(57766)}get value(){throw tt(16141)}get color(){throw tt(16727)}get left(){throw tt(29726)}get right(){throw tt(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new ar(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this.comparator=e,this.data=new on(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((n,r)=>(e(n),!1)))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Ik(this.data.getIterator())}getIteratorFrom(e){return new Ik(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach((r=>{n=n.add(r)})),n}isEqual(e){if(!(e instanceof Mn)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((n=>{e.push(n)})),e}toString(){const e=[];return this.forEach((n=>e.push(n))),"SortedSet("+e.toString()+")"}copy(e){const n=new Mn(this.comparator);return n.data=e,n}}class Ik{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new ds([])}unionWith(e){let n=new Mn(lr.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new ds(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ad(this.fields,e.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n3 extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=(function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new n3("Invalid base64 string: "+s):s}})(e);return new dr(n)}static fromUint8Array(e){const n=(function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s})(e);return new dr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return vt(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const O$=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function dl(t){if(Mt(!!t,39018),typeof t=="string"){let e=0;const n=O$.exec(t);if(Mt(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yn(t.seconds),nanos:yn(t.nanos)}}function yn(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function fl(t){return typeof t=="string"?dr.fromBase64String(t):dr.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r3="server_timestamp",i3="__type__",s3="__previous_value__",o3="__local_write_time__";function KS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[i3])==null?void 0:r.stringValue)===r3}function ky(t){const e=t.mapValue.fields[s3];return KS(e)?ky(e):e}function Ph(t){const e=dl(t.mapValue.fields[o3].timestampValue);return new Jt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L${constructor(e,n,r,i,s,o,c,f,d,h,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=c,this.longPollingOptions=f,this.useFetchStreams=d,this.isUsingEmulator=h,this.apiKey=m}}const c0="(default)";class jh{constructor(e,n){this.projectId=e,this.database=n||c0}static empty(){return new jh("","")}get isDefaultDatabase(){return this.database===c0}isEqual(e){return e instanceof jh&&e.projectId===this.projectId&&e.database===this.database}}function z$(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Ye(Pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jh(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a3="__type__",U$="__max__",sg={mapValue:{}},l3="__vector__",u0="value";function hl(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?KS(t)?4:F$(t)?9007199254740991:V$(t)?10:11:tt(28295,{value:t})}function lo(t,e){if(t===e)return!0;const n=hl(t);if(n!==hl(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return Ph(t).isEqual(Ph(e));case 3:return(function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=dl(i.timestampValue),c=dl(s.timestampValue);return o.seconds===c.seconds&&o.nanos===c.nanos})(t,e);case 5:return t.stringValue===e.stringValue;case 6:return(function(i,s){return fl(i.bytesValue).isEqual(fl(s.bytesValue))})(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return(function(i,s){return yn(i.geoPointValue.latitude)===yn(s.geoPointValue.latitude)&&yn(i.geoPointValue.longitude)===yn(s.geoPointValue.longitude)})(t,e);case 2:return(function(i,s){if("integerValue"in i&&"integerValue"in s)return yn(i.integerValue)===yn(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=yn(i.doubleValue),c=yn(s.doubleValue);return o===c?l0(o)===l0(c):isNaN(o)&&isNaN(c)}return!1})(t,e);case 9:return ad(t.arrayValue.values||[],e.arrayValue.values||[],lo);case 10:case 11:return(function(i,s){const o=i.mapValue.fields||{},c=s.mapValue.fields||{};if(kk(o)!==kk(c))return!1;for(const f in o)if(o.hasOwnProperty(f)&&(c[f]===void 0||!lo(o[f],c[f])))return!1;return!0})(t,e);default:return tt(52216,{left:t})}}function Mh(t,e){return(t.values||[]).find((n=>lo(n,e)))!==void 0}function ld(t,e){if(t===e)return 0;const n=hl(t),r=hl(e);if(n!==r)return vt(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vt(t.booleanValue,e.booleanValue);case 2:return(function(s,o){const c=yn(s.integerValue||s.doubleValue),f=yn(o.integerValue||o.doubleValue);return c<f?-1:c>f?1:c===f?0:isNaN(c)?isNaN(f)?0:-1:1})(t,e);case 3:return Rk(t.timestampValue,e.timestampValue);case 4:return Rk(Ph(t),Ph(e));case 5:return Q_(t.stringValue,e.stringValue);case 6:return(function(s,o){const c=fl(s),f=fl(o);return c.compareTo(f)})(t.bytesValue,e.bytesValue);case 7:return(function(s,o){const c=s.split("/"),f=o.split("/");for(let d=0;d<c.length&&d<f.length;d++){const h=vt(c[d],f[d]);if(h!==0)return h}return vt(c.length,f.length)})(t.referenceValue,e.referenceValue);case 8:return(function(s,o){const c=vt(yn(s.latitude),yn(o.latitude));return c!==0?c:vt(yn(s.longitude),yn(o.longitude))})(t.geoPointValue,e.geoPointValue);case 9:return Pk(t.arrayValue,e.arrayValue);case 10:return(function(s,o){var g,v,b,w;const c=s.fields||{},f=o.fields||{},d=(g=c[u0])==null?void 0:g.arrayValue,h=(v=f[u0])==null?void 0:v.arrayValue,m=vt(((b=d==null?void 0:d.values)==null?void 0:b.length)||0,((w=h==null?void 0:h.values)==null?void 0:w.length)||0);return m!==0?m:Pk(d,h)})(t.mapValue,e.mapValue);case 11:return(function(s,o){if(s===sg.mapValue&&o===sg.mapValue)return 0;if(s===sg.mapValue)return 1;if(o===sg.mapValue)return-1;const c=s.fields||{},f=Object.keys(c),d=o.fields||{},h=Object.keys(d);f.sort(),h.sort();for(let m=0;m<f.length&&m<h.length;++m){const g=Q_(f[m],h[m]);if(g!==0)return g;const v=ld(c[f[m]],d[h[m]]);if(v!==0)return v}return vt(f.length,h.length)})(t.mapValue,e.mapValue);default:throw tt(23264,{he:n})}}function Rk(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return vt(t,e);const n=dl(t),r=dl(e),i=vt(n.seconds,r.seconds);return i!==0?i:vt(n.nanos,r.nanos)}function Pk(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=ld(n[i],r[i]);if(s)return s}return vt(n.length,r.length)}function cd(t){return Z_(t)}function Z_(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?(function(n){const r=dl(n);return`time(${r.seconds},${r.nanos})`})(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?(function(n){return fl(n).toBase64()})(t.bytesValue):"referenceValue"in t?(function(n){return Qe.fromName(n).toString()})(t.referenceValue):"geoPointValue"in t?(function(n){return`geo(${n.latitude},${n.longitude})`})(t.geoPointValue):"arrayValue"in t?(function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Z_(s);return r+"]"})(t.arrayValue):"mapValue"in t?(function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Z_(n.fields[o])}`;return i+"}"})(t.mapValue):tt(61005,{value:t})}function zg(t){switch(hl(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=ky(t);return e?16+zg(e):16;case 5:return 2*t.stringValue.length;case 6:return fl(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((i,s)=>i+zg(s)),0)})(t.arrayValue);case 10:case 11:return(function(r){let i=0;return Pc(r.fields,((s,o)=>{i+=s.length+zg(o)})),i})(t.mapValue);default:throw tt(13486,{value:t})}}function ew(t){return!!t&&"integerValue"in t}function WS(t){return!!t&&"arrayValue"in t}function jk(t){return!!t&&"nullValue"in t}function Mk(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ug(t){return!!t&&"mapValue"in t}function V$(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[a3])==null?void 0:r.stringValue)===l3}function _h(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Pc(t.mapValue.fields,((n,r)=>e.mapValue.fields[n]=_h(r))),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=_h(t.arrayValue.values[n]);return e}return{...t}}function F$(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===U$}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.value=e}static empty(){return new Li({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ug(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=_h(n)}setAll(e){let n=lr.emptyPath(),r={},i=[];e.forEach(((o,c)=>{if(!n.isImmediateParentOf(c)){const f=this.getFieldsMap(n);this.applyChanges(f,r,i),r={},i=[],n=c.popLast()}o?r[c.lastSegment()]=_h(o):i.push(c.lastSegment())}));const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ug(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return lo(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ug(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Pc(n,((i,s)=>e[i]=s));for(const i of r)delete e[i]}clone(){return new Li(_h(this.value))}}function c3(t){const e=[];return Pc(t.fields,((n,r)=>{const i=new lr([n]);if(Ug(r)){const s=c3(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)})),new ds(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r{constructor(e,n,r,i,s,o,c){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=c}static newInvalidDocument(e){return new _r(e,0,st.min(),st.min(),st.min(),Li.empty(),0)}static newFoundDocument(e,n,r,i){return new _r(e,1,n,st.min(),r,i,0)}static newNoDocument(e,n){return new _r(e,2,n,st.min(),st.min(),Li.empty(),0)}static newUnknownDocument(e,n){return new _r(e,3,n,st.min(),st.min(),Li.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(st.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Li.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Li.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=st.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof _r&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new _r(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e,n){this.position=e,this.inclusive=n}}function Dk(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=Qe.comparator(Qe.fromName(o.referenceValue),n.key):r=ld(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Ok(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!lo(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f0{constructor(e,n="asc"){this.field=e,this.dir=n}}function B$(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u3{}class jn extends u3{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new q$(e,n,r):n==="array-contains"?new K$(e,r):n==="in"?new W$(e,r):n==="not-in"?new Y$(e,r):n==="array-contains-any"?new X$(e,r):new jn(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new $$(e,r):new G$(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(ld(n,this.value)):n!==null&&hl(this.value)===hl(n)&&this.matchesComparison(ld(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return tt(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class co extends u3{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new co(e,n)}matches(e){return d3(this)?this.filters.find((n=>!n.matches(e)))===void 0:this.filters.find((n=>n.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,n)=>e.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function d3(t){return t.op==="and"}function f3(t){return H$(t)&&d3(t)}function H$(t){for(const e of t.filters)if(e instanceof co)return!1;return!0}function tw(t){if(t instanceof jn)return t.field.canonicalString()+t.op.toString()+cd(t.value);if(f3(t))return t.filters.map((e=>tw(e))).join(",");{const e=t.filters.map((n=>tw(n))).join(",");return`${t.op}(${e})`}}function h3(t,e){return t instanceof jn?(function(r,i){return i instanceof jn&&r.op===i.op&&r.field.isEqual(i.field)&&lo(r.value,i.value)})(t,e):t instanceof co?(function(r,i){return i instanceof co&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce(((s,o,c)=>s&&h3(o,i.filters[c])),!0):!1})(t,e):void tt(19439)}function p3(t){return t instanceof jn?(function(n){return`${n.field.canonicalString()} ${n.op} ${cd(n.value)}`})(t):t instanceof co?(function(n){return n.op.toString()+" {"+n.getFilters().map(p3).join(" ,")+"}"})(t):"Filter"}class q$ extends jn{constructor(e,n,r){super(e,n,r),this.key=Qe.fromName(r.referenceValue)}matches(e){const n=Qe.comparator(e.key,this.key);return this.matchesComparison(n)}}class $$ extends jn{constructor(e,n){super(e,"in",n),this.keys=m3("in",n)}matches(e){return this.keys.some((n=>n.isEqual(e.key)))}}class G$ extends jn{constructor(e,n){super(e,"not-in",n),this.keys=m3("not-in",n)}matches(e){return!this.keys.some((n=>n.isEqual(e.key)))}}function m3(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map((r=>Qe.fromName(r.referenceValue)))}class K$ extends jn{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return WS(n)&&Mh(n.arrayValue,this.value)}}class W$ extends jn{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&Mh(this.value.arrayValue,n)}}class Y$ extends jn{constructor(e,n){super(e,"not-in",n)}matches(e){if(Mh(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Mh(this.value.arrayValue,n)}}class X$ extends jn{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!WS(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>Mh(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J${constructor(e,n=null,r=[],i=[],s=null,o=null,c=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=c,this.Te=null}}function Lk(t,e=null,n=[],r=[],i=null,s=null,o=null){return new J$(t,e,n,r,i,s,o)}function YS(t){const e=at(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map((r=>tw(r))).join(","),n+="|ob:",n+=e.orderBy.map((r=>(function(s){return s.field.canonicalString()+s.dir})(r))).join(","),Ny(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map((r=>cd(r))).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map((r=>cd(r))).join(",")),e.Te=n}return e.Te}function XS(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!B$(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!h3(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Ok(t.startAt,e.startAt)&&Ok(t.endAt,e.endAt)}function nw(t){return Qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e,n=null,r=[],i=[],s=null,o="F",c=null,f=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=c,this.endAt=f,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function Q$(t,e,n,r,i,s,o,c){return new Iy(t,e,n,r,i,s,o,c)}function JS(t){return new Iy(t)}function zk(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function Z$(t){return Qe.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function eG(t){return t.collectionGroup!==null}function wh(t){const e=at(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let c=new Mn(lr.comparator);return o.filters.forEach((f=>{f.getFlattenedFilters().forEach((d=>{d.isInequality()&&(c=c.add(d.field))}))})),c})(e).forEach((s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new f0(s,r))})),n.has(lr.keyField().canonicalString())||e.Ie.push(new f0(lr.keyField(),r))}return e.Ie}function ro(t){const e=at(t);return e.Ee||(e.Ee=tG(e,wh(t))),e.Ee}function tG(t,e){if(t.limitType==="F")return Lk(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map((i=>{const s=i.dir==="desc"?"asc":"desc";return new f0(i.field,s)}));const n=t.endAt?new d0(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new d0(t.startAt.position,t.startAt.inclusive):null;return Lk(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function rw(t,e,n){return new Iy(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Ry(t,e){return XS(ro(t),ro(e))&&t.limitType===e.limitType}function g3(t){return`${YS(ro(t))}|lt:${t.limitType}`}function Lu(t){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((i=>p3(i))).join(", ")}]`),Ny(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((i=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(i))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((i=>cd(i))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((i=>cd(i))).join(",")),`Target(${r})`})(ro(t))}; limitType=${t.limitType})`}function Py(t,e){return e.isFoundDocument()&&(function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Qe.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)})(t,e)&&(function(r,i){for(const s of wh(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0})(t,e)&&(function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0})(t,e)&&(function(r,i){return!(r.startAt&&!(function(o,c,f){const d=Dk(o,c,f);return o.inclusive?d<=0:d<0})(r.startAt,wh(r),i)||r.endAt&&!(function(o,c,f){const d=Dk(o,c,f);return o.inclusive?d>=0:d>0})(r.endAt,wh(r),i))})(t,e)}function nG(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function y3(t){return(e,n)=>{let r=!1;for(const i of wh(t)){const s=rG(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function rG(t,e,n){const r=t.field.isKeyField()?Qe.comparator(e.key,n.key):(function(s,o,c){const f=o.data.field(s),d=c.data.field(s);return f!==null&&d!==null?ld(f,d):tt(42886)})(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return tt(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jc{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Pc(this.inner,((n,r)=>{for(const[i,s]of r)e(i,s)}))}isEmpty(){return t3(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iG=new on(Qe.comparator);function Xo(){return iG}const v3=new on(Qe.comparator);function dh(...t){let e=v3;for(const n of t)e=e.insert(n.key,n);return e}function x3(t){let e=v3;return t.forEach(((n,r)=>e=e.insert(n,r.overlayedDocument))),e}function oc(){return Sh()}function b3(){return Sh()}function Sh(){return new jc((t=>t.toString()),((t,e)=>t.isEqual(e)))}const sG=new on(Qe.comparator),oG=new Mn(Qe.comparator);function xt(...t){let e=oG;for(const n of t)e=e.add(n);return e}const aG=new Mn(vt);function lG(){return aG}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QS(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:l0(e)?"-0":e}}function _3(t){return{integerValue:""+t}}function cG(t,e){return j$(e)?_3(e):QS(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jy{constructor(){this._=void 0}}function uG(t,e,n){return t instanceof h0?(function(i,s){const o={fields:{[i3]:{stringValue:r3},[o3]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&KS(s)&&(s=ky(s)),s&&(o.fields[s3]=s),{mapValue:o}})(n,e):t instanceof Dh?S3(t,e):t instanceof Oh?T3(t,e):(function(i,s){const o=w3(i,s),c=Uk(o)+Uk(i.Ae);return ew(o)&&ew(i.Ae)?_3(c):QS(i.serializer,c)})(t,e)}function dG(t,e,n){return t instanceof Dh?S3(t,e):t instanceof Oh?T3(t,e):n}function w3(t,e){return t instanceof p0?(function(r){return ew(r)||(function(s){return!!s&&"doubleValue"in s})(r)})(e)?e:{integerValue:0}:null}class h0 extends jy{}class Dh extends jy{constructor(e){super(),this.elements=e}}function S3(t,e){const n=E3(e);for(const r of t.elements)n.some((i=>lo(i,r)))||n.push(r);return{arrayValue:{values:n}}}class Oh extends jy{constructor(e){super(),this.elements=e}}function T3(t,e){let n=E3(e);for(const r of t.elements)n=n.filter((i=>!lo(i,r)));return{arrayValue:{values:n}}}class p0 extends jy{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Uk(t){return yn(t.integerValue||t.doubleValue)}function E3(t){return WS(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function fG(t,e){return t.field.isEqual(e.field)&&(function(r,i){return r instanceof Dh&&i instanceof Dh||r instanceof Oh&&i instanceof Oh?ad(r.elements,i.elements,lo):r instanceof p0&&i instanceof p0?lo(r.Ae,i.Ae):r instanceof h0&&i instanceof h0})(t.transform,e.transform)}class hG{constructor(e,n){this.version=e,this.transformResults=n}}class $o{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $o}static exists(e){return new $o(void 0,e)}static updateTime(e){return new $o(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vg(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class My{}function A3(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new N3(t.key,$o.none()):new cp(t.key,t.data,$o.none());{const n=t.data,r=Li.empty();let i=new Mn(lr.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Mc(t.key,r,new ds(i.toArray()),$o.none())}}function pG(t,e,n){t instanceof cp?(function(i,s,o){const c=i.value.clone(),f=Fk(i.fieldTransforms,s,o.transformResults);c.setAll(f),s.convertToFoundDocument(o.version,c).setHasCommittedMutations()})(t,e,n):t instanceof Mc?(function(i,s,o){if(!Vg(i.precondition,s))return void s.convertToUnknownDocument(o.version);const c=Fk(i.fieldTransforms,s,o.transformResults),f=s.data;f.setAll(C3(i)),f.setAll(c),s.convertToFoundDocument(o.version,f).setHasCommittedMutations()})(t,e,n):(function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,n)}function Th(t,e,n,r){return t instanceof cp?(function(s,o,c,f){if(!Vg(s.precondition,o))return c;const d=s.value.clone(),h=Bk(s.fieldTransforms,f,o);return d.setAll(h),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),null})(t,e,n,r):t instanceof Mc?(function(s,o,c,f){if(!Vg(s.precondition,o))return c;const d=Bk(s.fieldTransforms,f,o),h=o.data;return h.setAll(C3(s)),h.setAll(d),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),c===null?null:c.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map((m=>m.field)))})(t,e,n,r):(function(s,o,c){return Vg(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):c})(t,e,n)}function mG(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=w3(r.transform,i||null);s!=null&&(n===null&&(n=Li.empty()),n.set(r.field,s))}return n||null}function Vk(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!(function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ad(r,i,((s,o)=>fG(s,o)))})(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class cp extends My{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Mc extends My{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function C3(t){const e=new Map;return t.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}})),e}function Fk(t,e,n){const r=new Map;Mt(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,c=e.data.field(s.field);r.set(s.field,dG(o,c,n[i]))}return r}function Bk(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,uG(s,o,e))}return r}class N3 extends My{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class gG extends My{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yG{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&pG(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Th(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Th(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=b3();return this.mutations.forEach((i=>{const s=e.get(i.key),o=s.overlayedDocument;let c=this.applyToLocalView(o,s.mutatedFields);c=n.has(i.key)?null:c;const f=A3(o,c);f!==null&&r.set(i.key,f),o.isValidDocument()||o.convertToNoDocument(st.min())})),r}keys(){return this.mutations.reduce(((e,n)=>e.add(n.key)),xt())}isEqual(e){return this.batchId===e.batchId&&ad(this.mutations,e.mutations,((n,r)=>Vk(n,r)))&&ad(this.baseMutations,e.baseMutations,((n,r)=>Vk(n,r)))}}class ZS{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Mt(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=(function(){return sG})();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new ZS(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vG{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xG{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Cn,_t;function bG(t){switch(t){case Pe.OK:return tt(64938);case Pe.CANCELLED:case Pe.UNKNOWN:case Pe.DEADLINE_EXCEEDED:case Pe.RESOURCE_EXHAUSTED:case Pe.INTERNAL:case Pe.UNAVAILABLE:case Pe.UNAUTHENTICATED:return!1;case Pe.INVALID_ARGUMENT:case Pe.NOT_FOUND:case Pe.ALREADY_EXISTS:case Pe.PERMISSION_DENIED:case Pe.FAILED_PRECONDITION:case Pe.ABORTED:case Pe.OUT_OF_RANGE:case Pe.UNIMPLEMENTED:case Pe.DATA_LOSS:return!0;default:return tt(15467,{code:t})}}function k3(t){if(t===void 0)return Yo("GRPC error has no .code"),Pe.UNKNOWN;switch(t){case Cn.OK:return Pe.OK;case Cn.CANCELLED:return Pe.CANCELLED;case Cn.UNKNOWN:return Pe.UNKNOWN;case Cn.DEADLINE_EXCEEDED:return Pe.DEADLINE_EXCEEDED;case Cn.RESOURCE_EXHAUSTED:return Pe.RESOURCE_EXHAUSTED;case Cn.INTERNAL:return Pe.INTERNAL;case Cn.UNAVAILABLE:return Pe.UNAVAILABLE;case Cn.UNAUTHENTICATED:return Pe.UNAUTHENTICATED;case Cn.INVALID_ARGUMENT:return Pe.INVALID_ARGUMENT;case Cn.NOT_FOUND:return Pe.NOT_FOUND;case Cn.ALREADY_EXISTS:return Pe.ALREADY_EXISTS;case Cn.PERMISSION_DENIED:return Pe.PERMISSION_DENIED;case Cn.FAILED_PRECONDITION:return Pe.FAILED_PRECONDITION;case Cn.ABORTED:return Pe.ABORTED;case Cn.OUT_OF_RANGE:return Pe.OUT_OF_RANGE;case Cn.UNIMPLEMENTED:return Pe.UNIMPLEMENTED;case Cn.DATA_LOSS:return Pe.DATA_LOSS;default:return tt(39323,{code:t})}}(_t=Cn||(Cn={}))[_t.OK=0]="OK",_t[_t.CANCELLED=1]="CANCELLED",_t[_t.UNKNOWN=2]="UNKNOWN",_t[_t.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",_t[_t.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",_t[_t.NOT_FOUND=5]="NOT_FOUND",_t[_t.ALREADY_EXISTS=6]="ALREADY_EXISTS",_t[_t.PERMISSION_DENIED=7]="PERMISSION_DENIED",_t[_t.UNAUTHENTICATED=16]="UNAUTHENTICATED",_t[_t.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",_t[_t.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",_t[_t.ABORTED=10]="ABORTED",_t[_t.OUT_OF_RANGE=11]="OUT_OF_RANGE",_t[_t.UNIMPLEMENTED=12]="UNIMPLEMENTED",_t[_t.INTERNAL=13]="INTERNAL",_t[_t.UNAVAILABLE=14]="UNAVAILABLE",_t[_t.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _G(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wG=new al([4294967295,4294967295],0);function Hk(t){const e=_G().encode(t),n=new $5;return n.update(e),new Uint8Array(n.digest())}function qk(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new al([n,r],0),new al([i,s],0)]}class eT{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new fh(`Invalid padding: ${n}`);if(r<0)throw new fh(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new fh(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new fh(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=al.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(al.fromNumber(r)));return i.compare(wG)===1&&(i=new al([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Hk(e),[r,i]=qk(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new eT(s,i,n);return r.forEach((c=>o.insert(c))),o}insert(e){if(this.ge===0)return;const n=Hk(e),[r,i]=qk(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class fh extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dy{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,up.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Dy(st.min(),i,new on(vt),Xo(),xt())}}class up{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new up(r,n,xt(),xt(),xt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class I3{constructor(e,n){this.targetId=e,this.Ce=n}}class R3{constructor(e,n,r=dr.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class $k{constructor(){this.ve=0,this.Fe=Gk(),this.Me=dr.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xt(),n=xt(),r=xt();return this.Fe.forEach(((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:tt(38017,{changeType:s})}})),new up(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Gk()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,Mt(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class SG{constructor(e){this.Ge=e,this.ze=new Map,this.je=Xo(),this.He=og(),this.Je=og(),this.Ze=new on(vt)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,(n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:tt(56790,{state:e.state})}}))}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach(((r,i)=>{this.rt(i)&&n(i)}))}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(nw(s))if(r===0){const o=new Qe(s.path);this.et(n,o,_r.newNoDocument(o,st.min()))}else Mt(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const c=this.ut(e),f=c?this.ct(c,e,o):1;if(f!==0){this.it(n);const d=f===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,d)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,c;try{o=fl(r).toUint8Array()}catch(f){if(f instanceof n3)return Sc("Decoding the base64 bloom filter in existence filter failed ("+f.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw f}try{c=new eT(o,i,s)}catch(f){return Sc(f instanceof fh?"BloomFilter error: ":"Applying bloom filter failed: ",f),null}return c.ge===0?null:c}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach((s=>{const o=this.Ge.ht(),c=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(c)||(this.et(n,s,null),i++)})),i}Tt(e){const n=new Map;this.ze.forEach(((s,o)=>{const c=this.ot(o);if(c){if(s.current&&nw(c.target)){const f=new Qe(c.target.path);this.It(f).has(o)||this.Et(o,f)||this.et(o,f,_r.newNoDocument(f,e))}s.Be&&(n.set(o,s.ke()),s.Ke())}}));let r=xt();this.Je.forEach(((s,o)=>{let c=!0;o.forEachWhile((f=>{const d=this.ot(f);return!d||d.purpose==="TargetPurposeLimboResolution"||(c=!1,!1)})),c&&(r=r.add(s))})),this.je.forEach(((s,o)=>o.setReadTime(e)));const i=new Dy(e,n,this.Ze,this.je,r);return this.je=Xo(),this.He=og(),this.Je=og(),this.Ze=new on(vt),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new $k,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Mn(vt),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Mn(vt),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||Be("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new $k),this.Ge.getRemoteKeysForTarget(e).forEach((n=>{this.et(e,n,null)}))}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function og(){return new on(Qe.comparator)}function Gk(){return new on(Qe.comparator)}const TG={asc:"ASCENDING",desc:"DESCENDING"},EG={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},AG={and:"AND",or:"OR"};class CG{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function iw(t,e){return t.useProto3Json||Ny(e)?e:{value:e}}function m0(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P3(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function NG(t,e){return m0(t,e.toTimestamp())}function io(t){return Mt(!!t,49232),st.fromTimestamp((function(n){const r=dl(n);return new Jt(r.seconds,r.nanos)})(t))}function tT(t,e){return sw(t,e).canonicalString()}function sw(t,e){const n=(function(i){return new sn(["projects",i.projectId,"databases",i.database])})(t).child("documents");return e===void 0?n:n.child(e)}function j3(t){const e=sn.fromString(t);return Mt(z3(e),10190,{key:e.toString()}),e}function ow(t,e){return tT(t.databaseId,e.path)}function Xb(t,e){const n=j3(e);if(n.get(1)!==t.databaseId.projectId)throw new Ye(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Ye(Pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new Qe(D3(n))}function M3(t,e){return tT(t.databaseId,e)}function kG(t){const e=j3(t);return e.length===4?sn.emptyPath():D3(e)}function aw(t){return new sn(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function D3(t){return Mt(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Kk(t,e,n){return{name:ow(t,e),fields:n.value.mapValue.fields}}function IG(t,e){let n;if("targetChange"in e){e.targetChange;const r=(function(d){return d==="NO_CHANGE"?0:d==="ADD"?1:d==="REMOVE"?2:d==="CURRENT"?3:d==="RESET"?4:tt(39313,{state:d})})(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=(function(d,h){return d.useProto3Json?(Mt(h===void 0||typeof h=="string",58123),dr.fromBase64String(h||"")):(Mt(h===void 0||h instanceof Buffer||h instanceof Uint8Array,16193),dr.fromUint8Array(h||new Uint8Array))})(t,e.targetChange.resumeToken),o=e.targetChange.cause,c=o&&(function(d){const h=d.code===void 0?Pe.UNKNOWN:k3(d.code);return new Ye(h,d.message||"")})(o);n=new R3(r,i,s,c||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Xb(t,r.document.name),s=io(r.document.updateTime),o=r.document.createTime?io(r.document.createTime):st.min(),c=new Li({mapValue:{fields:r.document.fields}}),f=_r.newFoundDocument(i,s,o,c),d=r.targetIds||[],h=r.removedTargetIds||[];n=new Fg(d,h,f.key,f)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Xb(t,r.document),s=r.readTime?io(r.readTime):st.min(),o=_r.newNoDocument(i,s),c=r.removedTargetIds||[];n=new Fg([],c,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Xb(t,r.document),s=r.removedTargetIds||[];n=new Fg([],s,i,null)}else{if(!("filter"in e))return tt(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new xG(i,s),c=r.targetId;n=new I3(c,o)}}return n}function RG(t,e){let n;if(e instanceof cp)n={update:Kk(t,e.key,e.value)};else if(e instanceof N3)n={delete:ow(t,e.key)};else if(e instanceof Mc)n={update:Kk(t,e.key,e.data),updateMask:VG(e.fieldMask)};else{if(!(e instanceof gG))return tt(16599,{dt:e.type});n={verify:ow(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map((r=>(function(s,o){const c=o.transform;if(c instanceof h0)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Dh)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Oh)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof p0)return{fieldPath:o.field.canonicalString(),increment:c.Ae};throw tt(20930,{transform:o.transform})})(0,r)))),e.precondition.isNone||(n.currentDocument=(function(i,s){return s.updateTime!==void 0?{updateTime:NG(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:tt(27497)})(t,e.precondition)),n}function PG(t,e){return t&&t.length>0?(Mt(e!==void 0,14353),t.map((n=>(function(i,s){let o=i.updateTime?io(i.updateTime):io(s);return o.isEqual(st.min())&&(o=io(s)),new hG(o,i.transformResults||[])})(n,e)))):[]}function jG(t,e){return{documents:[M3(t,e.path)]}}function MG(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=M3(t,i);const s=(function(d){if(d.length!==0)return L3(co.create(d,"and"))})(e.filters);s&&(n.structuredQuery.where=s);const o=(function(d){if(d.length!==0)return d.map((h=>(function(g){return{field:zu(g.field),direction:LG(g.dir)}})(h)))})(e.orderBy);o&&(n.structuredQuery.orderBy=o);const c=iw(t,e.limit);return c!==null&&(n.structuredQuery.limit=c),e.startAt&&(n.structuredQuery.startAt=(function(d){return{before:d.inclusive,values:d.position}})(e.startAt)),e.endAt&&(n.structuredQuery.endAt=(function(d){return{before:!d.inclusive,values:d.position}})(e.endAt)),{ft:n,parent:i}}function DG(t){let e=kG(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Mt(r===1,65062);const h=n.from[0];h.allDescendants?i=h.collectionId:e=e.child(h.collectionId)}let s=[];n.where&&(s=(function(m){const g=O3(m);return g instanceof co&&f3(g)?g.getFilters():[g]})(n.where));let o=[];n.orderBy&&(o=(function(m){return m.map((g=>(function(b){return new f0(Uu(b.field),(function(S){switch(S){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(b.direction))})(g)))})(n.orderBy));let c=null;n.limit&&(c=(function(m){let g;return g=typeof m=="object"?m.value:m,Ny(g)?null:g})(n.limit));let f=null;n.startAt&&(f=(function(m){const g=!!m.before,v=m.values||[];return new d0(v,g)})(n.startAt));let d=null;return n.endAt&&(d=(function(m){const g=!m.before,v=m.values||[];return new d0(v,g)})(n.endAt)),Q$(e,i,o,s,c,"F",f,d)}function OG(t,e){const n=(function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return tt(28987,{purpose:i})}})(e.purpose);return n==null?null:{"goog-listen-tags":n}}function O3(t){return t.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Uu(n.unaryFilter.field);return jn.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Uu(n.unaryFilter.field);return jn.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Uu(n.unaryFilter.field);return jn.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Uu(n.unaryFilter.field);return jn.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return tt(61313);default:return tt(60726)}})(t):t.fieldFilter!==void 0?(function(n){return jn.create(Uu(n.fieldFilter.field),(function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return tt(58110);default:return tt(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(t):t.compositeFilter!==void 0?(function(n){return co.create(n.compositeFilter.filters.map((r=>O3(r))),(function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return tt(1026)}})(n.compositeFilter.op))})(t):tt(30097,{filter:t})}function LG(t){return TG[t]}function zG(t){return EG[t]}function UG(t){return AG[t]}function zu(t){return{fieldPath:t.canonicalString()}}function Uu(t){return lr.fromServerFormat(t.fieldPath)}function L3(t){return t instanceof jn?(function(n){if(n.op==="=="){if(Mk(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NAN"}};if(jk(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Mk(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NOT_NAN"}};if(jk(n.value))return{unaryFilter:{field:zu(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:zu(n.field),op:zG(n.op),value:n.value}}})(t):t instanceof co?(function(n){const r=n.getFilters().map((i=>L3(i)));return r.length===1?r[0]:{compositeFilter:{op:UG(n.op),filters:r}}})(t):tt(54877,{filter:t})}function VG(t){const e=[];return t.fields.forEach((n=>e.push(n.canonicalString()))),{fieldPaths:e}}function z3(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function U3(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{constructor(e,n,r,i,s=st.min(),o=st.min(),c=dr.EMPTY_BYTE_STRING,f=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=c,this.expectedCount=f}withSequenceNumber(e){return new tl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new tl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FG{constructor(e){this.yt=e}}function BG(t){const e=DG({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?rw(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HG{constructor(){this.Sn=new qG}addToCollectionParentIndex(e,n){return this.Sn.add(n),Ie.resolve()}getCollectionParents(e,n){return Ie.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return Ie.resolve()}deleteFieldIndex(e,n){return Ie.resolve()}deleteAllFieldIndexes(e){return Ie.resolve()}createTargetIndexes(e,n){return Ie.resolve()}getDocumentsMatchingTarget(e,n){return Ie.resolve(null)}getIndexType(e,n){return Ie.resolve(0)}getFieldIndexes(e,n){return Ie.resolve([])}getNextCollectionGroupToUpdate(e){return Ie.resolve(null)}getMinOffset(e,n){return Ie.resolve(ul.min())}getMinOffsetFromCollectionGroup(e,n){return Ie.resolve(ul.min())}updateCollectionGroup(e,n,r){return Ie.resolve()}updateIndexEntries(e,n){return Ie.resolve()}}class qG{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Mn(sn.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Mn(sn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},V3=41943040;class Kr{static withCacheSize(e){return new Kr(e,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kr.DEFAULT_COLLECTION_PERCENTILE=10,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kr.DEFAULT=new Kr(V3,Kr.DEFAULT_COLLECTION_PERCENTILE,Kr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kr.DISABLED=new Kr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new ud(0)}static ar(){return new ud(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="LruGarbageCollector",$G=1048576;function Xk([t,e],[n,r]){const i=vt(t,n);return i===0?vt(e,r):i}class GG{constructor(e){this.Pr=e,this.buffer=new Mn(Xk),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Xk(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class KG{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){Be(Yk,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){kd(n)?Be(Yk,"Ignoring IndexedDB error during garbage collection: ",n):await Nd(n)}await this.Ar(3e5)}))}}class WG{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(e,n){if(n===0)return Ie.resolve(Cy.ce);const r=new GG(n);return this.Vr.forEachTarget(e,(i=>r.Er(i.sequenceNumber))).next((()=>this.Vr.mr(e,(i=>r.Er(i))))).next((()=>r.maxValue))}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(Be("LruGarbageCollector","Garbage collection skipped; disabled"),Ie.resolve(Wk)):this.getCacheSize(e).next((r=>r<this.params.cacheSizeCollectionThreshold?(Be("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Wk):this.gr(e,n)))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,o,c,f,d;const h=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((m=>(m>this.params.maximumSequenceNumbersToCollect?(Be("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i)))).next((m=>(r=m,c=Date.now(),this.removeTargets(e,r,n)))).next((m=>(s=m,f=Date.now(),this.removeOrphanedDocuments(e,r)))).next((m=>(d=Date.now(),Ou()<=yt.DEBUG&&Be("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-h}ms
	Determined least recently used ${i} in `+(c-o)+`ms
	Removed ${s} targets in `+(f-c)+`ms
	Removed ${m} documents in `+(d-f)+`ms
Total Duration: ${d-h}ms`),Ie.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m}))))}}function YG(t,e){return new WG(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XG{constructor(){this.changes=new jc((e=>e.toString()),((e,n)=>e.isEqual(n))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,_r.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ie.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JG{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QG{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next((i=>(r=i,this.remoteDocumentCache.getEntry(e,n)))).next((i=>(r!==null&&Th(r.mutation,i,ds.empty(),Jt.now()),i)))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.getLocalViewOfDocuments(e,r,xt()).next((()=>r))))}getLocalViewOfDocuments(e,n,r=xt()){const i=oc();return this.populateOverlays(e,i,n).next((()=>this.computeViews(e,n,i,r).next((s=>{let o=dh();return s.forEach(((c,f)=>{o=o.insert(c,f.overlayedDocument)})),o}))))}getOverlayedDocuments(e,n){const r=oc();return this.populateOverlays(e,r,n).next((()=>this.computeViews(e,n,r,xt())))}populateOverlays(e,n,r){const i=[];return r.forEach((s=>{n.has(s)||i.push(s)})),this.documentOverlayCache.getOverlays(e,i).next((s=>{s.forEach(((o,c)=>{n.set(o,c)}))}))}computeViews(e,n,r,i){let s=Xo();const o=Sh(),c=(function(){return Sh()})();return n.forEach(((f,d)=>{const h=r.get(d.key);i.has(d.key)&&(h===void 0||h.mutation instanceof Mc)?s=s.insert(d.key,d):h!==void 0?(o.set(d.key,h.mutation.getFieldMask()),Th(h.mutation,d,h.mutation.getFieldMask(),Jt.now())):o.set(d.key,ds.empty())})),this.recalculateAndSaveOverlays(e,s).next((f=>(f.forEach(((d,h)=>o.set(d,h))),n.forEach(((d,h)=>c.set(d,new JG(h,o.get(d)??null)))),c)))}recalculateAndSaveOverlays(e,n){const r=Sh();let i=new on(((o,c)=>o-c)),s=xt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next((o=>{for(const c of o)c.keys().forEach((f=>{const d=n.get(f);if(d===null)return;let h=r.get(f)||ds.empty();h=c.applyToLocalView(d,h),r.set(f,h);const m=(i.get(c.batchId)||xt()).add(f);i=i.insert(c.batchId,m)}))})).next((()=>{const o=[],c=i.getReverseIterator();for(;c.hasNext();){const f=c.getNext(),d=f.key,h=f.value,m=b3();h.forEach((g=>{if(!s.has(g)){const v=A3(n.get(g),r.get(g));v!==null&&m.set(g,v),s=s.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,d,m))}return Ie.waitFor(o)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next((r=>this.recalculateAndSaveOverlays(e,r)))}getDocumentsMatchingQuery(e,n,r,i){return Z$(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):eG(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next((s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):Ie.resolve(oc());let c=Rh,f=s;return o.next((d=>Ie.forEach(d,((h,m)=>(c<m.largestBatchId&&(c=m.largestBatchId),s.get(h)?Ie.resolve():this.remoteDocumentCache.getEntry(e,h).next((g=>{f=f.insert(h,g)}))))).next((()=>this.populateOverlays(e,d,s))).next((()=>this.computeViews(e,f,d,xt()))).next((h=>({batchId:c,changes:x3(h)})))))}))}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new Qe(n)).next((r=>{let i=dh();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i}))}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=dh();return this.indexManager.getCollectionParents(e,s).next((c=>Ie.forEach(c,(f=>{const d=(function(m,g){return new Iy(g,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)})(n,f.child(s));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next((h=>{h.forEach(((m,g)=>{o=o.insert(m,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next((o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i)))).next((o=>{s.forEach(((f,d)=>{const h=d.getKey();o.get(h)===null&&(o=o.insert(h,_r.newInvalidDocument(h)))}));let c=dh();return o.forEach(((f,d)=>{const h=s.get(f);h!==void 0&&Th(h.mutation,d,ds.empty(),Jt.now()),Py(n,d)&&(c=c.insert(f,d))})),c}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZG{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return Ie.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,(function(i){return{id:i.id,version:i.version,createTime:io(i.createTime)}})(n)),Ie.resolve()}getNamedQuery(e,n){return Ie.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,(function(i){return{name:i.name,query:BG(i.bundledQuery),readTime:io(i.readTime)}})(n)),Ie.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e7{constructor(){this.overlays=new on(Qe.comparator),this.Lr=new Map}getOverlay(e,n){return Ie.resolve(this.overlays.get(n))}getOverlays(e,n){const r=oc();return Ie.forEach(n,(i=>this.getOverlay(e,i).next((s=>{s!==null&&r.set(i,s)})))).next((()=>r))}saveOverlays(e,n,r){return r.forEach(((i,s)=>{this.bt(e,n,s)})),Ie.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach((s=>this.overlays=this.overlays.remove(s))),this.Lr.delete(r)),Ie.resolve()}getOverlaysForCollection(e,n,r){const i=oc(),s=n.length+1,o=new Qe(n.child("")),c=this.overlays.getIteratorFrom(o);for(;c.hasNext();){const f=c.getNext().value,d=f.getKey();if(!n.isPrefixOf(d.path))break;d.path.length===s&&f.largestBatchId>r&&i.set(f.getKey(),f)}return Ie.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new on(((d,h)=>d-h));const o=this.overlays.getIterator();for(;o.hasNext();){const d=o.getNext().value;if(d.getKey().getCollectionGroup()===n&&d.largestBatchId>r){let h=s.get(d.largestBatchId);h===null&&(h=oc(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}const c=oc(),f=s.getIterator();for(;f.hasNext()&&(f.getNext().value.forEach(((d,h)=>c.set(d,h))),!(c.size()>=i)););return Ie.resolve(c)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new vG(n,r));let s=this.Lr.get(n);s===void 0&&(s=xt(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t7{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return Ie.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,Ie.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(){this.kr=new Mn(Hn.Kr),this.qr=new Mn(Hn.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new Hn(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach((r=>this.addReference(r,n)))}removeReference(e,n){this.Wr(new Hn(e,n))}Qr(e,n){e.forEach((r=>this.removeReference(r,n)))}Gr(e){const n=new Qe(new sn([])),r=new Hn(n,e),i=new Hn(n,e+1),s=[];return this.qr.forEachInRange([r,i],(o=>{this.Wr(o),s.push(o.key)})),s}zr(){this.kr.forEach((e=>this.Wr(e)))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new Qe(new sn([])),r=new Hn(n,e),i=new Hn(n,e+1);let s=xt();return this.qr.forEachInRange([r,i],(o=>{s=s.add(o.key)})),s}containsKey(e){const n=new Hn(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Hn{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return Qe.comparator(e.key,n.key)||vt(e.Hr,n.Hr)}static Ur(e,n){return vt(e.Hr,n.Hr)||Qe.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n7{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Mn(Hn.Kr)}checkEmpty(e){return Ie.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new yG(s,n,r,i);this.mutationQueue.push(o);for(const c of i)this.Jr=this.Jr.add(new Hn(c.key,s)),this.indexManager.addToCollectionParentIndex(e,c.key.path.popLast());return Ie.resolve(o)}lookupMutationBatch(e,n){return Ie.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return Ie.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ie.resolve(this.mutationQueue.length===0?GS:this.Yn-1)}getAllMutationBatches(e){return Ie.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Hn(n,0),i=new Hn(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],(o=>{const c=this.Zr(o.Hr);s.push(c)})),Ie.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Mn(vt);return n.forEach((i=>{const s=new Hn(i,0),o=new Hn(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],(c=>{r=r.add(c.Hr)}))})),Ie.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;Qe.isDocumentKey(s)||(s=s.child(""));const o=new Hn(new Qe(s),0);let c=new Mn(vt);return this.Jr.forEachWhile((f=>{const d=f.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(c=c.add(f.Hr)),!0)}),o),Ie.resolve(this.Yr(c))}Yr(e){const n=[];return e.forEach((r=>{const i=this.Zr(r);i!==null&&n.push(i)})),n}removeMutationBatch(e,n){Mt(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return Ie.forEach(n.mutations,(i=>{const s=new Hn(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)})).next((()=>{this.Jr=r}))}nr(e){}containsKey(e,n){const r=new Hn(n,0),i=this.Jr.firstAfterOrEqual(r);return Ie.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ie.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r7{constructor(e){this.ti=e,this.docs=(function(){return new on(Qe.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return Ie.resolve(r?r.document.mutableCopy():_r.newInvalidDocument(n))}getEntries(e,n){let r=Xo();return n.forEach((i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():_r.newInvalidDocument(i))})),Ie.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Xo();const o=n.path,c=new Qe(o.child("__id-9223372036854775808__")),f=this.docs.getIteratorFrom(c);for(;f.hasNext();){const{key:d,value:{document:h}}=f.getNext();if(!o.isPrefixOf(d.path))break;d.path.length>o.length+1||k$(N$(h),r)<=0||(i.has(h.key)||Py(n,h))&&(s=s.insert(h.key,h.mutableCopy()))}return Ie.resolve(s)}getAllFromCollectionGroup(e,n,r,i){tt(9500)}ni(e,n){return Ie.forEach(this.docs,(r=>n(r)))}newChangeBuffer(e){return new i7(this)}getSize(e){return Ie.resolve(this.size)}}class i7 extends XG{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach(((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)})),Ie.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s7{constructor(e){this.persistence=e,this.ri=new jc((n=>YS(n)),XS),this.lastRemoteSnapshotVersion=st.min(),this.highestTargetId=0,this.ii=0,this.si=new nT,this.targetCount=0,this.oi=ud._r()}forEachTarget(e,n){return this.ri.forEach(((r,i)=>n(i))),Ie.resolve()}getLastRemoteSnapshotVersion(e){return Ie.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ie.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),Ie.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),Ie.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new ud(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,Ie.resolve()}updateTargetData(e,n){return this.lr(n),Ie.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,Ie.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach(((o,c)=>{c.sequenceNumber<=n&&r.get(c.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,c.targetId)),i++)})),Ie.waitFor(s).next((()=>i))}getTargetCount(e){return Ie.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return Ie.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),Ie.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach((o=>{s.push(i.markPotentiallyOrphaned(e,o))})),Ie.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),Ie.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return Ie.resolve(r)}containsKey(e,n){return Ie.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3{constructor(e,n){this._i={},this.overlays={},this.ai=new Cy(0),this.ui=!1,this.ui=!0,this.ci=new t7,this.referenceDelegate=e(this),this.li=new s7(this),this.indexManager=new HG,this.remoteDocumentCache=(function(i){return new r7(i)})((r=>this.referenceDelegate.hi(r))),this.serializer=new FG(n),this.Pi=new ZG(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new e7,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new n7(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){Be("MemoryPersistence","Starting transaction:",e);const i=new o7(this.ai.next());return this.referenceDelegate.Ti(),r(i).next((s=>this.referenceDelegate.Ii(i).next((()=>s)))).toPromise().then((s=>(i.raiseOnCommittedEvent(),s)))}Ei(e,n){return Ie.or(Object.values(this._i).map((r=>()=>r.containsKey(e,n))))}}class o7 extends R${constructor(e){super(),this.currentSequenceNumber=e}}class rT{constructor(e){this.persistence=e,this.Ri=new nT,this.Ai=null}static Vi(e){return new rT(e)}get di(){if(this.Ai)return this.Ai;throw tt(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),Ie.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),Ie.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),Ie.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach((i=>this.di.add(i.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next((i=>{i.forEach((s=>this.di.add(s.toString())))})).next((()=>r.removeTargetData(e,n)))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ie.forEach(this.di,(r=>{const i=Qe.fromPath(r);return this.mi(e,i).next((s=>{s||n.removeEntry(i,st.min())}))})).next((()=>(this.Ai=null,n.apply(e))))}updateLimboDocument(e,n){return this.mi(e,n).next((r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())}))}hi(e){return 0}mi(e,n){return Ie.or([()=>Ie.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class g0{constructor(e,n){this.persistence=e,this.fi=new jc((r=>M$(r.path)),((r,i)=>r.isEqual(i))),this.garbageCollector=YG(this,n)}static Vi(e,n){return new g0(e,n)}Ti(){}Ii(e){return Ie.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next((r=>n.next((i=>r+i))))}pr(e){let n=0;return this.mr(e,(r=>{n++})).next((()=>n))}mr(e,n){return Ie.forEach(this.fi,((r,i)=>this.wr(e,r,i).next((s=>s?Ie.resolve():n(i)))))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,(o=>this.wr(e,o,n).next((c=>{c||(r++,s.removeEntry(o,st.min()))})))).next((()=>s.apply(e))).next((()=>r))}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ie.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),Ie.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),Ie.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=zg(e.data.value)),n}wr(e,n,r){return Ie.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return Ie.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iT{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=xt(),i=xt();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new iT(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a7{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l7{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=(function(){return XF()?8:P$(Sr())>0?6:4})()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next((o=>{s.result=o})).next((()=>{if(!s.result)return this.ps(e,n,i,r).next((o=>{s.result=o}))})).next((()=>{if(s.result)return;const o=new a7;return this.ys(e,n,o).next((c=>{if(s.result=c,this.As)return this.ws(e,n,o,c.size)}))})).next((()=>s.result))}ws(e,n,r,i){return r.documentReadCount<this.Vs?(Ou()<=yt.DEBUG&&Be("QueryEngine","SDK will not create cache indexes for query:",Lu(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),Ie.resolve()):(Ou()<=yt.DEBUG&&Be("QueryEngine","Query:",Lu(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(Ou()<=yt.DEBUG&&Be("QueryEngine","The SDK decides to create cache indexes for query:",Lu(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ro(n))):Ie.resolve())}gs(e,n){if(zk(n))return Ie.resolve(null);let r=ro(n);return this.indexManager.getIndexType(e,r).next((i=>i===0?null:(n.limit!==null&&i===1&&(n=rw(n,null,"F"),r=ro(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next((s=>{const o=xt(...s);return this.fs.getDocuments(e,o).next((c=>this.indexManager.getMinOffset(e,r).next((f=>{const d=this.bs(n,c);return this.Ss(n,d,o,f.readTime)?this.gs(e,rw(n,null,"F")):this.Ds(e,d,n,f)}))))})))))}ps(e,n,r,i){return zk(n)||i.isEqual(st.min())?Ie.resolve(null):this.fs.getDocuments(e,r).next((s=>{const o=this.bs(n,s);return this.Ss(n,o,r,i)?Ie.resolve(null):(Ou()<=yt.DEBUG&&Be("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Lu(n)),this.Ds(e,o,n,C$(i,Rh)).next((c=>c)))}))}bs(e,n){let r=new Mn(y3(e));return n.forEach(((i,s)=>{Py(e,s)&&(r=r.add(s))})),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return Ou()<=yt.DEBUG&&Be("QueryEngine","Using full collection scan to execute query:",Lu(n)),this.fs.getDocumentsMatchingQuery(e,n,ul.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next((s=>(n.forEach((o=>{s=s.insert(o.key,o)})),s)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sT="LocalStore",c7=3e8;class u7{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new on(vt),this.Fs=new jc((s=>YS(s)),XS),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new QG(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>e.collect(n,this.vs)))}}function d7(t,e,n,r){return new u7(t,e,n,r)}async function B3(t,e){const n=at(t);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next((s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r)))).next((s=>{const o=[],c=[];let f=xt();for(const d of i){o.push(d.batchId);for(const h of d.mutations)f=f.add(h.key)}for(const d of s){c.push(d.batchId);for(const h of d.mutations)f=f.add(h.key)}return n.localDocuments.getDocuments(r,f).next((d=>({Ns:d,removedBatchIds:o,addedBatchIds:c})))}))}))}function f7(t,e){const n=at(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return(function(c,f,d,h){const m=d.batch,g=m.keys();let v=Ie.resolve();return g.forEach((b=>{v=v.next((()=>h.getEntry(f,b))).next((w=>{const S=d.docVersions.get(b);Mt(S!==null,48541),w.version.compareTo(S)<0&&(m.applyToRemoteDocument(w,d),w.isValidDocument()&&(w.setReadTime(d.commitVersion),h.addEntry(w)))}))})),v.next((()=>c.mutationQueue.removeMutationBatch(f,m)))})(n,r,e,s).next((()=>s.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(c){let f=xt();for(let d=0;d<c.mutationResults.length;++d)c.mutationResults[d].transformResults.length>0&&(f=f.add(c.batch.mutations[d].key));return f})(e)))).next((()=>n.localDocuments.getDocuments(r,i)))}))}function H3(t){const e=at(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>e.li.getLastRemoteSnapshotVersion(n)))}function h7(t,e){const n=at(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(s=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const c=[];e.targetChanges.forEach(((h,m)=>{const g=i.get(m);if(!g)return;c.push(n.li.removeMatchingKeys(s,h.removedDocuments,m).next((()=>n.li.addMatchingKeys(s,h.addedDocuments,m))));let v=g.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?v=v.withResumeToken(dr.EMPTY_BYTE_STRING,st.min()).withLastLimboFreeSnapshotVersion(st.min()):h.resumeToken.approximateByteSize()>0&&(v=v.withResumeToken(h.resumeToken,r)),i=i.insert(m,v),(function(w,S,C){return w.resumeToken.approximateByteSize()===0||S.snapshotVersion.toMicroseconds()-w.snapshotVersion.toMicroseconds()>=c7?!0:C.addedDocuments.size+C.modifiedDocuments.size+C.removedDocuments.size>0})(g,v,h)&&c.push(n.li.updateTargetData(s,v))}));let f=Xo(),d=xt();if(e.documentUpdates.forEach((h=>{e.resolvedLimboDocuments.has(h)&&c.push(n.persistence.referenceDelegate.updateLimboDocument(s,h))})),c.push(p7(s,o,e.documentUpdates).next((h=>{f=h.Bs,d=h.Ls}))),!r.isEqual(st.min())){const h=n.li.getLastRemoteSnapshotVersion(s).next((m=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r)));c.push(h)}return Ie.waitFor(c).next((()=>o.apply(s))).next((()=>n.localDocuments.getLocalViewOfDocuments(s,f,d))).next((()=>f))})).then((s=>(n.vs=i,s)))}function p7(t,e,n){let r=xt(),i=xt();return n.forEach((s=>r=r.add(s))),e.getEntries(t,r).next((s=>{let o=Xo();return n.forEach(((c,f)=>{const d=s.get(c);f.isFoundDocument()!==d.isFoundDocument()&&(i=i.add(c)),f.isNoDocument()&&f.version.isEqual(st.min())?(e.removeEntry(c,f.readTime),o=o.insert(c,f)):!d.isValidDocument()||f.version.compareTo(d.version)>0||f.version.compareTo(d.version)===0&&d.hasPendingWrites?(e.addEntry(f),o=o.insert(c,f)):Be(sT,"Ignoring outdated watch update for ",c,". Current version:",d.version," Watch version:",f.version)})),{Bs:o,Ls:i}}))}function m7(t,e){const n=at(t);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(e===void 0&&(e=GS),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e))))}function g7(t,e){const n=at(t);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let i;return n.li.getTargetData(r,e).next((s=>s?(i=s,Ie.resolve(i)):n.li.allocateTargetId(r).next((o=>(i=new tl(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next((()=>i)))))))})).then((r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r}))}async function lw(t,e,n){const r=at(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,(o=>r.persistence.referenceDelegate.removeTarget(o,i)))}catch(o){if(!kd(o))throw o;Be(sT,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Jk(t,e,n){const r=at(t);let i=st.min(),s=xt();return r.persistence.runTransaction("Execute query","readwrite",(o=>(function(f,d,h){const m=at(f),g=m.Fs.get(h);return g!==void 0?Ie.resolve(m.vs.get(g)):m.li.getTargetData(d,h)})(r,o,ro(e)).next((c=>{if(c)return i=c.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,c.targetId).next((f=>{s=f}))})).next((()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:st.min(),n?s:xt()))).next((c=>(y7(r,nG(e),c),{documents:c,ks:s})))))}function y7(t,e,n){let r=t.Ms.get(e)||st.min();n.forEach(((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)})),t.Ms.set(e,r)}class Qk{constructor(){this.activeTargetIds=lG()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class v7{constructor(){this.vo=new Qk,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Qk,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zk="ConnectivityMonitor";class eI{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){Be(Zk,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){Be(Zk,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ag=null;function cw(){return ag===null?ag=(function(){return 268435456+Math.round(2147483648*Math.random())})():ag++,"0x"+ag.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jb="RestConnection",b7={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class _7{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===c0?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=cw(),c=this.Qo(e,n.toUriEncodedString());Be(Jb,`Sending RPC '${e}' ${o}:`,c,r);const f={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(f,i,s);const{host:d}=new URL(c),h=Td(d);return this.zo(e,c,f,r,h).then((m=>(Be(Jb,`Received RPC '${e}' ${o}: `,m),m)),(m=>{throw Sc(Jb,`RPC '${e}' ${o} failed with error: `,m,"url: ",c,"request:",r),m}))}jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Cd})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((i,s)=>e[s]=i)),r&&r.headers.forEach(((i,s)=>e[s]=i))}Qo(e,n){const r=b7[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w7{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vr="WebChannelConnection",Jf=(t,e,n)=>{t.listen(e,(r=>{try{n(r)}catch(i){setTimeout((()=>{throw i}),0)}}))};class Qu extends _7{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Qu.c_){const e=Y5();Jf(e,W5.STAT_EVENT,(n=>{n.stat===J_.PROXY?Be(vr,"STAT_EVENT: detected buffering proxy"):n.stat===J_.NOPROXY&&Be(vr,"STAT_EVENT: detected no buffering proxy")})),Qu.c_=!0}}zo(e,n,r,i,s){const o=cw();return new Promise(((c,f)=>{const d=new G5;d.setWithCredentials(!0),d.listenOnce(K5.COMPLETE,(()=>{try{switch(d.getLastErrorCode()){case Lg.NO_ERROR:const m=d.getResponseJson();Be(vr,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),c(m);break;case Lg.TIMEOUT:Be(vr,`RPC '${e}' ${o} timed out`),f(new Ye(Pe.DEADLINE_EXCEEDED,"Request time out"));break;case Lg.HTTP_ERROR:const g=d.getStatus();if(Be(vr,`RPC '${e}' ${o} failed with status:`,g,"response text:",d.getResponseText()),g>0){let v=d.getResponseJson();Array.isArray(v)&&(v=v[0]);const b=v==null?void 0:v.error;if(b&&b.status&&b.message){const w=(function(C){const R=C.toLowerCase().replace(/_/g,"-");return Object.values(Pe).indexOf(R)>=0?R:Pe.UNKNOWN})(b.status);f(new Ye(w,b.message))}else f(new Ye(Pe.UNKNOWN,"Server responded with status "+d.getStatus()))}else f(new Ye(Pe.UNAVAILABLE,"Connection failed."));break;default:tt(9055,{l_:e,streamId:o,h_:d.getLastErrorCode(),P_:d.getLastError()})}}finally{Be(vr,`RPC '${e}' ${o} completed.`)}}));const h=JSON.stringify(i);Be(vr,`RPC '${e}' ${o} sending request:`,i),d.send(n,"POST",h,r,15)}))}T_(e,n,r){const i=cw(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Go(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=s.join("");Be(vr,`Creating RPC '${e}' stream ${i}: ${d}`,c);const h=o.createWebChannel(d,c);this.I_(h);let m=!1,g=!1;const v=new w7({Ho:b=>{g?Be(vr,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(Be(vr,`Opening RPC '${e}' stream ${i} transport.`),h.open(),m=!0),Be(vr,`RPC '${e}' stream ${i} sending:`,b),h.send(b))},Jo:()=>h.close()});return Jf(h,uh.EventType.OPEN,(()=>{g||(Be(vr,`RPC '${e}' stream ${i} transport opened.`),v.i_())})),Jf(h,uh.EventType.CLOSE,(()=>{g||(g=!0,Be(vr,`RPC '${e}' stream ${i} transport closed`),v.o_(),this.E_(h))})),Jf(h,uh.EventType.ERROR,(b=>{g||(g=!0,Sc(vr,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),v.o_(new Ye(Pe.UNAVAILABLE,"The operation could not be completed")))})),Jf(h,uh.EventType.MESSAGE,(b=>{var w;if(!g){const S=b.data[0];Mt(!!S,16349);const C=S,R=(C==null?void 0:C.error)||((w=C[0])==null?void 0:w.error);if(R){Be(vr,`RPC '${e}' stream ${i} received error:`,R);const N=R.status;let O=(function(M){const j=Cn[M];if(j!==void 0)return k3(j)})(N),k=R.message;N==="NOT_FOUND"&&k.includes("database")&&k.includes("does not exist")&&k.includes(this.databaseId.database)&&Sc(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),O===void 0&&(O=Pe.INTERNAL,k="Unknown error status: "+N+" with message "+R.message),g=!0,v.o_(new Ye(O,k)),h.close()}else Be(vr,`RPC '${e}' stream ${i} received:`,S),v.__(S)}})),Qu.u_(),setTimeout((()=>{v.s_()}),0),v}terminate(){this.a_.forEach((e=>e.close())),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter((n=>n===e))}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return X5()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S7(t){return new Qu(t)}function Qb(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(t){return new CG(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Qu.c_=!1;class q3{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&Be("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,(()=>(this.f_=Date.now(),e()))),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tI="PersistentStream";class $3{constructor(e,n,r,i,s,o,c,f){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=c,this.listener=f,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new q3(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,(()=>this.k_())))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===Pe.RESOURCE_EXHAUSTED?(Yo(n.toString()),Yo("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===Pe.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,i])=>{this.D_===n&&this.G_(r,i)}),(r=>{e((()=>{const i=new Ye(Pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)}))}))}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo((()=>{r((()=>this.listener.Zo()))})),this.stream.Yo((()=>{r((()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.Yo())))})),this.stream.t_((i=>{r((()=>this.z_(i)))})),this.stream.onMessage((i=>{r((()=>++this.F_==1?this.H_(i):this.onNext(i)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return Be(tI,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget((()=>this.D_===e?n():(Be(tI,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class T7 extends $3{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=IG(this.serializer,e),r=(function(s){if(!("targetChange"in s))return st.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?st.min():o.readTime?io(o.readTime):st.min()})(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=aw(this.serializer),n.addTarget=(function(s,o){let c;const f=o.target;if(c=nw(f)?{documents:jG(s,f)}:{query:MG(s,f).ft},c.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){c.resumeToken=P3(s,o.resumeToken);const d=iw(s,o.expectedCount);d!==null&&(c.expectedCount=d)}else if(o.snapshotVersion.compareTo(st.min())>0){c.readTime=m0(s,o.snapshotVersion.toTimestamp());const d=iw(s,o.expectedCount);d!==null&&(c.expectedCount=d)}return c})(this.serializer,e);const r=OG(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=aw(this.serializer),n.removeTarget=e,this.K_(n)}}class E7 extends $3{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return Mt(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Mt(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Mt(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=PG(e.writeResults,e.commitTime),r=io(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=aw(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map((r=>RG(this.serializer,r)))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A7{}class C7 extends A7{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new Ye(Pe.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([s,o])=>this.connection.Wo(e,sw(n,r),i,s,o))).catch((s=>{throw s.name==="FirebaseError"?(s.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new Ye(Pe.UNKNOWN,s.toString())}))}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,c])=>this.connection.jo(e,sw(n,r),i,o,c,s))).catch((o=>{throw o.name==="FirebaseError"?(o.code===Pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new Ye(Pe.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}function N7(t,e,n,r){return new C7(t,e,n,r)}class k7{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Yo(n),this.aa=!1):Be("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc="RemoteStore";class I7{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo((o=>{r.enqueueAndForget((async()=>{Dc(this)&&(Be(Tc,"Restarting streams for network reachability change."),await(async function(f){const d=at(f);d.Ea.add(4),await dp(d),d.Va.set("Unknown"),d.Ea.delete(4),await Ly(d)})(this))}))})),this.Va=new k7(r,i)}}async function Ly(t){if(Dc(t))for(const e of t.Ra)await e(!0)}async function dp(t){for(const e of t.Ra)await e(!1)}function G3(t,e){const n=at(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),cT(n)?lT(n):Id(n).O_()&&aT(n,e))}function oT(t,e){const n=at(t),r=Id(n);n.Ia.delete(e),r.O_()&&K3(n,e),n.Ia.size===0&&(r.O_()?r.L_():Dc(n)&&n.Va.set("Unknown"))}function aT(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(st.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Id(t).Z_(e)}function K3(t,e){t.da.$e(e),Id(t).X_(e)}function lT(t){t.da=new SG({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Id(t).start(),t.Va.ua()}function cT(t){return Dc(t)&&!Id(t).x_()&&t.Ia.size>0}function Dc(t){return at(t).Ea.size===0}function W3(t){t.da=void 0}async function R7(t){t.Va.set("Online")}async function P7(t){t.Ia.forEach(((e,n)=>{aT(t,e)}))}async function j7(t,e){W3(t),cT(t)?(t.Va.ha(e),lT(t)):t.Va.set("Unknown")}async function M7(t,e,n){if(t.Va.set("Online"),e instanceof R3&&e.state===2&&e.cause)try{await(async function(i,s){const o=s.cause;for(const c of s.targetIds)i.Ia.has(c)&&(await i.remoteSyncer.rejectListen(c,o),i.Ia.delete(c),i.da.removeTarget(c))})(t,e)}catch(r){Be(Tc,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await y0(t,r)}else if(e instanceof Fg?t.da.Xe(e):e instanceof I3?t.da.st(e):t.da.tt(e),!n.isEqual(st.min()))try{const r=await H3(t.localStore);n.compareTo(r)>=0&&await(function(s,o){const c=s.da.Tt(o);return c.targetChanges.forEach(((f,d)=>{if(f.resumeToken.approximateByteSize()>0){const h=s.Ia.get(d);h&&s.Ia.set(d,h.withResumeToken(f.resumeToken,o))}})),c.targetMismatches.forEach(((f,d)=>{const h=s.Ia.get(f);if(!h)return;s.Ia.set(f,h.withResumeToken(dr.EMPTY_BYTE_STRING,h.snapshotVersion)),K3(s,f);const m=new tl(h.target,f,d,h.sequenceNumber);aT(s,m)})),s.remoteSyncer.applyRemoteEvent(c)})(t,n)}catch(r){Be(Tc,"Failed to raise snapshot:",r),await y0(t,r)}}async function y0(t,e,n){if(!kd(e))throw e;t.Ea.add(1),await dp(t),t.Va.set("Offline"),n||(n=()=>H3(t.localStore)),t.asyncQueue.enqueueRetryable((async()=>{Be(Tc,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Ly(t)}))}function Y3(t,e){return e().catch((n=>y0(t,n,e)))}async function zy(t){const e=at(t),n=pl(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:GS;for(;D7(e);)try{const i=await m7(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,O7(e,i)}catch(i){await y0(e,i)}X3(e)&&J3(e)}function D7(t){return Dc(t)&&t.Ta.length<10}function O7(t,e){t.Ta.push(e);const n=pl(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function X3(t){return Dc(t)&&!pl(t).x_()&&t.Ta.length>0}function J3(t){pl(t).start()}async function L7(t){pl(t).ra()}async function z7(t){const e=pl(t);for(const n of t.Ta)e.ea(n.mutations)}async function U7(t,e,n){const r=t.Ta.shift(),i=ZS.from(r,e,n);await Y3(t,(()=>t.remoteSyncer.applySuccessfulWrite(i))),await zy(t)}async function V7(t,e){e&&pl(t).Y_&&await(async function(r,i){if((function(o){return bG(o)&&o!==Pe.ABORTED})(i.code)){const s=r.Ta.shift();pl(r).B_(),await Y3(r,(()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i))),await zy(r)}})(t,e),X3(t)&&J3(t)}async function nI(t,e){const n=at(t);n.asyncQueue.verifyOperationInProgress(),Be(Tc,"RemoteStore received new credentials");const r=Dc(n);n.Ea.add(3),await dp(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Ly(n)}async function F7(t,e){const n=at(t);e?(n.Ea.delete(2),await Ly(n)):e||(n.Ea.add(2),await dp(n),n.Va.set("Unknown"))}function Id(t){return t.ma||(t.ma=(function(n,r,i){const s=at(n);return s.sa(),new T7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Zo:R7.bind(null,t),Yo:P7.bind(null,t),t_:j7.bind(null,t),J_:M7.bind(null,t)}),t.Ra.push((async e=>{e?(t.ma.B_(),cT(t)?lT(t):t.Va.set("Unknown")):(await t.ma.stop(),W3(t))}))),t.ma}function pl(t){return t.fa||(t.fa=(function(n,r,i){const s=at(n);return s.sa(),new E7(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)})(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:L7.bind(null,t),t_:V7.bind(null,t),ta:z7.bind(null,t),na:U7.bind(null,t)}),t.Ra.push((async e=>{e?(t.fa.B_(),await zy(t)):(await t.fa.stop(),t.Ta.length>0&&(Be(Tc,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))}))),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uT{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new dc,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,c=new uT(e,n,o,i,s);return c.start(r),c}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Ye(Pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function dT(t,e){if(Yo("AsyncQueue",`${e}: ${t}`),kd(t))return new Ye(Pe.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{static emptySet(e){return new Zu(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||Qe.comparator(n.key,r.key):(n,r)=>Qe.comparator(n.key,r.key),this.keyedMap=dh(),this.sortedSet=new on(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((n,r)=>(e(n),!1)))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Zu)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach((n=>{e.push(n.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Zu;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rI{constructor(){this.ga=new on(Qe.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):tt(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal(((n,r)=>{e.push(r)})),e}}class dd{constructor(e,n,r,i,s,o,c,f,d){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=c,this.excludesMetadataChanges=f,this.hasCachedResults=d}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach((c=>{o.push({type:0,doc:c})})),new dd(e,n,Zu.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Ry(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B7{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some((e=>e.Da()))}}class H7{constructor(){this.queries=iI(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=at(n),s=i.queries;i.queries=iI(),s.forEach(((o,c)=>{for(const f of c.ba)f.onError(r)}))})(this,new Ye(Pe.ABORTED,"Firestore shutting down"))}}function iI(){return new jc((t=>g3(t)),Ry)}async function q7(t,e){const n=at(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new B7,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const c=dT(o,`Initialization of query '${Lu(e.query)}' failed`);return void e.onError(c)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&fT(n)}async function $7(t,e){const n=at(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function G7(t,e){const n=at(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const c of o.ba)c.Fa(i)&&(r=!0);o.wa=i}}r&&fT(n)}function K7(t,e,n){const r=at(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function fT(t){t.Ca.forEach((e=>{e.next()}))}var uw,sI;(sI=uw||(uw={})).Ma="default",sI.Cache="cache";class W7{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new dd(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=dd.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==uw.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Q3{constructor(e){this.key=e}}class Z3{constructor(e){this.key=e}}class Y7{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=xt(),this.mutatedKeys=xt(),this.eu=y3(e),this.tu=new Zu(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new rI,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,c=!1;const f=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,d=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal(((h,m)=>{const g=i.get(h),v=Py(this.query,m)?m:null,b=!!g&&this.mutatedKeys.has(g.key),w=!!v&&(v.hasLocalMutations||this.mutatedKeys.has(v.key)&&v.hasCommittedMutations);let S=!1;g&&v?g.data.isEqual(v.data)?b!==w&&(r.track({type:3,doc:v}),S=!0):this.su(g,v)||(r.track({type:2,doc:v}),S=!0,(f&&this.eu(v,f)>0||d&&this.eu(v,d)<0)&&(c=!0)):!g&&v?(r.track({type:0,doc:v}),S=!0):g&&!v&&(r.track({type:1,doc:g}),S=!0,(f||d)&&(c=!0)),S&&(v?(o=o.add(v),s=w?s.add(h):s.delete(h)):(o=o.delete(h),s=s.delete(h)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const h=this.query.limitType==="F"?o.last():o.first();o=o.delete(h.key),s=s.delete(h.key),r.track({type:1,doc:h})}return{tu:o,iu:r,Ss:c,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((h,m)=>(function(v,b){const w=S=>{switch(S){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return tt(20277,{Vt:S})}};return w(v)-w(b)})(h.type,m.type)||this.eu(h.doc,m.doc))),this.ou(r),i=i??!1;const c=n&&!i?this._u():[],f=this.Ya.size===0&&this.current&&!i?1:0,d=f!==this.Xa;return this.Xa=f,o.length!==0||d?{snapshot:new dd(this.query,e.tu,s,o,e.mutatedKeys,f===0,d,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:c}:{au:c}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new rI,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((n=>this.Za=this.Za.add(n))),e.modifiedDocuments.forEach((n=>{})),e.removedDocuments.forEach((n=>this.Za=this.Za.delete(n))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=xt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))}));const n=[];return e.forEach((r=>{this.Ya.has(r)||n.push(new Z3(r))})),this.Ya.forEach((r=>{e.has(r)||n.push(new Q3(r))})),n}cu(e){this.Za=e.ks,this.Ya=xt();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return dd.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const hT="SyncEngine";class X7{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class J7{constructor(e){this.key=e,this.hu=!1}}class Q7{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new jc((c=>g3(c)),Ry),this.Iu=new Map,this.Eu=new Set,this.Ru=new on(Qe.comparator),this.Au=new Map,this.Vu=new nT,this.du={},this.mu=new Map,this.fu=ud.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Z7(t,e,n=!0){const r=s4(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await e4(r,e,n,!0),i}async function eK(t,e){const n=s4(t);await e4(n,e,!0,!1)}async function e4(t,e,n,r){const i=await g7(t.localStore,ro(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let c;return r&&(c=await tK(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&G3(t.remoteStore,i),c}async function tK(t,e,n,r,i){t.pu=(m,g,v)=>(async function(w,S,C,R){let N=S.view.ru(C);N.Ss&&(N=await Jk(w.localStore,S.query,!1).then((({documents:M})=>S.view.ru(M,N))));const O=R&&R.targetChanges.get(S.targetId),k=R&&R.targetMismatches.get(S.targetId)!=null,D=S.view.applyChanges(N,w.isPrimaryClient,O,k);return aI(w,S.targetId,D.au),D.snapshot})(t,m,g,v);const s=await Jk(t.localStore,e,!0),o=new Y7(e,s.ks),c=o.ru(s.documents),f=up.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),d=o.applyChanges(c,t.isPrimaryClient,f);aI(t,n,d.au);const h=new X7(e,n,o);return t.Tu.set(e,h),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),d.snapshot}async function nK(t,e,n){const r=at(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter((o=>!Ry(o,e)))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await lw(r.localStore,i.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(i.targetId),n&&oT(r.remoteStore,i.targetId),dw(r,i.targetId)})).catch(Nd)):(dw(r,i.targetId),await lw(r.localStore,i.targetId,!0))}async function rK(t,e){const n=at(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),oT(n.remoteStore,r.targetId))}async function iK(t,e,n){const r=dK(t);try{const i=await(function(o,c){const f=at(o),d=Jt.now(),h=c.reduce(((v,b)=>v.add(b.key)),xt());let m,g;return f.persistence.runTransaction("Locally write mutations","readwrite",(v=>{let b=Xo(),w=xt();return f.xs.getEntries(v,h).next((S=>{b=S,b.forEach(((C,R)=>{R.isValidDocument()||(w=w.add(C))}))})).next((()=>f.localDocuments.getOverlayedDocuments(v,b))).next((S=>{m=S;const C=[];for(const R of c){const N=mG(R,m.get(R.key).overlayedDocument);N!=null&&C.push(new Mc(R.key,N,c3(N.value.mapValue),$o.exists(!0)))}return f.mutationQueue.addMutationBatch(v,d,C,c)})).next((S=>{g=S;const C=S.applyToLocalDocumentSet(m,w);return f.documentOverlayCache.saveOverlays(v,S.batchId,C)}))})).then((()=>({batchId:g.batchId,changes:x3(m)})))})(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),(function(o,c,f){let d=o.du[o.currentUser.toKey()];d||(d=new on(vt)),d=d.insert(c,f),o.du[o.currentUser.toKey()]=d})(r,i.batchId,n),await fp(r,i.changes),await zy(r.remoteStore)}catch(i){const s=dT(i,"Failed to persist write");n.reject(s)}}async function t4(t,e){const n=at(t);try{const r=await h7(n.localStore,e);e.targetChanges.forEach(((i,s)=>{const o=n.Au.get(s);o&&(Mt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Mt(o.hu,14607):i.removedDocuments.size>0&&(Mt(o.hu,42227),o.hu=!1))})),await fp(n,r,e)}catch(r){await Nd(r)}}function oI(t,e,n){const r=at(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach(((s,o)=>{const c=o.view.va(e);c.snapshot&&i.push(c.snapshot)})),(function(o,c){const f=at(o);f.onlineState=c;let d=!1;f.queries.forEach(((h,m)=>{for(const g of m.ba)g.va(c)&&(d=!0)})),d&&fT(f)})(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function sK(t,e,n){const r=at(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new on(Qe.comparator);o=o.insert(s,_r.newNoDocument(s,st.min()));const c=xt().add(s),f=new Dy(st.min(),new Map,new on(vt),o,c);await t4(r,f),r.Ru=r.Ru.remove(s),r.Au.delete(e),pT(r)}else await lw(r.localStore,e,!1).then((()=>dw(r,e,n))).catch(Nd)}async function oK(t,e){const n=at(t),r=e.batch.batchId;try{const i=await f7(n.localStore,e);r4(n,r,null),n4(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await fp(n,i)}catch(i){await Nd(i)}}async function aK(t,e,n){const r=at(t);try{const i=await(function(o,c){const f=at(o);return f.persistence.runTransaction("Reject batch","readwrite-primary",(d=>{let h;return f.mutationQueue.lookupMutationBatch(d,c).next((m=>(Mt(m!==null,37113),h=m.keys(),f.mutationQueue.removeMutationBatch(d,m)))).next((()=>f.mutationQueue.performConsistencyCheck(d))).next((()=>f.documentOverlayCache.removeOverlaysForBatchId(d,h,c))).next((()=>f.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,h))).next((()=>f.localDocuments.getDocuments(d,h)))}))})(r.localStore,e);r4(r,e,n),n4(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await fp(r,i)}catch(i){await Nd(i)}}function n4(t,e){(t.mu.get(e)||[]).forEach((n=>{n.resolve()})),t.mu.delete(e)}function r4(t,e,n){const r=at(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function dw(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach((r=>{t.Vu.containsKey(r)||i4(t,r)}))}function i4(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(oT(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),pT(t))}function aI(t,e,n){for(const r of n)r instanceof Q3?(t.Vu.addReference(r.key,e),lK(t,r)):r instanceof Z3?(Be(hT,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||i4(t,r.key)):tt(19791,{wu:r})}function lK(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(Be(hT,"New document in limbo: "+n),t.Eu.add(r),pT(t))}function pT(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new Qe(sn.fromString(e)),r=t.fu.next();t.Au.set(r,new J7(n)),t.Ru=t.Ru.insert(n,r),G3(t.remoteStore,new tl(ro(JS(n.path)),r,"TargetPurposeLimboResolution",Cy.ce))}}async function fp(t,e,n){const r=at(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach(((c,f)=>{o.push(r.pu(f,e,n).then((d=>{var h;if((d||n)&&r.isPrimaryClient){const m=d?!d.fromCache:(h=n==null?void 0:n.targetChanges.get(f.targetId))==null?void 0:h.current;r.sharedClientState.updateQueryState(f.targetId,m?"current":"not-current")}if(d){i.push(d);const m=iT.Es(f.targetId,d);s.push(m)}})))})),await Promise.all(o),r.Pu.J_(i),await(async function(f,d){const h=at(f);try{await h.persistence.runTransaction("notifyLocalViewChanges","readwrite",(m=>Ie.forEach(d,(g=>Ie.forEach(g.Ts,(v=>h.persistence.referenceDelegate.addReference(m,g.targetId,v))).next((()=>Ie.forEach(g.Is,(v=>h.persistence.referenceDelegate.removeReference(m,g.targetId,v)))))))))}catch(m){if(!kd(m))throw m;Be(sT,"Failed to update sequence numbers: "+m)}for(const m of d){const g=m.targetId;if(!m.fromCache){const v=h.vs.get(g),b=v.snapshotVersion,w=v.withLastLimboFreeSnapshotVersion(b);h.vs=h.vs.insert(g,w)}}})(r.localStore,s))}async function cK(t,e){const n=at(t);if(!n.currentUser.isEqual(e)){Be(hT,"User change. New user:",e.toKey());const r=await B3(n.localStore,e);n.currentUser=e,(function(s,o){s.mu.forEach((c=>{c.forEach((f=>{f.reject(new Ye(Pe.CANCELLED,o))}))})),s.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await fp(n,r.Ns)}}function uK(t,e){const n=at(t),r=n.Au.get(e);if(r&&r.hu)return xt().add(r.key);{let i=xt();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const c=n.Tu.get(o);i=i.unionWith(c.view.nu)}return i}}function s4(t){const e=at(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=t4.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=uK.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=sK.bind(null,e),e.Pu.J_=G7.bind(null,e.eventManager),e.Pu.yu=K7.bind(null,e.eventManager),e}function dK(t){const e=at(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=oK.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=aK.bind(null,e),e}class v0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Oy(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return d7(this.persistence,new l7,e.initialUser,this.serializer)}Cu(e){return new F3(rT.Vi,this.serializer)}Du(e){return new v7}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}v0.provider={build:()=>new v0};class fK extends v0{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Mt(this.persistence.referenceDelegate instanceof g0,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new KG(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kr.withCacheSize(this.cacheSizeBytes):Kr.DEFAULT;return new F3((r=>g0.Vi(r,n)),this.serializer)}}class fw{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>oI(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=cK.bind(null,this.syncEngine),await F7(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new H7})()}createDatastore(e){const n=Oy(e.databaseInfo.databaseId),r=S7(e.databaseInfo);return N7(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return(function(r,i,s,o,c){return new I7(r,i,s,o,c)})(this.localStore,this.datastore,e.asyncQueue,(n=>oI(this.syncEngine,n,0)),(function(){return eI.v()?new eI:new x7})())}createSyncEngine(e,n){return(function(i,s,o,c,f,d,h){const m=new Q7(i,s,o,c,f,d);return h&&(m.gu=!0),m})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await(async function(i){const s=at(i);Be(Tc,"RemoteStore shutting down."),s.Ea.add(5),await dp(s),s.Aa.shutdown(),s.Va.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}fw.provider={build:()=>new fw};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hK{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Yo("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout((()=>{this.muted||e(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ml="FirestoreClient";class pK{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=br.UNAUTHENTICATED,this.clientId=qS.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,(async o=>{Be(ml,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(r,(o=>(Be(ml,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new dc;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=dT(n,"Failed to shutdown persistence");e.reject(r)}})),e.promise}}async function Zb(t,e){t.asyncQueue.verifyOperationInProgress(),Be(ml,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener((async i=>{r.isEqual(i)||(await B3(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener((()=>t.terminate())),t._offlineComponents=e}async function lI(t,e){t.asyncQueue.verifyOperationInProgress();const n=await mK(t);Be(ml,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener((r=>nI(e.remoteStore,r))),t.setAppCheckTokenChangeListener(((r,i)=>nI(e.remoteStore,i))),t._onlineComponents=e}async function mK(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){Be(ml,"Using user provided OfflineComponentProvider");try{await Zb(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!(function(i){return i.name==="FirebaseError"?i.code===Pe.FAILED_PRECONDITION||i.code===Pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11})(n))throw n;Sc("Error using user provided cache. Falling back to memory cache: "+n),await Zb(t,new v0)}}else Be(ml,"Using default OfflineComponentProvider"),await Zb(t,new fK(void 0));return t._offlineComponents}async function o4(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(Be(ml,"Using user provided OnlineComponentProvider"),await lI(t,t._uninitializedComponentsProvider._online)):(Be(ml,"Using default OnlineComponentProvider"),await lI(t,new fw))),t._onlineComponents}function gK(t){return o4(t).then((e=>e.syncEngine))}async function cI(t){const e=await o4(t),n=e.eventManager;return n.onListen=Z7.bind(null,e.syncEngine),n.onUnlisten=nK.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=eK.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=rK.bind(null,e.syncEngine),n}function yK(t,e,n,r){const i=new hK(r),s=new W7(e,i,n);return t.asyncQueue.enqueueAndForget((async()=>q7(await cI(t),s))),()=>{i.Nu(),t.asyncQueue.enqueueAndForget((async()=>$7(await cI(t),s)))}}function vK(t,e){const n=new dc;return t.asyncQueue.enqueueAndForget((async()=>iK(await gK(t),e,n))),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a4(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xK="ComponentProvider",uI=new Map;function bK(t,e,n,r,i){return new L$(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,a4(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l4="firestore.googleapis.com",dI=!0;class fI{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new Ye(Pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=l4,this.ssl=dI}else this.host=e.host,this.ssl=e.ssl??dI;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=V3;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<$G)throw new Ye(Pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}A$("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=a4(e.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new Ye(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new Ye(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new Ye(Pe.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(r,i){return r.timeoutSeconds===i.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mT{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new fI({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Ye(Pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new Ye(Pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new fI(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new m$;switch(r.type){case"firstParty":return new x$(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Ye(Pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=uI.get(n);r&&(Be(xK,"Removing Datastore"),uI.delete(n),r.terminate())})(this),Promise.resolve()}}function _K(t,e,n,r={}){var d;t=Ju(t,mT);const i=Td(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},c=`${e}:${n}`;i&&(o5(`https://${c}`),a5("Firestore",!0)),s.host!==l4&&s.host!==c&&Sc("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f={...s,host:c,ssl:i,emulatorOptions:r};if(!xc(f,o)&&(t._setSettings(f),r.mockUserToken)){let h,m;if(typeof r.mockUserToken=="string")h=r.mockUserToken,m=br.MOCK_USER;else{h=FF(r.mockUserToken,(d=t._app)==null?void 0:d.options.projectId);const g=r.mockUserToken.sub||r.mockUserToken.user_id;if(!g)throw new Ye(Pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new br(g)}t._authCredentials=new g$(new Q5(h,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uy{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Uy(this.firestore,e,this._query)}}class $n{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Lh(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $n(this.firestore,e,this._key)}toJSON(){return{type:$n._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(lp(n,$n._jsonSchema))return new $n(e,r||null,new Qe(sn.fromString(n.referencePath)))}}$n._jsonSchemaVersion="firestore/documentReference/1.0",$n._jsonSchema={type:Nn("string",$n._jsonSchemaVersion),referencePath:Nn("string")};class Lh extends Uy{constructor(e,n,r){super(e,n,JS(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $n(this.firestore,null,new Qe(e))}withConverter(e){return new Lh(this.firestore,e,this._path)}}function hI(t,e,...n){if(t=hi(t),arguments.length===1&&(e=qS.newId()),E$("doc","path",e),t instanceof mT){const r=sn.fromString(e,...n);return Ek(r),new $n(t,null,new Qe(r))}{if(!(t instanceof $n||t instanceof Lh))throw new Ye(Pe.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(sn.fromString(e,...n));return Ek(r),new $n(t.firestore,t instanceof Lh?t.converter:null,new Qe(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pI="AsyncQueue";class mI{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new q3(this,"async_queue_retry"),this._c=()=>{const r=Qb();r&&Be(pI,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Qb();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Qb();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new dc;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Yu.push(e),this.lc())))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!kd(e))throw e;Be(pI,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const n=this.ac.then((()=>(this.rc=!0,e().catch((r=>{throw this.nc=r,this.rc=!1,Yo("INTERNAL UNHANDLED ERROR: ",gI(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=uT.createAndSchedule(this,e,n,r,(s=>this.hc(s)));return this.tc.push(i),i}uc(){this.nc&&tt(47125,{Pc:gI(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()}))}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function gI(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class x0 extends mT{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new mI,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new mI(e),this._firestoreClient=void 0,await e}}}function wK(t,e){const n=typeof t=="object"?t:d5(),r=typeof t=="string"?t:c0,i=RS(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=UF("firestore");s&&_K(i,...s)}return i}function c4(t){if(t._terminated)throw new Ye(Pe.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||SK(t),t._firestoreClient}function SK(t){var r,i,s,o;const e=t._freezeSettings(),n=bK(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new pK(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&(function(f){const d=f==null?void 0:f._online.build();return{_offline:f==null?void 0:f._offline.build(d),_online:d}})(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this._byteString=e}static fromBase64String(e){try{return new zi(dr.fromBase64String(e))}catch(n){throw new Ye(Pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new zi(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:zi._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(lp(e,zi._jsonSchema))return zi.fromBase64String(e.bytes)}}zi._jsonSchemaVersion="firestore/bytes/1.0",zi._jsonSchema={type:Nn("string",zi._jsonSchemaVersion),bytes:Nn("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u4{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new Ye(Pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Ye(Pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Ye(Pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return vt(this._lat,e._lat)||vt(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:so._jsonSchemaVersion}}static fromJSON(e){if(lp(e,so._jsonSchema))return new so(e.latitude,e.longitude)}}so._jsonSchemaVersion="firestore/geoPoint/1.0",so._jsonSchema={type:Nn("string",so._jsonSchemaVersion),latitude:Nn("number"),longitude:Nn("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this._values=(e||[]).map((n=>n))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ps._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(lp(e,ps._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((n=>typeof n=="number")))return new ps(e.vectorValues);throw new Ye(Pe.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ps._jsonSchemaVersion="firestore/vectorValue/1.0",ps._jsonSchema={type:Nn("string",ps._jsonSchemaVersion),vectorValues:Nn("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TK=/^__.*__$/;class EK{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Mc(e,this.data,this.fieldMask,n,this.fieldTransforms):new cp(e,this.data,n,this.fieldTransforms)}}function f4(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw tt(40011,{dataSource:t})}}class gT{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new gT({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return b0(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find((n=>e.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>e.isPrefixOf(n.field)))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(f4(this.dataSource)&&TK.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class AK{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Oy(e)}createContext(e,n,r,i=!1){return new gT({dataSource:e,methodName:n,targetDoc:r,path:lr.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function CK(t){const e=t._freezeSettings(),n=Oy(t._databaseId);return new AK(t._databaseId,!!e.ignoreUndefinedProperties,n)}function NK(t,e,n,r,i,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);g4("Data must be an object, but it was:",o,r);const c=p4(r,o);let f,d;if(s.merge)f=new ds(o.fieldMask),d=o.fieldTransforms;else if(s.mergeFields){const h=[];for(const m of s.mergeFields){const g=yT(e,m,n);if(!o.contains(g))throw new Ye(Pe.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);RK(h,g)||h.push(g)}f=new ds(h),d=o.fieldTransforms.filter((m=>f.covers(m.field)))}else f=null,d=o.fieldTransforms;return new EK(new Li(c),f,d)}function h4(t,e){if(m4(t=hi(t)))return g4("Unsupported field value:",e,t),p4(t,e);if(t instanceof d4)return(function(r,i){if(!f4(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)})(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return(function(r,i){const s=[];let o=0;for(const c of r){let f=h4(c,i.childContextForArray(o));f==null&&(f={nullValue:"NULL_VALUE"}),s.push(f),o++}return{arrayValue:{values:s}}})(t,e)}return(function(r,i){if((r=hi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return cG(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Jt.fromDate(r);return{timestampValue:m0(i.serializer,s)}}if(r instanceof Jt){const s=new Jt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:m0(i.serializer,s)}}if(r instanceof so)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof zi)return{bytesValue:P3(i.serializer,r._byteString)};if(r instanceof $n){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:tT(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof ps)return(function(o,c){const f=o instanceof ps?o.toArray():o;return{mapValue:{fields:{[a3]:{stringValue:l3},[u0]:{arrayValue:{values:f.map((h=>{if(typeof h!="number")throw c.createError("VectorValues must only contain numeric values.");return QS(c.serializer,h)}))}}}}}})(r,i);if(U3(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${$S(r)}`)})(t,e)}function p4(t,e){const n={};return t3(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Pc(t,((r,i)=>{const s=h4(i,e.childContextForField(r));s!=null&&(n[r]=s)})),{mapValue:{fields:n}}}function m4(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Jt||t instanceof so||t instanceof zi||t instanceof $n||t instanceof d4||t instanceof ps||U3(t))}function g4(t,e,n){if(!m4(n)||!Z5(n)){const r=$S(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function yT(t,e,n){if((e=hi(e))instanceof u4)return e._internalPath;if(typeof e=="string")return IK(t,e);throw b0("Field path arguments must be of type string or ",t,!1,void 0,n)}const kK=new RegExp("[~\\*/\\[\\]]");function IK(t,e,n){if(e.search(kK)>=0)throw b0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new u4(...e.split("."))._internalPath}catch{throw b0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function b0(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let c=`Function ${e}() called with invalid data`;n&&(c+=" (via `toFirestore()`)"),c+=". ";let f="";return(s||o)&&(f+=" (found",s&&(f+=` in field ${r}`),o&&(f+=` in document ${i}`),f+=")"),new Ye(Pe.INVALID_ARGUMENT,c+t+f)}function RK(t,e){return t.some((n=>n.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{convertValue(e,n="none"){switch(hl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yn(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw tt(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Pc(e,((i,s)=>{r[i]=this.convertValue(s,n)})),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[u0].arrayValue)==null?void 0:i.values)==null?void 0:s.map((o=>yn(o.doubleValue)));return new ps(n)}convertGeoPoint(e){return new so(yn(e.latitude),yn(e.longitude))}convertArray(e,n){return(e.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(e,n){switch(n){case"previous":const r=ky(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Ph(e));default:return null}}convertTimestamp(e){const n=dl(e);return new Jt(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=sn.fromString(e);Mt(z3(r),9688,{name:e});const i=new jh(r.get(1),r.get(3)),s=new Qe(r.popFirst(5));return i.isEqual(n)||Yo(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4 extends PK{constructor(e){super(),this.firestore=e}convertBytes(e){return new zi(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new $n(this.firestore,null,n)}}const yI="@firebase/firestore",vI="4.11.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xI(t){return(function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1})(t,["next","error","complete"])}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new $n(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new jK(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(yT("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class jK extends v4{data(){return super.data()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MK(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new Ye(Pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}function DK(t,e,n){let r;return r=t?t.toFirestore(e):e,r}class hh{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class fc extends v4{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Bg(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(yT("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(Pe.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=fc._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}fc._jsonSchemaVersion="firestore/documentSnapshot/1.0",fc._jsonSchema={type:Nn("string",fc._jsonSchemaVersion),bundleSource:Nn("string","DocumentSnapshot"),bundleName:Nn("string"),bundle:Nn("string")};class Bg extends fc{data(e={}){return super.data(e)}}class ed{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new hh(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach((n=>e.push(n))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach((r=>{e.call(n,new Bg(this._firestore,this._userDataWriter,r.key,r,new hh(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Ye(Pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map((c=>{const f=new Bg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);return c.doc,{type:"added",doc:f,oldIndex:-1,newIndex:o++}}))}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter((c=>s||c.type!==3)).map((c=>{const f=new Bg(i._firestore,i._userDataWriter,c.doc.key,c.doc,new hh(i._snapshot.mutatedKeys.has(c.doc.key),i._snapshot.fromCache),i.query.converter);let d=-1,h=-1;return c.type!==0&&(d=o.indexOf(c.doc.key),o=o.delete(c.doc.key)),c.type!==1&&(o=o.add(c.doc),h=o.indexOf(c.doc.key)),{type:OK(c.type),doc:f,oldIndex:d,newIndex:h}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new Ye(Pe.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ed._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=qS.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach((s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function OK(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return tt(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ed._jsonSchemaVersion="firestore/querySnapshot/1.0",ed._jsonSchema={type:Nn("string",ed._jsonSchemaVersion),bundleSource:Nn("string","QuerySnapshot"),bundleName:Nn("string"),bundle:Nn("string")};function LK(t,e,n){t=Ju(t,$n);const r=Ju(t.firestore,x0),i=DK(t.converter,e),s=CK(r);return UK(r,[NK(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,$o.none())])}function zK(t,...e){var d,h,m;t=hi(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||xI(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(xI(e[r])){const g=e[r];e[r]=(d=g.next)==null?void 0:d.bind(g),e[r+1]=(h=g.error)==null?void 0:h.bind(g),e[r+2]=(m=g.complete)==null?void 0:m.bind(g)}let s,o,c;if(t instanceof $n)o=Ju(t.firestore,x0),c=JS(t._key.path),s={next:g=>{e[r]&&e[r](VK(o,t,g))},error:e[r+1],complete:e[r+2]};else{const g=Ju(t,Uy);o=Ju(g.firestore,x0),c=g._query;const v=new y4(o);s={next:b=>{e[r]&&e[r](new ed(o,v,g,b))},error:e[r+1],complete:e[r+2]},MK(t._query)}const f=c4(o);return yK(f,c,i,s)}function UK(t,e){const n=c4(t);return vK(n,e)}function VK(t,e,n){const r=n.docs.get(e._key),i=new y4(t);return new fc(t,i,e._key,r,new hh(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){p$(Ed),sd(new bc("firestore",((r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),c=new x0(new y$(r.getProvider("auth-internal")),new b$(o,r.getProvider("app-check-internal")),z$(o,i),o);return s={useFetchStreams:n,...s},c._setSettings(s),c}),"PUBLIC").setMultipleInstances(!0)),ol(yI,vI,e),ol(yI,vI,"esm2020")})();const FK={apiKey:"AIzaSyANv4kf7cjoLdTGGZqkI3DX0TVMyi6j2_A",authDomain:"life-os-6c01f.firebaseapp.com",projectId:"life-os-6c01f",storageBucket:"life-os-6c01f.firebasestorage.app",messagingSenderId:"870895248318",appId:"1:870895248318:web:0de4b80a0cf8663b564fef",measurementId:"G-W7RN5B5WZP"},x4=u5(FK),Qs=f$(x4),bI=wK(x4);function Rd(t,e,n,r){const[i,s]=L.useState(e),[o,c]=L.useState(!0),[f,d]=L.useState(null),h=L.useRef(!1);return L.useEffect(()=>{let m=null;const g=US(Qs,v=>{if(d(v),m&&(m(),m=null),v){c(!0);const b=hI(bI,"users",v.uid,"modules",n);m=zK(b,w=>{if(w.exists()){let S=w.data();r&&(S=r(S)),s(S)}else s(e);c(!1),h.current=!0},w=>{console.error(`Error listening to ${n}:`,w),c(!1)})}else{try{const b=localStorage.getItem(t);if(b){let w=JSON.parse(b);r&&(w=r(w)),s(w)}else s(e)}catch(b){console.warn(`Error loading local ${t}:`,b),s(e)}c(!1),h.current=!0}});return()=>{g(),m&&m()}},[t,n]),L.useEffect(()=>{if(!h.current)return;const m=setTimeout(async()=>{if(f)try{const g=hI(bI,"users",f.uid,"modules",n),v=JSON.parse(JSON.stringify(i,(b,w)=>w===void 0?null:w));await LK(g,v)}catch(g){console.error(`Error saving ${n}:`,g)}else localStorage.setItem(t,JSON.stringify(i))},100);return()=>clearTimeout(m)},[i,f,t,n]),[i,s,o]}/*! Capacitor: https://capacitorjs.com/ - MIT License */var fd;(function(t){t.Unimplemented="UNIMPLEMENTED",t.Unavailable="UNAVAILABLE"})(fd||(fd={}));class e1 extends Error{constructor(e,n,r){super(e),this.message=e,this.code=n,this.data=r}}const BK=t=>{var e,n;return t!=null&&t.androidBridge?"android":!((n=(e=t==null?void 0:t.webkit)===null||e===void 0?void 0:e.messageHandlers)===null||n===void 0)&&n.bridge?"ios":"web"},HK=t=>{const e=t.CapacitorCustomPlatform||null,n=t.Capacitor||{},r=n.Plugins=n.Plugins||{},i=()=>e!==null?e.name:BK(t),s=()=>i()!=="web",o=m=>{const g=d.get(m);return!!(g!=null&&g.platforms.has(i())||c(m))},c=m=>{var g;return(g=n.PluginHeaders)===null||g===void 0?void 0:g.find(v=>v.name===m)},f=m=>t.console.error(m),d=new Map,h=(m,g={})=>{const v=d.get(m);if(v)return console.warn(`Capacitor plugin "${m}" already registered. Cannot register plugins twice.`),v.proxy;const b=i(),w=c(m);let S;const C=async()=>(!S&&b in g?S=typeof g[b]=="function"?S=await g[b]():S=g[b]:e!==null&&!S&&"web"in g&&(S=typeof g.web=="function"?S=await g.web():S=g.web),S),R=(j,I)=>{var U,B;if(w){const P=w==null?void 0:w.methods.find(F=>I===F.name);if(P)return P.rtype==="promise"?F=>n.nativePromise(m,I.toString(),F):(F,z)=>n.nativeCallback(m,I.toString(),F,z);if(j)return(U=j[I])===null||U===void 0?void 0:U.bind(j)}else{if(j)return(B=j[I])===null||B===void 0?void 0:B.bind(j);throw new e1(`"${m}" plugin is not implemented on ${b}`,fd.Unimplemented)}},N=j=>{let I;const U=(...B)=>{const P=C().then(F=>{const z=R(F,j);if(z){const Q=z(...B);return I=Q==null?void 0:Q.remove,Q}else throw new e1(`"${m}.${j}()" is not implemented on ${b}`,fd.Unimplemented)});return j==="addListener"&&(P.remove=async()=>I()),P};return U.toString=()=>`${j.toString()}() { [capacitor code] }`,Object.defineProperty(U,"name",{value:j,writable:!1,configurable:!1}),U},O=N("addListener"),k=N("removeListener"),D=(j,I)=>{const U=O({eventName:j},I),B=async()=>{const F=await U;k({eventName:j,callbackId:F},I)},P=new Promise(F=>U.then(()=>F({remove:B})));return P.remove=async()=>{console.warn("Using addListener() without 'await' is deprecated."),await B()},P},M=new Proxy({},{get(j,I){switch(I){case"$$typeof":return;case"toJSON":return()=>({});case"addListener":return w?D:O;case"removeListener":return k;default:return N(I)}}});return r[m]=M,d.set(m,{name:m,proxy:M,platforms:new Set([...Object.keys(g),...w?[b]:[]])}),M};return n.convertFileSrc||(n.convertFileSrc=m=>m),n.getPlatform=i,n.handleError=f,n.isNativePlatform=s,n.isPluginAvailable=o,n.registerPlugin=h,n.Exception=e1,n.DEBUG=!!n.DEBUG,n.isLoggingEnabled=!!n.isLoggingEnabled,n},qK=t=>t.Capacitor=HK(t),uo=qK(typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}),hp=uo.registerPlugin;class vT{constructor(){this.listeners={},this.retainedEventArguments={},this.windowListeners={}}addListener(e,n){let r=!1;this.listeners[e]||(this.listeners[e]=[],r=!0),this.listeners[e].push(n);const s=this.windowListeners[e];s&&!s.registered&&this.addWindowListener(s),r&&this.sendRetainedArgumentsForEvent(e);const o=async()=>this.removeListener(e,n);return Promise.resolve({remove:o})}async removeAllListeners(){this.listeners={};for(const e in this.windowListeners)this.removeWindowListener(this.windowListeners[e]);this.windowListeners={}}notifyListeners(e,n,r){const i=this.listeners[e];if(!i){if(r){let s=this.retainedEventArguments[e];s||(s=[]),s.push(n),this.retainedEventArguments[e]=s}return}i.forEach(s=>s(n))}hasListeners(e){var n;return!!(!((n=this.listeners[e])===null||n===void 0)&&n.length)}registerWindowListener(e,n){this.windowListeners[n]={registered:!1,windowEventName:e,pluginEventName:n,handler:r=>{this.notifyListeners(n,r)}}}unimplemented(e="not implemented"){return new uo.Exception(e,fd.Unimplemented)}unavailable(e="not available"){return new uo.Exception(e,fd.Unavailable)}async removeListener(e,n){const r=this.listeners[e];if(!r)return;const i=r.indexOf(n);this.listeners[e].splice(i,1),this.listeners[e].length||this.removeWindowListener(this.windowListeners[e])}addWindowListener(e){window.addEventListener(e.windowEventName,e.handler),e.registered=!0}removeWindowListener(e){e&&(window.removeEventListener(e.windowEventName,e.handler),e.registered=!1)}sendRetainedArgumentsForEvent(e){const n=this.retainedEventArguments[e];n&&(delete this.retainedEventArguments[e],n.forEach(r=>{this.notifyListeners(e,r)}))}}const _I=t=>encodeURIComponent(t).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape),wI=t=>t.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent);class $K extends vT{async getCookies(){const e=document.cookie,n={};return e.split(";").forEach(r=>{if(r.length<=0)return;let[i,s]=r.replace(/=/,"CAP_COOKIE").split("CAP_COOKIE");i=wI(i).trim(),s=wI(s).trim(),n[i]=s}),n}async setCookie(e){try{const n=_I(e.key),r=_I(e.value),i=e.expires?`; expires=${e.expires.replace("expires=","")}`:"",s=(e.path||"/").replace("path=",""),o=e.url!=null&&e.url.length>0?`domain=${e.url}`:"";document.cookie=`${n}=${r||""}${i}; path=${s}; ${o};`}catch(n){return Promise.reject(n)}}async deleteCookie(e){try{document.cookie=`${e.key}=; Max-Age=0`}catch(n){return Promise.reject(n)}}async clearCookies(){try{const e=document.cookie.split(";")||[];for(const n of e)document.cookie=n.replace(/^ +/,"").replace(/=.*/,`=;expires=${new Date().toUTCString()};path=/`)}catch(e){return Promise.reject(e)}}async clearAllCookies(){try{await this.clearCookies()}catch(e){return Promise.reject(e)}}}hp("CapacitorCookies",{web:()=>new $K});const GK=async t=>new Promise((e,n)=>{const r=new FileReader;r.onload=()=>{const i=r.result;e(i.indexOf(",")>=0?i.split(",")[1]:i)},r.onerror=i=>n(i),r.readAsDataURL(t)}),KK=(t={})=>{const e=Object.keys(t);return Object.keys(t).map(i=>i.toLocaleLowerCase()).reduce((i,s,o)=>(i[s]=t[e[o]],i),{})},WK=(t,e=!0)=>t?Object.entries(t).reduce((r,i)=>{const[s,o]=i;let c,f;return Array.isArray(o)?(f="",o.forEach(d=>{c=e?encodeURIComponent(d):d,f+=`${s}=${c}&`}),f.slice(0,-1)):(c=e?encodeURIComponent(o):o,f=`${s}=${c}`),`${r}&${f}`},"").substr(1):null,YK=(t,e={})=>{const n=Object.assign({method:t.method||"GET",headers:t.headers},e),i=KK(t.headers)["content-type"]||"";if(typeof t.data=="string")n.body=t.data;else if(i.includes("application/x-www-form-urlencoded")){const s=new URLSearchParams;for(const[o,c]of Object.entries(t.data||{}))s.set(o,c);n.body=s.toString()}else if(i.includes("multipart/form-data")||t.data instanceof FormData){const s=new FormData;if(t.data instanceof FormData)t.data.forEach((c,f)=>{s.append(f,c)});else for(const c of Object.keys(t.data))s.append(c,t.data[c]);n.body=s;const o=new Headers(n.headers);o.delete("content-type"),n.headers=o}else(i.includes("application/json")||typeof t.data=="object")&&(n.body=JSON.stringify(t.data));return n};class XK extends vT{async request(e){const n=YK(e,e.webFetchExtra),r=WK(e.params,e.shouldEncodeUrlParams),i=r?`${e.url}?${r}`:e.url,s=await fetch(i,n),o=s.headers.get("content-type")||"";let{responseType:c="text"}=s.ok?e:{};o.includes("application/json")&&(c="json");let f,d;switch(c){case"arraybuffer":case"blob":d=await s.blob(),f=await GK(d);break;case"json":f=await s.json();break;case"document":case"text":default:f=await s.text()}const h={};return s.headers.forEach((m,g)=>{h[g]=m}),{data:f,headers:h,status:s.status,url:s.url}}async get(e){return this.request(Object.assign(Object.assign({},e),{method:"GET"}))}async post(e){return this.request(Object.assign(Object.assign({},e),{method:"POST"}))}async put(e){return this.request(Object.assign(Object.assign({},e),{method:"PUT"}))}async patch(e){return this.request(Object.assign(Object.assign({},e),{method:"PATCH"}))}async delete(e){return this.request(Object.assign(Object.assign({},e),{method:"DELETE"}))}}hp("CapacitorHttp",{web:()=>new XK});var SI;(function(t){t.Dark="DARK",t.Light="LIGHT",t.Default="DEFAULT"})(SI||(SI={}));var TI;(function(t){t.StatusBar="StatusBar",t.NavigationBar="NavigationBar"})(TI||(TI={}));class JK extends vT{async setStyle(){this.unavailable("not available for web")}async setAnimation(){this.unavailable("not available for web")}async show(){this.unavailable("not available for web")}async hide(){this.unavailable("not available for web")}}hp("SystemBars",{web:()=>new JK});const QK="modulepreload",ZK=function(t){return"/zayn1/"+t},EI={},b4=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){let o=function(d){return Promise.all(d.map(h=>Promise.resolve(h).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),f=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));i=o(n.map(d=>{if(d=ZK(d),d in EI)return;EI[d]=!0;const h=d.endsWith(".css"),m=h?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${d}"]${m}`))return;const g=document.createElement("link");if(g.rel=h?"stylesheet":QK,h||(g.as="script"),g.crossOrigin="",g.href=d,f&&g.setAttribute("nonce",f),document.head.appendChild(g),h)return new Promise((v,b)=>{g.addEventListener("load",v),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${d}`)))})}))}function s(o){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=o,window.dispatchEvent(c),!c.defaultPrevented)throw o}return i.then(o=>{for(const c of o||[])c.status==="rejected"&&s(c.reason);return e().catch(s)})};var AI;(function(t){t[t.Sunday=1]="Sunday",t[t.Monday=2]="Monday",t[t.Tuesday=3]="Tuesday",t[t.Wednesday=4]="Wednesday",t[t.Thursday=5]="Thursday",t[t.Friday=6]="Friday",t[t.Saturday=7]="Saturday"})(AI||(AI={}));const hc=hp("LocalNotifications",{web:()=>b4(()=>import("./web-qdN-qiQ1.js"),[]).then(t=>new t.LocalNotificationsWeb)}),_4="lifeos_dashboard_channel",w4="lifeos_alerts_channel",S4=async()=>{if(uo.isNativePlatform())try{await hc.createChannel({id:_4,name:"LifeOS Dashboard",description:"Persistent Daily Summary",importance:2,visibility:1,sound:void 0,vibration:!1}),await hc.createChannel({id:w4,name:"Mission Alerts",description:"Time-sensitive reminders",importance:5,visibility:1,sound:"beep.wav",vibration:!0}),await hc.registerActionTypes({types:[{id:"DASHBOARD_ACTIONS",actions:[{id:"OPEN_APP",title:" Open Command",foreground:!0}]},{id:"MISSION_ALERTS",actions:[{id:"COMPLETE",title:" Complete",foreground:!1},{id:"SNOOZE",title:" Snooze 10m",foreground:!1}]}]}),console.log(" Channels Registered: Dashboard (Silent) & Alerts (Loud)")}catch(t){console.error("Failed to register channels",t)}},T4=async()=>uo.isNativePlatform()?(await hc.requestPermissions()).display==="granted"?(await S4(),!0):!1:"Notification"in window?Notification.permission==="granted"?!0:Notification.permission!=="denied"?await Notification.requestPermission()==="granted":!1:(console.log("This browser does not support desktop notification"),!1),eW=async(t,e)=>{if(uo.isNativePlatform())try{await hc.schedule({notifications:[{id:99999,title:t,body:e,ongoing:!0,autoCancel:!1,silent:!0,smallIcon:"ic_stat_icon_config_sample",channelId:_4,actionTypeId:"DASHBOARD_ACTIONS",schedule:{at:new Date(Date.now()+100)}}]})}catch(n){console.error("Dashboard Update Failed",n)}},hw=async(t,e,n,r)=>{if(console.log(` sendAlert called: ${e} - ${n}`),uo.isNativePlatform())try{await hc.schedule({notifications:[{id:t,title:` ${e}`,body:n,schedule:{at:new Date(Date.now()+100)},sound:"beep.wav",smallIcon:"ic_stat_icon_config_sample",actionTypeId:"MISSION_ALERTS",extra:r||null,channelId:w4}]})}catch(i){console.error("Native alert failed:",i)}else{if(!("Notification"in window)){alert("This browser does not support desktop notification");return}if(Notification.permission!=="granted"&&(console.log(" Permission not granted, requesting..."),await Notification.requestPermission()!=="granted")){alert("Please enable notifications to receive alerts.");return}try{if("serviceWorker"in navigator&&navigator.serviceWorker.controller)await(await navigator.serviceWorker.ready).showNotification(e,{body:n,icon:"/logo192.png",badge:"/logo192.png",vibrate:[200,100,200],tag:String(t),requireInteraction:!0,data:{url:window.location.href}}),console.log(" Service Worker notification sent");else{const i=new Notification(e,{body:n,icon:"/logo192.png",badge:"/logo192.png",vibrate:[200,100,200],tag:String(t),requireInteraction:!0});i.onclick=()=>{window.focus(),i.close()},console.log(" Web notification sent (Classic API)")}}catch(i){console.error("Web notification failed:",i),alert("Failed to send notification. See console for details.")}}};var Bu;(function(t){t.Heavy="HEAVY",t.Medium="MEDIUM",t.Light="LIGHT"})(Bu||(Bu={}));var Eh;(function(t){t.Success="SUCCESS",t.Warning="WARNING",t.Error="ERROR"})(Eh||(Eh={}));const Ql=hp("Haptics",{web:()=>b4(()=>import("./web-63PQQb9l.js"),[]).then(t=>new t.HapticsWeb)});let t1=null,zo="default",pw={};const CI=t=>{zo=t},tW=(t={})=>{pw=t},nW=()=>(t1||(t1=new(window.AudioContext||window.webkitAudioContext)),t1),Mi={C4:261.63,G4:392,C5:523.25,E5:659.25,G5:783.99,A5:880,C6:1046.5},ku={click:[5],success:[10,30,10],error:[50,20,50,20,50],levelUp:[50,50,50,50,100,50,200],crit:[10,10,10,50,50,100],delete:[30]},Vn=(t,e,n,r,i,s=.1)=>{const o=t.createOscillator(),c=t.createGain();o.type=n,o.frequency.setValueAtTime(e,r),c.gain.setValueAtTime(0,r),c.gain.linearRampToValueAtTime(s,r+.01),c.gain.exponentialRampToValueAtTime(.001,r+i),o.connect(c),c.connect(t.destination),o.start(r),o.stop(r+i+.1)},He=async(t,e=!0)=>{if(e){if(uo.isNativePlatform())try{switch(t){case"click":await Ql.impact({style:Bu.Light});break;case"hover":break;case"success":await Ql.notification({type:Eh.Success});break;case"level-up":await Ql.notification({type:Eh.Success});break;case"crit":await Ql.impact({style:Bu.Heavy});break;case"error":await Ql.notification({type:Eh.Error});break;case"delete":await Ql.impact({style:Bu.Medium});break;default:await Ql.impact({style:Bu.Light})}}catch{}else if(navigator.vibrate)switch(t){case"click":navigator.vibrate(ku.click);break;case"success":navigator.vibrate(ku.success);break;case"level-up":navigator.vibrate(ku.levelUp);break;case"crit":navigator.vibrate(ku.crit);break;case"error":navigator.vibrate(ku.error);break;case"delete":navigator.vibrate(ku.delete);break}}if(!e)return;if(pw[t])try{const c=new Audio(pw[t]);c.volume=.5,c.play().catch(f=>console.warn("Custom sound playback failed:",f));return}catch(c){console.warn("Failed to load custom sound:",c)}const n=nW();n.state==="suspended"&&n.resume();const r=n.currentTime;let i="sine",s=1,o=1;switch(zo){case"cyberpunk":i="square",s=.8,o=1.2;break;case"fantasy":i="triangle",s=1.2,o=1.5;break;case"minimal":i="sine",s=1.5,o=.5;break;case"pubg":i="sawtooth",s=.6,o=.7;break;case"retro":i="sawtooth",s=1,o=.8;break;default:i="sine",s=1,o=1}switch(t){case"success":Vn(n,Mi.C5*s,i,r,.2*o,.1),Vn(n,Mi.E5*s,i,r+.05,.2*o,.1),Vn(n,Mi.G5*s,i,r+.1,.4*o,.08);break;case"coin":Vn(n,1200*s,zo==="retro"?"square":i,r,.1*o,.05),Vn(n,1800*s,zo==="retro"?"square":i,r+.05,.2*o,.05);break;case"level-up":Vn(n,Mi.C4*s,i==="sine"?"triangle":i,r,.2*o,.15),Vn(n,Mi.G4*s,i==="sine"?"triangle":i,r+.15,.2*o,.15),Vn(n,Mi.C5*s,i==="sine"?"triangle":i,r+.3,.4*o,.15),Vn(n,Mi.E5*s,i==="sine"?"triangle":i,r+.45,.6*o,.15),Vn(n,Mi.C5*s,"sine",r,.8*o,.05);break;case"crit":Vn(n,Mi.G5*s,i,r,.3*o,.2),Vn(n,Mi.C6*s,i,r+.05,.4*o,.2),Vn(n,Mi.E5*s,zo==="retro"?"square":i,r,.1*o,.05),Vn(n,Mi.A5*s,zo==="retro"?"triangle":i,r+.1,.5*o,.1);break;case"delete":{const c=n.createOscillator(),f=n.createGain();c.type=zo==="cyberpunk"?"sawtooth":"sine",c.frequency.setValueAtTime(200*s,r),c.frequency.exponentialRampToValueAtTime(50*s,r+.3*o),f.gain.setValueAtTime(.1,r),f.gain.linearRampToValueAtTime(0,r+.3*o),c.connect(f),f.connect(n.destination),c.start(r),c.stop(r+.3*o);break}case"click":Vn(n,800*s,i,r,.05*o,.02);break;case"hover":Vn(n,400*s,i,r,.02*o,.005);break;case"error":Vn(n,150*s,zo==="fantasy"?"triangle":"sawtooth",r,.3*o,.1),Vn(n,140*s,zo==="fantasy"?"triangle":"sawtooth",r+.05,.3*o,.1);break}},rW=t=>{L.useEffect(()=>{const e=t.user.preferences.theme,n=t.user.unlockedThemes.find(o=>o.id===e)||t.user.unlockedThemes[0],r=document.documentElement;n&&n.colors&&Object.entries(n.colors).forEach(([o,c])=>r.style.setProperty(o,c)),document.body.setAttribute("data-theme",e),n!=null&&n.animationStyle?document.body.setAttribute("data-animation",n.animationStyle):document.body.removeAttribute("data-animation"),n!=null&&n.soundPack?CI(n.soundPack):CI("default"),tW((n==null?void 0:n.customSounds)||{});const i="theme-custom-structural-css";let s=document.getElementById(i);n!=null&&n.customCss?(s||(s=document.createElement("style"),s.id=i,document.head.appendChild(s)),s.innerHTML=n.customCss):s&&(s.innerHTML="")},[t.user.preferences.theme,t.user.unlockedThemes])},E4=[{id:"bdg_ascendant",name:"The Ascendant",icon:"",description:"Rise through the ranks of existence.",category:"progression",triggerType:"metric",metricKey:"level",levels:[{tier:"silver",target:5,quote:"You have awakened.",rewards:{xp:100,gold:50}},{tier:"gold",target:10,quote:"Power is not given, it is taken.",rewards:{xp:500,gold:200}},{tier:"diamond",target:25,quote:"You are no longer a spectator.",rewards:{xp:2e3,gold:1e3}},{tier:"crimson",target:50,quote:"Godhood is a lonely path.",rewards:{xp:1e4,gold:5e3}}]},{id:"bdg_grunt",name:"The Grunt",icon:"",description:"Complete missions of Easy difficulty.",category:"raids",triggerType:"metric",metricKey:`tasksByDifficulty.${rt.EASY}`,levels:[{tier:"silver",target:10,quote:"Do the work. Don't complain.",rewards:{xp:50,gold:20}},{tier:"gold",target:50,quote:"Discipline is the bridge between goals and accomplishment.",rewards:{xp:200,gold:100}},{tier:"diamond",target:200,quote:"Routine is the weapon of the disciplined.",rewards:{xp:1e3,gold:500}},{tier:"crimson",target:500,quote:"The mundane has become your masterpiece.",rewards:{xp:5e3,gold:2e3}}]},{id:"bdg_warlord",name:"The Warlord",icon:"",description:"Complete missions of Hard difficulty.",category:"raids",triggerType:"metric",metricKey:`tasksByDifficulty.${rt.HARD}`,levels:[{tier:"silver",target:5,quote:"Pain is weakness leaving the body.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"Hardship is the forge of character.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:100,quote:"You do not survive the storm. You are the storm.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:250,quote:"Impossible is just an opinion.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_conqueror",name:"The Conqueror",icon:"",description:"Total Operations (Raids) Conquered.",category:"raids",triggerType:"metric",metricKey:"totalRaidsWon",levels:[{tier:"silver",target:1,quote:"First blood.",rewards:{xp:150,gold:100}},{tier:"gold",target:5,quote:"Strategy requires sacrifice.",rewards:{xp:750,gold:500}},{tier:"diamond",target:20,quote:"Kings play chess on a map of the world.",rewards:{xp:3e3,gold:2e3}},{tier:"crimson",target:50,quote:"History is written by the victors.",rewards:{xp:15e3,gold:1e4}}]},{id:"bdg_immortal",name:"The Immortal",icon:"",description:"Maintain a daily login streak.",category:"habits",triggerType:"metric",metricKey:"highestStreak",levels:[{tier:"silver",target:7,quote:"Momentum is building.",rewards:{xp:100,gold:50}},{tier:"gold",target:30,quote:"Consistency is the only currency that matters.",rewards:{xp:500,gold:250}},{tier:"diamond",target:90,quote:"You have transcended motivation.",rewards:{xp:2e3,gold:1e3}},{tier:"crimson",target:365,quote:"Time bows to your will.",rewards:{xp:1e4,gold:5e3}}]},{id:"bdg_phoenix",name:"The Phoenix",icon:"",description:"Reset the system and start over.",category:"habits",triggerType:"metric",metricKey:"resetsCount",levels:[{tier:"silver",target:1,quote:"From the ashes, we rise.",rewards:{xp:0,gold:500}},{tier:"gold",target:3,quote:"Failure is not the end.",rewards:{xp:0,gold:1e3}},{tier:"diamond",target:5,quote:"Destruction is a form of creation.",rewards:{xp:0,gold:3e3}},{tier:"crimson",target:10,quote:"You are eternal.",rewards:{xp:0,gold:1e4}}]},{id:"bdg_deep_focus",name:"Deep Worker",icon:"",description:'Maintain a streak on any "Deep Work" habit.',category:"habits",triggerType:"habit",metricKey:"Deep Work",levels:[{tier:"silver",target:7,quote:"Focus is the new oil.",rewards:{xp:300,gold:150}},{tier:"gold",target:21,quote:"Distraction is the enemy of greatness.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:66,quote:"The mind is a laser.",rewards:{xp:5e3,gold:2500}},{tier:"crimson",target:100,quote:"Flow state is your home.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_gold_hoarder",name:"Gold Hoarder",icon:"",description:"Total lifetime gold earned.",category:"shop",triggerType:"metric",metricKey:"totalGoldEarned",levels:[{tier:"silver",target:1e3,quote:"The first coin is the heaviest.",rewards:{xp:100,gold:100}},{tier:"gold",target:1e4,quote:"Wealth is a tool, not a master.",rewards:{xp:500,gold:500}},{tier:"diamond",target:1e5,quote:"You can buy armies.",rewards:{xp:2e3,gold:2e3}},{tier:"crimson",target:1e6,quote:"Midas touches you.",rewards:{xp:1e4,gold:1e4}}]},{id:"bdg_stoic",name:"The Stoic",icon:"",description:"Reach high Discipline (DIS).",category:"mastery",triggerType:"stat",metricKey:ae.DIS,levels:[{tier:"silver",target:10,quote:"Control your mind.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"Emotion is a choice.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:50,quote:"Stone does not bleed.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:100,quote:"You are the mountain.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_titan",name:"The Titan",icon:"",description:"Reach high Strength (STR).",category:"mastery",triggerType:"stat",metricKey:ae.STR,levels:[{tier:"silver",target:10,quote:"Lift the weight.",rewards:{xp:200,gold:100}},{tier:"gold",target:25,quote:"The body obeys the will.",rewards:{xp:1e3,gold:500}},{tier:"diamond",target:50,quote:"Force of nature.",rewards:{xp:5e3,gold:2e3}},{tier:"crimson",target:100,quote:"Atlas shrugs.",rewards:{xp:2e4,gold:1e4}}]},{id:"bdg_polymath",name:"The Polymath",icon:"",description:"Reach Level 10 in any specific skill.",category:"skills",triggerType:"skill",metricKey:"any",levels:[{tier:"silver",target:10,quote:"Knowledge is the only true power.",rewards:{xp:500,gold:250}}]},{id:"bdg_debt_collector",name:"Debt Collector",icon:"",description:"Survive multiple consequences.",category:"consequences",triggerType:"manual",levels:[{tier:"silver",target:1,quote:"The price must be paid.",rewards:{xp:100,gold:0}},{tier:"gold",target:5,quote:"Justice is blind.",rewards:{xp:500,gold:0}}]},{id:"bdg_quartermaster",name:"Quartermaster",icon:"",description:"Complete a 12-week campaign.",category:"campaign",triggerType:"manual",levels:[{tier:"silver",target:1,quote:"A quarter of a year, a lifetime of progress.",rewards:{xp:1e3,gold:500}}]}],Oi={name:"Operative",title:"Initiate",level:1,currentXP:0,targetXP:1e3,gold:0,honor:100,honorDailyLog:{},streak:0,shields:0,inventory:[],equippedItems:[],hasOnboarded:!1,purchaseHistory:[],dailyXP:0,dailyTarget:500,currentMode:Pr.NORMAL,pendingMode:Pr.NORMAL,lastProcessedDate:new Date().toISOString(),consecutiveShields:0,streakHistory:{},badges:[],badgeTiers:{},badgeHistory:{},featuredBadges:[],metrics:{totalTasksCompleted:0,tasksByDifficulty:{[rt.EASY]:0,[rt.NORMAL]:0,[rt.HARD]:0},totalRaidsWon:0,raidsByDifficulty:{[rt.EASY]:0,[rt.NORMAL]:0,[rt.HARD]:0},totalGoldEarned:0,totalXPEarned:0,highestStreak:0,habitsFixed:0,shieldsUsed:0,resetsCount:0},unlockedThemes:[{id:"default",name:"Standard Issue",colors:{"--color-life-black":"#09090b","--color-life-paper":"#18181b","--color-life-gold":"#eab308","--color-life-text":"#fafafa","--color-life-muted":"#71717a","--color-life-easy":"#22c55e","--color-life-hard":"#ef4444"}}],stats:{[ae.STR]:0,[ae.INT]:0,[ae.DIS]:0,[ae.HEA]:0,[ae.CRT]:0,[ae.SPR]:0,[ae.REL]:0,[ae.FIN]:0},lastOnline:new Date().toISOString(),preferences:{soundEnabled:!0,deviceNotificationsEnabled:!1,theme:"default",showHighlights:!0,showCampaignUI:!0,unlockAllWeeks:!1,showCalendarSync:!1,statsViewMode:"radar",dayStartHour:4}},iW={currentView:"profile",activeModal:"none",modalQueue:[],toasts:[],systemLogs:[],debugDate:null,focusSession:null,habitsViewMode:"list",tasksViewMode:"missions"},A4=L.createContext(void 0),sW=t=>t?{...Oi,...t,preferences:{...Oi.preferences,...t.preferences||{}},stats:{...Oi.stats,...t.stats||{}},metrics:{...Oi.metrics,...t.metrics||{}},inventory:t.inventory||Oi.inventory,badges:t.badges||Oi.badges,unlockedThemes:t.unlockedThemes||Oi.unlockedThemes}:Oi,oW=({children:t})=>{const[e,n]=Rd("user_profile",Oi,"profile",sW),[r,i]=L.useState(iW),s={user:e,badgesRegistry:E4,ui:r};rW(s);const o=W=>{n(K=>({...K,...W}))},c=(W,K)=>{i(te=>({...te,activeModal:W,modalData:K})),He("click",e.preferences.soundEnabled)},f=()=>{i(W=>({...W,activeModal:"none",modalData:void 0}))},d=W=>{i(K=>({...K,currentView:W})),He("click",e.preferences.soundEnabled)},h=(W,K)=>{const te=Date.now().toString();i(ne=>({...ne,toasts:[...ne.toasts,{id:te,message:W,type:K}]})),setTimeout(()=>{i(ne=>({...ne,toasts:ne.toasts.filter(xe=>xe.id!==te)}))},3e3)},m=W=>{i(K=>({...K,toasts:K.toasts.filter(te=>te.id!==W)}))},g=()=>{o({preferences:{...e.preferences,soundEnabled:!e.preferences.soundEnabled}})},v=W=>{i(K=>({...K,debugDate:W}))},b=W=>{i(K=>({...K,focusSession:W}))},w=(W,K)=>{const te={id:Date.now().toString(),message:W,type:K,timestamp:new Date().toISOString()};i(ne=>({...ne,systemLogs:[te,...ne.systemLogs].slice(0,50)}))},S=W=>{i(K=>({...K,habitsViewMode:W}))},C=W=>{i(K=>({...K,tasksViewMode:W}))},R=(W,K,te)=>{o({hasOnboarded:!0,name:W||e.name,title:K||e.title}),te&&o({stats:{...e.stats,[te]:5}})},N=(W,K,te)=>{b({itemId:W,itemType:te,startTime:new Date().toISOString(),durationMinutes:K,isActive:!0})},O=()=>{b(null)},k=W=>{W.user?(n(W.user),h("Data Imported Successfully","success")):h("Invalid Data Format","error")},D=()=>{const W={user:e,timestamp:new Date().toISOString(),version:"2.0"},K=new Blob([JSON.stringify(W,null,2)],{type:"application/json"}),te=URL.createObjectURL(K),ne=document.createElement("a");ne.href=te,ne.download=`lifeos_backup_${new Date().toISOString().split("T")[0]}.json`,ne.click(),URL.revokeObjectURL(te)},M=()=>{n(Oi),h("System Reset Complete","crit")},j=()=>{const W=new Date;o({dailyXP:0,lastProcessedDate:W.toISOString(),honorDailyLog:{...e.honorDailyLog,[W.toISOString().split("T")[0]]:100}}),h("Daily Reset Triggered","info")},I=W=>{i(K=>({...K,customAudio:W}))},U=W=>{o({preferences:{...e.preferences,dayStartHour:W}})},B=W=>{o({preferences:{...e.preferences,theme:W}})},P=W=>{e.unlockedThemes.find(K=>K.id===W.id)||(o({unlockedThemes:[...e.unlockedThemes,W]}),h(`Theme Unlocked: ${W.name}`,"success"))},F=W=>{const K=e.inventory.filter(te=>te!==W);o({inventory:K}),h("Item Used","info")},z=W=>{const K=e.equippedItems.includes(W);let te=[...e.equippedItems];if(K)te=te.filter(ne=>ne!==W);else if(te.length<3)te.push(W);else{h("Max 3 items equipped","error");return}o({equippedItems:te})},Q=async W=>{if(W==="deviceNotificationsEnabled"){try{const K=(e==null?void 0:e.preferences)||Oi.preferences;if(K.deviceNotificationsEnabled)o({preferences:{...K,deviceNotificationsEnabled:!1}});else{const te=await T4();o({preferences:{...K,deviceNotificationsEnabled:te}}),h(te?"Notifications Enabled":"Permission Denied",te?"success":"error")}}catch(K){console.error("Failed to toggle notification:",K),h("Failed to update setting","error")}return}n(K=>{const te=K.preferences||Oi.preferences;return{...K,preferences:{...te,[W]:!te[W]}}})};return l.jsx(A4.Provider,{value:{state:s,dispatch:{updateUser:o,setModal:c,closeModal:f,setView:d,addToast:h,removeToast:m,toggleSound:g,setDebugDate:v,setFocusSession:b,addSystemLog:w,setHabitsViewMode:S,setTasksViewMode:C,completeOnboarding:R,startFocusSession:N,endFocusSession:O,importData:k,exportData:D,resetSystem:M,triggerDailyReset:j,setCustomAudio:I,setDayStartHour:U,setTheme:B,addTheme:P,useItem:F,toggleEquip:z,togglePreference:Q}},children:t})},Ge=()=>{const t=L.useContext(A4);if(t===void 0)throw new Error("useLifeOS must be used within a LifeOSProvider");return t};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C4=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aW=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lW=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase());/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NI=t=>{const e=lW(t);return e.charAt(0).toUpperCase()+e.slice(1)};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var cW={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uW=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0;return!1};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dW=L.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...c},f)=>L.createElement("svg",{ref:f,...cW,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:C4("lucide",i),...!s&&!uW(c)&&{"aria-hidden":"true"},...c},[...o.map(([d,h])=>L.createElement(d,h)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ke=(t,e)=>{const n=L.forwardRef(({className:r,...i},s)=>L.createElement(dW,{ref:s,iconNode:e,className:C4(`lucide-${aW(NI(t))}`,`lucide-${t}`,r),...i}));return n.displayName=NI(t),n};/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fW=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],hn=ke("activity",fW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hW=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],hd=ke("archive",hW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pW=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],N4=ke("arrow-left",pW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mW=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],gl=ke("award",mW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gW=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],pd=ke("bell",gW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yW=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],pi=ke("book-open",yW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vW=[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]],xW=ke("box",vW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bW=[["path",{d:"M12 18V5",key:"adv99a"}],["path",{d:"M15 13a4.17 4.17 0 0 1-3-4 4.17 4.17 0 0 1-3 4",key:"1e3is1"}],["path",{d:"M17.598 6.5A3 3 0 1 0 12 5a3 3 0 1 0-5.598 1.5",key:"1gqd8o"}],["path",{d:"M17.997 5.125a4 4 0 0 1 2.526 5.77",key:"iwvgf7"}],["path",{d:"M18 18a4 4 0 0 0 2-7.464",key:"efp6ie"}],["path",{d:"M19.967 17.483A4 4 0 1 1 12 18a4 4 0 1 1-7.967-.517",key:"1gq6am"}],["path",{d:"M6 18a4 4 0 0 1-2-7.464",key:"k1g0md"}],["path",{d:"M6.003 5.125a4 4 0 0 0-2.526 5.77",key:"q97ue3"}]],xn=ke("brain",bW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _W=[["path",{d:"M16 19h6",key:"xwg31i"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M19 16v6",key:"tddt3s"}],["path",{d:"M21 12.598V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h8.5",key:"1glfrc"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 2v4",key:"1cmpym"}]],xT=ke("calendar-plus",_W);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wW=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],mi=ke("calendar",wW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SW=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],k4=ke("chart-column",SW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TW=[["path",{d:"M5 21v-6",key:"1hz6c0"}],["path",{d:"M12 21V3",key:"1lcnhd"}],["path",{d:"M19 21V9",key:"unv183"}]],kI=ke("chart-no-axes-column",TW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EW=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Ut=ke("check",EW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AW=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],Wr=ke("chevron-down",AW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CW=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],Vy=ke("chevron-left",CW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NW=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],jr=ke("chevron-right",NW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kW=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],Ui=ke("chevron-up",kW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],RW=ke("circle-alert",IW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PW=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],xs=ke("circle-check-big",PW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],MW=ke("circle-check",jW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],OW=ke("circle-x",DW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],zW=ke("circle",LW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UW=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],vn=ke("clock",UW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VW=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],II=ke("cloud-rain",VW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FW=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],BW=ke("code",FW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HW=[["path",{d:"M10 2v2",key:"7u0qdc"}],["path",{d:"M14 2v2",key:"6buw04"}],["path",{d:"M16 8a1 1 0 0 1 1 1v8a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V9a1 1 0 0 1 1-1h14a4 4 0 1 1 0 8h-1",key:"pwadti"}],["path",{d:"M6 2v2",key:"colzsn"}]],I4=ke("coffee",HW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qW=[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]],Kn=ke("coins",qW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $W=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],yi=ke("copy",$W);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GW=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],Fy=ke("crown",GW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KW=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"22",x2:"18",y1:"12",y2:"12",key:"l9bcsi"}],["line",{x1:"6",x2:"2",y1:"12",y2:"12",key:"13hhkx"}],["line",{x1:"12",x2:"12",y1:"6",y2:"2",key:"10w3f3"}],["line",{x1:"12",x2:"12",y1:"22",y2:"18",key:"15g9kq"}]],Oc=ke("crosshair",KW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WW=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],By=ke("database",WW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YW=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],yl=ke("download",YW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XW=[["path",{d:"M17.596 12.768a2 2 0 1 0 2.829-2.829l-1.768-1.767a2 2 0 0 0 2.828-2.829l-2.828-2.828a2 2 0 0 0-2.829 2.828l-1.767-1.768a2 2 0 1 0-2.829 2.829z",key:"9m4mmf"}],["path",{d:"m2.5 21.5 1.4-1.4",key:"17g3f0"}],["path",{d:"m20.1 3.9 1.4-1.4",key:"1qn309"}],["path",{d:"M5.343 21.485a2 2 0 1 0 2.829-2.828l1.767 1.768a2 2 0 1 0 2.829-2.829l-6.364-6.364a2 2 0 1 0-2.829 2.829l1.768 1.767a2 2 0 0 0-2.828 2.829z",key:"1t2c92"}],["path",{d:"m9.6 14.4 4.8-4.8",key:"6umqxw"}]],Jr=ke("dumbbell",XW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JW=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Hy=ke("eye",JW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QW=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Pd=ke("file-text",QW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZW=[["path",{d:"M12 3q1 4 4 6.5t3 5.5a1 1 0 0 1-14 0 5 5 0 0 1 1-3 1 1 0 0 0 5 0c0-2-1.5-3-1.5-5q0-2 2.5-4",key:"1slcih"}]],fr=ke("flame",ZW);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eY=[["path",{d:"M14 2v6a2 2 0 0 0 .245.96l5.51 10.08A2 2 0 0 1 18 22H6a2 2 0 0 1-1.755-2.96l5.51-10.08A2 2 0 0 0 10 8V2",key:"18mbvz"}],["path",{d:"M6.453 15h11.094",key:"3shlmq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}]],R4=ke("flask-conical",eY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tY=[["path",{d:"M2 9V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2v-1",key:"fm4g5t"}],["path",{d:"M2 13h10",key:"pgb2dq"}],["path",{d:"m9 16 3-3-3-3",key:"6m91ic"}]],bT=ke("folder-input",tY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nY=[["path",{d:"M12 10v6",key:"1bos4e"}],["path",{d:"M9 13h6",key:"1uhe8q"}],["path",{d:"M20 20a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.9a2 2 0 0 1-1.69-.9L9.6 3.9A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2Z",key:"1kt360"}]],P4=ke("folder-plus",nY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rY=[["line",{x1:"6",x2:"10",y1:"12",y2:"12",key:"161bw2"}],["line",{x1:"8",x2:"8",y1:"10",y2:"14",key:"1i6ji0"}],["line",{x1:"15",x2:"15.01",y1:"13",y2:"13",key:"dqpgro"}],["line",{x1:"18",x2:"18.01",y1:"11",y2:"11",key:"meh2c"}],["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}]],iY=ke("gamepad",rY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sY=[["path",{d:"m14 13-8.381 8.38a1 1 0 0 1-3.001-3l8.384-8.381",key:"pgg06f"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m21.5 10.5-8-8",key:"a17d9x"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m8.5 7.5 8 8",key:"1oyaui"}]],j4=ke("gavel",sY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oY=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],M4=ke("gift",oY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],lY=ke("globe",aY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cY=[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]],mw=ke("hash",cY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uY=[["path",{d:"M2 9.5a5.5 5.5 0 0 1 9.591-3.676.56.56 0 0 0 .818 0A5.49 5.49 0 0 1 22 9.5c0 2.29-1.5 4-3 5.5l-5.492 5.313a2 2 0 0 1-3 .019L5 15c-1.5-1.5-3-3.2-3-5.5",key:"mvr1a0"}]],vi=ke("heart",uY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dY=[["path",{d:"M21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16z",key:"yt0hxn"}]],fY=ke("hexagon",dY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hY=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],pY=ke("history",hY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mY=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],gY=ke("info",mY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yY=[["path",{d:"M10 18v-7",key:"wt116b"}],["path",{d:"M11.12 2.198a2 2 0 0 1 1.76.006l7.866 3.847c.476.233.31.949-.22.949H3.474c-.53 0-.695-.716-.22-.949z",key:"1m329m"}],["path",{d:"M14 18v-7",key:"vav6t3"}],["path",{d:"M18 18v-7",key:"aexdmj"}],["path",{d:"M3 22h18",key:"8prr45"}],["path",{d:"M6 18v-7",key:"1ivflk"}]],vY=ke("landmark",yY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xY=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],bY=ke("layers",xY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _Y=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],wY=ke("layout-grid",_Y);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SY=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],TY=ke("layout-list",SY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EY=[["path",{d:"M13 5h8",key:"a7qcls"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 19h8",key:"c3s6r1"}],["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["rect",{x:"3",y:"4",width:"6",height:"6",rx:"1",key:"cif1o7"}]],D4=ke("list-todo",EY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AY=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],CY=ke("list",AY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NY=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],kY=ke("loader-circle",NY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IY=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],jd=ke("lock",IY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RY=[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]],PY=ke("log-in",RY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jY=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],O4=ke("log-out",jY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MY=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"m21 3-7 7",key:"1l2asr"}],["path",{d:"m3 21 7-7",key:"tjx5ai"}],["path",{d:"M9 21H3v-6",key:"wtvkvv"}]],zh=ke("maximize-2",MY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DY=[["path",{d:"M5 12h14",key:"1ays0h"}]],Ah=ke("minus",DY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OY=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],_T=ke("moon",OY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LY=[["path",{d:"M9 18V5l12-2v13",key:"1jmyc2"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["circle",{cx:"18",cy:"16",r:"3",key:"1hluhg"}]],_0=ke("music",LY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zY=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],UY=ke("package",zY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VY=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],hr=ke("palette",VY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FY=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],RI=ke("panels-top-left",FY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BY=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],HY=ke("pause",BY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qY=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gw=ke("pen",qY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $Y=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]],wT=ke("pencil",$Y);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GY=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],KY=ke("pin",GY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WY=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],pp=ke("play",WY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YY=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],kn=ke("plus",YY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XY=[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]],JY=ke("refresh-ccw",XY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QY=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],ST=ke("refresh-cw",QY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZY=[["path",{d:"m17 2 4 4-4 4",key:"nntrym"}],["path",{d:"M3 11v-1a4 4 0 0 1 4-4h14",key:"84bu3i"}],["path",{d:"m7 22-4-4 4-4",key:"1wqhfi"}],["path",{d:"M21 13v1a4 4 0 0 1-4 4H3",key:"1rx37r"}]],eX=ke("repeat",ZY);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tX=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Ch=ke("rotate-ccw",tX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nX=[["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"m19 8 3 8a5 5 0 0 1-6 0zV7",key:"zcdpyk"}],["path",{d:"M3 7h1a17 17 0 0 0 8-2 17 17 0 0 0 8 2h1",key:"1yorad"}],["path",{d:"m5 8 3 8a5 5 0 0 1-6 0zV7",key:"eua70x"}],["path",{d:"M7 21h10",key:"1b0cd5"}]],qy=ke("scale",nX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rX=[["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],iX=ke("scroll",rX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sX=[["path",{d:"M15 12h-5",key:"r7krc0"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M8 21h12a2 2 0 0 0 2-2v-1a1 1 0 0 0-1-1H11a1 1 0 0 0-1 1v1a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v2a1 1 0 0 0 1 1h3",key:"1ph1d7"}]],Lc=ke("scroll-text",sX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oX=[["path",{d:"M14 17H5",key:"gfn3mx"}],["path",{d:"M19 7h-9",key:"6i9tg"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]],aX=ke("settings-2",oX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lX=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],L4=ke("settings",lX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],w0=ke("shield-alert",cX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],md=ke("shield-check",uX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dX=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],ms=ke("shield",dX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fX=[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]],TT=ke("shopping-bag",fX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hX=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],z4=ke("shopping-cart",hX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pX=[["path",{d:"m12.5 17-.5-1-.5 1h1z",key:"3me087"}],["path",{d:"M15 22a1 1 0 0 0 1-1v-1a2 2 0 0 0 1.56-3.25 8 8 0 1 0-11.12 0A2 2 0 0 0 8 20v1a1 1 0 0 0 1 1z",key:"1o5pge"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}]],U4=ke("skull",pX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mX=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],PI=ke("snowflake",mX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gX=[["path",{d:"M11.017 2.814a1 1 0 0 1 1.966 0l1.051 5.558a2 2 0 0 0 1.594 1.594l5.558 1.051a1 1 0 0 1 0 1.966l-5.558 1.051a2 2 0 0 0-1.594 1.594l-1.051 5.558a1 1 0 0 1-1.966 0l-1.051-5.558a2 2 0 0 0-1.594-1.594l-5.558-1.051a1 1 0 0 1 0-1.966l5.558-1.051a2 2 0 0 0 1.594-1.594z",key:"1s2grr"}],["path",{d:"M20 2v4",key:"1rf3ol"}],["path",{d:"M22 4h-4",key:"gwowj6"}],["circle",{cx:"4",cy:"20",r:"2",key:"6kqj1y"}]],S0=ke("sparkles",gX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yX=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Fi=ke("square-check-big",yX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vX=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],xX=ke("square-pen",vX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],_X=ke("square-plus",bX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wX=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],SX=ke("square",wX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TX=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],T0=ke("star",TX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EX=[["path",{d:"M21 9a2.4 2.4 0 0 0-.706-1.706l-3.588-3.588A2.4 2.4 0 0 0 15 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2z",key:"1dfntj"}],["path",{d:"M15 3v5a1 1 0 0 0 1 1h5",key:"6s6qgf"}]],V4=ke("sticky-note",EX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AX=[["path",{d:"m11 19-6-6",key:"s7kpr"}],["path",{d:"m5 21-2-2",key:"1kw20b"}],["path",{d:"m8 16-4 4",key:"1oqv8h"}],["path",{d:"M9.5 17.5 21 6V3h-3L6.5 14.5",key:"pkxemp"}]],CX=ke("sword",AX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NX=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],Gi=ke("target",NX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kX=[["path",{d:"M12 19h8",key:"baeox8"}],["path",{d:"m4 17 6-6-6-6",key:"1yngyt"}]],Or=ke("terminal",kX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IX=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Md=ke("text-align-start",IX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RX=[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]],PX=ke("timer",RX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jX=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],Dr=ke("trash-2",jX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MX=[["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],F4=ke("trash",MX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DX=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],$y=ke("trending-up",DX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OX=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],yo=ke("triangle-alert",OX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LX=[["path",{d:"M10 14.66v1.626a2 2 0 0 1-.976 1.696A5 5 0 0 0 7 21.978",key:"1n3hpd"}],["path",{d:"M14 14.66v1.626a2 2 0 0 0 .976 1.696A5 5 0 0 1 17 21.978",key:"rfe1zi"}],["path",{d:"M18 9h1.5a1 1 0 0 0 0-5H18",key:"7xy6bh"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M6 9a6 6 0 0 0 12 0V3a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1z",key:"1mhfuq"}],["path",{d:"M6 9H4.5a1 1 0 0 1 0-5H6",key:"tex48p"}]],Gy=ke("trophy",LX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zX=[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]],Uh=ke("upload",zX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UX=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],ET=ke("user",UX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VX=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]],xi=ke("users",VX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FX=[["path",{d:"M3 2v7c0 1.1.9 2 2 2h4a2 2 0 0 0 2-2V2",key:"cjf0a3"}],["path",{d:"M7 2v20",key:"1473qp"}],["path",{d:"M21 15V2a5 5 0 0 0-5 5v6c0 1.1.9 2 2 2h3Zm0 0v7",key:"j28e5"}]],BX=ke("utensils",FX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HX=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],qX=ke("volume-2",HX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $X=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["line",{x1:"22",x2:"16",y1:"9",y2:"15",key:"1ewh16"}],["line",{x1:"16",x2:"22",y1:"9",y2:"15",key:"5ykzw1"}]],jI=ke("volume-x",$X);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GX=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],MI=ke("waves",GX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KX=[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]],WX=ke("wheat",KX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YX=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],wt=ke("x",YX);/**
 * @license lucide-react v0.563.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XX=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],St=ke("zap",XX),JX=()=>{const{state:t,dispatch:e}=Ge(),{currentView:n,habitsViewMode:r,tasksViewMode:i}=t.ui,{user:s}=t,o=s.preferences.showCampaignUI,[c,f]=L.useState(null);L.useEffect(()=>{const I=US(Qs,U=>f(U));return()=>I()},[]);const[d,h]=L.useState("profile"),[m,g]=L.useState("raids"),v=()=>{if(n===d){let I="profile";d==="profile"?I="skills":d==="skills"?I="shop":I="profile",h(I),e.setView(I)}else e.setView(d)},b=()=>{if(!o){n!=="raids"&&e.setView("raids");return}if(n===m){let I="raids";m==="raids"?I="campaign":I="raids",g(I),e.setView(I)}else e.setView(m)},w=()=>{if(n==="tasks"){const I=i==="missions"?"codex":"missions";e.setTasksViewMode(I)}else e.setView("tasks")},S=()=>{let I="mission";n==="habits"?I="protocol":(n==="raids"||n==="campaign")&&(I="operation"),e.setModal("addTask",{defaultType:I})},C=()=>{if(n==="habits"){const I=r==="list"?"calendar":"list";e.setHabitsViewMode(I)}else e.setView("habits")},R=()=>{e.setModal("login")},N=I=>n===I,O=N("profile")||N("shop")||N("skills"),k=N("raids")||N("campaign"),D=N("tasks"),M=N("habits"),j=!o&&m==="campaign"?"raids":m;return l.jsxs("nav",{className:"h-24 pb-6 pt-2 bg-life-black/80 backdrop-blur-xl border-t border-zinc-800 flex items-center justify-around px-4 z-30 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] relative",children:[l.jsxs("button",{onClick:v,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative group ${O?"text-life-gold bg-life-gold/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${d==="profile"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(ET,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${d==="skills"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(pi,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${d==="shop"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(TT,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:d}),O&&l.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-gold rounded-full"})]}),l.jsxs("button",{onClick:w,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${D?i==="codex"?"text-red-500 bg-red-950/20 scale-105":"text-life-easy bg-life-easy/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${i==="missions"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(Fi,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${i==="codex"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(qy,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:i==="codex"?"Codex":"Missions"}),D&&l.jsx("div",{className:`absolute -bottom-1 w-1 h-1 rounded-full ${i==="codex"?"bg-red-500":"bg-life-easy"}`})]}),l.jsxs("div",{className:"relative -mt-12 group z-20",children:[l.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-16 h-16 bg-life-crimson/40 blur-[30px] rounded-full pointer-events-none group-hover:bg-life-crimson/60 transition-colors duration-500 animate-pulse-slow"}),l.jsx("button",{onClick:S,className:"relative w-16 h-16 bg-gradient-to-br from-life-crimson to-red-700 rounded-full shadow-[0_8px_30px_rgba(220,38,38,0.4)] flex items-center justify-center text-white hover:scale-110 active:scale-95 transition-all duration-300 border-4 border-life-black ring-2 ring-life-crimson/20",children:l.jsx(kn,{size:32,strokeWidth:3,className:"group-active:rotate-90 transition-transform duration-300 drop-shadow-md"})})]}),l.jsxs("button",{onClick:C,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${M?"text-life-normal bg-life-normal/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${r==="list"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(Gi,{size:24})}),l.jsx("div",{className:`transition-all duration-300 transform ${r==="calendar"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(mi,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:r==="calendar"?"Planner":"Habits"}),M&&l.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-normal rounded-full"})]}),l.jsxs("button",{onClick:b,className:`flex flex-col items-center justify-center w-16 h-16 rounded-xl transition-all duration-300 relative ${k?"text-life-hard bg-life-hard/10 scale-105":"text-life-muted hover:text-life-silver"}`,children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:`transition-all duration-300 transform ${j==="raids"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(St,{size:24})}),o&&l.jsx("div",{className:`transition-all duration-300 transform ${j==="campaign"?"scale-100 opacity-100":"scale-0 opacity-0 absolute top-0"}`,children:l.jsx(TY,{size:24})})]}),l.jsx("span",{className:"text-[10px] mt-1 font-bold uppercase tracking-wider",children:j}),k&&l.jsx("div",{className:"absolute -bottom-1 w-1 h-1 bg-life-hard rounded-full"})]}),!c&&l.jsx("button",{onClick:R,className:"absolute top-[-40px] right-4 bg-life-black/80 backdrop-blur border border-life-gold/30 text-life-gold p-2 rounded-full shadow-lg animate-bounce",title:"Secure Link",children:l.jsx(PY,{size:16})})]})},yw=t=>Math.floor(100*Math.pow(t,1.5)),B4=t=>t>=100?"Grandmaster":t>=50?"Master":t>=25?"Expert":t>=10?"Adept":"Novice",QX=t=>{const e=new Date(t),r=Math.abs(new Date().getTime()-e.getTime());return Math.ceil(r/(1e3*60*60*24))>30},ZX=[{id:"sk_01",title:"Coding",description:"Building the matrix.",relatedStats:[ae.INT],level:1,currentXP:0,targetXP:100,rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()},{id:"sk_02",title:"",description:"     .",relatedStats:[ae.REL,ae.INT,ae.HEA],level:1,currentXP:0,targetXP:100,rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()}],H4=L.createContext(void 0),eJ=t=>({...t,targetXP:t.targetXP||yw(t.level||1),rank:t.rank||B4(t.level||1),isRusty:t.isRusty??!1,lastPracticed:t.lastPracticed||new Date().toISOString()}),tJ=t=>({skills:(Array.isArray(t)?t:t.skills||[]).map(eJ)}),nJ=({children:t})=>{const{state:e,dispatch:n}=Ge(),r=e.user.preferences.soundEnabled,[i,s]=Rd("LIFE_OS_SKILLS_DATA",{skills:ZX},"skills_data",tJ),{skills:o}=i,[c,f]=L.useState(null);L.useEffect(()=>{(()=>{s(S=>({...S,skills:S.skills.map(C=>({...C,isRusty:QX(C.lastPracticed)}))}))})()},[]);const d=w=>{w&&He("click",r),f(w)},h=(w,S,C="")=>{const R={id:`sk_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,title:w,description:C,relatedStats:S,level:1,currentXP:0,targetXP:yw(1),rank:"Novice",lastPracticed:new Date().toISOString(),isRusty:!1,createdAt:new Date().toISOString()};He("click",r),s(N=>({...N,skills:[...N.skills,R]})),n.addToast(`Skill Acquired: ${w}`,"success")},m=(w,S)=>{He("click",r),s(C=>({...C,skills:C.skills.map(R=>R.id===w?{...R,...S}:R)})),n.addToast("Skill Updated","success")},g=(w,S)=>{s(C=>({...C,skills:C.skills.map(R=>{if(R.id!==w)return R;const N=R.isRusty;let O=R.currentXP+S,k=R.level,D=R.targetXP,M=!1;for(;O>=D;)O-=D,k++,D=yw(k),M=!0;const j=B4(k);return M&&(He("level-up",r),n.addToast(`${R.title} reached Level ${k}!`,"level-up")),N&&n.addToast(`${R.title} is no longer Rusty!`,"success"),{...R,level:k,currentXP:O,targetXP:D,rank:j,lastPracticed:new Date().toISOString(),isRusty:!1}})}))},v=w=>{He("delete",r),s(S=>({...S,skills:S.skills.filter(C=>C.id!==w)})),c===w&&f(null),n.addToast("Skill Deleted","info")},b=w=>{s({skills:w}),n.addToast("Skills Restored","success")};return l.jsx(H4.Provider,{value:{skillState:{skills:o,activeSkillId:c},skillDispatch:{addSkill:h,updateSkill:m,addSkillXP:g,deleteSkill:v,setActiveSkill:d,restoreData:b}},children:t})},an=()=>{const t=L.useContext(H4);if(t===void 0)throw new Error("useSkills must be used within a SkillProvider");return t},rJ=()=>{const{state:t,dispatch:e}=Ge(),{user:n}=t,{skillState:r}=an(),i=(r==null?void 0:r.skills)||[];let s=n.title;const o=n.preferences.useSkillAsTitle&&n.preferences.linkedSkillId?i.find(N=>N.id===n.preferences.linkedSkillId):null;o?s=`${o.rank} ${o.title}`:s=n.title;const c=Math.min(100,n.currentXP/n.targetXP*100),f=Math.min(100,n.dailyXP/n.dailyTarget*100),d=f>=100,h=18,m=3,g=h-m*2,v=g*2*Math.PI,b=v-f/100*v,[w,S]=L.useState(0);L.useEffect(()=>{if(w>0){const N=setTimeout(()=>S(0),1e3);return()=>clearTimeout(N)}},[w]);const C=()=>{S(N=>{const O=N+1;return O>=5?(He("level-up",!0),e.setModal("devConsole"),0):O}),t.ui.currentView!=="profile"&&e.setView("profile")},R=()=>{He("click",!0),e.setModal("honorBreakdown")};return l.jsxs("header",{className:"h-16 px-4 border-b border-zinc-800 flex items-center justify-between bg-life-black/60 backdrop-blur-xl z-20 shadow-lg transition-all duration-300 select-none sticky top-0",children:[l.jsxs("div",{onClick:C,className:"flex items-center gap-3 cursor-pointer active:opacity-80 transition-opacity",children:[l.jsxs("div",{className:"w-10 h-10 rounded-full bg-life-muted/20 border border-life-silver flex items-center justify-center relative overflow-hidden ring-1 ring-life-muted/50 group",children:[o&&o.icon?l.jsx("span",{className:"text-xl",children:o.icon}):l.jsx(ET,{size:20,className:"text-life-silver group-hover:scale-110 transition-transform"}),l.jsxs("div",{className:"absolute bottom-0 right-0 bg-life-gold text-life-black text-[9px] font-black px-1.5 py-0.5 rounded-tl-md shadow-sm z-10",children:["L",n.level]}),w>0&&l.jsx("div",{className:"absolute inset-0 bg-life-crimson/20 animate-pulse"})]}),l.jsxs("div",{className:"flex flex-col justify-center",children:[l.jsx("h1",{className:"text-sm font-bold leading-none tracking-wide text-life-text/90 mb-1.5 truncate max-w-[150px] sm:max-w-none",children:s.toUpperCase()}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"font-mono text-[9px] text-life-gold/80",children:[n.currentXP,"/",n.targetXP," XP"]}),l.jsx("div",{className:"w-20 h-1.5 bg-gray-800 rounded-full overflow-hidden border border-gray-700/50",children:l.jsx("div",{className:"h-full bg-gradient-to-r from-life-gold to-yellow-200 transition-all duration-700 ease-out shadow-[0_0_10px_rgba(251,191,36,0.5)]",style:{width:`${c}%`}})})]})]})]}),l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("button",{onClick:()=>e.setModal("devConsole"),className:"p-2 rounded-full text-life-muted hover:text-life-gold hover:bg-life-gold/10 transition-all active:scale-95",title:"System Settings",children:l.jsx(L4,{size:20})}),l.jsxs("div",{className:"hidden sm:flex flex-col items-end gap-0.5 mr-1",children:[l.jsxs("div",{className:"flex items-center text-life-gold font-mono text-xs",children:[l.jsx("span",{className:"mr-1.5 text-xs",children:""})," ",n.gold]}),l.jsxs("div",{onClick:R,className:"flex items-center text-indigo-400 font-mono text-xs cursor-pointer hover:text-indigo-300 hover:scale-105 transition-all",children:[l.jsx(gl,{size:10,className:"mr-1 fill-current opacity-80"})," ",n.honor,"%"]})]}),l.jsxs("div",{className:"sm:hidden flex items-center gap-2 mr-1",children:[l.jsxs("div",{className:"flex flex-col items-center justify-center w-8 h-8 rounded bg-life-gold/10 border border-life-gold/20",children:[l.jsx("span",{className:"text-[8px]",children:""}),l.jsx("span",{className:"text-[9px] font-bold text-life-gold",children:n.gold})]}),l.jsxs("div",{onClick:R,className:"flex flex-col items-center justify-center w-8 h-8 rounded bg-indigo-500/10 border border-indigo-500/20 cursor-pointer active:scale-95 transition-transform",children:[l.jsx(gl,{size:8,className:"text-indigo-400 mb-0.5"}),l.jsxs("span",{className:"text-[9px] font-bold text-indigo-400",children:[n.honor,"%"]})]})]}),l.jsxs("div",{onClick:()=>e.setModal("streak"),className:"relative w-12 h-12 flex items-center justify-center group cursor-pointer hover:scale-105 transition-transform",children:[l.jsxs("svg",{height:h*2,width:h*2,className:"transform -rotate-90 absolute z-0",children:[l.jsx("circle",{stroke:"#333",strokeWidth:m,fill:"transparent",r:g,cx:h,cy:h,opacity:.3}),l.jsx("circle",{stroke:d?"#10b981":"#fbbf24",strokeWidth:m,strokeDasharray:v+" "+v,style:{strokeDashoffset:b,transition:"stroke-dashoffset 0.5s ease-in-out"},strokeLinecap:"round",fill:"transparent",r:g,cx:h,cy:h,className:d?"drop-shadow-[0_0_5px_rgba(16,185,129,0.5)]":""})]}),l.jsxs("div",{className:`
                w-8 h-8 rounded-full flex flex-col items-center justify-center z-10 transition-colors
                ${d?"bg-life-easy/10":"bg-life-black"}
             `,children:[l.jsx(fr,{size:12,className:`
                    absolute -top-1 right-1 opacity-0 group-hover:opacity-100 transition-opacity 
                    ${d?"text-life-easy fill-life-easy/50":"text-life-crimson fill-life-crimson/50"}
                `}),l.jsx("span",{className:"text-[6px] text-life-muted uppercase leading-none mt-0.5 tracking-tighter",children:"Day"}),l.jsx("span",{className:`text-sm font-black leading-none ${d?"text-life-easy":"text-life-crimson"}`,children:n.streak})]})]})]})]})},bs={[rt.EASY]:"border-life-easy text-life-easy",[rt.NORMAL]:"border-life-normal text-life-normal",[rt.HARD]:"border-life-hard text-life-hard"},Ky={[rt.EASY]:"bg-life-easy/10",[rt.NORMAL]:"bg-life-normal/10",[rt.HARD]:"bg-life-hard/10"},$t={[ae.STR]:"#ef4444",[ae.INT]:"#a855f7",[ae.DIS]:"#60a5fa",[ae.HEA]:"#10b981",[ae.CRT]:"#e879f9",[ae.SPR]:"#f43f5e",[ae.REL]:"#fbbf24",[ae.FIN]:"#14b8a6"},iJ={[Pr.EASY]:300,[Pr.NORMAL]:400,[Pr.HARD]:500},sJ={[rt.EASY]:{xp:20,gold:10},[rt.NORMAL]:{xp:50,gold:30},[rt.HARD]:{xp:100,gold:100}},oJ={[rt.EASY]:{xp:50,gold:20,stat:2},[rt.NORMAL]:{xp:30,gold:10,stat:1},[rt.HARD]:{xp:10,gold:0,stat:0}},gd=(t,e,n,r,i)=>{const s=sJ[t];let o=1,c=1;return e===Pr.HARD?(o+=.2,c+=.5):e===Pr.EASY&&(o-=.2),n&&r&&n.equippedItems&&n.equippedItems.forEach(f=>{const d=r.find(h=>h.id===f);d&&d.effect&&(d.effect.type==="xp_boost"&&(!d.effect.stat||i&&i.includes(d.effect.stat))&&(o+=d.effect.value),d.effect.type==="gold_boost"&&(c+=d.effect.value))}),{xp:Math.floor(s.xp*o),gold:Math.floor(s.gold*c)}},wr=[1,2,3,5,8,13,21,34,55,89,144,233,377,610],AT=t=>{let e=wr.findIndex(d=>d>t)-1;t===0&&(e=-1),t>=610&&(e=wr.length-1),e<-1&&(e=wr.length-1);const n=e+1;let r="Initiate",i="text-gray-500 border-gray-500/20";n<=7?(r="Foundation",i="text-gray-400 border-gray-500/30"):n<=10?(r="Solid State",i="text-life-silver border-life-silver/50"):n<=12?(r="Mastery",i="text-life-gold border-life-gold"):n===13?(r="Legendary",i="text-life-diamond border-life-diamond shadow-[0_0_10px_rgba(96,165,250,0.5)]"):(r="The Godfather",i="text-life-crimson border-life-crimson shadow-[0_0_15px_rgba(220,38,38,0.6)]");const s=e>=0?wr[e]:0,o=e+1<wr.length?wr[e+1]:610,c=t>=610;let f=0;if(c)f=100;else{const d=o-s,h=t-s;f=Math.min(100,Math.max(0,h/d*100))}return{level:n,phase:r,phaseColor:i,nextCheckpoint:o,prevCheckpoint:s,progress:f,isMaxLevel:c}},Wy=t=>{if(t<=1)return 0;let e=wr.findIndex(i=>i>t);e===-1&&(e=wr.length);const n=e-1,r=wr[n]||0;return t>r?r:wr[n-1]||0},yd=(t,e)=>{const n=e?new Date(e):new Date,r=new Date(t.createdAt||new Date().toISOString());n.setHours(0,0,0,0),r.setHours(0,0,0,0);const i=n.getTime()-r.getTime(),s=Math.floor(i/(1e3*60*60*24));if(s<0)return!0;switch(t.type){case"daily":return!0;case"specific_days":return!t.specificDays||t.specificDays.length===0?!0:t.specificDays.includes(n.getDay());case"interval":const o=t.intervalValue||1;return s%o===0;case"custom":if(!t.pattern||t.pattern.length===0)return!0;const c=s%t.pattern.length;return t.pattern[c]==="1";default:return!0}},Hg={[rt.EASY]:1,[rt.NORMAL]:3,[rt.HARD]:9},q4=(t,e,n,r=null)=>{const i=r?new Date(r):new Date,s=i.toISOString().split("T")[0],o=[];let c=0;t.forEach(d=>{if(!d.isArchived){const h=d.deadline||d.scheduledTime;if(h&&h.startsWith(s)){const m=Hg[d.difficulty]||1;o.push({id:d.id,title:d.title,type:"task",difficulty:d.difficulty,weight:m,percentage:0,isCompleted:d.isCompleted}),c+=m}}}),e.forEach(d=>{if(yd(d,i.toISOString())){const h=Hg[d.difficulty]||1;o.push({id:d.id,title:d.title,type:"habit",difficulty:d.difficulty,weight:h,percentage:0,isCompleted:d.status==="completed"}),c+=h}}),n.forEach(d=>{d.status==="active"&&d.steps.forEach(h=>{const m=h.scheduledTime||h.scheduledDate;if(m&&m.startsWith(s)){const g=Hg[d.difficulty]||3;o.push({id:h.id,title:`${d.title}: ${h.title}`,type:"raid",difficulty:d.difficulty,weight:g,percentage:0,isCompleted:h.isCompleted}),c+=g}})});const f=o.map(d=>({...d,percentage:c>0?Math.round(d.weight/c*100):0}));return f.sort((d,h)=>h.weight-d.weight),{items:f,totalWeight:c}},$4=t=>{try{const e=JSON.parse(localStorage.getItem("LIFE_OS_TASKS_DATA")||"[]"),n=JSON.parse(localStorage.getItem("LIFE_OS_HABITS_DATA")||"[]"),r=JSON.parse(localStorage.getItem("LIFE_OS_RAIDS_DATA")||"[]"),{totalWeight:i}=q4(e,n,r),s=Hg[t]||1,o=Math.max(s,i);return Math.round(s/o*100)}catch(e){return console.error("Honor Calc Failed:",e),5}},E0=(t,e=null)=>{const r=(e?new Date(e):new Date).toISOString().slice(0,7),i=Object.entries(t).filter(([o])=>o.startsWith(r)).map(([,o])=>o);if(i.length===0)return 100;const s=i.reduce((o,c)=>o+c,0);return Math.round(s/i.length)},aJ=(t,e=null)=>{const r=(e?new Date(e):new Date).toISOString().slice(0,7),i=Object.entries(t).filter(([f])=>f.startsWith(r));if(i.length===0)return{updatedLog:t,newAverage:100,redeemedDate:null};i.sort((f,d)=>f[1]-d[1]);const s=i[0];if(s[1]>=100)return{updatedLog:t,newAverage:100,redeemedDate:null};const o={...t};o[s[0]]=100;const c=E0(o,e);return{updatedLog:o,newAverage:c,redeemedDate:s[0]}},A0=t=>{const e=/\[?w(\d{1,2})d(\d)\]?/i,n=t.match(e);if(n){const r=parseInt(n[1],10),i=parseInt(n[2],10);return{cleanedTitle:t.replace(e,"").replace(/\s+/," ").trim(),timeCode:{week:r,day:i}}}return{cleanedTitle:t,timeCode:null}},lJ=t=>{const e=/\b(\d{10})\b/,n=t.match(e);if(n){const r=n[1],i=parseInt(r.substring(0,2),10),s=parseInt(r.substring(2,4),10)-1,o=parseInt(r.substring(4,6),10),c=parseInt(r.substring(6,8),10),f=parseInt(r.substring(8,10),10),d=2e3+i,h=new Date(d,s,o,c,f);if(!isNaN(h.getTime()))return{cleanedTitle:t.replace(e,"").replace(/\s+/," ").trim(),dateIso:h.toISOString()}}return{cleanedTitle:t,dateIso:null}},vw=(t,e,n)=>{const r=new Date(t),i=(e-1)*7+(n-1),s=new Date(r);return s.setDate(s.getDate()+i),s.setHours(23,59,59,999),s.toISOString()},cJ=(t,e)=>{if(!t||!e)return null;const n=new Date(t),r=new Date(e);n.setHours(0,0,0,0),r.setHours(0,0,0,0);const i=r.getTime()-n.getTime(),s=Math.floor(i/(1e3*60*60*24));if(s<0)return null;const o=Math.floor(s/7)+1,c=s%7+1;return`W${o}D${c}`},G4=()=>{try{const t=localStorage.getItem("LIFE_OS_CAMPAIGN_DATA_V2");if(t){const e=JSON.parse(t);if(e.isActive&&e.startDate)return e}}catch{return null}return null},uJ=(t,e,n)=>{const{state:r,dispatch:i}=Ge(),{skillDispatch:s,skillState:o}=an();return{addTask:j=>{let{cleanedTitle:I,timeCode:U}=A0(j.title);const B=lJ(I);let P=j.deadline,F=j.scheduledTime,z=j.isCampaign||!1,Q=j.isCalendarEvent||!1;if(U){z=!0;const K=G4();K?(P=vw(K.startDate,U.week,U.day),i.addToast(`G12: Scheduled for W${U.week} D${U.day}`,"info")):i.addToast(`No active G12 campaign found for [W${U.week}D${U.day}]`,"error")}B.dateIso&&(I=B.cleanedTitle,F=B.dateIso,P=B.dateIso,Q=!0,i.addToast("C30: Scheduled via Code","info"));const W={...j,title:I,deadline:P,scheduledTime:F,isCampaign:z,isCalendarEvent:Q,id:`t_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,isCompleted:!1,isArchived:!1};He("click",n),e(K=>({...K,tasks:[W,...K.tasks]})),i.setModal("none")},updateTask:(j,I)=>{e(U=>({...U,tasks:U.tasks.map(B=>B.id===j?{...B,...I}:B)})),He("click",n)},toggleTask:j=>{var P,F;const I=t.tasks.find(z=>z.id===j);if(!I)return;const U=!I.isCompleted;let B=null;if(U){let z=gd(I.difficulty,r.user.currentMode);I.isCampaign&&(z.xp=Math.ceil(z.xp*1.1));const Q=Math.random(),W=I.difficulty===rt.HARD&&Q>.85||I.difficulty===rt.NORMAL&&Q>.9;let K=null;W?(z.xp*=2,z.gold*=2,B="crit",K={title:I.title,xp:z.xp,gold:z.gold,multiplier:2,message:"Luck favors the bold."}):B="success";const te=r.user.metrics,ne={...te,totalTasksCompleted:te.totalTasksCompleted+1,tasksByDifficulty:{...te.tasksByDifficulty,[I.difficulty]:(te.tasksByDifficulty[I.difficulty]||0)+1},totalGoldEarned:te.totalGoldEarned+z.gold,totalXPEarned:te.totalXPEarned+z.xp},xe=I.difficulty===rt.HARD?2:I.difficulty===rt.NORMAL?1:.5,G=o.skills.find(ve=>ve.id===I.skillId),X=(P=G==null?void 0:G.relatedStats)!=null&&P.length?G.relatedStats:I.stats,de=xe/X.length,ce={...r.user.stats};if(X.forEach(ve=>{ce[ve]=(ce[ve]||0)+de}),i.updateUser({currentXP:r.user.currentXP+z.xp,dailyXP:r.user.dailyXP+z.xp,gold:r.user.gold+z.gold,stats:ce,metrics:ne}),I.skillId){const ve=Math.ceil(z.xp*.5);s.addSkillXP(I.skillId,ve)}K?setTimeout(()=>i.setModal("loot",K),200):i.addToast(`Mission Complete: ${I.title}`,"success")}else{const z=gd(I.difficulty,r.user.currentMode);I.isCampaign&&(z.xp=Math.ceil(z.xp*1.1));const Q=r.user.metrics,W={...Q,totalTasksCompleted:Math.max(0,Q.totalTasksCompleted-1),tasksByDifficulty:{...Q.tasksByDifficulty,[I.difficulty]:Math.max(0,(Q.tasksByDifficulty[I.difficulty]||0)-1)},totalGoldEarned:Math.max(0,Q.totalGoldEarned-z.gold),totalXPEarned:Math.max(0,Q.totalXPEarned-z.xp)},K=I.difficulty===rt.HARD?2:I.difficulty===rt.NORMAL?1:.5,te=o.skills.find(X=>X.id===I.skillId),ne=(F=te==null?void 0:te.relatedStats)!=null&&F.length?te.relatedStats:I.stats,xe=K/ne.length,G={...r.user.stats};ne.forEach(X=>{G[X]=Math.max(0,(G[X]||0)-xe)}),i.updateUser({currentXP:Math.max(0,r.user.currentXP-z.xp),dailyXP:Math.max(0,r.user.dailyXP-z.xp),gold:Math.max(0,r.user.gold-z.gold),stats:G,metrics:W})}B&&n&&He(B,n),e(z=>({...z,tasks:z.tasks.map(Q=>Q.id===j?{...Q,isCompleted:U}:Q)}))},deleteTask:j=>{const I=t.tasks.find(U=>U.id===j);if(I){if(!I.isCompleted&&!I.isArchived){const U=oJ[I.difficulty],B=$4(I.difficulty),P=r.ui.debugDate?new Date(r.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],F=r.user.honorDailyLog[P]!==void 0?r.user.honorDailyLog[P]:100,z=Math.max(0,F-B),Q={...r.user.honorDailyLog,[P]:z},W=E0(Q,r.ui.debugDate),K=U.stat/I.stats.length,te={...r.user.stats};I.stats.forEach(ne=>{te[ne]=Math.max(0,(te[ne]||0)-K)}),i.updateUser({currentXP:Math.max(0,r.user.currentXP-U.xp),gold:Math.max(0,r.user.gold-U.gold),stats:te,honorDailyLog:Q,honor:W}),i.addToast(`Mission Failed: -${B}% Honor`,"error"),He("error",n)}else He("delete",n);e(U=>({...U,tasks:U.tasks.filter(B=>B.id!==j)}))}},addCategory:j=>{const I={id:`cat_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:j,isCollapsed:!1};e(U=>({...U,categories:[...U.categories,I]})),He("click",n)},deleteCategory:j=>{e(I=>({...I,categories:I.categories.filter(U=>U.id!==j),tasks:I.tasks.map(U=>U.categoryId===j?{...U,categoryId:void 0}:U)})),He("delete",n)},renameCategory:(j,I)=>{e(U=>({...U,categories:U.categories.map(B=>B.id===j?{...B,title:I}:B)}))},toggleCategory:j=>{e(I=>({...I,categories:I.categories.map(U=>U.id===j?{...U,isCollapsed:!U.isCollapsed}:U)}))},moveTask:(j,I)=>{e(U=>({...U,tasks:U.tasks.map(B=>B.id===j?{...B,categoryId:I}:B)})),He("click",n)},archiveTask:j=>{e(I=>({...I,tasks:I.tasks.map(U=>U.id===j?{...U,isArchived:!0}:U)})),i.addToast("Mission moved to Backlog","info"),He("click",n)},restoreTask:j=>{e(I=>({...I,tasks:I.tasks.map(U=>U.id===j?{...U,isArchived:!1}:U)})),i.addToast("Mission Restored","success"),He("click",n)},toggleSubtask:(j,I)=>{e(U=>({...U,tasks:U.tasks.map(B=>{if(B.id!==j)return B;const P=B.subtasks.map(F=>F.id===I?{...F,isCompleted:!F.isCompleted}:F);return{...B,subtasks:P}})})),He("click",n)},addLaw:(j,I,U,B)=>{const P={id:`law_${Date.now()}_${Math.random().toString(36).substr(2,5)}`,title:j,penaltyType:I,penaltyValue:U,statTarget:B,timesBroken:0};e(F=>({...F,laws:[...F.laws,P]})),He("click",n),i.addToast("New Law Enacted","info")},deleteLaw:j=>{e(I=>({...I,laws:I.laws.filter(U=>U.id!==j)})),He("delete",n)},enforceLaw:j=>{const I=t.laws.find(U=>U.id===j);if(I){if(I.penaltyType==="gold")i.updateUser({gold:r.user.gold-I.penaltyValue});else if(I.penaltyType==="xp")i.updateUser({currentXP:r.user.currentXP-I.penaltyValue});else if(I.penaltyType==="stat"&&I.statTarget)i.updateUser({stats:{...r.user.stats,[I.statTarget]:r.user.stats[I.statTarget]-I.penaltyValue}});else if(I.penaltyType==="honor"){const U=r.ui.debugDate?new Date(r.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],B=r.user.honorDailyLog[U]!==void 0?r.user.honorDailyLog[U]:100,P=Math.max(0,B-I.penaltyValue),F={...r.user.honorDailyLog,[U]:P},z=E0(F,r.ui.debugDate);i.updateUser({honorDailyLog:F,honor:z})}e(U=>({...U,laws:U.laws.map(B=>B.id===j?{...B,timesBroken:B.timesBroken+1}:B)})),He("error",n),i.addToast(`Law Broken: ${I.title}`,"error")}},updateLaw:(j,I)=>{e(U=>({...U,laws:U.laws.map(B=>B.id===j?{...B,...I}:B)})),He("click",n)},restoreData:(j,I,U)=>{e({tasks:j,categories:I,laws:U}),i.addToast("Tasks & Laws Restored","success")}}},dJ=[{id:"t_01",title:"Initialize LifeOS Protocol",description:"System calibration complete.",difficulty:rt.HARD,stats:[ae.INT],isCompleted:!1,isTimed:!1,deadline:"2024-12-31",subtasks:[{id:"st_1",title:"Check Audio Systems",isCompleted:!0},{id:"st_2",title:"Verify Data Persistence",isCompleted:!1}]}],K4=[{id:"cat_work",title:" Work Operations",isCollapsed:!1},{id:"cat_personal",title:" Personal Logs",isCollapsed:!1}],W4=L.createContext(void 0),fJ=t=>{let e=t.reminders||[];!t.reminders&&t.reminderMinutes&&t.reminderMinutes>0&&(e=[{id:`mig_${Date.now()}_${Math.random()}`,minutesBefore:t.reminderMinutes,isSent:!!t.isReminderSent}]);let n=t.stats||[];return!t.stats&&t.stat&&(n=[t.stat]),n.length===0&&(n=[ae.STR]),{difficulty:rt.NORMAL,stats:n,subtasks:[],isTimed:!1,isArchived:!1,isCompleted:!1,isCampaign:!1,reminders:e,...t,stats:n}},hJ=t=>({tasks:(t.tasks||[]).map(fJ),categories:t.categories||K4,laws:t.laws||[]}),pJ=({children:t})=>{const{state:e,dispatch:n}=Ge(),{skillDispatch:r,skillState:i}=an(),s=e.user.preferences.soundEnabled,[o,c]=Rd("LIFE_OS_TASKS_COMBINED",{tasks:dJ,categories:K4,laws:[]},"tasks_data",hJ),f=uJ(o,c,s);return l.jsx(W4.Provider,{value:{taskState:o,taskDispatch:f},children:t})},Er=()=>{const t=L.useContext(W4);if(t===void 0)throw new Error("useTasks must be used within a TaskProvider");return t},mJ=(t,e,n)=>{const{state:r,dispatch:i}=Ge(),{skillDispatch:s,skillState:o}=an();return{addHabit:R=>{const N={id:`h_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...R,streak:0,status:"pending",history:[],checkpoint:0,bestStreak:0,createdAt:new Date().toISOString(),dailyProgress:0};He("click",n),e(O=>({...O,habits:[...O.habits,N]})),i.setModal("none")},updateHabit:(R,N)=>{e(O=>({...O,habits:O.habits.map(k=>k.id===R?{...k,...N}:k)})),He("click",n)},processHabit:(R,N)=>{var j;const O=t.habits.find(I=>I.id===R);if(!O)return;if(N==="completed"&&O.dailyTarget&&O.dailyTarget>1){const U=(O.dailyProgress||0)+1;if(U<O.dailyTarget){e(B=>({...B,habits:B.habits.map(P=>P.id===R?{...P,dailyProgress:U}:P)})),He("click",n),i.addToast(`${O.title}: Rep ${U}/${O.dailyTarget}`,"info");return}}let k=O.streak,D=O.history,M="success";if(N==="completed"){k+=1;const I=new Date().toISOString().split("T")[0];D.some(ne=>ne.startsWith(I))||(D=[...D,new Date().toISOString()]);let U=O.isArchived||!1,B=O.currentRepetitions||0;O.totalRepetitions&&O.totalRepetitions>0&&(B+=1,B>=O.totalRepetitions&&(U=!0,i.addToast(`Protocol Finished: ${O.title} moved to Archive`,"info")));let P=gd(O.difficulty,r.user.currentMode);Math.random()>.95?(P.xp*=2,P.gold*=2,M="crit",i.setModal("loot",{title:O.title,xp:P.xp,gold:P.gold,multiplier:2,message:"Consistency is Power."})):i.addToast(`${O.title} Complete`,"success");const z=O.difficulty===rt.HARD?2:O.difficulty===rt.NORMAL?1:.5,Q=o.skills.find(ne=>ne.id===O.skillId),W=(j=Q==null?void 0:Q.relatedStats)!=null&&j.length?Q.relatedStats:O.stats,K=z/W.length,te={...r.user.stats};W.forEach(ne=>{te[ne]=(te[ne]||0)+K}),i.updateUser({currentXP:r.user.currentXP+P.xp,dailyXP:r.user.dailyXP+P.xp,gold:r.user.gold+P.gold,stats:te,metrics:{...r.user.metrics,habitsFixed:r.user.metrics.habitsFixed+1}}),O.skillId&&s.addSkillXP(O.skillId,Math.ceil(P.xp*.5)),e(ne=>({...ne,habits:ne.habits.map(xe=>xe.id===R?{...xe,status:N,streak:k,history:D,bestStreak:Math.max(xe.bestStreak,k),dailyProgress:N==="completed"?xe.dailyTarget:xe.dailyProgress,currentRepetitions:B,isArchived:U}:xe)}))}else if(N==="failed"){k=Wy(O.streak),M="error";const I=$4(O.difficulty),U=r.ui.debugDate?new Date(r.ui.debugDate).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],B=r.user.honorDailyLog[U]!==void 0?r.user.honorDailyLog[U]:100,P=Math.max(0,B-I),F={...r.user.honorDailyLog,[U]:P},z=E0(F,r.ui.debugDate);i.updateUser({honorDailyLog:F,honor:z}),i.addToast(`${O.title} Failed`,"error"),e(Q=>({...Q,habits:Q.habits.map(W=>W.id===R?{...W,status:N,streak:k,history:D,bestStreak:Math.max(W.bestStreak,k),dailyProgress:W.dailyProgress}:W)}))}He(M,n)},deleteHabit:R=>{e(N=>({...N,habits:N.habits.filter(O=>O.id!==R)})),He("delete",n),i.addToast("Protocol Deleted","info")},addCategory:R=>{const N={id:`cat_h_${Date.now()}`,title:R,isCollapsed:!1};e(O=>({...O,categories:[...O.categories,N]})),He("click",n)},deleteCategory:R=>{e(N=>({...N,categories:N.categories.filter(O=>O.id!==R),habits:N.habits.map(O=>O.categoryId===R?{...O,categoryId:void 0}:O)})),He("delete",n)},renameCategory:(R,N)=>{e(O=>({...O,categories:O.categories.map(k=>k.id===R?{...k,title:N}:k)}))},toggleCategory:R=>{e(N=>({...N,categories:N.categories.map(O=>O.id===R?{...O,isCollapsed:!O.isCollapsed}:O)}))},moveHabit:(R,N)=>{e(O=>({...O,habits:O.habits.map(k=>k.id===R?{...k,categoryId:N}:k)})),He("click",n)},toggleSubtask:(R,N)=>{e(O=>({...O,habits:O.habits.map(k=>{if(k.id!==R)return k;const D=k.subtasks.map(M=>M.id===N?{...M,isCompleted:!M.isCompleted}:M);return{...k,subtasks:D}})})),He("click",n)},restoreData:(R,N)=>{e({habits:R,categories:N}),i.addToast("Habits Restored","success")}}},gJ=[{id:"h_1771593541489_o581bvlg5",title:"Clean room ",description:"",difficulty:rt.NORMAL,stats:[ae.DIS],type:"specific_days",specificDays:[1,4,5,6],isTimed:!1,reminders:[],subtasks:[],dailyTarget:1,streak:0,status:"pending",history:[],checkpoint:0,bestStreak:0,createdAt:"2026-02-20T13:19:01.489Z",dailyProgress:0}],Y4=[{id:"cat_morning",title:" Morning Protocol",isCollapsed:!1},{id:"cat_health",title:" Health & Body",isCollapsed:!1},{id:"cat_night",title:" Night Routine",isCollapsed:!1}],X4=L.createContext(void 0),yJ=t=>{let e=t.reminders||[];!t.reminders&&t.reminderMinutes&&t.reminderMinutes>0&&(e=[{id:`mig_${Date.now()}_${Math.random()}`,minutesBefore:t.reminderMinutes,isSent:!!t.isReminderSent}]);let n=t.stats||[];return n.length===0&&(n=[ae.DIS]),{difficulty:rt.NORMAL,type:"daily",history:[],streak:0,checkpoint:0,bestStreak:0,status:"pending",isTimed:!1,durationMinutes:0,reminders:e,subtasks:[],dailyTarget:t.dailyTarget||1,dailyProgress:t.dailyProgress||0,...t,stats:n}},vJ=t=>({habits:(t.habits||[]).map(yJ),categories:t.categories||Y4}),xJ=({children:t})=>{const{state:e,dispatch:n}=Ge(),{skillDispatch:r,skillState:i}=an(),s=e.user.preferences.soundEnabled,[o,c]=Rd("LIFE_OS_HABITS_COMBINED",{habits:gJ,categories:Y4},"habits_data",vJ),{habits:f,categories:d}=o,[h,m]=L.useState(null),g=mJ(o,c,s),v=NS.useRef(null);L.useEffect(()=>{const w=()=>{const C=new Date,R=new Date(e.user.lastOnline),N=e.user.preferences.dayStartHour??4,O=I=>{const U=new Date(I);return U.setHours(I.getHours()-N),U},k=O(C),D=O(R),M=k.getDate()!==D.getDate()||k.getMonth()!==D.getMonth(),j=k.toISOString().split("T")[0];if(v.current!==j&&M){v.current=j;const I=new Date(C);I.setDate(I.getDate()-1);const U=I.toISOString();let B=e.user.shields,P=0,F={},z=0,Q=0,W=[];const K=f.map(te=>{if(te.isArchived)return te;const ne=te.reminders?te.reminders.map(de=>({...de,isSent:!1})):[],xe=te.subtasks?te.subtasks.map(de=>({...de,isCompleted:!1})):[],G={reminders:ne,subtasks:xe,dailyProgress:0};if(te.status==="completed")return{...te,...G,status:"pending",shieldUsed:!1,history:[...te.history,U]};if(te.status==="failed")return{...te,...G,status:"pending",shieldUsed:!1};if(yd(te,U)&&te.status==="pending"){if((te.dailyProgress||0)>0)return Q++,{...te,...G,status:"pending",shieldUsed:!1};if(B>0)return B--,P++,{...te,...G,status:"pending",shieldUsed:!0};const de=Wy(te.streak);return te.stats.forEach(ce=>{F[ce]=(F[ce]||0)+1}),z+=1,W.push(te.title),{...te,...G,streak:de,status:"pending",shieldUsed:!1}}return{...te,...G,status:"pending",shieldUsed:!1}});if(c(te=>({...te,habits:K})),P>0&&(n.updateUser({shields:B}),He("success",s),n.addToast(` ${P} Shields Used`,"info")),Q>0&&n.addToast(`${Q} habits partially completed (Rest Day recorded)`,"info"),W.length>0){He("error",s);const te={...e.user.stats};Object.entries(F).forEach(([xe,G])=>{const X=xe;te[X]=Math.max(0,te[X]-G)}),te[ae.DIS]=Math.max(0,te[ae.DIS]-z),n.updateUser({stats:te});const ne=W.length>3?`${W.slice(0,3).join(", ")}... (+${W.length-3} more)`:W.join(", ");n.addToast(` Missed ${W.length} Habits: ${ne}`,"error")}}};w();const S=setInterval(w,6e4);return()=>clearInterval(S)},[e.user.lastOnline,f,e.user.preferences.dayStartHour]);const b=w=>{w&&He("click",s),m(w)};return l.jsx(X4.Provider,{value:{habitState:{...o,activeHabitId:h},habitDispatch:{...g,setActiveHabit:b}},children:t})},Ar=()=>{const t=L.useContext(X4);if(t===void 0)throw new Error("useHabits must be used within a HabitProvider");return t},bJ=(t,e,n)=>{const{state:r,dispatch:i}=Ge(),{skillDispatch:s,skillState:o}=an();return{addRaid:N=>{e(O=>{let k=!1;const D=N.steps.map((j,I)=>{const U=j.isLocked!==void 0?j.isLocked:k;return k=!0,{...j,isLocked:U}}),M={id:N.id||`rd_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...N,steps:D,status:"active",progress:0,isCampaign:N.isCampaign||!1};return{...O,raids:[M,...O.raids]}}),He("click",n),i.addToast("Operation Initialized","success")},updateRaid:(N,O)=>{e(k=>({...k,raids:k.raids.map(D=>D.id===N?{...D,...O}:D)})),He("click",n)},deleteRaid:N=>{e(O=>({...O,raids:O.raids.filter(k=>k.id!==N)})),He("delete",n),i.addToast("Operation Deleted","info")},archiveRaid:N=>{e(O=>({...O,raids:O.raids.map(k=>k.id===N?{...k,status:"archived"}:k)})),i.addToast("Operation Archived","info")},restoreRaid:N=>{e(O=>({...O,raids:O.raids.map(k=>k.id===N?{...k,status:"active"}:k)})),i.addToast("Operation Restored","success")},toggleRaidStep:(N,O)=>{var ze;const k=t.raids.find(je=>je.id===N);if(!k)return;const D=k.steps.findIndex(je=>je.id===O);if(D===-1)return;const M=k.steps[D],j=!M.isCompleted,I=M.difficulty||k.difficulty,U=M.stat&&(!k.stats||M.stat!==k.stats[0]),B=M.stat||(k.stats&&k.stats.length>0?k.stats[0]:ae.STR),P=U?void 0:k.skillId,F=gd(I,r.user.currentMode),z=F.xp,Q=F.gold,W=I===rt.HARD?2:I===rt.NORMAL?1:.5,K=P?o.skills.find(je=>je.id===P):void 0,te=U?[M.stat]:(ze=K==null?void 0:K.relatedStats)!=null&&ze.length?K.relatedStats:[B],ne=W/te.length,xe={...r.user.stats};te.forEach(je=>{xe[je]=(xe[je]||0)+ne});const G=[...k.steps];G[D]={...M,isCompleted:j};const X=G.filter(je=>je.isCompleted).length,de=Math.round(X/G.length*100),ce=de===100;let ve=null;if(j)i.updateUser({currentXP:r.user.currentXP+z,dailyXP:r.user.dailyXP+z,gold:r.user.gold+Q,stats:xe}),P&&s.addSkillXP(P,Math.ceil(z*.5)),ce?(He("crit",n),ve={title:`Operation Conquered: ${k.title}`,xp:z*5,gold:Q*5,multiplier:5,message:"Sector Secured. Tactical Superiority Achieved."},i.updateUser({currentXP:r.user.currentXP+z*5,gold:r.user.gold+Q*5,metrics:{...r.user.metrics,totalRaidsWon:r.user.metrics.totalRaidsWon+1}})):(He("success",n),i.addToast(`Step Secured | +${z} XP`,"success"));else{const je={...r.user.stats};te.forEach(Fe=>{je[Fe]=Math.max(0,(je[Fe]||0)-ne)}),i.updateUser({currentXP:Math.max(0,r.user.currentXP-z),dailyXP:Math.max(0,r.user.dailyXP-z),gold:Math.max(0,r.user.gold-Q),stats:je}),k.status==="completed"?(i.updateUser({currentXP:Math.max(0,r.user.currentXP-z*5),gold:Math.max(0,r.user.gold-Q*5),metrics:{...r.user.metrics,totalRaidsWon:Math.max(0,r.user.metrics.totalRaidsWon-1)}}),i.addToast("Step Revoked | Completion Bonus Removed","info")):i.addToast("Step Revoked","info"),He("delete",n)}e(je=>({...je,raids:je.raids.map(Fe=>{if(Fe.id!==N)return Fe;const fe=[...Fe.steps];return fe[D]={...M,isCompleted:j},j&&D+1<fe.length&&(fe[D+1]={...fe[D+1],isLocked:!1}),{...Fe,steps:fe,progress:de,status:ce?"completed":Fe.status==="completed"?"active":Fe.status}})})),ve&&setTimeout(()=>i.setModal("loot",ve),300)},updateRaidStep:(N,O,k)=>{e(D=>({...D,raids:D.raids.map(M=>{if(M.id!==N)return M;const j=M.steps.map(I=>I.id===O?{...I,...k}:I);return{...M,steps:j}})}))},mergeRaidSteps:(N,O)=>{e(k=>({...k,raids:k.raids.map(D=>{if(D.id!==N)return D;const M=G4(),j=M==null?void 0:M.startDate,I=new Map(O.map(W=>[W.id,W])),U=new Set(D.steps.map(W=>W.id)),B=D.steps.map(W=>{if(I.has(W.id)){const K=I.get(W.id);let te=K.deadline||W.deadline,ne=K.scheduledTime||W.scheduledTime,xe=K.title||W.title;if(K.title&&j){const{timeCode:G,cleanedTitle:X}=A0(K.title);if(G){xe=X;const de=vw(j,G.week,G.day);te=de,ne=de}}return{...W,...K,title:xe,deadline:te,scheduledTime:ne,isCompleted:K.isCompleted!==void 0?K.isCompleted:W.isCompleted}}return W}),P=new Set(D.steps.map(W=>W.title.trim().toLowerCase())),F=B.length>0?B[B.length-1]:null;let z=F?!F.isCompleted:!1;const Q=O.filter(W=>W.id&&!U.has(W.id)&&W.title&&!P.has(W.title.trim().toLowerCase())).map((W,K)=>{let te=W.deadline,ne=W.scheduledTime,xe=W.title||"";if(W.title&&j){const{timeCode:X,cleanedTitle:de}=A0(W.title);if(X){xe=de;const ce=vw(j,X.week,X.day);te=ce,ne=ce}}const G=W.isLocked!==void 0?W.isLocked:z;return z=!0,{...W,title:xe,deadline:te,scheduledTime:ne,isCompleted:W.isCompleted||!1,isLocked:G}});return{...D,steps:[...B,...Q]}})})),i.addToast("Raid Steps Updated","success")},toggleRaidStepSubtask:(N,O,k)=>{e(D=>({...D,raids:D.raids.map(M=>{if(M.id!==N)return M;const j=M.steps.map(I=>{var B;if(I.id!==O)return I;const U=((B=I.subtasks)==null?void 0:B.map(P=>P.id===k?{...P,isCompleted:!P.isCompleted}:P))||[];return{...I,subtasks:U}});return{...M,steps:j}})})),He("click",n)},archiveRaidStep:(N,O)=>{e(k=>({...k,raids:k.raids.map(D=>{if(D.id!==N)return D;const M=D.steps.map(j=>j.id===O?{...j,isArchived:!0}:j);return{...D,steps:M}})}))},deleteRaidStep:(N,O)=>{e(k=>({...k,raids:k.raids.map(D=>{if(D.id!==N)return D;const M=D.steps.filter(j=>j.id!==O);return{...D,steps:M}})})),i.setModal("none")},restoreData:N=>{e({raids:N}),i.addToast("Raids Restored","success")}}},J4=L.createContext(void 0),_J=t=>({...t,status:t.status||"active",progress:t.progress||0,isCampaign:t.isCampaign||!1,steps:(t.steps||[]).map(e=>({...e,isCompleted:!!e.isCompleted,isLocked:!!e.isLocked,subtasks:e.subtasks||[]}))}),wJ=t=>({raids:(Array.isArray(t)?t:t.raids||[]).map(_J)}),SJ=({children:t})=>{const{state:e,dispatch:n}=Ge(),{skillDispatch:r,skillState:i}=an(),s=e.user.preferences.soundEnabled,[o,c]=Rd("LIFE_OS_RAIDS_DATA",{raids:[]},"raids_data",wJ),f=bJ(o,c,s);return l.jsx(J4.Provider,{value:{raidState:o,raidDispatch:f},children:t})},Qr=()=>{const t=L.useContext(J4);if(t===void 0)throw new Error("useRaids must be used within a RaidProvider");return t},TJ=(t,e)=>{const[n,r]=L.useState(e*60),[i,s]=L.useState(!1);return L.useEffect(()=>{t&&(r(e*60),s(!1))},[t,e]),L.useEffect(()=>{let o;return!i&&n>0&&t?o=window.setInterval(()=>{r(c=>c-1)},1e3):n===0&&!i&&t&&(He("level-up",!0),s(!0)),()=>clearInterval(o)},[i,n,t]),{timeLeft:n,isPaused:i,setIsPaused:s,setTimeLeft:r}},EJ=(t,e)=>{const{state:n,dispatch:r}=Ge(),i=L.useRef(null),s=L.useRef(null),o=L.useRef(null),c=L.useRef(null),f=()=>{if(s.current){try{s.current.stop(),s.current.disconnect()}catch{}s.current=null}if(o.current){try{o.current.disconnect()}catch{}o.current=null}if(i.current&&i.current.state!=="closed"){try{i.current.close()}catch{}i.current=null}c.current&&(c.current.pause(),c.current.src="",c.current=null)};return L.useEffect(()=>()=>f(),[]),L.useEffect(()=>{var d;if(f(),!(t==="none"||!e)){if(t==="custom"){if((d=n.ui.customAudio)!=null&&d.url){const h=new Audio(n.ui.customAudio.url);h.loop=!0,h.volume=.5,h.play().catch(m=>console.error("Playback failed",m)),c.current=h}else r.addToast("No Custom Track Loaded","error");return}try{i.current=new(window.AudioContext||window.webkitAudioContext);const h=i.current;o.current=h.createGain(),o.current.connect(h.destination);let m=null;if(t==="brown"){const g=2*h.sampleRate;m=h.createBuffer(1,g,h.sampleRate);const v=m.getChannelData(0);let b=0;for(let w=0;w<g;w++){const S=Math.random()*2-1;v[w]=(b+.02*S)/1.02,b=v[w],v[w]*=3.5}o.current.gain.value=.15}else if(t==="rain"){const g=2*h.sampleRate;m=h.createBuffer(1,g,h.sampleRate);const v=m.getChannelData(0);let b=0,w=0,S=0,C=0,R=0,N=0,O=0;for(let k=0;k<g;k++){const D=Math.random()*2-1;b=.99886*b+D*.0555179,w=.99332*w+D*.0750759,S=.969*S+D*.153852,C=.8665*C+D*.3104856,R=.55*R+D*.5329522,N=-.7616*N-D*.016898,v[k]=(b+w+S+C+R+N+O+D*.5362)*.11,O=D*.115926}o.current.gain.value=.2}else if(t==="clock"){const g=h.sampleRate;m=h.createBuffer(1,g,h.sampleRate);const v=m.getChannelData(0);for(let b=0;b<g;b++){const w=b/h.sampleRate;if(w<.15){const S=(Math.random()*2-1)*Math.exp(-w*80),C=Math.sin(2*Math.PI*2800*w)*Math.exp(-w*100),R=Math.sin(2*Math.PI*180*w)*Math.exp(-w*60);v[b]=S*.4+C*.3+R*.3}else v[b]=0}o.current.gain.value=.5}m&&(s.current=h.createBufferSource(),s.current.buffer=m,s.current.loop=!0,s.current.connect(o.current),s.current.start(0))}catch(h){console.error("Audio failed",h)}return()=>f()}},[t,e]),{stopAudio:f}},AJ=({onExit:t})=>l.jsxs("div",{className:"relative z-10 flex justify-between items-center p-6",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-life-muted",children:"Focus Protocol Active"})]}),l.jsxs("button",{onClick:t,className:"p-2 rounded-full hover:bg-white/10 text-life-muted hover:text-life-hard transition-all flex items-center gap-1",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase hidden sm:inline",children:"Abort"}),l.jsx(O4,{size:18})]})]}),CJ=t=>{const e=Math.floor(t/60),n=t%60;return`${e.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},NJ=({timeLeft:t,isPaused:e,onTogglePause:n,durationMinutes:r})=>l.jsxs("div",{className:"relative mb-12",children:[l.jsxs("svg",{className:"w-64 h-64 md:w-80 md:h-80 transform -rotate-90",children:[l.jsx("circle",{cx:"50%",cy:"50%",r:"48%",className:"stroke-life-muted/10 fill-none",strokeWidth:"4"}),l.jsx("circle",{cx:"50%",cy:"50%",r:"48%",className:`fill-none transition-all duration-1000 ${e?"stroke-life-muted":"stroke-life-gold"}`,strokeWidth:"4",strokeDasharray:"301.59",strokeDashoffset:301.59*(1-t/(r*60)),pathLength:"301.59",strokeLinecap:"round",style:{filter:e?"none":"drop-shadow(0 0 15px rgba(251,191,36,0.5))"}})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center",children:[l.jsx("div",{className:"text-6xl md:text-8xl font-mono font-bold tracking-tighter tabular-nums",children:CJ(t)}),l.jsxs("button",{onClick:n,className:"mt-4 px-6 py-2 rounded-full bg-white/5 hover:bg-white/10 border border-zinc-800 text-xs font-bold uppercase tracking-widest flex items-center gap-2 transition-all",children:[e?l.jsx(pp,{size:12,fill:"currentColor"}):l.jsx(HY,{size:12,fill:"currentColor"})," ",e?"Resume":"Pause"]})]})]}),kJ=t=>{const{noiseType:e,setNoiseType:n,activePanel:r,setActivePanel:i,hasSubtasks:s,completedSubtasksCount:o,totalSubtasksCount:c,onComplete:f}=t,[d,h]=L.useState(!1),m=()=>{switch(e){case"brown":return"Brown";case"rain":return"Rain";case"clock":return"Tick";case"custom":return"Track";default:return"Mute"}},g=()=>{switch(e){case"brown":return l.jsx(MI,{size:18});case"rain":return l.jsx(II,{size:18});case"clock":return l.jsx(vn,{size:18});case"custom":return l.jsx(_0,{size:18});default:return l.jsx(jI,{size:18})}};return l.jsxs("div",{className:"flex items-center gap-2 w-full justify-center max-w-md relative",children:[l.jsxs("div",{className:"relative",children:[d&&l.jsx("div",{className:"absolute bottom-full left-0 mb-2 w-32 bg-life-black border border-life-gold/30 rounded-xl overflow-hidden shadow-2xl animate-in slide-in-from-bottom-2 z-50 flex flex-col",children:[{id:"none",label:"Mute",icon:l.jsx(jI,{size:14})},{id:"brown",label:"Brown Noise",icon:l.jsx(MI,{size:14})},{id:"rain",label:"Rain",icon:l.jsx(II,{size:14})},{id:"clock",label:"Tick",icon:l.jsx(vn,{size:14})},{id:"custom",label:"Custom",icon:l.jsx(_0,{size:14})}].map(v=>l.jsxs("button",{onClick:()=>{n(v.id),h(!1)},className:`flex items-center gap-3 px-4 py-3 text-xs font-bold uppercase tracking-wider hover:bg-life-gold/10 transition-colors ${e===v.id?"text-life-gold bg-life-gold/5":"text-life-muted"}`,children:[v.icon," ",v.label]},v.id))}),l.jsxs("button",{onClick:()=>h(!d),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${e!=="none"?"bg-life-gold/20 border-life-gold text-life-gold":"bg-white/5 border-zinc-800 text-life-muted hover:text-white"}`,children:[g(),l.jsxs("div",{className:"flex items-center gap-1",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase",children:m()}),l.jsx(Ui,{size:8})]})]})]}),l.jsxs("button",{onClick:()=>i(r==="notes"?"none":"notes"),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${r==="notes"?"bg-life-easy/20 border-life-easy text-life-easy":"bg-white/5 border-zinc-800 text-life-muted hover:text-white"}`,children:[l.jsx(V4,{size:18}),l.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Notes"})]}),s&&l.jsxs("button",{onClick:()=>i(r==="subtasks"?"none":"subtasks"),className:`p-3 rounded-xl border flex flex-col items-center gap-1 transition-all w-20 shrink-0 ${r==="subtasks"?"bg-life-gold/20 border-life-gold text-life-gold":"bg-white/5 border-zinc-800 text-life-muted hover:text-white"}`,children:[l.jsx(D4,{size:18}),l.jsxs("div",{className:"flex flex-col items-center leading-none",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Steps"}),l.jsxs("span",{className:"text-[7px] opacity-60",children:[o,"/",c]})]})]}),l.jsxs("button",{onClick:f,className:"p-3 rounded-xl border border-life-easy/50 bg-life-easy/10 text-life-easy hover:bg-life-easy hover:text-black transition-all flex flex-col items-center gap-1 w-20 shrink-0 group",children:[l.jsx(xs,{size:18,className:"group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[8px] font-bold uppercase",children:"Done"})]})]})},IJ=({notes:t,setNotes:e,isOpen:n,onClose:r})=>l.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-[#111] border-t border-zinc-800 p-6 rounded-t-3xl transition-transform duration-300 ease-out z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] h-[40vh] flex flex-col ${n?"translate-y-0":"translate-y-full"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[l.jsxs("h3",{className:"text-xs font-bold uppercase text-life-muted tracking-widest flex items-center gap-2",children:[l.jsx(V4,{size:14})," Distraction Pad"]}),l.jsx("button",{onClick:r,className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:16})})]}),l.jsx("textarea",{value:t,onChange:i=>e(i.target.value),placeholder:"Dump thoughts here...",className:"w-full h-full bg-black/50 rounded-xl border border-zinc-800 p-4 text-sm text-life-text focus:outline-none focus:border-life-gold resize-none font-mono leading-relaxed"})]}),RJ=({subtasks:t,onToggleSubtask:e,isOpen:n,onClose:r})=>l.jsxs("div",{className:`absolute bottom-0 left-0 right-0 bg-[#111] border-t border-zinc-800 p-6 rounded-t-3xl transition-transform duration-300 ease-out z-20 shadow-[0_-10px_40px_rgba(0,0,0,0.5)] h-[50vh] flex flex-col text-left ${n?"translate-y-0":"translate-y-full"}`,children:[l.jsxs("div",{className:"flex justify-between items-center mb-4 shrink-0",children:[l.jsxs("h3",{className:"text-xs font-bold uppercase text-life-gold tracking-widest flex items-center gap-2",children:[l.jsx(D4,{size:14})," Tactical Objectives"]}),l.jsx("button",{onClick:r,className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:16})})]}),l.jsx("div",{className:"flex-1 overflow-y-auto space-y-2 pr-2",children:t.map(i=>l.jsxs("div",{onClick:()=>e(i.id),className:`flex items-center gap-3 p-3 rounded-lg border cursor-pointer transition-all ${i.isCompleted?"bg-life-gold/10 border-life-gold/30 opacity-60":"bg-white/5 border-zinc-800 hover:bg-white/10"}`,children:[l.jsx("div",{className:`w-5 h-5 rounded border flex items-center justify-center transition-colors shrink-0 ${i.isCompleted?"bg-life-gold border-life-gold text-black":"border-life-muted text-transparent"}`,children:l.jsx(Ut,{size:12,strokeWidth:4})}),l.jsx("span",{className:`text-sm ${i.isCompleted?"line-through text-life-gold":"text-life-text"}`,children:i.title})]},i.id))})]}),PJ=()=>{var B,P;const{state:t,dispatch:e}=Ge(),{taskState:n,taskDispatch:r}=Er(),{habitState:i,habitDispatch:s}=Ar(),{raidState:o,raidDispatch:c}=Qr(),{focusSession:f}=t.ui,[d,h]=L.useState("none"),[m,g]=L.useState(""),[v,b]=L.useState("none"),{timeLeft:w,isPaused:S,setIsPaused:C}=TJ(!!f,(f==null?void 0:f.durationMinutes)||0),{stopAudio:R}=EJ(v,!!f),N=L.useMemo(()=>{if(!f)return null;if(f.itemType==="habit")return i.habits.find(F=>F.id===f.itemId);if(f.itemType==="raid_step"){for(const F of o.raids){const z=F.steps.find(Q=>Q.id===f.itemId);if(z)return{...z,raidId:F.id}}return null}return n.tasks.find(F=>F.id===f.itemId)},[f,i.habits,n.tasks,o.raids]);if(L.useEffect(()=>{f&&!N&&(R(),e.endFocusSession())},[f,N,e]),!f||!N)return null;const O=f.itemType==="habit",k=f.itemType==="raid_step",D=N.subtasks&&N.subtasks.length>0,M=((B=N.subtasks)==null?void 0:B.filter(F=>F.isCompleted).length)||0,j=((P=N.subtasks)==null?void 0:P.length)||0,I=(F=!1)=>{R();const Q=f.durationMinutes*60-w,W=Math.floor(Q/60);if(W>=1){const K=Math.floor(W*2);e.updateUser({currentXP:t.user.currentXP+K,dailyXP:t.user.dailyXP+K}),e.addToast(`Focused for ${W}m (+${K} XP)`,"success")}if(m.trim()){const K=m.split(`
`).filter(te=>te.trim().length>0);K.forEach(te=>{r.addTask({title:te.trim(),difficulty:rt.EASY,stat:ae.INT,isTimed:!1,subtasks:[],categoryId:void 0})}),e.addToast(`${K.length} Missions added from notes`,"info")}F&&(O?s.processHabit(N.id,"completed"):k?c.toggleRaidStep(N.raidId,N.id):r.toggleTask(N.id)),e.endFocusSession()},U=F=>{He("click",!0),O?s.toggleSubtask(N.id,F):k?c.toggleRaidStepSubtask(N.raidId,N.id,F):r.toggleSubtask(N.id,F)};return l.jsxs("div",{className:"fixed inset-0 z-[200] bg-black text-white flex flex-col animate-in fade-in duration-500",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#0a0a0a] to-[#1a1a1a] pointer-events-none"}),l.jsx("div",{className:`absolute inset-0 bg-life-gold/5 blur-[100px] rounded-full transition-opacity duration-[3000ms] ${S?"opacity-10":"opacity-40 animate-pulse-slow"}`}),l.jsx(AJ,{onExit:()=>I(!1)}),l.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center relative z-10 p-6 text-center",children:[l.jsxs("div",{className:"mb-4 text-[9px] font-black uppercase tracking-[0.2em] bg-white/5 px-3 py-1 rounded-full border border-zinc-800 text-life-gold",children:[O?"PROTOCOL":k?"TACTICAL":"MISSION"," TARGET"]}),l.jsx("h2",{className:"text-2xl md:text-4xl font-black tracking-tight mb-8 max-w-2xl leading-tight",children:N.title}),l.jsx(NJ,{timeLeft:w,isPaused:S,onTogglePause:()=>C(!S),durationMinutes:f.durationMinutes}),l.jsx(kJ,{noiseType:v,setNoiseType:b,activePanel:d,setActivePanel:h,hasSubtasks:D,completedSubtasksCount:M,totalSubtasksCount:j,onComplete:()=>I(!0)}),l.jsx(IJ,{notes:m,setNotes:g,isOpen:d==="notes",onClose:()=>h("none")}),l.jsx(RJ,{subtasks:N.subtasks||[],onToggleSubtask:U,isOpen:d==="subtasks",onClose:()=>h("none")})]})]})},jJ=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(0),[r,i]=L.useState(""),[s,o]=L.useState(!1),[c,f]=L.useState(""),[d,h]=L.useState("INITIALIZING NEURAL LINK..."),[m,g]=L.useState(!0);L.useEffect(()=>{f(""),g(!0);let w=0;const S=setInterval(()=>{f(d.slice(0,w+1)),w++,w>=d.length&&(clearInterval(S),g(!1))},30);return()=>clearInterval(S)},[d]);const v=()=>{He("click",!0),e===0?(h("IDENTITY VERIFICATION REQUIRED."),n(1)):e===1&&r&&(h("SYNCHRONIZATION COMPLETE. WELCOME."),n(2))},b=()=>{r&&(o(!0),He("level-up",!0),setTimeout(()=>{t.completeOnboarding(r,"Initiate",ae.DIS)},1e3))};return s?l.jsx("div",{className:"fixed inset-0 z-[999] bg-black flex items-center justify-center animate-out fade-out duration-1000",children:l.jsx("div",{className:"text-life-gold text-sm font-mono animate-pulse",children:"SYSTEM ONLINE"})}):l.jsxs("div",{className:"fixed inset-0 z-[999] bg-[#050505] flex flex-col items-center justify-center p-6 font-mono overflow-hidden",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.05] pointer-events-none",style:{backgroundImage:"linear-gradient(0deg, transparent 24%, #222 25%, #222 26%, transparent 27%, transparent 74%, #222 75%, #222 76%, transparent 77%, transparent), linear-gradient(90deg, transparent 24%, #222 25%, #222 26%, transparent 27%, transparent 74%, #222 75%, #222 76%, transparent 77%, transparent)",backgroundSize:"50px 50px"}}),l.jsxs("div",{className:"w-full max-w-md relative z-10 flex flex-col h-full justify-center",children:[l.jsxs("div",{className:"mb-8 min-h-[60px] border-l-2 border-life-gold pl-4 py-2",children:[l.jsxs("div",{className:"text-xs text-life-gold/50 mb-1 flex items-center gap-2",children:[l.jsx(Or,{size:12})," PROTOCOL_INIT_V1.0"]}),l.jsxs("h1",{className:"text-lg md:text-xl text-life-gold font-bold leading-tight",children:[c,l.jsx("span",{className:"animate-pulse",children:"_"})]})]}),e===0&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-bottom-8 duration-700",children:[l.jsxs("div",{className:"w-24 h-24 bg-life-gold/10 rounded-full border border-life-gold/30 flex items-center justify-center mx-auto mb-8 relative",children:[l.jsx(hn,{size:40,className:"text-life-gold animate-pulse-slow"}),l.jsx("div",{className:"absolute inset-0 border border-life-gold rounded-full animate-[spin_10s_linear_infinite] opacity-30 border-t-transparent border-l-transparent"})]}),l.jsx("p",{className:"text-center text-life-muted text-xs mb-12 max-w-xs mx-auto leading-relaxed",children:"Welcome to LifeOS. This interface will augment your daily operations, turning chaos into order and effort into progression."}),l.jsx("button",{onClick:v,disabled:m,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all hover:scale-[1.02]",children:"Start"})]}),e===1&&l.jsxs("div",{className:"animate-in fade-in slide-in-from-right-8 duration-500",children:[l.jsxs("div",{className:"mb-8",children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Codename"}),l.jsx("input",{type:"text",value:r,onChange:w=>i(w.target.value),placeholder:"Enter Name...",autoFocus:!0,className:"w-full bg-transparent border-b-2 border-life-muted/30 py-2 text-2xl font-bold text-white focus:outline-none focus:border-life-gold transition-colors text-center"})]}),l.jsx("button",{onClick:v,disabled:!r,className:"w-full py-4 border border-life-gold text-life-gold hover:bg-life-gold hover:text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Identity"})]}),e===2&&l.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-700 text-center",children:[l.jsxs("div",{className:"mb-8 border border-life-gold/30 bg-life-gold/5 p-6 rounded-lg relative overflow-hidden",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-life-gold animate-[loading_2s_ease-in-out_infinite]"}),l.jsx("h2",{className:"text-2xl font-black text-white uppercase mb-1",children:r}),l.jsx("p",{className:"text-life-gold font-mono text-sm uppercase tracking-widest",children:"READY"}),l.jsxs("div",{className:"mt-4 pt-4 border-t border-life-gold/20 flex justify-center gap-4 text-[10px] text-life-muted uppercase font-bold",children:[l.jsx("span",{children:"Lvl 1"}),l.jsx("span",{children:"Status: ONLINE"})]})]}),l.jsxs("button",{onClick:b,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-black font-black uppercase tracking-[0.2em] rounded-sm transition-all hover:scale-[1.02] flex items-center justify-center gap-2",children:["Enter LifeOS ",l.jsx(jr,{size:18})]})]})]}),l.jsx("div",{className:"absolute bottom-8 flex gap-2",children:[0,1,2].map(w=>l.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-colors ${w===e?"bg-life-gold":"bg-life-muted/20"}`},w))}),l.jsx("style",{children:`
                @keyframes loading {
                    0% { transform: translateX(-100%); }
                    50% { transform: translateX(0); }
                    100% { transform: translateX(100%); }
                }
            `})]})},MJ=()=>{const{state:t,dispatch:e}=Ge(),{taskState:n,taskDispatch:r}=Er(),{habitState:i,habitDispatch:s}=Ar(),{raidState:o,raidDispatch:c}=Qr(),{deviceNotificationsEnabled:f}=t.user.preferences,d=L.useRef("");return L.useEffect(()=>{uo.isNativePlatform()&&(S4(),hc.addListener("localNotificationActionPerformed",h=>{const m=h.actionId,g=h.notification.extra;if(m==="COMPLETE"&&g){const{itemId:v,type:b,parentId:w}=g;b==="task"?(r.toggleTask(v),e.addToast("Mission Completed via Uplink","success")):b==="habit"?(s.processHabit(v,"completed"),e.addToast("Protocol Executed via Uplink","success")):b==="raid_step"&&w&&(c.toggleRaidStep(w,v),e.addToast("Operation Step Secured","success")),He("success",!0)}m==="SNOOZE"&&e.addToast("Alert Snoozed (Simulation)","info")}))},[]),L.useEffect(()=>{if(!f||!uo.isNativePlatform())return;const m=setTimeout(()=>{const g=t.ui.debugDate?new Date(t.ui.debugDate).toISOString():new Date().toISOString(),v=i.habits.filter(k=>k.status==="pending"&&yd(k,g)),b=n.tasks.filter(k=>!k.isCompleted&&!k.isArchived&&(!k.scheduledTime||new Date(k.scheduledTime)<=new Date(new Date().getTime()+864e5)));let w=0;o.raids.forEach(k=>{k.status==="active"&&(w+=k.steps.filter(D=>!D.isCompleted&&!D.isLocked).length)});const S=v.length+b.length+w,C=Math.floor(t.user.dailyXP/t.user.dailyTarget*100),R=`LifeOS Active: ${S} Pending`,N=` ${b.length} Missions     ${v.length} Protocols     ${C}% XP`,O=R+N;d.current!==O&&(eW(R,N),d.current=O)},1e3);return()=>clearTimeout(m)},[n.tasks,i.habits,o.raids,t.user.dailyXP,f]),L.useEffect(()=>{if(!f)return;const m=setInterval(()=>{const g=new Date().getTime(),v=300*1e3;n.tasks.forEach(b=>{if(!(b.isCompleted||b.isArchived||!b.scheduledTime)&&b.reminders){const w=new Date(b.scheduledTime).getTime();let S=!1;const C=b.reminders.map(R=>{if(R.isSent)return R;const N=w-R.minutesBefore*6e4;return g>=N&&g<N+v?(hw(parseInt(b.id.replace(/\D/g,"").slice(-8))||Date.now(),`Mission Critical: ${b.title}`,`Time: ${new Date(b.scheduledTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`,{itemId:b.id,type:"task"}),S=!0,{...R,isSent:!0}):R});S&&r.updateTask(b.id,{reminders:C})}}),i.habits.forEach(b=>{if(b.status==="completed"||!b.scheduledTime||!b.reminders)return;const[w,S]=b.scheduledTime.split(":").map(Number),C=new Date;C.setHours(w,S,0,0);const R=C.getTime();let N=!1;const O=b.reminders.map(k=>{if(k.isSent)return k;const D=R-k.minutesBefore*6e4;return g>=D&&g<D+v?(hw(parseInt(b.id.replace(/\D/g,"").slice(-8))||Date.now(),`Protocol: ${b.title}`,`Time: ${b.scheduledTime}`,{itemId:b.id,type:"habit"}),N=!0,{...k,isSent:!0}):k});N&&s.updateHabit(b.id,{reminders:O})})},15e3);return()=>clearInterval(m)},[n.tasks,i.habits,f]),null},n1="LIFE_OS_CAMPAIGN_DATA_V2",lg={id:"campaign_root",title:"",startDate:null,isFrozen:!1,currentWeek:0,currentDay:0,totalWeeks:12,isActive:!1},Q4=L.createContext(void 0),DJ=({children:t})=>{const{state:e,dispatch:n}=Ge(),r=e.user.preferences.soundEnabled,i=()=>{try{const v=localStorage.getItem(n1);if(v)return JSON.parse(v)}catch(v){console.warn("Failed to load campaign persistence:",v)}return lg},[s,o]=L.useState(i);L.useEffect(()=>{if(!s.startDate||!s.isActive)return;const v=()=>{if(s.isFrozen)return;const w=e.ui.debugDate,S=w?new Date(w):new Date,C=new Date(s.startDate),R=S.getTime()-C.getTime(),N=Math.floor(R/(1e3*60*60*24));if(N<0)o(O=>({...O,currentWeek:0,currentDay:0}));else{const O=Math.floor(N/7)+1,k=N%7+1,D=Math.min(O,13);o(M=>M.currentWeek!==D||M.currentDay!==k?{...M,currentWeek:D,currentDay:k}:M)}};v();const b=setInterval(v,6e4);return()=>clearInterval(b)},[s.startDate,s.isActive,s.isFrozen,e.ui.debugDate]),L.useEffect(()=>{const v=setTimeout(()=>{(s.isActive||localStorage.getItem(n1))&&localStorage.setItem(n1,JSON.stringify(s))},500);return()=>clearTimeout(v)},[s]);const c=(v,b)=>{const w={...lg,id:`cmp_${Date.now()}`,title:v,startDate:b,isActive:!0};He("success",r),o(w),n.addToast("Operation Tempo Initiated","success")},f=()=>{const v=!s.isFrozen;o(b=>({...b,isFrozen:v})),He("click",r),n.addToast(v?"Timeline Frozen ":"Timeline Resumed ","info")},d=()=>{o(lg),He("delete",r),n.addToast("Campaign Aborted","info")},h=()=>{confirm(` REAP THE HARVEST?
This will conclude the current 12-week cycle and archive the results. Are you ready for the reset?`)&&(o(lg),He("level-up",r),n.addToast("Harvest Complete. Cycle Reset.","success"))},m=v=>{o(b=>({...b,startDate:v})),He("click",r),n.addToast("Timeline Shifted","info")},g=v=>{o(v),n.addToast("Campaign Restored","success")};return l.jsx(Q4.Provider,{value:{campaignState:{campaign:s},campaignDispatch:{initCampaign:c,toggleFreeze:f,resetCampaign:d,completeCampaign:h,updateStartDate:m,restoreData:g}},children:t})},zc=()=>{const t=L.useContext(Q4);if(t===void 0)throw new Error("useCampaign must be used within a CampaignProvider");return t},DI=t=>new Date(t).toISOString().replace(/-|:|\.\d{3}/g,""),CT=(t,e="",n,r=60)=>{if(!n){alert("    .");return}const i=new Date(n),s=new Date(i.getTime()+r*6e4),o=DI(i.toISOString()),c=DI(s.toISOString()),f=encodeURIComponent(`${e}

Generated by LifeOS`),d=encodeURIComponent(`[LifeOS] ${t}`),h=encodeURIComponent("LifeOS HQ"),m=`https://calendar.google.com/calendar/render?action=TEMPLATE&text=${d}&dates=${o}/${c}&details=${f}&location=${h}`;window.open(m,"_blank")},NT=()=>{const{state:t}=Ge(),e=t.user.preferences.theme,n=t.user.unlockedThemes.find(i=>i.id===e);return{getIcon:(i,s)=>n!=null&&n.icons&&n.icons[i]?l.jsx("span",{className:"emoji-icon",children:n.icons[i]}):s}},OJ=({stat:t,size:e=14})=>{const{getIcon:n}=NT(),r=n(t,null);if(r)return l.jsx("span",{style:{fontSize:e},children:r});switch(t){case ae.STR:return l.jsx(Jr,{size:e});case ae.INT:return l.jsx(xn,{size:e});case ae.DIS:return l.jsx(St,{size:e});case ae.HEA:return l.jsx(vi,{size:e});case ae.CRT:return l.jsx(hr,{size:e});case ae.SPR:return l.jsx(fr,{size:e});case ae.REL:return l.jsx(xi,{size:e});case ae.FIN:return l.jsx(Kn,{size:e});default:return l.jsx(hn,{size:e})}},Iu=({task:t,onToggle:e,onDelete:n})=>{var P,F;const{dispatch:r,state:i}=Ge(),{skillState:s}=an(),{taskState:o,taskDispatch:c}=Er(),{campaignState:f}=zc(),d=t.skillId?s.skills.find(z=>z.id===t.skillId):null;$t[t.stats[0]];const m=(bs[t.difficulty]||"").split(" ")[0],g=i.user.preferences.showCalendarSync??!0,v=gd(t.difficulty,i.user.currentMode,i.user,void 0,t.stats),b=t.isCampaign?Math.ceil(v.xp*1.1):v.xp,w=t.isCampaign?cJ(f.campaign.startDate,t.deadline||t.scheduledTime):null,[S,C]=L.useState(!1),R=((P=t.subtasks)==null?void 0:P.filter(z=>z.isCompleted).length)||0,N=((F=t.subtasks)==null?void 0:F.length)||0,O=N>0?R/N*100:0,k=z=>`${z}m`,D=z=>{z.stopPropagation(),r.startFocusSession(t.id,t.durationMinutes||25,"task")},M=z=>{z.stopPropagation(),r.setModal("itemDetails",{itemId:t.id,type:"task"})},j=z=>{z.stopPropagation(),n(t.id)},I=z=>{const Q=z.target.value;c.moveTask(t.id,Q||void 0)},U=z=>{z.stopPropagation(),CT(t.title,t.description,t.scheduledTime||t.deadline,t.durationMinutes||60)},B=t.reminders?t.reminders.length:0;return l.jsxs("div",{onClick:()=>C(!S),className:`
        relative group flex flex-col p-4 mb-3 rounded-xl border border-zinc-800 bg-life-black/40 backdrop-blur-sm shadow-sm cursor-pointer transition-all duration-300 overflow-hidden
        ${t.isCompleted?"opacity-50 grayscale border-gray-800":"hover:border-zinc-700 hover:bg-life-black/60 hover:shadow-md"}
        ${S?"ring-1 ring-life-gold/20 bg-life-black/80":""}
      `,children:[l.jsx("div",{className:`absolute left-0 top-0 bottom-0 w-1 ${m.replace("border-","bg-")}`}),N>0&&!t.isCompleted&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-life-muted/10",children:l.jsx("div",{className:"h-full bg-life-gold transition-all duration-500",style:{width:`${O}%`}})}),l.jsxs("div",{className:"flex items-center w-full",children:[l.jsx("div",{className:"mr-4 relative",children:l.jsx("div",{onClick:z=>{z.stopPropagation(),e(t.id)},className:`
                w-6 h-6 rounded-md border-2 flex items-center justify-center transition-all duration-300 hover:scale-110
                ${t.isCompleted?"bg-life-easy border-life-easy text-life-black":"border-life-muted group-hover:border-life-silver bg-transparent"}
                `,children:l.jsx(Ut,{size:16,className:`transition-transform duration-300 ${t.isCompleted?"scale-100":"scale-0"}`,strokeWidth:3})})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1 flex-wrap",children:[t.isCampaign&&l.jsxs("span",{className:"text-[9px] font-black px-1.5 py-0.5 rounded border border-indigo-500/50 bg-indigo-500/10 text-indigo-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_8px_rgba(99,102,241,0.2)]",children:[l.jsx(Gi,{size:10}),w?`G12  ${w}`:"G12"]}),t.isCalendarEvent&&!t.isCampaign&&l.jsxs("span",{className:"text-[9px] font-black px-1.5 py-0.5 rounded border border-blue-500/50 bg-blue-500/10 text-blue-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_8px_rgba(59,130,246,0.2)]",children:[l.jsx(mi,{size:10})," C30"]}),!d&&t.stats.map(z=>l.jsxs("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border flex items-center gap-1 uppercase tracking-wider ${t.isCompleted?"border-gray-600 text-gray-500":""}`,style:{borderColor:t.isCompleted?void 0:`${$t[z]}40`,color:t.isCompleted?void 0:$t[z],backgroundColor:t.isCompleted?void 0:`${$t[z]}10`},children:[l.jsx(OJ,{stat:z,size:10}),z]},z)),!t.isCompleted&&l.jsxs("span",{className:"text-[9px] font-mono font-bold text-life-muted bg-life-black px-1.5 py-0.5 rounded border border-life-muted/20",children:["+",b," XP"]}),d&&l.jsxs("span",{className:"text-[9px] text-life-gold border border-life-gold/30 bg-life-gold/10 px-1.5 py-0.5 rounded flex items-center gap-1 uppercase tracking-wider",children:[l.jsx(pi,{size:10})," ",d.title]}),t.isTimed&&!S&&l.jsxs("span",{className:"text-[10px] flex items-center gap-1 text-life-muted",children:[l.jsx(vn,{size:10})," ",k(t.durationMinutes||0)]}),t.scheduledTime&&!S&&l.jsxs("span",{className:"text-[9px] flex items-center gap-1 text-life-gold bg-life-gold/10 px-1.5 py-0.5 rounded border border-life-gold/20",children:[new Date(t.scheduledTime).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),B>0&&l.jsx(pd,{size:8,className:"fill-current"})]})]}),l.jsx("h3",{className:`text-sm font-medium truncate pr-2 ${t.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:t.title})]})]}),S&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-life-muted/10 animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"flex justify-end mb-3",children:l.jsxs("div",{className:"flex items-center gap-1 bg-life-black/50 rounded-lg p-0.5 border border-life-muted/10",children:[!t.isCompleted&&!t.isArchived&&(t.scheduledTime||t.deadline)&&g&&l.jsx("button",{onClick:U,className:"w-6 h-6 flex items-center justify-center text-blue-400 hover:bg-blue-500/10 rounded transition-all",title:"Add to Google Calendar",children:l.jsx(xT,{size:12})}),!t.isCompleted&&!t.isArchived&&l.jsx("button",{onClick:D,className:"w-6 h-6 flex items-center justify-center text-life-gold hover:bg-life-gold/10 rounded transition-all",title:"Enter Focus Citadel",children:l.jsx(pp,{size:12,fill:"currentColor"})}),!t.isCompleted&&!t.isArchived&&l.jsxs("div",{className:"relative group/move w-6 h-6 flex items-center justify-center",onClick:z=>z.stopPropagation(),children:[l.jsx("button",{className:"text-life-muted hover:text-life-gold transition-colors",children:l.jsx(bT,{size:12})}),l.jsxs("select",{onChange:I,value:t.categoryId||"",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",title:"Move to Section",children:[l.jsx("option",{value:"",children:"(Uncategorized)"}),o.categories.map(z=>l.jsx("option",{value:z.id,children:z.title},z.id))]})]}),l.jsx("button",{onClick:M,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/10 rounded transition-colors",title:"Mission Details",children:l.jsx(zh,{size:12})}),l.jsx("button",{onClick:j,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded transition-colors",title:"Delete Mission",children:l.jsx(Dr,{size:12})})]})}),t.description&&l.jsxs("div",{className:"flex gap-2 text-xs text-life-muted mb-3",children:[l.jsx(Md,{size:14,className:"shrink-0 mt-0.5"}),l.jsx("p",{className:"leading-relaxed whitespace-pre-wrap",children:t.description})]}),N>0&&l.jsx("div",{className:"mb-3 space-y-1 pl-1",children:t.subtasks.map(z=>l.jsxs("div",{onClick:Q=>{Q.stopPropagation(),c.toggleSubtask(t.id,z.id)},className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-life-muted/10 p-1 rounded transition-colors group/sub",children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${z.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover/sub:border-life-gold"}`,children:l.jsx(Ut,{size:12,strokeWidth:3})}),l.jsx("span",{className:z.isCompleted?"text-life-muted line-through":"text-life-text",children:z.title})]},z.id))}),l.jsx("div",{className:"flex justify-between items-end mt-2",children:l.jsx("div",{className:"flex gap-2 text-[10px] text-life-muted uppercase tracking-wider items-center",children:t.scheduledTime?l.jsxs(l.Fragment,{children:[l.jsx(pd,{size:12})," ",B," Alerts | ",new Date(t.scheduledTime).toLocaleString()]}):t.deadline&&l.jsxs(l.Fragment,{children:[l.jsx(mi,{size:12})," Due: ",new Date(t.deadline).toLocaleString()]})})})]})]})},LJ=({raidOperations:t,expandedNotes:e,expandedSubtasks:n,toggleNotes:r,toggleSubtasksView:i,raidDispatch:s,openRaidStepDetails:o})=>{const{dispatch:c}=Ge();return l.jsxs("div",{className:"mb-6 space-y-3",children:[l.jsxs("div",{className:"flex items-center gap-2 px-1 text-life-hard animate-pulse-slow",children:[l.jsx(Oc,{size:14}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest",children:"Active Operations (Tip of the Spear)"})]}),t.map(({raid:f,step:d})=>{var S,C;const h=e.has(d.id),m=n.has(d.id),g=((S=d.subtasks)==null?void 0:S.length)||0,v=((C=d.subtasks)==null?void 0:C.filter(R=>R.isCompleted).length)||0,w=(bs[f.difficulty]||"").split(" ")[0];return l.jsxs("div",{onClick:()=>i(d.id),className:`bg-life-paper border-l-4 rounded-r-xl shadow-lg relative overflow-hidden group transition-all duration-300 cursor-pointer ${w} hover:bg-white/5`,children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"radial-gradient(circle, #fff 1px, transparent 1px)",backgroundSize:"8px 8px"}}),l.jsxs("div",{className:"p-3",children:[l.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-1",children:l.jsxs("span",{className:"text-[9px] bg-life-black px-1.5 py-0.5 rounded text-life-muted font-bold uppercase tracking-wider border border-zinc-800",children:["OP: ",f.title]})}),l.jsx("h3",{className:"text-sm font-bold text-life-text flex items-center gap-2",children:d.title})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[d.durationMinutes&&l.jsx("button",{onClick:R=>{R.stopPropagation(),c.startFocusSession(d.id,d.durationMinutes||25,"raid_step")},className:"w-8 h-8 rounded-lg flex items-center justify-center text-life-gold hover:bg-life-gold/10 transition-all",title:"Start Timer",children:l.jsx(pp,{size:16,fill:"currentColor"})}),l.jsx("button",{onClick:R=>{R.stopPropagation(),r(d.id)},className:`w-8 h-8 rounded-lg flex items-center justify-center transition-all ${h?"text-life-gold bg-life-gold/10":"text-life-muted hover:text-white hover:bg-life-muted/10"}`,children:l.jsx(Pd,{size:16})}),l.jsx("button",{onClick:R=>{R.stopPropagation(),s.toggleRaidStep(f.id,d.id)},className:"w-8 h-8 rounded-lg bg-life-black border border-zinc-800 flex items-center justify-center text-life-muted hover:text-life-gold hover:border-life-gold transition-all relative z-20",children:l.jsx(Fi,{size:16})})]})]}),l.jsxs("div",{className:"mt-2 flex items-center gap-3 text-[10px] text-life-muted/60",children:[l.jsx("span",{className:"uppercase font-bold text-life-hard",children:f.difficulty}),l.jsx("span",{children:""}),l.jsxs("span",{children:["Step ",f.steps.findIndex(R=>R.id===d.id)+1," of ",f.steps.length]}),g>0&&l.jsxs(l.Fragment,{children:[l.jsx("span",{children:""}),l.jsxs("span",{className:`flex items-center gap-1 ${m?"text-life-gold":""}`,children:[l.jsx(Fi,{size:10})," ",v,"/",g," Subtasks"]})]})]}),h&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-800 animate-in slide-in-from-top-2 cursor-default",onClick:R=>R.stopPropagation(),children:[l.jsxs("div",{className:"flex items-start gap-2",children:[l.jsx(Md,{size:12,className:"text-life-gold mt-0.5 shrink-0"}),l.jsx("div",{className:"text-xs text-life-text leading-relaxed whitespace-pre-wrap flex-1",children:d.notes||l.jsx("span",{className:"text-life-muted italic",children:"No intel provided."})})]}),l.jsx("div",{className:"flex justify-end mt-2",children:l.jsxs("button",{onClick:R=>{R.stopPropagation(),o(d.id,f.id)},className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-gold bg-life-black px-2 py-1 rounded border border-zinc-800",children:[l.jsx(zh,{size:10})," Full View"]})})]}),m&&l.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-800 animate-in slide-in-from-top-2 cursor-default",onClick:R=>R.stopPropagation(),children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("h4",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest flex items-center gap-1",children:[l.jsx(Ut,{size:10})," Tactical Checklist"]}),l.jsxs("button",{onClick:R=>{R.stopPropagation(),o(d.id,f.id)},className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-white",children:[l.jsx(xX,{size:10})," Edit"]})]}),g>0?l.jsx("div",{className:"space-y-1 pl-1 mb-2",children:d.subtasks.map(R=>l.jsxs("div",{onClick:N=>{N.stopPropagation(),s.toggleRaidStepSubtask(f.id,d.id,R.id)},className:`flex items-center gap-3 p-2 rounded-lg cursor-pointer transition-all border ${R.isCompleted?"bg-life-black border-zinc-800 opacity-60":"bg-life-paper/50 border-zinc-800 hover:border-life-gold/30 hover:bg-life-muted/10"}`,children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-all shrink-0 ${R.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover:border-life-gold"}`,children:l.jsx(Ut,{size:12,strokeWidth:4,className:R.isCompleted?"scale-100":"scale-0"})}),l.jsx("span",{className:`text-xs font-medium leading-tight ${R.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:R.title})]},R.id))}):l.jsx("div",{className:"text-[10px] text-life-muted italic text-center py-2 border border-dashed border-zinc-800 rounded mb-2",children:"No subtasks defined."})]})]})]},d.id)})]})},zJ=({onClose:t})=>l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 mb-6 animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-red-900/20 rounded-lg text-red-500",children:l.jsx(yo,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-wider",children:"Sentencing Guidelines"}),l.jsx("p",{className:"text-[10px] text-life-muted",children:"Economy of Pain & Discipline"})]})]}),l.jsx("button",{onClick:t,className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:16})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-blue-400 font-black text-xs",children:"XP (Experience)"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Growth Metric"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"Easy Mission Reward"}),l.jsx("span",{className:"text-life-easy",children:"+100 XP"})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"Hard Mission Reward"}),l.jsx("span",{className:"text-life-gold",children:"+500 XP"})]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Recommended Penalties:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[l.jsx("span",{className:"text-zinc-400",children:"Minor Slip"})," ",l.jsx("span",{className:"text-red-400",children:"-50 XP"}),l.jsx("span",{className:"text-zinc-400",children:"Bad Habit"})," ",l.jsx("span",{className:"text-red-400",children:"-200 XP"}),l.jsx("span",{className:"text-zinc-400",children:"Major Failure"})," ",l.jsx("span",{className:"text-red-400",children:"-1000 XP"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-life-gold font-black text-xs",children:"Gold (Currency)"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Reward Power"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"1 Hour of Work"}),l.jsx("span",{className:"text-life-gold",children:"~50-100 G"})]}),l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted",children:[l.jsx("span",{children:"Day of Perfection"}),l.jsx("span",{className:"text-life-gold",children:"~500 G"})]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Fines:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[l.jsx("span",{className:"text-zinc-400",children:"Wasted Time"})," ",l.jsx("span",{className:"text-red-400",children:"-10 G / min"}),l.jsx("span",{className:"text-zinc-400",children:"Impulse Buy"})," ",l.jsx("span",{className:"text-red-400",children:"-100 G"})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-purple-400 font-black text-xs",children:"Attributes"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Core Stats"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Stats are ",l.jsx("span",{className:"text-white font-bold",children:"extremely hard"})," to earn. You only get ",l.jsx("span",{className:"text-purple-400",children:"+1"})," per completed mission."]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Severe Punishment:"}),l.jsxs("div",{className:"text-[9px] text-zinc-400",children:["Losing ",l.jsx("span",{className:"text-red-400",children:"-1 Stat"})," is equivalent to erasing a completed mission from your history. Use sparingly for character flaws (e.g., Anger = -1 HEA)."]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-indigo-400 font-black text-xs",children:"Honor"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Integrity Score"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Your daily score starts at ",l.jsx("span",{className:"text-indigo-400",children:"100%"}),"."]}),l.jsxs("div",{className:"mt-1 p-2 bg-red-950/10 rounded border border-red-900/20",children:[l.jsx("div",{className:"text-[9px] text-red-400 font-bold mb-1",children:"Impact:"}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[l.jsx("span",{className:"text-zinc-400",children:"Disappointment"})," ",l.jsx("span",{className:"text-red-400",children:"-5%"}),l.jsx("span",{className:"text-zinc-400",children:"Broken Promise"})," ",l.jsx("span",{className:"text-red-400",children:"-20%"}),l.jsx("span",{className:"text-zinc-400",children:"Betrayal"})," ",l.jsx("span",{className:"text-red-400",children:"-50%"})]})]})]})]})]})]}),UJ=()=>{const{taskState:t,taskDispatch:e}=Er(),{laws:n}=t,[r,i]=L.useState(""),[s,o]=L.useState("honor"),[c,f]=L.useState(50),[d,h]=L.useState(ae.DIS),[m,g]=L.useState(!1),[v,b]=L.useState(!1),[w,S]=L.useState(null),[C,R]=L.useState(""),[N,O]=L.useState("honor"),[k,D]=L.useState(0),[M,j]=L.useState(ae.DIS),I=P=>{P.preventDefault(),r.trim()&&(e.addLaw(r,s,c,s==="stat"?d:void 0),i(""),f(50),g(!1))},U=P=>{S(P.id),R(P.title),O(P.penaltyType),D(P.penaltyValue),j(P.statTarget||ae.DIS)},B=()=>{!w||!C.trim()||(e.updateLaw(w,{title:C,penaltyType:N,penaltyValue:k,statTarget:N==="stat"?M:void 0}),S(null))};return l.jsxs("div",{className:"animate-in fade-in slide-in-from-right-4 duration-500 pb-20",children:[l.jsxs("div",{className:"bg-red-950/20 border border-red-900/50 p-4 rounded-xl mb-6 text-center relative",children:[l.jsx(w0,{className:"w-8 h-8 text-red-500 mx-auto mb-2 animate-pulse"}),l.jsx("h2",{className:"text-lg font-black text-red-500 uppercase tracking-widest mb-1",children:"The Codex"}),l.jsx("p",{className:"text-[10px] text-red-400/70 font-mono uppercase tracking-wider",children:'"He who cannot obey himself will be commanded."'}),l.jsx("button",{onClick:()=>b(!v),className:"absolute top-4 right-4 text-red-500/50 hover:text-red-400 transition-colors",title:"Sentencing Guidelines",children:l.jsx(pi,{size:16})})]}),v&&l.jsx(zJ,{onClose:()=>b(!1)}),l.jsxs("div",{className:"space-y-3 mb-8",children:[n.map(P=>w===P.id?l.jsxs("div",{className:"bg-life-black border border-life-gold/50 p-4 rounded-xl space-y-3 animate-in fade-in",children:[l.jsx("input",{type:"text",value:C,onChange:z=>R(z.target.value),className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500",autoFocus:!0}),l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1 flex bg-[#0a0a0a] rounded-lg p-1 border border-red-900/30",children:[l.jsx("button",{type:"button",onClick:()=>O("honor"),className:`flex-1 py-1 rounded text-[9px] font-bold ${N==="honor"?"bg-indigo-500 text-white":"text-zinc-500"}`,children:l.jsx(gl,{size:10,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>O("gold"),className:`flex-1 py-1 rounded text-[9px] font-bold ${N==="gold"?"bg-life-gold text-black":"text-zinc-500"}`,children:l.jsx(Kn,{size:10,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>O("xp"),className:`flex-1 py-1 rounded text-[9px] font-bold ${N==="xp"?"bg-blue-500 text-white":"text-zinc-500"}`,children:l.jsx(St,{size:10,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>O("stat"),className:`flex-1 py-1 rounded text-[9px] font-bold ${N==="stat"?"bg-purple-500 text-white":"text-zinc-500"}`,children:l.jsx(hn,{size:10,className:"mx-auto"})})]}),l.jsx("input",{type:"number",value:k,onChange:z=>D(Number(z.target.value)),className:"w-20 bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500 text-center"})]}),N==="stat"&&l.jsx("div",{className:"flex gap-1 overflow-x-auto no-scrollbar pb-1",children:Object.values(ae).map(z=>l.jsx("button",{onClick:()=>j(z),className:`w-6 h-6 shrink-0 rounded flex items-center justify-center border transition-all text-[9px] ${M===z?"bg-red-900/50 border-red-500 text-white":"border-zinc-800 text-zinc-500"}`,children:z},z))}),l.jsxs("div",{className:"flex gap-2 pt-2",children:[l.jsx("button",{onClick:()=>S(null),className:"flex-1 py-2 rounded bg-life-black border border-life-muted/20 text-life-muted text-xs font-bold hover:text-white",children:"Cancel"}),l.jsxs("button",{onClick:B,className:"flex-1 py-2 rounded bg-life-gold text-black text-xs font-bold hover:bg-yellow-400 flex items-center justify-center gap-1",children:[l.jsx(Ut,{size:12})," Save"]})]})]},P.id):l.jsxs("div",{className:"bg-[#0f0505] border border-red-900/30 p-4 rounded-xl flex items-center justify-between group hover:border-red-600/50 transition-all",children:[l.jsxs("div",{className:"flex-1 min-w-0 pr-4",children:[l.jsx("h3",{className:"text-sm font-bold text-red-100 mb-1",children:P.title}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:"text-[9px] bg-red-900/30 text-red-400 px-2 py-0.5 rounded border border-red-900/50 uppercase font-black tracking-wider",children:["Penalty: -",P.penaltyValue," ",P.penaltyType==="stat"?P.statTarget:P.penaltyType.toUpperCase()]}),P.timesBroken>0&&l.jsxs("span",{className:"text-[9px] text-zinc-600 font-mono",children:["Broken ",P.timesBroken,"x"]})]})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("button",{onClick:()=>e.enforceLaw(P.id),className:"bg-red-600 hover:bg-red-500 text-white text-[10px] font-black uppercase tracking-widest px-3 py-2 rounded-lg shadow-[0_0_15px_rgba(220,38,38,0.4)] hover:scale-105 active:scale-95 transition-all flex items-center gap-1 mr-1",children:[l.jsx(j4,{size:12})," Pay Fine"]}),l.jsxs("div",{className:"flex flex-col gap-1",children:[l.jsx("button",{onClick:()=>U(P),className:"text-zinc-600 hover:text-life-gold transition-colors p-1",children:l.jsx(wT,{size:12})}),l.jsx("button",{onClick:()=>e.deleteLaw(P.id),className:"text-zinc-600 hover:text-red-500 transition-colors p-1",children:l.jsx(wt,{size:12})})]})]})]},P.id)),n.length===0&&l.jsx("div",{className:"text-center py-8 border-2 border-dashed border-red-900/20 rounded-xl bg-red-950/10",children:l.jsx("p",{className:"text-xs text-red-800/50 font-bold uppercase",children:"No Laws Enacted"})})]}),l.jsx("div",{className:"border-t border-red-900/20 pt-6",children:m?l.jsxs("form",{onSubmit:I,className:"bg-black/40 border border-red-900/30 p-4 rounded-xl space-y-4 animate-in slide-in-from-bottom-2",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Offense Name"}),l.jsx("input",{type:"text",value:r,onChange:P=>i(P.target.value),placeholder:"e.g. Ate Sugar, Missed Prayer...",className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500",autoFocus:!0})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Penalty Type"}),l.jsxs("div",{className:"flex bg-[#0a0a0a] rounded-lg p-1 border border-red-900/30",children:[l.jsx("button",{type:"button",onClick:()=>o("honor"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="honor"?"bg-indigo-500 text-white":"text-zinc-500"}`,title:"Honor",children:l.jsx(gl,{size:12,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>o("gold"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="gold"?"bg-life-gold text-black":"text-zinc-500"}`,title:"Gold",children:l.jsx(Kn,{size:12,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>o("xp"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="xp"?"bg-blue-500 text-white":"text-zinc-500"}`,title:"XP",children:l.jsx(St,{size:12,className:"mx-auto"})}),l.jsx("button",{type:"button",onClick:()=>o("stat"),className:`flex-1 py-1.5 rounded text-[10px] font-bold ${s==="stat"?"bg-purple-500 text-white":"text-zinc-500"}`,title:"Stat",children:l.jsx(hn,{size:12,className:"mx-auto"})})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Cost Value"}),l.jsx("input",{type:"number",value:c,onChange:P=>f(Number(P.target.value)),className:"w-full bg-[#0a0a0a] border border-red-900/30 rounded-lg p-2 text-xs text-white focus:outline-none focus:border-red-500 text-center font-mono"})]})]}),s==="stat"&&l.jsxs("div",{children:[l.jsx("label",{className:"block text-[9px] text-red-500 uppercase font-bold tracking-widest mb-2",children:"Target Attribute"}),l.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar pb-1",children:Object.values(ae).map(P=>l.jsx("button",{type:"button",onClick:()=>h(P),className:`px-3 py-1.5 rounded border text-[9px] font-bold transition-all ${d===P?"bg-red-900/50 border-red-500 text-white":"border-zinc-800 text-zinc-500"}`,style:{color:d===P?$t[P]:void 0,borderColor:d===P?$t[P]:void 0},children:P},P))})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{type:"button",onClick:()=>g(!1),className:"flex-1 py-2 rounded-lg border border-zinc-800 text-zinc-500 text-[10px] font-bold uppercase hover:bg-zinc-900",children:"Cancel"}),l.jsx("button",{type:"submit",className:"flex-1 py-2 rounded-lg bg-red-600 text-white text-[10px] font-bold uppercase hover:bg-red-500 shadow-[0_0_10px_rgba(220,38,38,0.3)]",children:"Confirm Law"})]})]}):l.jsxs("button",{onClick:()=>g(!0),className:"w-full py-3 border border-dashed border-red-900/40 text-red-500/70 rounded-xl flex items-center justify-center gap-2 text-xs font-bold uppercase hover:bg-red-950/20 hover:text-red-400 hover:border-red-500/50 transition-all",children:[l.jsx(kn,{size:14})," Enact New Law"]})})]})},VJ=()=>{const{state:t,dispatch:e}=Ge(),{taskState:n,taskDispatch:r}=Er(),{raidState:i,raidDispatch:s}=Qr(),{campaignState:o}=zc(),{tasks:c,categories:f}=n,{raids:d}=i,{campaign:h}=o,{showHighlights:m}=t.user.preferences,{tasksViewMode:g}=t.ui,[v,b]=L.useState(!1),[w,S]=L.useState(!1),[C,R]=L.useState(!1),[N,O]=L.useState(!1),[k,D]=L.useState(!0),[M,j]=L.useState(new Set),[I,U]=L.useState(new Set),[B,P]=L.useState(""),[F,z]=L.useState(!1),[Q,W]=L.useState(null),[K,te]=L.useState(""),ne=d.filter(ie=>ie.status==="active").map(ie=>{const le=ie.steps.find(Z=>!Z.isCompleted&&!Z.isLocked&&!Z.isArchived);return le?{raid:ie,step:le}:null}).filter(Boolean);d.flatMap(ie=>ie.steps.filter(le=>le.isArchived).map(le=>({raid:ie,step:le})));const xe=t.ui.debugDate?new Date(t.ui.debugDate):new Date;xe.setHours(0,0,0,0);let G=null,X=null;if(h.isActive&&h.startDate){const ie=new Date(h.startDate);ie.setHours(0,0,0,0);const le=Math.max(0,h.currentWeek-1);G=new Date(ie),G.setDate(ie.getDate()+le*7),X=new Date(G),X.setDate(G.getDate()+6),X.setHours(23,59,59,999)}const de=[],ce=[],ve=[],ze=[],je=[];c.forEach(ie=>{if(ie.isArchived){je.push(ie);return}if(ie.isCompleted){ze.push(ie);return}if(ie.isCampaign&&h.isActive){const{timeCode:oe}=A0(ie.title);if(oe&&oe.week>h.currentWeek)return}const le=ie.scheduledTime||ie.deadline?new Date(ie.scheduledTime||ie.deadline):null;le&&le.setHours(0,0,0,0);const Z=le&&le.getTime()>xe.getTime();let ee=!1;ie.isCampaign&&G&&X&&le&&le.getTime()>=G.getTime()&&le.getTime()<=X.getTime()&&(ee=!0),ee?ve.push(ie):Z?ie.isCampaign||ce.push(ie):de.push(ie)});const Fe=ie=>{ie.preventDefault(),B.trim()&&(r.addCategory(B),P(""),z(!1))},fe=ie=>{K.trim()&&(r.renameCategory(ie,K),W(null))},Ce=(ie,le)=>e.setModal("itemDetails",{itemId:ie,parentId:le,type:"raid_step"}),Ve=ie=>j(le=>{const Z=new Set(le);return Z.has(ie)?Z.delete(ie):Z.add(ie),Z}),Ne=ie=>U(le=>{const Z=new Set(le);return Z.has(ie)?Z.delete(ie):Z.add(ie),Z}),ft=ie=>{c.some(Z=>Z.categoryId===ie)?e.setModal("confirmation",{title:"Delete Section?",message:"Items will be moved to Uncategorized.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>r.deleteCategory(ie)}):r.deleteCategory(ie)},q=ie=>{const le=c.find(Z=>Z.id===ie);le&&(!le.isCompleted&&!le.isArchived?e.setModal("confirmation",{title:"Abort Mission?",message:"Abandoning incurs a penalty.",confirmText:"Abort",isDangerous:!0,onConfirm:()=>r.deleteTask(ie)}):e.setModal("confirmation",{title:"Delete Log?",message:"Permanently remove entry.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>r.deleteTask(ie)}))};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"mb-6",children:l.jsxs("div",{className:"flex items-end justify-between px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase",children:g==="missions"?"ACTIVE OPS":"THE CODEX"}),l.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:g==="missions"?`${de.length} Missions Pending`:"Strict Liability Protocol"})]}),l.jsx("div",{className:`w-8 h-8 rounded-full border-2 flex items-center justify-center ${g==="codex"?"border-red-500 text-red-500 bg-red-950/30":"border-life-gold text-life-gold bg-life-gold/10"}`,children:g==="missions"?l.jsx("div",{className:"w-5 h-5 rounded-full bg-life-gold/80",style:{opacity:c.length>0?ze.length/c.length:0}}):l.jsx(qy,{size:16})})]})}),g==="codex"?l.jsx(UJ,{}):l.jsxs(l.Fragment,{children:[m&&ne.length>0&&l.jsx(LJ,{raidOperations:ne,expandedNotes:M,expandedSubtasks:I,toggleNotes:Ve,toggleSubtasksView:Ne,raidDispatch:s,openRaidStepDetails:Ce}),ve.length>0&&l.jsxs("div",{className:"mb-4 animate-in slide-in-from-bottom-2",children:[l.jsxs("button",{onClick:()=>D(!k),className:"w-full flex items-center justify-between p-3 rounded-xl border bg-indigo-950/20 border-indigo-500/20 hover:bg-indigo-900/30 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(Gi,{size:16,className:"text-indigo-400 group-hover:scale-110 transition-transform"}),l.jsx("div",{className:"text-left",children:l.jsxs("span",{className:"text-xs font-bold text-indigo-300 uppercase tracking-widest flex items-center gap-2",children:["Week ",h.currentWeek," Objectives"]})})]}),l.jsx("div",{className:"text-indigo-400/50",children:k?l.jsx(Ui,{size:16}):l.jsx(Wr,{size:16})})]}),k&&l.jsx("div",{className:"mt-2 pl-2 border-l-2 border-indigo-500/10 space-y-2",children:ve.map(ie=>l.jsx(Iu,{task:ie,onToggle:r.toggleTask,onDelete:q},ie.id))})]}),l.jsx("div",{className:"mb-4 flex justify-end",children:F?l.jsxs("form",{onSubmit:Fe,className:"flex gap-2 animate-in fade-in",children:[l.jsx("input",{type:"text",value:B,onChange:ie=>P(ie.target.value),placeholder:"Section Title...",autoFocus:!0,className:"bg-life-black border border-zinc-800 rounded-lg px-3 py-1 text-xs text-life-text focus:border-life-gold outline-none"}),l.jsx("button",{type:"submit",className:"text-life-gold hover:bg-life-gold/10 p-1 rounded",children:l.jsx(kn,{size:16})}),l.jsx("button",{type:"button",onClick:()=>z(!1),className:"text-life-muted hover:text-white p-1",children:l.jsx(kn,{size:16,className:"rotate-45"})})]}):l.jsxs("button",{onClick:()=>z(!0),className:"text-[10px] uppercase font-bold text-life-muted hover:text-life-gold flex items-center gap-1 transition-colors",children:[l.jsx(P4,{size:14})," Add Section"]})}),l.jsxs("div",{className:"space-y-4 mb-4",children:[f.map(ie=>{const le=de.filter(Z=>Z.categoryId===ie.id);return l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 group relative",children:[Q===ie.id?l.jsx("div",{className:"flex gap-2 w-full",children:l.jsx("input",{type:"text",value:K,onChange:Z=>te(Z.target.value),className:"bg-life-black border border-zinc-800 rounded px-2 py-0.5 text-xs text-life-text w-full focus:border-life-gold outline-none",autoFocus:!0,onBlur:()=>fe(ie.id),onKeyDown:Z=>Z.key==="Enter"&&fe(ie.id)})}):l.jsxs("button",{onClick:()=>r.toggleCategory(ie.id),className:"flex items-center gap-2 text-life-muted hover:text-life-text transition-colors flex-1 text-left py-1",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-gold/80",children:ie.isCollapsed?l.jsx(jr,{size:12}):l.jsx(Wr,{size:12})}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:ie.title}),l.jsx("span",{className:"text-[9px] bg-life-muted/10 px-1.5 rounded-full text-life-muted",children:le.length})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:Z=>{Z.stopPropagation(),W(ie.id),te(ie.title)},className:"p-2 text-life-muted hover:text-white hover:bg-life-muted/10 rounded cursor-pointer",children:l.jsx(wT,{size:14})}),l.jsx("button",{onClick:Z=>{Z.stopPropagation(),ft(ie.id)},className:"p-2 text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded cursor-pointer",children:l.jsx(F4,{size:14})})]})]}),!ie.isCollapsed&&l.jsxs("div",{className:"space-y-1 pl-1",children:[le.map(Z=>l.jsx(Iu,{task:Z,onToggle:r.toggleTask,onDelete:q},Z.id)),le.length===0&&l.jsx("div",{className:"text-[10px] text-life-muted/40 italic pl-2",children:"No active missions in section."})]})]},ie.id)}),de.filter(ie=>!ie.categoryId).length>0&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2 text-life-muted/50 px-1",children:l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"General / Uncategorized"})}),l.jsx("div",{className:"space-y-1",children:de.filter(ie=>!ie.categoryId).map(ie=>l.jsx(Iu,{task:ie,onToggle:r.toggleTask,onDelete:q},ie.id))})]}),de.length===0&&ne.length===0&&ve.length===0&&l.jsx("div",{className:"py-8 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/50",children:l.jsx("p",{className:"text-life-muted text-sm font-medium",children:"All active missions cleared."})})]}),ce.length>0&&l.jsxs("div",{className:"mb-6 animate-in slide-in-from-bottom-2",children:[l.jsxs("button",{onClick:()=>O(!N),className:"w-full flex items-center justify-between p-3 rounded-xl border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(_T,{size:16,className:"text-life-muted group-hover:text-life-text transition-colors"}),l.jsx("div",{className:"text-left",children:l.jsxs("span",{className:"text-xs font-bold text-life-muted group-hover:text-life-text uppercase tracking-widest transition-colors",children:["Future / Sleeping (",ce.length,")"]})})]}),l.jsx("div",{className:"text-life-muted/50",children:N?l.jsx(Ui,{size:16}):l.jsx(Wr,{size:16})})]}),N&&l.jsx("div",{className:"mt-2 pl-2 border-l border-zinc-800 space-y-2 opacity-80",children:ce.map(ie=>l.jsx("div",{className:"scale-95 origin-top-left",children:l.jsx(Iu,{task:ie,onToggle:r.toggleTask,onDelete:q})},ie.id))})]}),je.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("button",{onClick:()=>S(!w),className:"w-full flex items-center justify-between p-2 rounded-lg border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-gold",children:[l.jsx(hd,{size:14}),l.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:["Mission Backlog (",je.length,")"]})]}),w?l.jsx(Ui,{size:14,className:"text-life-muted"}):l.jsx(Wr,{size:14,className:"text-life-muted"})]}),w&&l.jsxs("div",{className:"space-y-2 mt-2 pl-2 border-l border-zinc-800",children:[je.map(ie=>l.jsx("div",{className:"opacity-70 grayscale hover:grayscale-0 transition-all",children:l.jsx(Iu,{task:ie,onToggle:()=>r.restoreTask(ie.id),onDelete:q})},ie.id)),l.jsx("div",{className:"text-center py-1 text-[9px] text-life-muted",children:"Click Checkbox to Restore  Trash to Delete Permanently"})]})]}),ze.length>0&&l.jsxs("div",{className:"mb-6",children:[l.jsxs("button",{onClick:()=>R(!C),className:"w-full flex items-center justify-between p-2 rounded-lg border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-easy",children:[l.jsx(MW,{size:14}),l.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:["Completed Log (",ze.length,")"]})]}),C?l.jsx(Ui,{size:14,className:"text-life-muted"}):l.jsx(Wr,{size:14,className:"text-life-muted"})]}),C&&l.jsx("div",{className:"space-y-1 mt-2 pl-2 border-l border-zinc-800 opacity-60 hover:opacity-100 transition-opacity animate-in slide-in-from-top-1",children:ze.map(ie=>l.jsx(Iu,{task:ie,onToggle:r.toggleTask,onDelete:q},ie.id))})]})]})]})},OI=({stat:t,size:e=14})=>{const{getIcon:n}=NT(),r=n(t,null);if(r)return l.jsx("span",{style:{fontSize:e},children:r});switch(t){case ae.STR:return l.jsx(Jr,{size:e});case ae.INT:return l.jsx(xn,{size:e});case ae.DIS:return l.jsx(St,{size:e});case ae.HEA:return l.jsx(vi,{size:e});case ae.CRT:return l.jsx(hr,{size:e});case ae.SPR:return l.jsx(fr,{size:e});case ae.REL:return l.jsx(xi,{size:e});case ae.FIN:return l.jsx(Kn,{size:e});default:return l.jsx(hn,{size:e})}},Ru=({habit:t,onProcess:e,onDelete:n})=>{const{habitState:r,habitDispatch:i}=Ar(),{dispatch:s,state:o}=Ge(),{skillState:c}=an(),{categories:f}=r,[d,h]=L.useState(!1),m=AT(t.streak),g=t.skillId?c.skills.find(Q=>Q.id===t.skillId):null,v=t.status==="completed",b=t.status==="failed",w=t.status==="pending",S=gd(t.difficulty,o.user.currentMode,o.user,void 0,t.stats),C=t.dailyProgress||0,R=t.dailyTarget||1,N=Math.min(100,C/R*100),O=t.subtasks||[],k=O.filter(Q=>Q.isCompleted).length,D=O.length,M=D>0?k/D*100:0;let j="";v?j="border-life-easy bg-life-easy/5":b?j="border-life-hard bg-life-hard/5":t.shieldUsed?j="border-life-diamond/40 bg-life-diamond/5":j=`${bs[t.difficulty]} border-l-[6px]`;const I=Q=>{const W=Q.target.value;i.moveHabit(t.id,W||void 0)},U=Q=>{Q.stopPropagation(),s.setModal("itemDetails",{itemId:t.id,type:"habit"})},B=Q=>{Q.stopPropagation(),i.setActiveHabit(t.id)},P=Q=>{Q.stopPropagation(),n(t.id)},F=Q=>{Q.stopPropagation(),s.startFocusSession(t.id,t.durationMinutes||25,"habit")},z=Array.from({length:7}).map((Q,W)=>{const K=new Date;K.setDate(K.getDate()-(6-W));const te=K.toISOString().split("T")[0],ne=t.history.some(X=>X.startsWith(te)),xe=W===6;let G="bg-life-muted/10";return ne?G="bg-life-easy":xe&&(v?G="bg-life-easy":b?G="bg-life-hard":G="bg-life-muted/30 border border-zinc-800"),{isoDate:te,statusColor:G,isToday:xe}});return l.jsxs("div",{onClick:()=>h(!d),className:`
        relative overflow-hidden mb-3 rounded-xl border bg-life-paper transition-all duration-300 group cursor-pointer
        ${j}
        ${w?"hover:bg-white/5 hover:scale-[1.01]":""}
      `,children:[l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-black/50",children:l.jsx("div",{className:`h-full transition-all duration-700 ease-out ${v?"bg-life-easy":b?"bg-life-hard":t.shieldUsed?"bg-life-diamond":"bg-life-gold"}`,style:{width:`${m.progress}%`,opacity:.5}})}),R>1&&w&&l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-full pointer-events-none",children:l.jsx("div",{className:"h-full bg-life-easy/10 transition-all duration-300",style:{width:`${N}%`}})}),D>0&&w&&l.jsx("div",{className:"absolute bottom-1 left-0 right-0 h-0.5 bg-life-muted/10",children:l.jsx("div",{className:"h-full bg-life-gold transition-all duration-500",style:{width:`${M}%`}})}),l.jsxs("div",{className:"flex items-center justify-between p-3 relative z-10",children:[l.jsxs("div",{className:"flex items-center gap-3 flex-1 overflow-hidden",children:[l.jsxs("div",{className:"relative shrink-0",children:[l.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-colors duration-300 bg-life-black
                    ${v?"border-life-easy text-life-easy":b?"border-life-hard text-life-hard":t.shieldUsed?"border-life-diamond text-life-diamond shadow-[0_0_10px_rgba(96,165,250,0.3)]":"border-zinc-800 text-life-muted"}`,children:t.shieldUsed&&w?l.jsx(ms,{size:16}):b?l.jsx(wt,{size:16}):v?l.jsx(Ut,{size:16}):l.jsx("div",{className:"flex -space-x-1",children:t.stats.slice(0,2).map(Q=>l.jsx(OI,{stat:Q,size:14},Q))})}),l.jsxs("div",{className:`absolute -bottom-1 left-1/2 -translate-x-1/2 px-1 py-px rounded text-[7px] font-black uppercase tracking-tighter border bg-life-black whitespace-nowrap ${m.phaseColor}`,children:["LVL ",m.level]})]}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[l.jsx("h3",{className:`font-bold text-sm leading-tight truncate ${v?"text-life-easy":b?"text-life-hard":"text-life-text"}`,children:t.title}),t.isTimed&&l.jsxs("span",{className:"text-[9px] flex items-center gap-0.5 text-life-muted bg-life-muted/10 px-1.5 py-0.5 rounded",children:[l.jsx(vn,{size:8})," ",t.durationMinutes,"m"]})]}),l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsxs("span",{className:"text-[9px] text-life-muted font-mono flex items-center gap-0.5",children:[l.jsx(fr,{size:8,className:t.streak>0?"text-life-gold":"text-life-muted"})," ",t.streak]}),t.totalRepetitions&&l.jsxs("span",{className:"text-[8px] font-mono font-bold text-life-hard bg-life-black px-1.5 py-0.5 rounded border border-life-hard/30 flex items-center gap-1",title:"Archive Limit Progress",children:[l.jsx(mw,{size:8})," ",t.currentRepetitions||0,"/",t.totalRepetitions]}),l.jsxs("div",{className:"flex items-center gap-1",children:[!g&&t.stats.map(Q=>l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-zinc-800 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:$t[Q],borderColor:`${$t[Q]}40`},children:[l.jsx(OI,{stat:Q,size:8})," ",Q]},Q)),w&&l.jsxs("span",{className:"text-[8px] font-mono font-bold text-life-muted bg-life-black px-1.5 py-0.5 rounded border border-zinc-800",children:["+",S.xp," XP"]}),g&&l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-life-gold/30 bg-life-gold/5 text-life-gold flex items-center gap-1 uppercase tracking-wider",children:[l.jsx(xn,{size:8})," ",g.title]})]}),l.jsx("div",{className:"flex items-center gap-0.5",children:z.map((Q,W)=>l.jsx("div",{className:`w-1 h-1 rounded-full ${Q.statusColor} ${Q.isToday&&w?"animate-pulse":""}`,title:Q.isoDate},W))})]})]})]}),l.jsx("div",{className:"flex flex-col items-end gap-1.5 shrink-0 ml-2",children:l.jsx("div",{className:"flex items-center gap-2",children:w?l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:Q=>{Q.stopPropagation(),e(t.id,"failed")},className:"w-8 h-8 rounded-lg border border-zinc-800 hover:border-life-hard hover:bg-life-hard/10 text-life-muted hover:text-life-hard flex items-center justify-center transition-all active:scale-95 bg-life-black",title:"Fail",children:l.jsx(wt,{size:16,strokeWidth:3})}),l.jsxs("button",{onClick:Q=>{Q.stopPropagation(),e(t.id,"completed")},className:"w-8 h-8 rounded-lg border border-zinc-800 hover:border-life-easy hover:bg-life-easy/10 text-life-muted hover:text-life-easy flex items-center justify-center transition-all active:scale-95 shadow-sm bg-life-black relative overflow-hidden",title:R>1?`Repetition ${C+1} of ${R}`:"Complete",children:[R>1?l.jsxs("div",{className:"flex flex-col items-center leading-none z-10",children:[l.jsxs("span",{className:`text-[10px] font-black ${C>0?"text-life-easy":""}`,children:[C,"/",R]}),l.jsx("span",{className:"text-[6px] uppercase font-bold text-life-muted/70",children:"Reps"})]}):l.jsx(Ut,{size:18,strokeWidth:3}),R>1&&l.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-life-muted/20",children:l.jsx("div",{className:"h-full bg-life-easy transition-all duration-300",style:{width:`${N}%`}})})]})]}):l.jsx("div",{className:`h-8 px-3 flex items-center justify-center rounded-lg border text-[10px] font-black uppercase tracking-wider ${v?"bg-life-easy/10 border-life-easy text-life-easy":"bg-life-hard/10 border-life-hard text-life-hard"}`,children:v?"DONE":"MISS"})})})]}),d&&l.jsxs("div",{className:"px-3 pb-3 animate-in slide-in-from-top-2 border-t border-life-muted/10 pt-2",children:[l.jsx("div",{className:"flex justify-end mb-3",children:l.jsxs("div",{className:"flex items-center gap-1 bg-life-black/50 rounded-lg p-0.5 border border-life-muted/10",children:[l.jsx("button",{onClick:B,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-gold hover:bg-life-gold/10 rounded transition-colors",title:"View Progress Ladder",children:l.jsx($y,{size:12})}),t.isTimed&&w&&l.jsx("button",{onClick:F,className:"w-6 h-6 flex items-center justify-center text-life-gold hover:bg-life-gold/10 rounded transition-colors",title:"Enter Focus Citadel",children:l.jsx(pp,{size:12,fill:"currentColor"})}),l.jsx("button",{onClick:U,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/10 rounded transition-colors",title:"Details & Edit",children:l.jsx(zh,{size:12})}),l.jsxs("div",{className:"relative group/move w-6 h-6 flex items-center justify-center",onClick:Q=>Q.stopPropagation(),children:[l.jsx("button",{className:"text-life-muted hover:text-life-gold transition-colors",children:l.jsx(bT,{size:12})}),l.jsxs("select",{onChange:I,value:t.categoryId||"",className:"absolute inset-0 opacity-0 cursor-pointer w-full h-full",children:[l.jsx("option",{value:"",children:"(Uncat)"}),f.map(Q=>l.jsx("option",{value:Q.id,children:Q.title},Q.id))]})]}),l.jsx("button",{onClick:P,className:"w-6 h-6 flex items-center justify-center text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded transition-colors",title:"Delete",children:l.jsx(Dr,{size:12})})]})}),t.description&&l.jsx("div",{className:"mb-3 px-1",children:l.jsx("p",{className:"text-[10px] text-life-muted leading-relaxed opacity-80",children:t.description})}),O.length>0&&l.jsx("div",{className:"space-y-1",children:O.map(Q=>l.jsxs("div",{onClick:W=>{W.stopPropagation(),i.toggleSubtask(t.id,Q.id)},className:"flex items-center gap-2 text-xs cursor-pointer hover:bg-life-muted/10 p-1.5 rounded transition-colors group/sub",children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center transition-colors ${Q.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-life-muted text-transparent group-hover/sub:border-life-gold"}`,children:l.jsx(Ut,{size:12,strokeWidth:3})}),l.jsx("span",{className:Q.isCompleted?"text-life-muted line-through":"text-life-text",children:Q.title})]},Q.id))})]})]})},FJ=["S","M","T","W","T","F","S"],BJ=()=>{const{habitState:t}=Ar(),{taskState:e,taskDispatch:n}=Er(),{dispatch:r}=Ge(),[i,s]=L.useState(new Date),[o,c]=L.useState(new Date),f=i.getFullYear(),d=i.getMonth(),h=new Date(f,d+1,0).getDate(),m=new Date(f,d,1).getDay(),g=()=>{s(new Date(f,d-1,1)),He("click",!0)},v=()=>{s(new Date(f,d+1,1)),He("click",!0)},b=N=>{const O=new Date(f,d,N);c(O),He("click",!0)},w=N=>{const O=N.toISOString(),k=O.split("T")[0],D=t.habits.filter(j=>{const I=new Date(j.createdAt);return N<I&&N.getDate()!==I.getDate()?!1:yd(j,O)}).map(j=>({id:j.id,title:j.title,type:"habit",isCompleted:j.history.some(I=>I.startsWith(k)),stats:j.stats})),M=e.tasks.filter(j=>{if(!j.deadline&&!j.scheduledTime)return!1;const I=j.scheduledTime?new Date(j.scheduledTime):new Date(j.deadline);return I.getDate()===N.getDate()&&I.getMonth()===N.getMonth()&&I.getFullYear()===N.getFullYear()}).map(j=>({id:j.id,title:j.title,type:"task",isCompleted:j.isCompleted,stats:j.stats}));return[...D,...M]},S=L.useMemo(()=>w(o),[o,t.habits,e.tasks]),C=N=>{const O=new Date(f,d,N);return w(O).length>0},R=()=>{const O=new Date(o.getTime()-o.getTimezoneOffset()*6e4).toISOString().split("T")[0];r.setModal("addTask",{defaultType:"mission",date:O,origin:"calendar"})};return l.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right duration-500",children:[l.jsxs("div",{className:"bg-life-paper border border-zinc-800 rounded-2xl p-4 shadow-lg",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4",children:[l.jsx("button",{onClick:g,className:"p-2 hover:bg-life-muted/10 rounded-full text-life-muted hover:text-white transition-colors",children:l.jsx(Vy,{size:18})}),l.jsx("h3",{className:"text-sm font-black text-life-text uppercase tracking-widest",children:i.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),l.jsx("button",{onClick:v,className:"p-2 hover:bg-life-muted/10 rounded-full text-life-muted hover:text-white transition-colors",children:l.jsx(jr,{size:18})})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1 mb-2",children:FJ.map((N,O)=>l.jsx("div",{className:"text-center text-[9px] font-bold text-life-muted/50 py-1",children:N},O))}),l.jsxs("div",{className:"grid grid-cols-7 gap-1",children:[Array.from({length:m}).map((N,O)=>l.jsx("div",{className:"aspect-square"},`empty-${O}`)),Array.from({length:h}).map((N,O)=>{const k=O+1,D=new Date(f,d,k),M=D.toDateString()===o.toDateString(),j=D.toDateString()===new Date().toDateString(),I=C(k);return l.jsxs("button",{onClick:()=>b(k),className:`
                                    aspect-square rounded-lg flex flex-col items-center justify-center relative transition-all duration-200
                                    ${M?"bg-life-gold text-life-black font-black shadow-[0_0_15px_rgba(251,191,36,0.4)] scale-110 z-10":"hover:bg-life-muted/10 text-life-text"}
                                    ${j&&!M?"border border-life-gold/50 text-life-gold":""}
                                `,children:[l.jsx("span",{className:"text-xs",children:k}),I&&l.jsx("div",{className:`w-1 h-1 rounded-full mt-1 ${M?"bg-black":"bg-life-muted"}`})]},k)})]})]}),l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-2xl p-0 overflow-hidden shadow-lg min-h-[200px] flex flex-col",children:[l.jsxs("div",{className:"p-4 border-b border-zinc-800 flex justify-between items-center bg-life-paper/50",children:[l.jsxs("div",{children:[l.jsx("h4",{className:"text-xs font-black uppercase text-life-muted tracking-widest",children:"Tactical Log"}),l.jsx("p",{className:"text-sm font-bold text-life-text mt-0.5",children:o.toLocaleDateString("en-US",{weekday:"long",month:"short",day:"numeric"})})]}),l.jsx("button",{onClick:R,className:"bg-life-gold/10 hover:bg-life-gold/20 text-life-gold border border-life-gold/30 p-2 rounded-lg transition-all",title:"Add Mission for this Day",children:l.jsx(kn,{size:16})})]}),l.jsx("div",{className:"p-2 flex-1 overflow-y-auto max-h-[300px]",children:S.length>0?l.jsx("div",{className:"space-y-1",children:S.map((N,O)=>l.jsxs("div",{className:`
                                        flex items-center gap-3 p-3 rounded-xl border transition-all
                                        ${N.isCompleted?"bg-life-black border-zinc-800 opacity-50":"bg-life-paper border-zinc-800 hover:border-life-gold/30"}
                                    `,children:[l.jsx("div",{className:`
                                        w-8 h-8 rounded-full flex items-center justify-center border-2
                                        ${N.isCompleted?"bg-life-muted border-life-muted text-life-black":N.type==="habit"?"border-life-gold/30 text-life-gold bg-life-gold/5":"border-life-muted/30 text-life-muted"}
                                    `,children:N.type==="habit"?l.jsx(Gi,{size:14}):l.jsx(Oc,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:`text-xs font-bold ${N.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:N.title}),l.jsxs("div",{className:"text-[9px] text-life-muted uppercase tracking-wider flex items-center gap-1",children:[N.type==="habit"?"Protocol":"Mission","  ",N.stats.join(", ")]})]}),N.type==="task"&&!N.isCompleted&&l.jsx("button",{onClick:()=>n.toggleTask(N.id),className:"w-6 h-6 rounded border border-life-muted/30 hover:border-life-gold hover:text-life-gold flex items-center justify-center transition-colors",children:l.jsx(zW,{size:14})}),N.isCompleted&&l.jsx(xs,{size:14,className:"text-life-muted"})]},`${N.type}-${N.id}-${O}`))}):l.jsxs("div",{className:"flex flex-col items-center justify-center h-32 text-life-muted/40",children:[l.jsx(mi,{size:32,className:"mb-2 opacity-50"}),l.jsx("p",{className:"text-[10px] uppercase font-bold tracking-widest",children:"No orders for this sector"})]})})]})]})},HJ=()=>{const{habitState:t,habitDispatch:e}=Ar(),{state:n,dispatch:r}=Ge(),{habits:i,categories:s}=t,o=n.ui.habitsViewMode,[c,f]=L.useState(!1),[d,h]=L.useState(!1),[m,g]=L.useState(()=>localStorage.getItem("LIFE_OS_LOG_OPEN")==="true");L.useEffect(()=>{localStorage.setItem("LIFE_OS_LOG_OPEN",String(m))},[m]);const[v,b]=L.useState(""),[w,S]=L.useState(!1),[C,R]=L.useState(null),[N,O]=L.useState(""),k=[],D=[],M=[],j=[];i.forEach(K=>{if(K.isArchived){j.push(K);return}if(K.status!=="pending"){M.push(K);return}yd(K)?k.push(K):D.push(K)});const I=new Date;I.setDate(I.getDate()-1);const U=I.toISOString(),B=U.split("T")[0],P=i.filter(K=>{const te=new Date(K.createdAt);return te>I&&te.getDate()!==I.getDate()?!1:yd(K,U)}).map(K=>{const ne=K.history.some(xe=>xe.startsWith(B))?"completed":"failed";return{...K,id:`log_yesterday_${K.id}`,status:ne,shieldUsed:!1}}),F=K=>{K.preventDefault(),v.trim()&&(e.addCategory(v),b(""),S(!1))},z=K=>{N.trim()&&(e.renameCategory(K,N),R(null))},Q=K=>{i.some(ne=>ne.categoryId===K)?r.setModal("confirmation",{title:"Delete Section?",message:"This section contains protocols. They will be moved to Uncategorized.",confirmText:"Delete Section",isDangerous:!0,onConfirm:()=>e.deleteCategory(K)}):e.deleteCategory(K)},W=K=>{r.setModal("confirmation",{title:"Delete Protocol?",message:"This action is permanent.",confirmText:"Delete",isDangerous:!0,onConfirm:()=>e.deleteHabit(K)})};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsx("div",{className:"flex items-end justify-between mb-6 px-1",children:l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2 uppercase",children:o==="calendar"?"Tactical Planner":"Habit Engine"}),l.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:o==="calendar"?"Long-term Strategy":`Execution Mode  ${k.length} Remaining`})]})}),o==="calendar"?l.jsx(BJ,{}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"mb-4 flex justify-end",children:w?l.jsxs("form",{onSubmit:F,className:"flex gap-2 animate-in fade-in",children:[l.jsx("input",{type:"text",value:v,onChange:K=>b(K.target.value),placeholder:"Section Title...",autoFocus:!0,className:"bg-life-black border border-zinc-800 rounded-lg px-3 py-1 text-xs text-life-text focus:border-life-gold outline-none"}),l.jsx("button",{type:"submit",className:"text-life-gold hover:bg-life-gold/10 p-1 rounded",children:l.jsx(kn,{size:16})}),l.jsx("button",{type:"button",onClick:()=>S(!1),className:"text-life-muted hover:text-white p-1",children:l.jsx(kn,{size:16,className:"rotate-45"})})]}):l.jsxs("button",{onClick:()=>S(!0),className:"text-[10px] uppercase font-bold text-life-muted hover:text-life-gold flex items-center gap-1 transition-colors",children:[l.jsx(P4,{size:14})," Add Section"]})}),l.jsxs("div",{className:"space-y-4 mb-8",children:[s.map(K=>{const te=k.filter(ne=>ne.categoryId===K.id);return l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 group relative",children:[C===K.id?l.jsx("div",{className:"flex gap-2 w-full",children:l.jsx("input",{type:"text",value:N,onChange:ne=>O(ne.target.value),className:"bg-life-black border border-zinc-800 rounded px-2 py-0.5 text-xs text-life-text w-full focus:border-life-gold outline-none",autoFocus:!0,onBlur:()=>z(K.id),onKeyDown:ne=>ne.key==="Enter"&&z(K.id)})}):l.jsxs("button",{onClick:()=>e.toggleCategory(K.id),className:"flex items-center gap-2 text-life-muted hover:text-life-text transition-colors flex-1 text-left py-1",children:[l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-gold/80",children:K.isCollapsed?l.jsx(jr,{size:12}):l.jsx(Wr,{size:12})}),l.jsx("span",{className:"text-xs font-bold uppercase tracking-wider",children:K.title}),l.jsx("span",{className:"text-[9px] bg-life-muted/10 px-1.5 rounded-full text-life-muted",children:te.length})]}),l.jsxs("div",{className:"flex items-center gap-1 opacity-100 sm:opacity-0 sm:group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:ne=>{ne.stopPropagation(),R(K.id),O(K.title)},className:"p-2 text-life-muted hover:text-white hover:bg-life-muted/10 rounded cursor-pointer",title:"Edit Name",children:l.jsx(wT,{size:14})}),l.jsx("button",{onClick:ne=>{ne.stopPropagation(),Q(K.id)},className:"p-2 text-life-muted hover:text-life-hard hover:bg-life-hard/10 rounded cursor-pointer",title:"Delete Section",children:l.jsx(F4,{size:14})})]})]}),!K.isCollapsed&&l.jsxs("div",{className:"space-y-1 pl-1",children:[te.map(ne=>l.jsx(Ru,{habit:ne,onProcess:e.processHabit,onDelete:W},ne.id)),te.length===0&&l.jsx("div",{className:"text-[10px] text-life-muted/40 italic pl-2 py-1",children:"No active protocols in section."})]})]},K.id)}),k.filter(K=>!K.categoryId).length>0&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2",children:[l.jsx("div",{className:"flex items-center gap-2 mb-2 text-life-muted/50 px-1",children:l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"General / Uncategorized"})}),l.jsx("div",{className:"space-y-1",children:k.filter(K=>!K.categoryId).map(K=>l.jsx(Ru,{habit:K,onProcess:e.processHabit,onDelete:W},K.id))})]}),k.length===0&&s.length===0&&l.jsxs("div",{className:"py-8 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/50",children:[l.jsx("p",{className:"text-life-muted text-sm font-medium",children:"All protocols executed."}),l.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1",children:"Check the Daily Log."})]})]}),(M.length>0||P.length>0)&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2 fade-in mb-4",children:[l.jsxs("button",{onClick:()=>g(!m),className:"w-full flex items-center justify-between p-3 rounded-lg border border-zinc-800 bg-life-paper hover:bg-life-muted/5 transition-all mb-3 group shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hd,{size:16,className:"text-life-gold group-hover:scale-110 transition-transform"}),l.jsxs("span",{className:"text-xs font-bold text-life-text uppercase tracking-widest",children:["Activity Log (",M.length+P.length,")"]})]}),l.jsx("div",{className:"text-life-muted",children:m?l.jsx(Ui,{size:16}):l.jsx(Wr,{size:16})})]}),m&&l.jsxs("div",{className:"space-y-4 opacity-90 pb-4",children:[P.length>0&&l.jsxs("div",{className:"animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 text-life-muted/60",children:[l.jsx(mi,{size:12}),l.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Yesterday's Report"})]}),l.jsx("div",{className:"space-y-1",children:P.map(K=>l.jsx("div",{className:"scale-95 origin-top opacity-80 hover:opacity-100 transition-opacity",children:l.jsx(Ru,{habit:K,onProcess:()=>{},onDelete:()=>{}})},K.id))})]}),M.length>0&&l.jsxs("div",{className:"animate-in slide-in-from-top-1",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 px-1 text-life-muted/60",children:[l.jsx(vn,{size:12}),l.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Today's Activity"})]}),l.jsx("div",{className:"space-y-1",children:M.map(K=>l.jsx("div",{className:"scale-95 origin-top",children:l.jsx(Ru,{habit:K,onProcess:e.processHabit,onDelete:W})},K.id))})]})]})]}),D.length>0&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2 fade-in",children:[l.jsxs("button",{onClick:()=>f(!c),className:"w-full flex items-center justify-between p-3 rounded-lg border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all mb-3 group",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(_T,{size:16,className:"text-life-muted group-hover:text-life-gold transition-colors"}),l.jsxs("span",{className:"text-xs font-bold text-life-muted uppercase tracking-widest",children:["Sleep Archive (",D.length,")"]})]}),l.jsx("div",{className:"text-life-muted",children:c?l.jsx(Ui,{size:16}):l.jsx(Wr,{size:16})})]}),c&&l.jsxs("div",{className:"space-y-1 opacity-70 hover:opacity-100 transition-opacity",children:[D.map(K=>l.jsx("div",{className:"scale-95 origin-top",children:l.jsx(Ru,{habit:K,onProcess:e.processHabit,onDelete:W})},K.id)),l.jsx("div",{className:"text-center py-2",children:l.jsx("p",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Recovery Mode  No Streak Penalty"})})]})]}),j.length>0&&l.jsxs("div",{className:"animate-in slide-in-from-bottom-2 fade-in mt-4 border-t border-zinc-800 pt-4",children:[l.jsxs("button",{onClick:()=>h(!d),className:"w-full flex items-center justify-between p-3 rounded-lg border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all mb-3 group",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(hd,{size:16,className:"text-life-hard group-hover:text-life-gold transition-colors"}),l.jsxs("span",{className:"text-xs font-bold text-life-muted uppercase tracking-widest",children:["Protocol Archive (",j.length,")"]})]}),l.jsx("div",{className:"text-life-muted",children:d?l.jsx(Ui,{size:16}):l.jsx(Wr,{size:16})})]}),d&&l.jsxs("div",{className:"space-y-1 opacity-60 hover:opacity-100 transition-opacity grayscale hover:grayscale-0",children:[j.map(K=>l.jsx("div",{className:"scale-95 origin-top",children:l.jsx(Ru,{habit:K,onProcess:()=>{},onDelete:W})},K.id)),l.jsx("div",{className:"text-center py-2",children:l.jsx("p",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Hall of Fame  Protocols Completed"})})]})]})]})]})},r1=({stat:t,size:e=14})=>{switch(t){case ae.STR:return l.jsx(Jr,{size:e});case ae.INT:return l.jsx(xn,{size:e});case ae.DIS:return l.jsx(St,{size:e});case ae.HEA:return l.jsx(vi,{size:e});case ae.CRT:return l.jsx(hr,{size:e});case ae.SPR:return l.jsx(fr,{size:e});case ae.REL:return l.jsx(xi,{size:e});case ae.FIN:return l.jsx(Kn,{size:e});default:return l.jsx(hn,{size:e})}},i1=({raid:t,onToggleStep:e})=>{const{dispatch:n}=Ge(),[r,i]=L.useState(!1),{skillState:s}=an(),[o,c]=L.useState(!1),[f,d]=L.useState(new Set),h=t.skillId?s.skills.find(N=>N.id===t.skillId):null;let m=!1,g="";if(t.requirements){const N=s.skills.find(O=>O.id===t.requirements.skillId);N&&N.level<t.requirements.minLevel?(m=!0,g=`Rec: ${N.title} Lv.${t.requirements.minLevel}`):N||(m=!0,g=`Req: Lv.${t.requirements.minLevel}`)}const v=t.stats&&t.stats.length>0?t.stats[0]:ae.STR,b=$t[v],w=N=>{N.stopPropagation(),n.setModal("itemDetails",{itemId:t.id,type:"raid"})},S=(N,O)=>{N.stopPropagation(),n.setModal("itemDetails",{itemId:O,parentId:t.id,type:"raid_step"})},C=N=>{d(O=>{const k=new Set(O);return k.has(N)?k.delete(N):k.add(N),k})},R=N=>{N.stopPropagation();const O=t.steps.filter(D=>f.has(D.id));if(O.length===0)return;const k={context:"UPDATE_RAID_STEPS",raidId:t.id,raidTitle:t.title,selectedSteps:O.map(D=>({id:D.id,title:D.title,notes:D.notes,difficulty:D.difficulty,stats:D.stats})),instruction:'Update these steps with more details, better notes, or adjust difficulty/stats. CRITICAL: Preserve all IDs. Return valid JSON: { "raids": [{ "id": "...", "steps": [...] }] }'};navigator.clipboard.writeText(JSON.stringify(k,null,2)),n.addToast(`${f.size} Steps Copied for AI`,"info"),c(!1),d(new Set)};return l.jsxs("div",{className:`mb-4 bg-life-paper border rounded-xl overflow-hidden shadow-lg relative transition-all ${m?"border-orange-500/30":"border-zinc-800"}`,children:[l.jsxs("div",{onClick:()=>i(!r),className:"p-4 bg-life-paper relative cursor-pointer active:bg-life-muted/5 transition-colors group",children:[l.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-life-muted/20",children:l.jsx("div",{className:"h-full transition-all duration-700 ease-out",style:{width:`${t.progress}%`,backgroundColor:b}})}),l.jsxs("div",{className:"flex items-start justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`w-12 h-12 rounded-lg border-2 flex flex-col items-center justify-center bg-life-black ${bs[t.difficulty]}`,style:{borderColor:b},children:l.jsx("div",{className:"flex flex-wrap items-center justify-center gap-0.5 p-0.5",children:(t.stats||[]).slice(0,4).map(N=>l.jsx("div",{style:{color:$t[N]},children:l.jsx(r1,{stat:N,size:10})},N))})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("h3",{className:"font-bold text-base text-life-text leading-tight",children:t.title}),t.isCampaign&&l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-indigo-500/50 bg-indigo-500/10 text-indigo-300 flex items-center gap-1 uppercase tracking-wider shadow-[0_0_5px_rgba(99,102,241,0.2)]",children:[l.jsx(Gi,{size:8})," G12"]}),h&&l.jsxs("span",{className:"text-[8px] border px-1.5 py-px rounded flex items-center gap-1 uppercase tracking-wider text-life-gold border-life-gold/30 bg-life-gold/10",children:[l.jsx(pi,{size:8})," ",h.title]}),!h&&l.jsxs("span",{className:"text-[8px] font-black px-1.5 py-0.5 rounded border border-zinc-800 bg-life-black text-life-muted flex items-center gap-1 uppercase tracking-wider",style:{color:b,borderColor:`${b}40`},children:[l.jsx(r1,{stat:v,size:8})," ",v]})]}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:"text-[10px] font-mono text-life-muted bg-life-muted/10 px-1.5 rounded",children:t.difficulty.toUpperCase()}),t.deadline&&l.jsxs("span",{className:"text-[10px] font-mono text-life-muted flex items-center gap-1",children:[l.jsx(mi,{size:10})," ",new Date(t.deadline).toLocaleDateString(void 0,{month:"short",day:"numeric"})]}),m&&l.jsxs("span",{className:"text-[9px] font-bold text-orange-400 flex items-center gap-1 bg-orange-400/10 px-1.5 rounded border border-orange-400/20",children:[l.jsx(yo,{size:10})," ",g]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-life-muted",children:[l.jsx("button",{onClick:N=>{N.stopPropagation(),c(!o),i(!0)},className:`p-1.5 rounded-full transition-all ${o?"bg-life-gold text-black":"hover:bg-life-muted/10 text-life-muted"}`,title:"Select Steps for AI Update",children:l.jsx(Fi,{size:16})}),l.jsx("button",{onClick:w,className:"p-1.5 rounded-full hover:bg-life-muted/10 opacity-0 group-hover:opacity-100 transition-all",children:l.jsx(zh,{size:16})}),r?l.jsx(Ui,{size:20}):l.jsx(Wr,{size:20})]})]})]}),r&&l.jsxs("div",{className:"bg-black/20 border-t border-life-muted/10 p-2",children:[o&&l.jsxs("div",{className:"flex justify-between items-center mb-2 px-2 animate-in slide-in-from-top-2",children:[l.jsxs("span",{className:"text-[10px] font-bold text-life-gold uppercase tracking-widest",children:[f.size," Selected"]}),l.jsxs("button",{onClick:R,disabled:f.size===0,className:"flex items-center gap-1 bg-life-gold text-black px-3 py-1 rounded text-[10px] font-black uppercase hover:bg-yellow-400 disabled:opacity-50 disabled:cursor-not-allowed",children:[l.jsx(yi,{size:10})," Copy for AI"]})]}),l.jsx("div",{className:"space-y-1",children:t.steps.map(N=>{var j;const O=N.difficulty&&N.difficulty!==t.difficulty,k=N.stats&&N.stats.length>0&&(N.stats.length!==t.stats.length||!N.stats.every(I=>t.stats.includes(I))),D=f.has(N.id);let M=b;return O&&(N.difficulty==="easy"?M="#10b981":N.difficulty==="normal"?M="#3b82f6":N.difficulty==="hard"&&(M="#ef4444")),l.jsxs("div",{className:"group flex gap-2 items-center",children:[o&&l.jsx("button",{onClick:()=>C(N.id),className:`shrink-0 transition-all ${D?"text-life-gold":"text-life-muted/30 hover:text-life-muted"}`,children:D?l.jsx(Fi,{size:18}):l.jsx(SX,{size:18})}),l.jsx("div",{className:`
                                    w-full flex items-center justify-between p-3 rounded-lg text-left transition-all
                                    ${N.isCompleted?"bg-life-easy/5 text-life-muted line-through opacity-70":N.isLocked?"bg-transparent text-life-muted/30":"bg-life-paper hover:bg-life-muted/10 text-life-text border-l-2"}
                                `,style:{borderLeftColor:!N.isLocked&&!N.isCompleted?M:"transparent"},children:l.jsxs("div",{className:"flex items-center gap-3 flex-1 cursor-pointer",onClick:()=>!o&&S({stopPropagation:()=>{}},N.id),children:[!o&&l.jsxs("button",{disabled:N.isLocked,onClick:I=>{I.stopPropagation(),e(t.id,N.id)},className:`
                                                w-5 h-5 rounded border flex items-center justify-center transition-all shrink-0
                                                ${N.isCompleted?"bg-life-easy border-life-easy text-life-black":N.isLocked?"border-zinc-800 bg-life-muted/5 cursor-not-allowed":"border-life-muted text-transparent hover:border-life-gold"}
                                            `,children:[N.isCompleted&&l.jsx(Ut,{size:14,strokeWidth:3}),N.isLocked&&!N.isCompleted&&l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-life-muted/30"})]}),l.jsx("div",{className:"flex flex-col flex-1 min-w-0",children:l.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[l.jsx("span",{className:"text-xs font-medium truncate",children:N.title}),O&&l.jsx("span",{className:`text-[7px] font-black px-1 rounded border uppercase tracking-tighter ${N.difficulty==="easy"?"border-life-easy text-life-easy bg-life-easy/5":N.difficulty==="normal"?"border-blue-500 text-blue-400 bg-blue-500/5":"border-life-hard text-life-hard bg-life-hard/5"}`,children:(j=N.difficulty)==null?void 0:j.substring(0,3)}),k&&N.stats&&l.jsx("div",{className:"flex gap-1",children:N.stats.map(I=>l.jsxs("span",{className:"text-[7px] font-black px-1 rounded border border-zinc-800 bg-life-black flex items-center gap-0.5 uppercase tracking-tighter",style:{color:$t[I],borderColor:`${$t[I]}40`},children:[l.jsx(r1,{stat:I,size:6})," ",I]},I))})]})}),!o&&l.jsx("button",{onClick:I=>S(I,N.id),className:"p-1 rounded-full text-life-muted hover:text-life-gold transition-colors",children:N.notes?l.jsx(Pd,{size:12,className:"text-life-gold"}):l.jsx(zh,{size:12})})]})})]},N.id)})})]})]})},qJ=({onClose:t})=>l.jsxs("div",{className:"bg-life-black border border-life-muted/20 rounded-xl p-4 mb-6 animate-in fade-in slide-in-from-top-2",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-2 bg-indigo-900/20 rounded-lg text-indigo-400",children:l.jsx(pi,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-wider",children:"Field Manual: Operations"}),l.jsx("p",{className:"text-[10px] text-life-muted",children:"Tactical Guide & AI Uplink"})]})]}),l.jsx("button",{onClick:t,className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:16})})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-start border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-life-gold font-black text-xs",children:"Structure"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Raid Anatomy"})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsxs("p",{className:"text-[10px] text-zinc-400 leading-relaxed",children:[l.jsx("span",{className:"text-white font-bold",children:"Raids"})," are multi-step projects. Each step is a tactical objective."]}),l.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-1",children:[l.jsxs("div",{className:"bg-life-black p-1.5 rounded border border-zinc-800 text-[9px] text-zinc-500",children:[l.jsx("span",{className:"text-life-easy font-bold",children:"Easy:"})," +100 XP"]}),l.jsxs("div",{className:"bg-life-black p-1.5 rounded border border-zinc-800 text-[9px] text-zinc-500",children:[l.jsx("span",{className:"text-life-hard font-bold",children:"Hard:"})," +500 XP"]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-start border-b border-zinc-800 pb-3",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-indigo-400 font-black text-xs",children:"AI Uplink"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Update Steps"})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("p",{className:"text-[10px] text-zinc-400 leading-relaxed",children:"You can ask AI to refine specific steps without rewriting the whole Raid."}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(Fi,{size:10})}),l.jsxs("span",{children:["1. Click ",l.jsx("span",{className:"text-life-gold font-bold",children:"Select Mode"})," on Raid Card."]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(Fi,{size:10})}),l.jsx("span",{children:"2. Select the steps you want to improve."})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(yi,{size:10})}),l.jsxs("span",{children:["3. Click ",l.jsx("span",{className:"text-life-gold font-bold",children:"Copy for AI"}),"."]})]}),l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-zinc-300",children:[l.jsx("span",{className:"bg-life-muted/20 p-1 rounded text-life-gold",children:l.jsx(St,{size:10})}),l.jsxs("span",{children:["4. Paste into AI, then paste result into ",l.jsx("span",{className:"text-life-gold font-bold",children:"Data Uplink"}),"."]})]})]}),l.jsx("div",{className:"p-2 bg-indigo-900/10 border border-indigo-500/20 rounded text-[9px] text-indigo-300 italic",children:'"The system will intelligently merge the new details into your existing progress."'})]})]}),l.jsxs("div",{className:"grid grid-cols-[1fr_2fr] gap-3 items-center",children:[l.jsxs("div",{className:"text-right pr-2 border-r border-zinc-800",children:[l.jsx("div",{className:"text-purple-400 font-black text-xs",children:"Victory"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Completion"})]}),l.jsx("div",{className:"space-y-1",children:l.jsxs("div",{className:"text-[10px] text-zinc-400 leading-relaxed",children:["Completing a Raid grants a massive ",l.jsx("span",{className:"text-life-gold font-bold",children:"5x Bonus"})," to XP and Gold."]})})]})]})]}),$J=()=>{const{raidState:t,raidDispatch:e}=Qr(),{raids:n}=t,[r,i]=L.useState(!1),[s,o]=L.useState(!1),[c,f]=L.useState(!1),d=n.filter(g=>g.status==="active"),h=n.filter(g=>g.status==="completed"),m=n.filter(g=>g.status==="archived");return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase",children:"Active Operations"}),l.jsx("button",{onClick:()=>f(!c),className:"text-life-muted hover:text-life-gold transition-colors p-1",title:"Field Manual",children:l.jsx(pi,{size:16})})]}),l.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:[d.length," Strategic Objectives In-Progress"]})]}),l.jsx("div",{className:"text-life-hard opacity-50",children:l.jsx(St,{size:24})})]}),c&&l.jsx(qJ,{onClose:()=>f(!1)}),l.jsx("div",{className:"space-y-4",children:d.length>0?d.map(g=>l.jsxs("div",{className:"relative group",children:[l.jsx(i1,{raid:g,onToggleStep:e.toggleRaidStep}),l.jsxs("div",{className:"absolute -right-2 -top-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:()=>e.archiveRaid(g.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-text p-1.5 rounded-full shadow-sm hover:scale-110 transition-transform",title:"Archive Operation",children:l.jsx(hd,{size:12})}),l.jsx("button",{onClick:()=>e.deleteRaid(g.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-hard p-1.5 rounded-full shadow-sm hover:scale-110 transition-transform",title:"Abort / Delete Operation",children:l.jsx(Dr,{size:12})})]})]},g.id)):l.jsxs("div",{className:"py-12 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/30",children:[l.jsx("p",{className:"text-life-muted text-sm font-bold",children:"No Active Operations"}),l.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1 uppercase tracking-wider",children:"Initiate a new Raid via Command Line (+)."})]})}),m.length>0&&l.jsxs("div",{className:"mt-8",children:[l.jsxs("button",{onClick:()=>o(!s),className:"w-full flex items-center justify-between p-3 rounded-xl border border-zinc-800 bg-life-black hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-life-muted/10 text-life-muted group-hover:text-life-text transition-colors",children:l.jsx(bT,{size:16})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"text-xs font-black text-life-muted uppercase tracking-widest group-hover:text-life-text transition-colors",children:"Declassified Ops (Archive)"}),l.jsxs("p",{className:"text-[9px] text-life-muted/60 uppercase tracking-wider",children:[m.length," Operations Stored"]})]})]}),l.jsx("div",{className:"text-life-muted/50",children:s?l.jsx(Ui,{size:18}):l.jsx(Wr,{size:18})})]}),s&&l.jsx("div",{className:"mt-4 space-y-4 animate-in slide-in-from-top-2",children:m.map(g=>l.jsxs("div",{className:"opacity-60 hover:opacity-100 transition-opacity grayscale relative group",children:[l.jsx(i1,{raid:g,onToggleStep:()=>{}}),l.jsxs("div",{className:"absolute top-2 right-2 flex gap-2 bg-life-black/80 backdrop-blur rounded-lg p-1 border border-zinc-800",children:[l.jsxs("button",{onClick:()=>e.restoreRaid(g.id),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-life-muted/20 text-[9px] font-bold text-life-gold uppercase",children:[l.jsx(JY,{size:10})," Restore"]}),l.jsx("div",{className:"w-px bg-life-muted/20"}),l.jsxs("button",{onClick:()=>e.deleteRaid(g.id),className:"flex items-center gap-1 px-2 py-1 rounded hover:bg-life-hard/20 text-[9px] font-bold text-life-hard uppercase",children:[l.jsx(Dr,{size:10})," Delete"]})]})]},g.id))})]}),h.length>0&&l.jsxs("div",{className:"mt-4 pt-4 border-t border-life-muted/10",children:[l.jsxs("button",{onClick:()=>i(!r),className:"w-full flex items-center justify-between p-3 rounded-xl bg-life-gold/5 border border-life-gold/10 hover:bg-life-gold/10 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-life-gold/20 text-life-gold",children:l.jsx(Gy,{size:16})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-widest",children:"Victory Archive"}),l.jsxs("p",{className:"text-[9px] text-life-gold/60 uppercase tracking-wider",children:[h.length," Operations Conquered"]})]})]}),l.jsx("div",{className:"text-life-gold/50",children:r?l.jsx(Ui,{size:18}):l.jsx(Wr,{size:18})})]}),r&&l.jsx("div",{className:"mt-4 space-y-4 animate-in slide-in-from-top-2",children:h.map(g=>l.jsxs("div",{className:"opacity-70 hover:opacity-100 transition-opacity grayscale hover:grayscale-0 relative group",children:[l.jsx(i1,{raid:g,onToggleStep:e.toggleRaidStep}),l.jsxs("div",{className:"absolute -right-2 -top-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity z-10",children:[l.jsx("button",{onClick:()=>e.archiveRaid(g.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-text p-1.5 rounded-full shadow-sm",title:"Move to Archive",children:l.jsx(hd,{size:12})}),l.jsx("button",{onClick:()=>e.deleteRaid(g.id),className:"bg-life-black border border-zinc-800 text-life-muted hover:text-life-hard p-1.5 rounded-full shadow-sm",title:"Delete Log",children:l.jsx(Dr,{size:12})})]})]},g.id))})]})]})},Z4=[{id:"item_shield",title:"Streak Shield",description:"Prevents your streak from resetting if you miss a day.",cost:1e3,type:"system",icon:"Shield",isInfinite:!0}],eL=L.createContext(void 0),GJ=t=>{const e=Array.isArray(t)?t:t.storeItems||[],n=new Set,r=[];for(const i of e)n.has(i.id)||(n.add(i.id),r.push(i));return{storeItems:r.length>0?r:Z4}},KJ=({children:t})=>{const{state:e,dispatch:n}=Ge(),{user:r}=e,i=r.preferences.soundEnabled,[s,o]=Rd("LIFE_OS_SHOP_DATA",{storeItems:Z4},"shop_data",GJ),{storeItems:c}=s;L.useEffect(()=>{o(v=>{const b=new Set,w=[];for(const S of v.storeItems)b.has(S.id)||(b.add(S.id),w.push(S));return w.length!==v.storeItems.length?(console.log(" ShopContext: Removed duplicate items."),{...v,storeItems:w}):v})},[]);const f=v=>{const b=c.find(R=>R.id===v);if(!b)return!1;if(r.gold<b.cost)return He("error",i),n.addToast("Insufficient Funds","error"),!1;if(v==="item_shield"&&r.shields>=3)return n.addToast(" Max Shield Capacity (3) Reached","error"),He("error",i),!1;if((b.type==="system"||b.type==="artifact")&&!b.isInfinite&&r.inventory.includes(v))return n.addToast("Already Owned","error"),!1;const S={gold:r.gold-b.cost};if(v==="item_shield")S.shields=r.shields+1,n.addToast(`Shield Acquired! (${S.shields}/3)`,"info");else if(b.type==="redemption"){const{updatedLog:R,newAverage:N,redeemedDate:O}=aJ(r.honorDailyLog,e.ui.debugDate);if(!O)return n.addToast("Honor is already perfect.","info"),!1;S.honorDailyLog=R,S.honor=N,n.addToast(`Honor Restored for ${O} (+100%)`,"level-up"),He("level-up",i)}else if(b.type==="system"&&!b.isInfinite)if(S.inventory=[...r.inventory,v],v==="item_theme_gold"){const R={id:"gold",name:"Midas Touch",colors:{"--color-life-black":"#1a1200","--color-life-paper":"#261a00","--color-life-gold":"#ffd700","--color-life-text":"#fffae6"}};n.addTheme(R),n.setTheme("gold"),n.addToast("Gold Theme Activated","success")}else if(v==="item_theme_cyberpunk"){const R={id:"cyberpunk",name:"Neon City",colors:{"--color-life-black":"#020617","--color-life-paper":"#0f172a","--color-life-gold":"#22d3ee","--color-life-text":"#e0f2fe"}};n.addTheme(R),n.setTheme("cyberpunk"),n.addToast("Cyberpunk Protocol Activated","level-up")}else n.addToast(`Acquired: ${b.title}`,"success");else b.type==="artifact"?(S.inventory=[...r.inventory,v],n.addToast(`Artifact Acquired: ${b.title}`,"success"),setTimeout(()=>n.addToast("Equip it in Profile to activate.","info"),1500)):b.id==="item_potion_xp"?(S.inventory=[...r.inventory,v],n.addToast("Potion stored in Inventory","success")):b.id==="item_battery"?(S.shields=3,n.addToast("Shields Fully Recharged!","level-up")):(S.inventory=[...r.inventory,v],n.addToast(`Voucher Acquired: ${b.title}`,"success"));const C={id:`log_${Date.now()}`,itemId:b.id,title:b.title,cost:b.cost,timestamp:new Date().toISOString()};return S.purchaseHistory=[C,...r.purchaseHistory||[]].slice(0,50),n.updateUser(S),He("coin",i),b.isInfinite||o(R=>({...R,storeItems:R.storeItems.filter(N=>N.id!==v)})),!0},d=v=>{o(b=>{const w=b.storeItems.findIndex(S=>S.id===v.id);if(w>=0){const S=[...b.storeItems];return S[w]=v,{...b,storeItems:S}}return b.storeItems.some(S=>S.title===v.title)?b:{...b,storeItems:[...b.storeItems,v]}}),He("click",i)},h=v=>{o(b=>{let w=[...b.storeItems];return v.forEach(S=>{const C=w.findIndex(R=>R.id===S.id);C>=0?w[C]=S:w.some(R=>R.title===S.title)||w.push(S)}),{...b,storeItems:w}}),He("level-up",i)},m=v=>{confirm("Remove this item from the market?")&&(o(b=>({...b,storeItems:b.storeItems.filter(w=>w.id!==v)})),He("delete",i))},g=v=>{o({storeItems:v}),n.addToast("Market Restored","success")};return l.jsx(eL.Provider,{value:{shopState:{storeItems:c},shopDispatch:{buyItem:f,addStoreItem:d,addStoreItems:h,deleteStoreItem:m,restoreData:g}},children:t})},mp=()=>{const t=L.useContext(eL);if(t===void 0)throw new Error("useShop must be used within a ShopProvider");return t},WJ=({icon:t,size:e=24})=>{switch(t){case"Shield":return l.jsx(ms,{size:e});case"Flask":return l.jsx(R4,{size:e});case"Coffee":return l.jsx(I4,{size:e});case"Palette":return l.jsx(hr,{size:e});case"Burger":return l.jsx(BX,{size:e});case"Game":return l.jsx(iY,{size:e});default:return l.jsx(TT,{size:e})}},cg=({item:t,canAfford:e,onBuy:n,onInfo:r})=>l.jsxs("div",{onClick:()=>r(t),className:`
        relative flex flex-col p-4 rounded-xl border bg-life-paper transition-all duration-300 group cursor-pointer
        ${e?"border-zinc-800 hover:border-life-gold/50 shadow-lg hover:shadow-life-gold/5":"border-zinc-800 opacity-60"}
    `,children:[l.jsxs("div",{className:"flex justify-between items-start mb-3",children:[l.jsx("div",{className:`p-3 rounded-lg border bg-life-black transition-colors ${e?"border-life-gold/20 text-life-gold":"border-zinc-800 text-life-muted"}`,children:l.jsx(WJ,{icon:t.icon,size:24})}),l.jsxs("div",{className:`px-2 py-1 rounded text-xs font-mono font-bold border ${e?"bg-life-gold/10 text-life-gold border-life-gold/20":"bg-life-muted/10 text-life-muted border-zinc-800"}`,children:[t.cost," G"]})]}),l.jsx("h3",{className:"font-bold text-life-text mb-1 truncate",children:t.title}),l.jsx("p",{className:"text-xs text-life-muted leading-relaxed mb-4 flex-1 line-clamp-2",children:t.description}),l.jsx("button",{onClick:i=>{i.stopPropagation(),e&&n(t.id)},disabled:!e,className:`
            w-full py-2 rounded-lg text-xs font-bold uppercase tracking-wider transition-all active:scale-95
            ${e?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_10px_rgba(251,191,36,0.2)]":"bg-life-muted/10 text-life-muted cursor-not-allowed"}
        `,children:e?"Buy":"Locked"}),l.jsx("div",{className:"absolute top-0 right-0 w-8 h-8 overflow-hidden pointer-events-none",children:l.jsx("div",{className:`absolute top-0 right-0 w-4 h-4 -mr-2 -mt-2 rotate-45 transform ${e?"bg-life-gold":"bg-life-muted"}`})})]}),kT=({icon:t,size:e=16})=>{switch(t){case"Shield":return l.jsx(ms,{size:e});case"Flask":return l.jsx(R4,{size:e});case"Coffee":return l.jsx(I4,{size:e});case"Palette":return l.jsx(hr,{size:e});case"Burger":return l.jsx(hn,{size:e});case"Gift":return l.jsx(M4,{size:e});case"Zap":return l.jsx(hn,{size:e});case"Scroll":return l.jsx(iX,{size:e});default:return l.jsx(TT,{size:e})}},YJ=()=>{const{state:t}=Ge(),{shopState:e,shopDispatch:n}=mp(),{storeItems:r}=e,{user:i}=t,[s,o]=L.useState(!1),[c,f]=L.useState(""),[d,h]=L.useState(100),[m,g]=L.useState(null),[v,b]=L.useState([]),w=r.filter(k=>k.type==="system"),S=r.filter(k=>k.type==="artifact"),C=r.filter(k=>k.type==="redemption"),R=r.filter(k=>k.type==="custom"),N=(k,D)=>{if(n.buyItem(k)){const j=Array.from({length:12}).map((I,U)=>({id:Date.now()+U,x:D.clientX,y:D.clientY}));b(I=>[...I,...j])}};L.useEffect(()=>{if(v.length>0){const k=setTimeout(()=>b([]),1e3);return()=>clearTimeout(k)}},[v]);const O=k=>{if(k.preventDefault(),!c.trim()||d<0)return;const D={id:`cust_${Date.now()}`,title:c,description:"Custom User Reward",cost:Math.max(0,d),type:"custom",icon:"Gift",isInfinite:!0};n.addStoreItem(D),f(""),o(!1)};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500 relative",children:[v.map(k=>l.jsx("div",{className:"fixed w-2 h-2 rounded-full animate-[particle_0.8s_ease-out_forwards] pointer-events-none z-[100]",style:{left:k.x,top:k.y,backgroundColor:["#fbbf24","#ffffff","#10b981"][Math.floor(Math.random()*3)],boxShadow:"0 0 10px currentColor","--tx":`${(Math.random()-.5)*200}px`,"--ty":`${(Math.random()-1)*200}px`}},k.id)),l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"THE BAZAAR"}),l.jsx("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:"Exchange Gold for Power & Pleasure"})]}),l.jsxs("div",{className:"flex items-center gap-2 text-life-gold bg-life-gold/5 px-3 py-1.5 rounded-lg border border-life-gold/20 shadow-[0_0_15px_rgba(251,191,36,0.1)]",children:[l.jsx(Kn,{size:16,className:"text-life-gold"}),l.jsx("span",{className:"font-mono font-bold text-lg",children:i.gold})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1",children:[l.jsx(xW,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"System Upgrades"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:w.map(k=>l.jsx("div",{onClick:D=>{},children:l.jsx(cg,{item:k,canAfford:i.gold>=k.cost,onBuy:D=>{const M={clientX:window.innerWidth/2,clientY:window.innerHeight/2};N(D,M)},onInfo:D=>g(D)})},k.id))})]}),S.length>0&&l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1",children:[l.jsx(ms,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Rare Artifacts"})]}),l.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map(k=>l.jsx("div",{children:l.jsx(cg,{item:k,canAfford:i.gold>=k.cost,onBuy:D=>{const M={clientX:window.innerWidth/2,clientY:window.innerHeight/2};N(D,M)},onInfo:D=>g(D)})},k.id))})]}),l.jsxs("div",{className:"mb-8",children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted",children:[l.jsx(M4,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Real World Rewards"})]}),l.jsxs("button",{onClick:()=>o(!s),className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white uppercase font-bold",children:[l.jsx(kn,{size:12})," Add Custom"]})]}),s&&l.jsxs("form",{onSubmit:O,className:"mb-4 bg-life-black border border-zinc-800 p-3 rounded-lg flex gap-2 animate-in fade-in",children:[l.jsx("input",{type:"text",placeholder:"Reward Name...",value:c,onChange:k=>f(k.target.value),className:"flex-1 bg-transparent border-b border-zinc-800 text-xs text-white focus:outline-none focus:border-life-gold px-2",autoFocus:!0}),l.jsx("input",{type:"number",placeholder:"Cost",value:d,min:0,onChange:k=>h(Number(k.target.value)),className:"w-16 bg-transparent border-b border-zinc-800 text-xs text-white focus:outline-none focus:border-life-gold text-center"}),l.jsx("button",{type:"submit",className:"text-life-gold",children:l.jsx(kn,{size:16})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[C.map(k=>l.jsxs("div",{className:"relative group",children:[l.jsx(cg,{item:k,canAfford:i.gold>=k.cost,onBuy:D=>{const M={clientX:window.innerWidth/2,clientY:window.innerHeight/2};N(D,M)},onInfo:D=>g(D)}),l.jsx("button",{onClick:()=>n.deleteStoreItem(k.id),className:"absolute -top-2 -right-2 bg-life-black border border-life-hard/30 text-life-hard p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(wt,{size:12})})]},k.id)),R.map(k=>l.jsxs("div",{className:"relative group",children:[l.jsx(cg,{item:k,canAfford:i.gold>=k.cost,onBuy:D=>{const M={clientX:window.innerWidth/2,clientY:window.innerHeight/2};N(D,M)},onInfo:D=>g(D)}),l.jsx("button",{onClick:()=>n.deleteStoreItem(k.id),className:"absolute -top-2 -right-2 bg-life-black border border-life-hard/30 text-life-hard p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:l.jsx(wt,{size:12})})]},k.id)),R.length===0&&C.length===0&&l.jsx("div",{className:"col-span-2 py-8 text-center border-2 border-dashed border-zinc-800 rounded-xl",children:l.jsx("p",{className:"text-[10px] text-life-muted",children:"No custom rewards defined."})})]})]}),l.jsxs("div",{className:"mt-8 pt-8 border-t border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 text-life-muted px-1 opacity-60",children:[l.jsx(pY,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Transaction Log (Last 100)"})]}),l.jsxs("div",{className:"space-y-1 opacity-70",children:[i.purchaseHistory.map(k=>{const D=k.title.includes("[XP]"),M=k.cost<0,j=Math.abs(k.cost),I=M?"+":"-";let U="text-life-gold";D?U="text-life-easy":M?U="text-green-400":U="text-red-400";const B=D?"XP":"G";return l.jsxs("div",{className:"flex justify-between items-center p-2 rounded bg-life-black border border-life-muted/10 text-[10px]",children:[l.jsx("span",{className:"text-life-text font-medium truncate flex-1 pr-2",children:k.title.replace("[XP] ","")}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:`${U} font-mono font-bold`,children:[I,j," ",B]}),l.jsx("span",{className:"text-life-muted opacity-50 text-[9px]",children:new Date(k.timestamp).toLocaleDateString()})]})]},k.id)}),i.purchaseHistory.length===0&&l.jsx("p",{className:"text-[10px] text-life-muted italic text-center",children:"No transaction data."})]})]}),m&&l.jsx("div",{onClick:()=>g(null),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{onClick:k=>k.stopPropagation(),className:"bg-life-paper w-full max-w-xs rounded-xl border border-zinc-800 p-5 shadow-2xl relative",children:[l.jsx("button",{onClick:()=>g(null),className:"absolute top-3 right-3 text-life-muted hover:text-life-text",children:l.jsx(wt,{size:20})}),l.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-life-black border border-zinc-800 flex items-center justify-center mb-3 text-life-gold shadow-inner",children:l.jsx(kT,{icon:m.icon,size:40})}),l.jsx("h3",{className:"font-black uppercase tracking-widest text-life-text",children:m.title}),l.jsxs("div",{className:"mt-2 flex items-center gap-2 justify-center",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded bg-life-muted/10 text-life-muted border border-zinc-800",children:m.type}),l.jsxs("span",{className:"text-[10px] font-bold uppercase tracking-wider px-2 py-0.5 rounded bg-life-gold/10 text-life-gold border border-life-gold/20",children:[m.cost," G"]})]}),l.jsx("p",{className:"text-xs text-life-muted mt-4 leading-relaxed",children:m.description}),m.effect&&l.jsxs("div",{className:"mt-4 w-full bg-life-black/50 p-3 rounded border border-zinc-800 text-left",children:[l.jsxs("h4",{className:"text-[9px] font-bold uppercase text-life-muted mb-1 flex items-center gap-1",children:[l.jsx(St,{size:10})," Effect"]}),l.jsxs("p",{className:"text-[10px] text-life-text font-mono",children:[m.effect.type==="xp_boost"&&`+${m.effect.value*100}% XP Gain`,m.effect.type==="gold_boost"&&`+${m.effect.value*100}% Gold Gain`,m.effect.stat&&` (${m.effect.stat})`]})]})]}),l.jsx("button",{onClick:()=>{if(i.gold>=m.cost){const k={clientX:window.innerWidth/2,clientY:window.innerHeight/2};N(m.id,k),g(null)}},disabled:i.gold<m.cost,className:`
                        w-full py-3 font-black uppercase text-xs rounded-xl shadow-lg transition-all active:scale-95
                        ${i.gold>=m.cost?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}
                    `,children:i.gold>=m.cost?"Purchase Item":"Insufficient Funds"})]})}),l.jsx("style",{children:`
        @keyframes particle {
            0% { transform: translate(0, 0) scale(1); opacity: 1; }
            100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; }
        }
      `})]})},tL=L.createContext(void 0),XJ=()=>{const t=new Date,e=n=>n.toString().padStart(2,"0");return`${t.getFullYear().toString().slice(-2)}${e(t.getMonth()+1)}${e(t.getDate())}${e(t.getHours())}${e(t.getMinutes())}`},JJ=({children:t})=>{var h,m,g;const{state:e,dispatch:n}=Ge(),{skillState:r}=an(),{habitState:i}=Ar(),{raidState:s}=Qr(),{user:o}=e,c=()=>[...E4,...e.badgesRegistry],f=()=>{let v=!1,b={...o};b.badgeTiers||(b.badgeTiers={}),b.badgeHistory||(b.badgeHistory={}),c().forEach(S=>{var R;let C=0;if(S.triggerType==="metric"&&S.metricKey){const N=String(S.metricKey).split(".");N.length===1?C=o.metrics[N[0]]||0:N.length===2&&(C=((R=o.metrics[N[0]])==null?void 0:R[N[1]])||0),S.metricKey==="level"&&(C=o.level),S.metricKey==="highestStreak"&&(C=Math.max(o.streak,o.metrics.highestStreak))}else if(S.triggerType==="stat"&&S.metricKey)C=o.stats[S.metricKey]||0;else if(S.triggerType==="skill"&&S.metricKey)if(S.metricKey==="any")C=Math.max(0,...r.skills.map(N=>N.level),0);else{const N=r.skills.find(O=>O.id===S.metricKey);N&&(C=N.level)}else if(S.triggerType==="habit"&&S.metricKey){const N=i.habits.find(O=>O.id===S.metricKey||O.title.toLowerCase().includes(S.metricKey.toLowerCase()));N&&(C=N.streak)}else if(S.triggerType==="raid"&&S.metricKey){const N=s.raids.find(O=>O.id===S.metricKey||O.title.toLowerCase().includes(S.metricKey.toLowerCase()));N&&(C=N.progress)}S.levels.forEach(N=>{var D;const O=N.tier;b.badgeTiers[S.id];const k=(D=b.badgeHistory[S.id])==null?void 0:D[O];C>=N.target&&!k&&(v=!0,b.badgeTiers[S.id]=O,b.badges.includes(S.id)||b.badges.push(S.id),b.badgeHistory[S.id]||(b.badgeHistory[S.id]={}),b.badgeHistory[S.id][O]=XJ(),b.currentXP+=N.rewards.xp,b.gold+=N.rewards.gold,setTimeout(()=>{n.setModal("badgeUnlock",{badge:S,tier:O,rewards:N.rewards}),He("level-up",!0)},500))})}),v&&n.updateUser(b)};L.useEffect(()=>{const v=setTimeout(()=>{f()},1e3);return()=>clearTimeout(v)},[o.level,o.streak,(h=o.metrics)==null?void 0:h.totalTasksCompleted,(m=o.metrics)==null?void 0:m.totalGoldEarned,(g=o.metrics)==null?void 0:g.totalRaidsWon,JSON.stringify(o.stats),JSON.stringify(r.skills.map(v=>v.level)),JSON.stringify(i.habits.map(v=>v.streak)),JSON.stringify(s.raids.map(v=>v.progress))]);const d=()=>c().map(b=>{var R,N,O,k;let w=0;if(b.triggerType==="metric"&&b.metricKey){const D=String(b.metricKey).split(".");D.length===1?w=o.metrics[D[0]]||0:w=((R=o.metrics[D[0]])==null?void 0:R[D[1]])||0,b.metricKey==="level"&&(w=o.level),b.metricKey==="highestStreak"&&(w=Math.max(o.streak,((N=o.metrics)==null?void 0:N.highestStreak)||0))}else if(b.triggerType==="stat"&&b.metricKey)w=o.stats[b.metricKey]||0;else if(b.triggerType==="skill"&&b.metricKey)if(b.metricKey==="any")w=Math.max(0,...r.skills.map(D=>D.level),0);else{const D=r.skills.find(M=>M.id===b.metricKey);D&&(w=D.level)}else if(b.triggerType==="habit"&&b.metricKey){const D=i.habits.find(M=>M.id===b.metricKey||M.title.toLowerCase().includes(b.metricKey.toLowerCase()));D&&(w=D.streak)}else if(b.triggerType==="raid"&&b.metricKey){const D=s.raids.find(M=>M.id===b.metricKey||M.title.toLowerCase().includes(b.metricKey.toLowerCase()));D&&(w=D.progress)}const S=((O=o.badgeTiers)==null?void 0:O[b.id])||null;let C=b.levels[0];return S==="silver"&&(C=b.levels[1]),S==="gold"&&(C=b.levels[2]),S==="diamond"&&(C=b.levels[3]),S==="crimson"&&(C=null),{badge:b,currentValue:w,isUnlocked:!!S,currentTier:S,nextTier:C,history:((k=o.badgeHistory)==null?void 0:k[b.id])||{}}});return l.jsx(tL.Provider,{value:{getAllBadges:d,checkBadges:f},children:t})},nL=()=>{const t=L.useContext(tL);if(!t)throw new Error("useBadges must be used within BadgeProvider");return t},QJ=({user:t,dynamicTitle:e,featuredBadgesData:n})=>l.jsxs("div",{className:"bg-life-paper border border-zinc-800 rounded-xl p-6 text-center mb-6 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-life-gold/5 to-transparent pointer-events-none"}),l.jsxs("div",{className:"w-24 h-24 mx-auto bg-life-black rounded-full border-4 border-zinc-800 flex items-center justify-center mb-4 relative shadow-2xl z-10 transition-transform select-none",children:[l.jsx(ET,{size:48,className:"text-life-silver"}),l.jsxs("div",{className:"absolute -bottom-2 bg-life-gold text-life-black text-xs font-black px-2 py-0.5 rounded shadow-sm border border-life-black",children:["Lvl ",t.level]})]}),l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase relative z-10",children:t.name}),l.jsx("p",{className:"text-sm text-life-gold font-mono tracking-widest opacity-80 mb-5 relative z-10",children:e}),n.length>0&&l.jsx("div",{className:"flex justify-center gap-2 mb-5 relative z-10",children:n.map(r=>{const i=r.currentTier;let s="text-gray-400";return i==="gold"&&(s="text-yellow-400 drop-shadow-[0_0_5px_rgba(250,204,21,0.5)]"),i==="diamond"&&(s="text-cyan-400 drop-shadow-[0_0_5px_rgba(34,211,238,0.5)]"),i==="crimson"&&(s="text-red-500 drop-shadow-[0_0_8px_rgba(220,38,38,0.6)]"),l.jsxs("div",{className:"relative group/badge cursor-help",title:r.badge.name,children:[l.jsx("div",{className:`w-8 h-8 rounded-full bg-life-black border border-zinc-800 flex items-center justify-center ${s}`,children:l.jsx("span",{className:"text-sm",children:r.badge.icon})}),l.jsx("div",{className:`absolute -bottom-1 -right-1 w-3 h-3 rounded-full border-2 border-life-paper bg-current ${s}`})]},r.badge.id)})}),l.jsxs("div",{className:"bg-black/40 rounded-lg p-3 backdrop-blur-sm border border-zinc-800 relative z-10",children:[l.jsxs("div",{className:"flex justify-between text-[10px] text-life-muted mb-1 uppercase font-bold",children:[l.jsx("span",{children:"XP Progress"}),l.jsxs("span",{className:"text-life-gold",children:[t.currentXP," ",l.jsxs("span",{className:"text-life-muted",children:["/ ",t.targetXP]})]})]}),l.jsx("div",{className:"h-2 bg-gray-800 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-life-gold shadow-[0_0_10px_rgba(251,191,36,0.5)] transition-all duration-700",style:{width:`${Math.min(100,t.currentXP/t.targetXP*100)}%`}})})]})]}),ZJ=({stat:t,size:e=14})=>{switch(t){case ae.STR:return l.jsx(Jr,{size:e});case ae.INT:return l.jsx(xn,{size:e});case ae.DIS:return l.jsx(St,{size:e});case ae.HEA:return l.jsx(vi,{size:e});case ae.CRT:return l.jsx(hr,{size:e});case ae.SPR:return l.jsx(fr,{size:e});case ae.REL:return l.jsx(xi,{size:e});case ae.FIN:return l.jsx(Kn,{size:e});default:return l.jsx(Fy,{size:e})}},eQ=({stats:t,maxVal:e=20})=>{const s=e,o=[ae.STR,ae.INT,ae.DIS,ae.HEA,ae.CRT,ae.SPR,ae.REL,ae.FIN],c=(h,m,g=85)=>{const b=Math.PI*2/o.length*m-Math.PI/2,w=h/s*g,S=150+w*Math.cos(b),C=150+w*Math.sin(b);return{x:S,y:C}},f=o.map((h,m)=>{const g=Math.min(t[h],s),{x:v,y:b}=c(g,m);return`${v},${b}`}).join(" "),d=[.25,.5,.75,1].map(h=>o.map((m,g)=>{const{x:v,y:b}=c(s*h,g);return`${v},${b}`}).join(" "));return l.jsx("div",{className:"relative flex justify-center animate-in fade-in zoom-in-95 duration-500",children:l.jsxs("svg",{width:300,height:300,viewBox:"0 0 300 300",className:"overflow-visible",children:[d.map((h,m)=>l.jsx("polygon",{points:h,fill:"none",stroke:"var(--color-life-text)",strokeWidth:"1",opacity:"0.1"},m)),o.map((h,m)=>{const{x:g,y:v}=c(s,m);return l.jsx("line",{x1:150,y1:150,x2:g,y2:v,stroke:"var(--color-life-text)",strokeWidth:"1",opacity:"0.1"},m)}),l.jsx("polygon",{points:f,fill:"rgba(251, 191, 36, 0.15)",stroke:"#fbbf24",strokeWidth:"2",className:"drop-shadow-[0_0_15px_rgba(251,191,36,0.3)]"}),o.map((h,m)=>{const g=c(s,m,125),v=t[h],b=$t[h];return l.jsx("foreignObject",{x:g.x-30,y:g.y-25,width:"60",height:"50",className:"overflow-visible",children:l.jsxs("div",{className:"flex flex-col items-center justify-center text-center group cursor-pointer hover:scale-110 transition-transform",children:[l.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-life-black border shadow-sm mb-1 z-10 relative",style:{borderColor:`${b}50`,color:b,boxShadow:`0 0 10px ${b}20`},children:l.jsx(ZJ,{stat:h,size:12})}),l.jsxs("div",{className:"flex flex-col leading-none relative z-10 bg-life-black/80 px-1 rounded backdrop-blur-sm",children:[l.jsx("span",{className:"text-[8px] font-black uppercase tracking-wider text-life-muted group-hover:text-life-text transition-colors",children:h}),l.jsx("span",{className:"text-[10px] font-mono font-bold text-life-text group-hover:text-life-gold transition-colors",children:v})]})]})},h)}),o.map((h,m)=>{const g=Math.min(t[h],s),v=c(g,m);return l.jsx("circle",{cx:v.x,cy:v.y,r:"3",fill:"#fbbf24",stroke:"#000",strokeWidth:"1"},`dot-${m}`)})]})})},tQ=t=>{switch(t){case ae.STR:return Jr;case ae.INT:return xn;case ae.DIS:return St;case ae.HEA:return vi;case ae.CRT:return hr;case ae.SPR:return fr;case ae.REL:return xi;case ae.FIN:return Kn;default:return Fy}},nQ=t=>{switch(t){case ae.STR:return"#ef4444";case ae.INT:return"#8b5cf6";case ae.DIS:return"#3b82f6";case ae.HEA:return"#10b981";case ae.CRT:return"#ec4899";case ae.SPR:return"#f43f5e";case ae.REL:return"#fbbf24";case ae.FIN:return"#14b8a6";default:return"#6b7280"}},rQ=t=>{const e={[ae.STR]:t.STR||0,[ae.INT]:t.INT||0,[ae.DIS]:t.DIS||0,[ae.HEA]:t.HEA||0,[ae.CRT]:t.CRT||0,[ae.SPR]:t.SPR||0,[ae.REL]:t.REL||0,[ae.FIN]:t.FIN||0},n=Math.max(...Object.values(e));let r=20;return n>=1280?r=2560:n>=640?r=1280:n>=320?r=640:n>=160?r=320:n>=80?r=160:n>=40?r=80:n>=20&&(r=40),{xpValues:e,globalTarget:r}},iQ={[ae.STR]:"Strength",[ae.INT]:"Intelligence",[ae.DIS]:"Discipline",[ae.HEA]:"Health",[ae.CRT]:"Creativity",[ae.SPR]:"Spirit",[ae.REL]:"Relation",[ae.FIN]:"Finance"},sQ=({stat:t,xp:e,target:n})=>{const{getIcon:r}=NT(),i=r(t,null),s=n>0?Math.min(e/n*100,100):0,o=tQ(t),c=nQ(t),f=iQ[t]||t;return l.jsxs("div",{className:"flex flex-col w-full mb-2 group",children:[l.jsxs("div",{className:"flex justify-between items-end px-0 mb-1",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"p-1.5 rounded-md bg-life-black border border-zinc-800 flex items-center justify-center shadow-sm group-hover:border-life-muted/40 transition-colors",children:i?l.jsx("span",{style:{fontSize:"14px",lineHeight:1},children:i}):l.jsx(o,{size:14,style:{color:c}})}),l.jsxs("div",{className:"flex flex-col leading-none gap-0.5",children:[l.jsx("span",{className:"font-black text-[10px] text-life-text uppercase tracking-widest",children:f}),l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx("span",{className:"text-[8px] font-mono text-life-muted font-bold opacity-50",children:t}),l.jsxs("span",{className:"text-[8px] font-mono text-life-gold font-bold bg-life-gold/10 px-1 rounded-[2px]",children:["LVL ",Math.floor(e/20)+1]})]})]})]}),l.jsxs("p",{className:"text-[10px] font-mono text-life-text text-right leading-none",children:[l.jsx("span",{style:{color:c},className:"font-black text-xs",children:e.toFixed(0)}),l.jsxs("span",{className:"text-life-muted/40 text-[9px] ml-1",children:["/ ",n]})]})]}),l.jsxs("div",{className:"w-full bg-black h-2 rounded-full overflow-hidden border border-zinc-800 relative shadow-inner",children:[l.jsx("div",{className:"h-full rounded-full transition-all duration-700 ease-out relative z-10",style:{width:`${s}%`,backgroundColor:c}}),l.jsx("div",{className:"absolute inset-0 opacity-30 blur-[3px]",style:{width:`${s}%`,backgroundColor:c}})]})]})},oQ=({user:t})=>{const[e,n]=L.useState("data"),{xpValues:r,globalTarget:i}=rQ(t.stats),s=[ae.STR,ae.INT,ae.DIS,ae.HEA,ae.CRT,ae.SPR,ae.REL,ae.FIN];return l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 mb-4 shadow-lg shadow-black/50 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute top-0 left-0 w-2 h-2 border-t border-l border-life-muted/30 rounded-tl-lg"}),l.jsx("div",{className:"absolute top-0 right-0 w-2 h-2 border-t border-r border-life-muted/30 rounded-tr-lg"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-2 h-2 border-b border-l border-life-muted/30 rounded-bl-lg"}),l.jsx("div",{className:"absolute bottom-0 right-0 w-2 h-2 border-b border-r border-life-muted/30 rounded-br-lg"}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-[0.2em] text-life-text flex items-center gap-2",children:[l.jsx("span",{className:"text-life-gold",children:""})," Attribute Analysis"]}),l.jsx("p",{className:"text-[9px] text-life-muted uppercase font-mono tracking-[0.1em] mt-1 opacity-60",children:"Neural_Net_v1.4 // Connected"})]}),l.jsxs("div",{className:"flex items-center bg-black border border-zinc-800 p-1 rounded-lg gap-1",children:[l.jsxs("button",{onClick:()=>n("graph"),className:`flex items-center gap-2 px-3 py-1.5 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${e==="graph"?"bg-life-gold text-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:[l.jsx(fY,{size:12,className:e==="graph"?"fill-black stroke-black":""}),"Graph"]}),l.jsxs("button",{onClick:()=>n("data"),className:`flex items-center gap-2 px-3 py-1.5 text-[10px] font-black uppercase tracking-wider rounded-md transition-all ${e==="data"?"bg-life-gold text-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:[l.jsx(CY,{size:14}),"Data"]})]})]}),l.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",children:e==="graph"?l.jsx("div",{className:"relative h-64 flex items-center justify-center",children:l.jsx(eQ,{stats:t.stats,maxVal:i})}):l.jsx("div",{className:"space-y-3 py-1",children:s.map(o=>l.jsx(sQ,{stat:o,xp:r[o],target:i},o))})})]})},aQ=({items:t,onSelectItem:e})=>{const n=t.reduce((i,s)=>(i[s.id]||(i[s.id]={...s,count:0}),i[s.id].count+=1,i),{}),r=Object.values(n);return l.jsxs("div",{className:"mb-8",children:[l.jsxs("h3",{className:"text-xs font-bold text-life-muted uppercase tracking-wider mb-3 flex items-center gap-2",children:[l.jsx(UY,{size:14})," Inventory (",t.length,")"]}),r.length>0?l.jsx("div",{className:"grid grid-cols-4 gap-2",children:r.map(i=>l.jsxs("button",{onClick:()=>e(i),className:"aspect-square bg-life-paper rounded-xl border border-zinc-800 flex flex-col items-center justify-center gap-1 hover:border-life-gold/50 hover:bg-life-muted/5 transition-all relative",children:[i.count>1&&l.jsxs("span",{className:"absolute top-1 right-1 bg-life-gold text-life-black text-[9px] font-black px-1.5 rounded-full shadow-sm",children:["x",i.count]}),l.jsx("div",{className:"text-life-gold",children:l.jsx(kT,{icon:i.icon,size:20})})]},i.id))}):l.jsx("div",{className:"text-center py-6 border border-dashed border-zinc-800 rounded-xl",children:l.jsx("p",{className:"text-[10px] text-life-muted",children:"Inventory Empty"})})]})},lQ=()=>{var I;const{state:t,dispatch:e}=Ge(),{shopState:n}=mp(),{skillState:r}=an(),{taskState:i}=Er(),{habitState:s}=Ar(),{raidState:o}=Qr(),{campaignState:c}=zc(),{getAllBadges:f}=nL(),{user:d}=t,{storeItems:h}=n,[m,g]=L.useState(null),[v,b]=L.useState(Qs.currentUser);L.useEffect(()=>{const U=Qs.onAuthStateChanged(B=>b(B));return()=>U()},[]);const w=(r==null?void 0:r.skills)||[],S=w.length>0?w.reduce((U,B)=>U.level>B.level?U:B,w[0]):null,C=S?`${S.rank} ${S.title}`:d.title,R=((I=d.badges)==null?void 0:I.length)||0,N=f(),O=(d.featuredBadges||[]).map(U=>N.find(B=>B.badge.id===U)).filter(Boolean),k=d.inventory.map(U=>h.find(B=>B.id===U)).filter(Boolean),D=()=>{m&&(e.useItem(m.id),g(null))},M=()=>{const U={user:t.user,badgesRegistry:t.badgesRegistry,ui:{...t.ui,activeModal:"none",modalData:null},tasks:i.tasks,taskCategories:i.categories,laws:i.laws,habits:s.habits,habitCategories:s.categories,raids:o.raids,skills:r.skills,storeItems:n.storeItems,campaign:c.campaign,meta:{timestamp:new Date().toISOString(),version:"2.0",type:"full_backup"}},B=JSON.stringify(U,null,2);e.setModal("dataExchange",{mode:"export",title:"System Backup",data:B})},j=()=>{e.setModal("dataExchange",{mode:"import",title:"System Uplink"})};return l.jsxs("div",{className:"pb-24 animate-in fade-in zoom-in-95 duration-500 relative",children:[l.jsx(QJ,{user:d,dynamicTitle:C,featuredBadgesData:O}),l.jsxs("button",{onClick:()=>e.setView("hall_of_fame"),className:"w-full mb-6 bg-life-black border border-zinc-800 rounded-xl p-4 flex items-center justify-between hover:border-life-gold/50 hover:bg-life-gold/5 transition-all group shadow-lg",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-10 h-10 rounded-full bg-life-crimson/10 flex items-center justify-center text-life-crimson border border-life-crimson/20 group-hover:scale-110 transition-transform",children:l.jsx(gl,{size:20})}),l.jsxs("div",{className:"text-left",children:[l.jsx("h3",{className:"text-xs font-black text-life-text uppercase tracking-widest group-hover:text-life-gold transition-colors",children:"Hall of Glory"}),l.jsxs("p",{className:"text-[9px] text-life-muted uppercase tracking-[0.2em]",children:[R," Medals Secured"]})]})]}),l.jsx(jr,{size:20,className:"text-life-muted group-hover:text-life-gold"})]}),l.jsx(oQ,{user:d}),l.jsx(aQ,{items:k,onSelectItem:g}),l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 space-y-4 mt-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(yl,{size:14,className:"text-life-muted"}),l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Data Persistence"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:M,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-zinc-800 hover:border-life-gold/50 transition-all group",children:[l.jsx(yl,{size:20,className:"text-life-gold group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Backup System"})]}),l.jsxs("button",{onClick:j,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-zinc-800 hover:border-life-easy/50 transition-all group",children:[l.jsx(Uh,{size:20,className:"text-life-easy group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Restore Data"})]})]}),l.jsxs("button",{onClick:()=>e.setModal("resetConfirm"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-red-950/10 border border-red-900/30 hover:bg-red-900/20 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(U4,{size:16,className:"text-red-500"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-red-400",children:"Rebirth Protocol"})]}),l.jsx("span",{className:"text-[8px] font-mono text-red-900 font-bold",children:"DANGER_ZONE"})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 opacity-50",children:[l.jsx(md,{size:10,className:"text-life-easy"}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Local Storage Protocol Active"})]})]}),m&&l.jsx("div",{onClick:()=>g(null),className:"fixed inset-0 z-[250] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{onClick:U=>U.stopPropagation(),className:"bg-life-paper w-full max-w-xs rounded-xl border border-zinc-800 p-5 shadow-2xl relative",children:[l.jsx("button",{onClick:()=>g(null),className:"absolute top-3 right-3 text-life-muted hover:text-life-text",children:l.jsx(wt,{size:20})}),l.jsxs("div",{className:"flex flex-col items-center text-center mb-6",children:[l.jsx("div",{className:"w-20 h-20 rounded-full bg-life-black border border-zinc-800 flex items-center justify-center mb-3 text-life-gold shadow-inner",children:l.jsx(kT,{icon:m.icon,size:40})}),l.jsx("h3",{className:"font-black uppercase tracking-widest text-life-text",children:m.title}),l.jsx("p",{className:"text-[10px] text-life-muted mt-2 leading-relaxed uppercase",children:m.description})]}),l.jsx("div",{className:"flex flex-col gap-2",children:m.type==="artifact"?l.jsx("button",{onClick:()=>{e.toggleEquip(m.id),g(null)},className:`w-full py-4 font-black uppercase text-xs rounded-xl shadow-lg transition-all active:scale-95 ${d.equippedItems.includes(m.id)?"bg-life-muted/20 text-life-muted hover:bg-life-muted/30":"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20"}`,children:d.equippedItems.includes(m.id)?"Unequip Artifact":"Equip Artifact"}):l.jsx("button",{onClick:D,className:"w-full py-4 bg-life-gold text-life-black font-black uppercase text-xs rounded-xl hover:bg-yellow-400 shadow-lg shadow-life-gold/20 transition-all active:scale-95",children:"Consume Item"})})]})})]})},cQ=({onStart:t})=>{const[e,n]=L.useState(""),[r,i]=L.useState(new Date().toISOString().split("T")[0]),s=o=>{o.preventDefault(),e&&t(e,r)};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500 h-full flex flex-col justify-center",children:[l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-20 h-20 bg-life-black border border-life-gold rounded-full flex items-center justify-center mx-auto mb-4 shadow-[0_0_30px_rgba(251,191,36,0.2)]",children:l.jsx(Gi,{size:40,className:"text-life-gold"})}),l.jsx("h2",{className:"text-3xl font-black text-life-text tracking-tighter uppercase mb-2",children:"Operation Tempo"}),l.jsx("p",{className:"text-sm text-life-muted max-w-xs mx-auto",children:'"The year is not 12 months. It is 12 weeks. No time for hesitation."'})]}),l.jsxs("form",{onSubmit:s,className:"bg-life-paper border border-life-muted/20 p-6 rounded-2xl shadow-xl space-y-6",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Campaign Objective (Title)"}),l.jsx("input",{type:"text",value:e,onChange:o=>n(o.target.value),placeholder:"e.g. Project Spartan, Winter Arc...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none font-bold",autoFocus:!0})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Start Date (Zero Point)"}),l.jsx("input",{type:"date",value:r,onChange:o=>i(o.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none"})]}),l.jsxs("button",{type:"submit",disabled:!e,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest flex items-center justify-center gap-2 transition-all
                        ${e?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-lg shadow-life-gold/20":"bg-life-muted/20 text-life-muted cursor-not-allowed"}
                    `,children:[l.jsx(pp,{size:18,fill:"currentColor"})," Initiate Campaign"]})]})]})},uQ=({stats:t,onComplete:e})=>{const n=t.grade==="S"?"text-life-diamond":t.grade==="A"?"text-life-gold":t.grade==="F"?"text-life-hard":"text-life-text";return l.jsxs("div",{className:"relative overflow-hidden rounded-2xl border-2 border-life-gold bg-life-black p-6 shadow-[0_0_30px_rgba(251,191,36,0.15)] animate-in zoom-in-95 duration-700",children:[l.jsx("div",{className:"absolute inset-0 bg-life-gold/5 animate-pulse-slow pointer-events-none"}),l.jsx("div",{className:"absolute -right-10 -top-10 opacity-10 rotate-12",children:l.jsx(WX,{size:150,className:"text-life-gold"})}),l.jsxs("div",{className:"relative z-10 text-center",children:[l.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-[0.3em] mb-4",children:"The Harvest is Here"}),l.jsxs("div",{className:"flex flex-col items-center mb-6",children:[l.jsx("div",{className:`text-6xl font-black ${n} drop-shadow-2xl`,children:t.grade}),l.jsx("div",{className:"text-xs text-life-muted font-bold uppercase tracking-widest mt-2 border-t border-b border-life-muted/20 py-1 px-4",children:"Campaign Rank"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[l.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20",children:[l.jsxs("div",{className:"text-2xl font-black text-life-text",children:[t.completionRate,"%"]}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Efficiency"})]}),l.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20",children:[l.jsx("div",{className:"text-2xl font-black text-life-gold",children:t.raidCount}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Ops Won"})]}),l.jsxs("div",{className:"bg-life-paper/50 p-3 rounded-xl border border-life-muted/20 col-span-2 flex items-center justify-between px-6",children:[l.jsxs("div",{className:"text-left",children:[l.jsxs("div",{className:"text-xl font-black text-life-text",children:[t.completedTasks," ",l.jsxs("span",{className:"text-life-muted text-sm",children:["/ ",t.totalTasks]})]}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase tracking-widest",children:"Missions Cleared"})]}),l.jsx(Gy,{size:24,className:"text-life-gold opacity-50"})]})]}),l.jsxs("button",{onClick:e,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.3)] transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-2",children:[l.jsx(Fy,{size:20,strokeWidth:3})," Reap & Reset Cycle"]}),l.jsx("p",{className:"text-[9px] text-life-muted mt-3 opacity-60",children:"Archiving this campaign will reset the timeline for the next 12-week cycle."})]})]})},LI=({title:t,isCompleted:e,type:n,onToggle:r,onOpenDetails:i,colorClass:s})=>l.jsxs("div",{onClick:o=>{o.stopPropagation(),i()},className:`group flex items-center gap-3 p-2 rounded-lg border mb-1 cursor-pointer transition-all ${e?"bg-life-black border-life-muted/10 opacity-50":"bg-life-paper border-life-muted/20 hover:border-life-gold/30 hover:bg-life-muted/5"}`,children:[l.jsx("div",{onClick:o=>{o.stopPropagation(),r()},className:`w-6 h-6 rounded flex items-center justify-center transition-all cursor-pointer z-10 hover:scale-110 ${e?"bg-life-muted border border-life-muted text-life-black":"border-2 border-life-muted/30 text-transparent hover:border-life-gold"}`,children:l.jsx(xs,{size:14,strokeWidth:4,className:e?"scale-100":"scale-0"})}),l.jsx("div",{className:"flex-1 min-w-0",children:l.jsx("div",{className:`text-xs font-medium truncate ${e?"line-through text-life-muted":"text-life-text"}`,children:t})}),n==="raid"&&l.jsx("div",{className:`px-1.5 py-0.5 rounded text-[8px] font-black uppercase tracking-wider ${s} bg-opacity-10`,children:"OP"})]}),dQ=()=>{const{campaignState:t,campaignDispatch:e}=zc(),{taskState:n,taskDispatch:r}=Er(),{raidState:i,raidDispatch:s}=Qr(),{state:o,dispatch:c}=Ge(),{campaign:f}=t,{unlockAllWeeks:d}=o.user.preferences,[h,m]=L.useState(null),g=()=>{c.setModal("confirmation",{title:"Abort Campaign?",message:"Terminate timeline? All schedule data will be lost.",confirmText:"Abort Protocol",isDangerous:!0,onConfirm:()=>e.resetCampaign()})},v=(k,D)=>{const M=new Date(k),j=new Date(M.getTime()+(D-1)*7*864e5),I=new Date(j.getTime()+6*864e5),U={month:"short",day:"numeric"};return`${j.toLocaleDateString(void 0,U)} - ${I.toLocaleDateString(void 0,U)}`},b=(k,D,M)=>new Date(new Date(k).getTime()+((D-1)*7+(M-1))*864e5).toLocaleDateString(void 0,{weekday:"short",day:"numeric"}),w=(k,D,M)=>{const j=new Date(new Date(k).getTime()+((D-1)*7+(M-1))*864e5),I=U=>U.toString().padStart(2,"0");return`${j.getFullYear()}-${I(j.getMonth()+1)}-${I(j.getDate())}T12:00`},S=k=>{if(!f.startDate)return{tasks:[],raidSteps:[]};const D=new Date(f.startDate),M=new Date(D.getTime()+(k-1)*7*864e5);M.setHours(0,0,0,0);const j=new Date(M.getTime()+6*864e5);j.setHours(23,59,59,999);const I=n.tasks.filter(B=>{if(!B.deadline||B.isArchived)return!1;const P=new Date(B.deadline);return P>=M&&P<=j}),U=[];return i.raids.forEach(B=>{B.status!=="archived"&&B.steps.forEach(P=>{if(P.scheduledDate&&!P.isArchived){const F=new Date(P.scheduledDate);F>=M&&F<=j&&U.push({raidId:B.id,raidTitle:B.title,step:P})}})}),{weekTasks:I,weekRaidSteps:U}},C=()=>{if(!f.startDate)return{grade:"F",completionRate:0,totalTasks:0,completedTasks:0,raidCount:0};const k=new Date(f.startDate);let D=0,M=0,j=0;n.tasks.forEach(B=>{B.isArchived||B.deadline&&new Date(B.deadline)>=k&&(D++,B.isCompleted&&M++)}),i.raids.forEach(B=>{B.status==="completed"&&j++});const I=D>0?Math.round(M/D*100):0;let U="F";return I>=95?U="S":I>=85?U="A":I>=70?U="B":I>=50?U="C":I>=30&&(U="D"),{grade:U,completionRate:I,totalTasks:D,completedTasks:M,raidCount:j}};if(!f.isActive||!f.startDate)return l.jsx(cQ,{onStart:e.initCampaign});const R=f.currentWeek>=13,N=Math.min(100,(f.currentWeek-1)/12*100),O=Array.from({length:13},(k,D)=>D+1);return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight uppercase truncate max-w-[200px] sm:max-w-none",children:f.title}),l.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[l.jsx("span",{className:`text-xs px-2 py-0.5 rounded font-bold uppercase tracking-wider ${f.isFrozen?"bg-blue-500/20 text-blue-400":"bg-life-gold/20 text-life-gold"}`,children:f.isFrozen?" Frozen":R?" Harvest":`Week ${f.currentWeek} / 12`}),!R&&l.jsxs("span",{className:"text-[10px] text-life-muted uppercase tracking-widest",children:[" Day ",f.currentDay]})]})]}),l.jsxs("div",{className:"text-life-gold opacity-50 flex items-center gap-2",children:[d&&l.jsx("span",{title:"Horus Eye Active",children:l.jsx(Hy,{size:16,className:"animate-pulse text-life-crimson"})}),l.jsx(Gi,{size:24})]})]}),l.jsxs("div",{className:"mb-8",children:[l.jsx("div",{className:"h-2 w-full bg-life-black rounded-full overflow-hidden border border-life-muted/20 relative",children:l.jsx("div",{className:`h-full transition-all duration-1000 ${f.isFrozen?"bg-blue-500":"bg-life-gold"}`,style:{width:`${N}%`}})}),l.jsxs("div",{className:"flex justify-between mt-1 text-[9px] text-life-muted uppercase font-mono",children:[l.jsx("span",{children:"Start"}),l.jsx("span",{children:"Week 6"}),l.jsx("span",{children:"Harvest"})]})]}),l.jsx("div",{className:"space-y-3",children:O.map(k=>{const D=k<f.currentWeek,M=k===f.currentWeek,j=M||d&&!D,I=k===13,U=v(f.startDate,k),{weekTasks:B,weekRaidSteps:P}=S(k),F=B.length>0||P.length>0,z=B.filter(K=>K.isCompleted).length+P.filter(K=>K.step.isCompleted).length,Q=B.length+P.length,W=Q>0?Math.round(z/Q*100):0;if(I)return l.jsx(uQ,{stats:C(),onComplete:e.completeCampaign},k);if(D){const K=h===k;return l.jsxs("div",{onClick:()=>m(K?null:k),className:`border-l-4 rounded-r-lg bg-life-black transition-all cursor-pointer group ${K?"border-life-muted/50 bg-life-paper pb-2":"border-life-muted/20 opacity-60 hover:opacity-100"}`,children:[l.jsxs("div",{className:"p-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsxs("div",{className:"w-6 h-6 rounded bg-life-muted/20 flex items-center justify-center text-[10px] font-bold text-life-muted",children:["W",k]}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-bold text-life-muted group-hover:text-life-text transition-colors flex items-center gap-2",children:[l.jsxs("span",{className:"line-through",children:["Week ",k]}),l.jsx("span",{className:"text-[9px] px-1.5 py-0.5 rounded bg-life-muted/10 text-life-muted no-underline",children:"COMPLETE"})]}),l.jsxs("p",{className:"text-[9px] text-life-muted/50 font-mono mt-0.5",children:[U,"  ",W,"% Executed"]})]})]}),l.jsx("div",{className:"text-life-muted",children:K?l.jsx(Wr,{size:14}):l.jsx(xs,{size:14})})]}),K&&l.jsxs("div",{className:"px-3 pt-0 animate-in slide-in-from-top-2",children:[l.jsx("div",{className:"h-px w-full bg-life-muted/10 mb-2"}),F?l.jsxs("div",{className:"space-y-1 opacity-70",children:[B.map(te=>l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-life-muted line-through",children:[l.jsx(Fi,{size:10})," ",te.title]},te.id)),P.map(({raidTitle:te,step:ne})=>l.jsxs("div",{className:"flex items-center gap-2 text-[10px] text-life-muted line-through",children:[l.jsx(Oc,{size:10})," ",te,": ",ne.title]},ne.id))]}):l.jsx("p",{className:"text-[10px] text-life-muted italic",children:"No logs recorded."})]})]},k)}return j?l.jsxs("div",{className:`relative rounded-xl border ${M?"border-life-gold bg-life-paper":"border-life-muted/30 bg-life-black/50 border-dashed"} shadow-[0_0_15px_rgba(251,191,36,0.05)] overflow-hidden`,children:[f.isFrozen&&M&&l.jsx("div",{className:"absolute inset-0 bg-blue-500/10 backdrop-blur-[1px] z-10 flex items-center justify-center border border-blue-500/30 rounded-xl",children:l.jsxs("div",{className:"bg-life-black px-4 py-2 rounded-full border border-blue-500 text-blue-400 flex items-center gap-2 text-xs font-bold uppercase tracking-widest shadow-xl",children:[l.jsx(PI,{size:14})," Timeline Frozen"]})}),l.jsxs("div",{className:`p-4 border-b border-life-muted/10 flex justify-between items-start ${M?"bg-life-gold/5":"bg-transparent"}`,children:[l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[l.jsxs("span",{className:`text-xs font-black uppercase tracking-wider ${M?"text-life-gold":"text-life-muted"}`,children:["Week ",k]}),M&&l.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-red-500 animate-pulse"}),!M&&d&&l.jsx("div",{className:"text-[8px] border border-life-crimson text-life-crimson px-1 rounded uppercase",children:"God Mode"})]}),l.jsxs("div",{className:"text-[10px] font-mono text-life-muted flex items-center gap-1",children:[l.jsx(vn,{size:10})," ",U]})]}),M&&l.jsx("div",{className:"text-[10px] px-2 py-1 rounded bg-life-gold text-life-black font-bold uppercase tracking-widest shadow-sm",children:"Current Front"})]}),l.jsx("div",{className:"p-2 space-y-2",children:[1,2,3,4,5,6,7].map(K=>{const te=K===f.currentDay&&M,ne=B.filter(X=>new Date(X.deadline).getDate()===new Date(new Date(f.startDate).getTime()+((k-1)*7+(K-1))*864e5).getDate()),xe=P.filter(({step:X})=>new Date(X.scheduledDate).getDate()===new Date(new Date(f.startDate).getTime()+((k-1)*7+(K-1))*864e5).getDate()),G=ne.length>0||xe.length>0;return!te&&!G?null:l.jsxs("div",{className:`rounded-lg border ${te?"border-life-gold/30 bg-life-gold/5":"border-life-muted/10 bg-life-black/50"} p-2`,children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsxs("span",{className:`text-[10px] font-black uppercase ${te?"text-life-gold":"text-life-muted"}`,children:["Day ",K]}),l.jsx("span",{className:"text-[9px] text-life-muted font-mono opacity-70",children:b(f.startDate,k,K)})]}),l.jsxs("div",{className:"flex items-center gap-2",children:[te&&l.jsx("span",{className:"text-[8px] px-1 rounded bg-life-gold text-life-black font-bold uppercase",children:"Today"}),l.jsx("button",{onClick:()=>c.setModal("addTask",{date:w(f.startDate,k,K),origin:"campaign"}),className:"w-5 h-5 rounded flex items-center justify-center bg-life-muted/10 hover:bg-life-gold text-life-muted hover:text-life-black transition-all",title:"Tactical Insert",children:l.jsx(kn,{size:12})})]})]}),G?l.jsxs("div",{className:"space-y-1",children:[ne.map(X=>l.jsx(LI,{title:X.title,isCompleted:X.isCompleted,type:"mission",onToggle:()=>r.toggleTask(X.id),onOpenDetails:()=>c.setModal("itemDetails",{itemId:X.id,type:"task"}),colorClass:"text-life-text"},X.id)),xe.map(({raidId:X,raidTitle:de,step:ce})=>l.jsx(LI,{title:`${de}: ${ce.title}`,isCompleted:ce.isCompleted,type:"raid",onToggle:()=>s.toggleRaidStep(X,ce.id),onOpenDetails:()=>c.setModal("itemDetails",{itemId:ce.id,parentId:X,type:"raid_step"}),colorClass:"text-life-hard"},ce.id))]}):l.jsx("div",{className:"text-[9px] text-life-muted/30 italic text-center py-2 border border-dashed border-life-muted/10 rounded",children:"No tactical objectives."})]},K)})})]},k):l.jsxs("div",{className:"border border-life-muted/10 rounded-xl bg-life-black opacity-60 hover:opacity-100 transition-opacity",children:[l.jsxs("div",{className:"p-3 flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded bg-life-muted/10 flex items-center justify-center text-xs font-bold text-life-muted",children:k}),l.jsxs("div",{children:[l.jsxs("h4",{className:"text-xs font-bold text-life-text uppercase tracking-wider",children:["Week ",k]}),l.jsxs("p",{className:"text-[9px] text-life-muted font-mono",children:[U,"  ",Q," Objectives"]})]})]}),l.jsx(jd,{size:14,className:"text-life-muted/30"})]}),F&&l.jsxs("div",{className:"px-3 pb-3 pt-0",children:[l.jsx("div",{className:"h-px w-full bg-life-muted/10 mb-2"}),l.jsxs("div",{className:"flex flex-wrap gap-1",children:[B.map(K=>l.jsx("div",{className:"w-2 h-2 rounded-full bg-life-muted",title:K.title},K.id)),P.map(({raidTitle:K,step:te})=>l.jsx("div",{className:"w-2 h-2 rounded-full bg-life-hard",title:`${K}: ${te.title}`},te.id))]})]})]},k)})}),l.jsxs("div",{className:"mt-8 pt-8 border-t border-life-muted/10 flex justify-between",children:[l.jsxs("button",{onClick:e.toggleFreeze,className:`flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider transition-colors ${f.isFrozen?"text-blue-400 hover:text-blue-300":"text-life-muted hover:text-blue-400"}`,children:[l.jsx(PI,{size:14,className:f.isFrozen?"animate-pulse":""})," ",f.isFrozen?"Resume Timeline":"Freeze Time"]}),l.jsxs("button",{onClick:g,className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider text-life-muted hover:text-life-hard transition-colors",children:[l.jsx(Ch,{size:14})," Abort Campaign"]})]})]})},fQ=({stat:t,size:e=14})=>{switch(t){case ae.STR:return l.jsx(Jr,{size:e});case ae.INT:return l.jsx(xn,{size:e});case ae.DIS:return l.jsx(St,{size:e});case ae.HEA:return l.jsx(vi,{size:e});case ae.CRT:return l.jsx(hr,{size:e});case ae.SPR:return l.jsx(fr,{size:e});case ae.REL:return l.jsx(xi,{size:e});case ae.FIN:return l.jsx(Kn,{size:e});default:return l.jsx(hn,{size:e})}},zI={Novice:"text-life-muted border-life-muted",Adept:"text-life-normal border-life-normal",Expert:"text-purple-400 border-purple-400",Master:"text-life-gold border-life-gold",Grandmaster:"text-life-diamond border-life-diamond"},hQ=({skill:t})=>{const{skillDispatch:e}=an(),n=Math.min(100,t.currentXP/t.targetXP*100),r=zI[t.rank]||zI.Novice,i=r.split(" ")[0];return l.jsxs("div",{onClick:()=>e.setActiveSkill(t.id),className:`
                relative bg-life-paper border rounded-xl overflow-hidden mb-3 transition-all duration-200 
                hover:bg-life-muted/5 hover:scale-[1.01] active:scale-[0.99] cursor-pointer group 
                ${t.isRusty?"border-orange-900/50":"border-zinc-800"}
            `,children:[t.isRusty&&l.jsx("div",{className:"absolute top-2 right-2 text-orange-500 animate-pulse",title:"Skill is Rusty! Perform tasks to restore.",children:l.jsx(yo,{size:16})}),l.jsxs("div",{className:"p-4",children:[l.jsxs("div",{className:"flex justify-between items-start mb-2",children:[l.jsxs("div",{children:[l.jsx("h3",{className:`text-base font-bold text-life-text flex items-center gap-2 ${t.isRusty?"text-life-muted line-through opacity-70":""}`,children:t.title}),l.jsx("div",{className:"flex gap-1 mt-1",children:t.relatedStats.map(s=>l.jsxs("div",{className:"flex items-center gap-1 px-1.5 py-0.5 rounded bg-life-black border border-zinc-800 text-[9px] font-bold",style:{color:$t[s],borderColor:`${$t[s]}30`},children:[l.jsx(fQ,{stat:s,size:10}),l.jsx("span",{children:s})]},s))})]}),l.jsx("div",{className:`px-2 py-1 rounded border bg-life-black text-[10px] uppercase font-black tracking-wider ${r} bg-opacity-20`,children:t.rank})]}),t.description&&l.jsx("p",{className:"text-xs text-life-muted/60 mb-3 line-clamp-1",children:t.description}),l.jsxs("div",{className:"relative pt-1",children:[l.jsxs("div",{className:"flex justify-between text-[10px] font-mono font-bold mb-1",children:[l.jsxs("span",{className:i,children:["LVL ",t.level]}),l.jsxs("span",{className:"text-life-muted",children:[t.currentXP," / ",t.targetXP," XP"]})]}),l.jsx("div",{className:"h-1.5 w-full bg-life-black rounded-full overflow-hidden border border-zinc-800",children:l.jsx("div",{className:`h-full transition-all duration-700 ${t.isRusty?"bg-life-muted":"bg-current"}`,style:{width:`${n}%`,color:t.rank==="Novice"?"#9ca3af":void 0},children:l.jsx("div",{className:`w-full h-full ${i.replace("text-","bg-")} opacity-80 shadow-[0_0_10px_currentColor]`})})})]})]})]})},rL=({onClose:t,initialData:e})=>{const{skillDispatch:n}=an(),[r,i]=L.useState(""),[s,o]=L.useState(""),[c,f]=L.useState([]);L.useEffect(()=>{e&&(i(e.title),o(e.description||""),f(e.relatedStats||[]))},[e]);const d=g=>{g.preventDefault(),r.trim()&&c.length!==0&&(e?n.updateSkill(e.id,{title:r,description:s,relatedStats:c}):n.addSkill(r,c,s),t())},h=g=>{c.includes(g)?f(c.filter(v=>v!==g)):c.length<3&&f([...c,g])},m=({type:g})=>{switch(g){case ae.STR:return l.jsx(Jr,{size:18});case ae.INT:return l.jsx(xn,{size:18});case ae.DIS:return l.jsx(St,{size:18});case ae.HEA:return l.jsx(vi,{size:18});case ae.CRT:return l.jsx(hr,{size:18});case ae.SPR:return l.jsx(fr,{size:18});case ae.REL:return l.jsx(xi,{size:18});case ae.FIN:return l.jsx(Kn,{size:18});default:return l.jsx(hn,{size:18})}};return l.jsxs("form",{onSubmit:d,className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Skill Name"}),l.jsx("input",{type:"text",value:r,onChange:g=>i(g.target.value),placeholder:"e.g. Graphic Design, MMA...",autoFocus:!0,className:"w-full bg-life-black border border-zinc-800 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Description"}),l.jsx("textarea",{rows:2,value:s,onChange:g=>o(g.target.value),placeholder:"Define the scope of this ability...",className:"w-full bg-life-black border border-zinc-800 rounded-lg p-3 text-sm text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Parent Attributes (Select 1-3)"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ae).map(g=>{const v=c.includes(g);return l.jsxs("button",{type:"button",onClick:()=>h(g),className:`
                                    flex flex-col items-center justify-center p-2 rounded-lg border transition-all aspect-square relative
                                    ${v?"bg-life-muted/10 border-current shadow-lg scale-105":"border-zinc-800 text-life-muted hover:bg-life-muted/5 opacity-70 hover:opacity-100"}
                                `,style:{color:v?$t[g]:void 0},children:[l.jsx(m,{type:g}),l.jsx("span",{className:"text-[9px] font-bold mt-1",children:g}),v&&l.jsx("div",{className:"absolute top-1 right-1 w-2 h-2 rounded-full bg-current shadow-[0_0_5px_currentColor]"})]},g)})}),c.length===0&&l.jsx("p",{className:"text-[10px] text-life-hard mt-2 opacity-80",children:"* Required: Link at least one attribute."})]}),l.jsxs("button",{type:"submit",className:`
                    w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all mt-4
                    ${r&&c.length>0?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]":"border-zinc-800 text-life-muted cursor-not-allowed"}
                `,disabled:!r||c.length===0,children:[e?"Update Skill":"Acquire Skill"," ",l.jsx(jr,{size:16})]})]})},pQ=()=>{const{skillState:t}=an(),{dispatch:e}=Ge(),{skills:n}=t,[r,i]=L.useState(!1),s=[...n].sort((c,f)=>c.isRusty&&!f.isRusty?-1:!c.isRusty&&f.isRusty?1:f.level-c.level),o=()=>{const c={meta:{type:"SKILL_ARSENAL_EXPORT",generatedAt:new Date().toISOString(),count:n.length},skills:n.map(d=>({id:d.id,title:d.title,level:d.level,rank:d.rank,relatedStats:d.relatedStats,description:d.description,currentXP:d.currentXP,targetXP:d.targetXP,isRusty:d.isRusty}))},f=JSON.stringify(c,null,2);e.setModal("dataExchange",{mode:"export",title:"The Arsenal Codex",data:f})};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"THE ARSENAL"}),l.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:["Skill Tree  ",n.length," Abilities Acquired"]})]}),l.jsx("button",{onClick:o,className:"p-3 rounded-xl bg-life-paper/50 border border-zinc-800 text-life-gold hover:bg-life-gold/10 hover:border-life-gold/50 transition-all group active:scale-95",title:"Export Skill Codex",children:l.jsx(pi,{size:20,className:"group-hover:scale-110 transition-transform"})})]}),l.jsx("div",{className:"mb-6",children:l.jsxs("button",{onClick:()=>i(!0),className:"w-full py-3 rounded-xl border border-dashed border-zinc-800 bg-life-paper/50 text-life-muted hover:text-life-gold hover:border-life-gold/50 hover:bg-life-gold/5 transition-all flex items-center justify-center gap-2 text-xs font-bold uppercase tracking-widest group",children:[l.jsx(kn,{size:16,className:"group-hover:scale-110 transition-transform"}),"Acquire New Skill"]})}),l.jsx("div",{children:s.length>0?s.map(c=>l.jsx(hQ,{skill:c},c.id)):l.jsxs("div",{className:"py-12 text-center border-2 border-dashed border-zinc-800 rounded-xl bg-life-paper/30",children:[l.jsx(St,{size:32,className:"mx-auto text-life-muted mb-3 opacity-50"}),l.jsx("p",{className:"text-life-muted text-sm font-bold",children:"No Skills Learned"}),l.jsx("p",{className:"text-[10px] text-life-muted/60 mt-1 uppercase tracking-wider",children:"Acquire new skills to track your progress."})]})}),r&&l.jsx("div",{onClick:()=>i(!1),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{onClick:c=>c.stopPropagation(),className:"bg-life-paper w-full max-w-lg rounded-2xl border border-zinc-800 shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 slide-in-from-bottom-4",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800 bg-life-black/50",children:[l.jsxs("h3",{className:"text-sm font-black tracking-tight text-life-text flex items-center gap-2 uppercase",children:[l.jsx(pi,{size:16,className:"text-life-gold"})," Acquire Skill"]}),l.jsx("button",{onClick:()=>i(!1),className:"w-8 h-8 rounded-full flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/20 transition-all",children:l.jsx(wt,{size:20})})]}),l.jsx("div",{className:"p-6 overflow-y-auto",children:l.jsx(rL,{onClose:()=>i(!1)})})]})})]})};function iL(t){var e,n,r="";if(typeof t=="string"||typeof t=="number")r+=t;else if(typeof t=="object")if(Array.isArray(t)){var i=t.length;for(e=0;e<i;e++)t[e]&&(n=iL(t[e]))&&(r&&(r+=" "),r+=n)}else for(n in t)t[n]&&(r&&(r+=" "),r+=n);return r}function Qt(){for(var t,e,n=0,r="",i=arguments.length;n<i;n++)(t=arguments[n])&&(e=iL(t))&&(r&&(r+=" "),r+=e);return r}var mQ=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function IT(t){if(typeof t!="string")return!1;var e=mQ;return e.includes(t)}var gQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],yQ=new Set(gQ);function sL(t){return typeof t!="string"?!1:yQ.has(t)}function oL(t){return typeof t=="string"&&t.startsWith("data-")}function fo(t){if(typeof t!="object"||t===null)return{};var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(sL(n)||oL(n))&&(e[n]=t[n]);return e}function Yy(t){if(t==null)return null;if(L.isValidElement(t)&&typeof t.props=="object"&&t.props!==null){var e=t.props;return fo(e)}return typeof t=="object"&&!Array.isArray(t)?fo(t):null}function Bi(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(sL(n)||oL(n)||IT(n))&&(e[n]=t[n]);return e}function vQ(t){return t==null?null:L.isValidElement(t)?Bi(t.props):typeof t=="object"&&!Array.isArray(t)?Bi(t):null}var xQ=["children","width","height","viewBox","className","style","title","desc"];function xw(){return xw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},xw.apply(null,arguments)}function bQ(t,e){if(t==null)return{};var n,r,i=_Q(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function _Q(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var aL=L.forwardRef((t,e)=>{var{children:n,width:r,height:i,viewBox:s,className:o,style:c,title:f,desc:d}=t,h=bQ(t,xQ),m=s||{width:r,height:i,x:0,y:0},g=Qt("recharts-surface",o);return L.createElement("svg",xw({},Bi(h),{className:g,width:r,height:i,style:c,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height),ref:e}),L.createElement("title",null,f),L.createElement("desc",null,d),n)}),wQ=["children","className"];function bw(){return bw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bw.apply(null,arguments)}function SQ(t,e){if(t==null)return{};var n,r,i=TQ(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function TQ(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var ho=L.forwardRef((t,e)=>{var{children:n,className:r}=t,i=SQ(t,wQ),s=Qt("recharts-layer",r);return L.createElement("g",bw({className:s},Bi(i),{ref:e}),n)}),lL=ZO(),EQ=L.createContext(null);function dn(t){return function(){return t}}const _w=Math.PI,ww=2*_w,nc=1e-6,AQ=ww-nc;function cL(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function CQ(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return cL;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class NQ{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?cL:CQ(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,o){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,c=this._y1,f=r-e,d=i-n,h=o-e,m=c-n,g=h*h+m*m;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(g>nc)if(!(Math.abs(m*f-d*h)>nc)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-o,b=i-c,w=f*f+d*d,S=v*v+b*b,C=Math.sqrt(w),R=Math.sqrt(g),N=s*Math.tan((_w-Math.acos((w+g-S)/(2*C*R)))/2),O=N/R,k=N/C;Math.abs(O-1)>nc&&this._append`L${e+O*h},${n+O*m}`,this._append`A${s},${s},0,0,${+(m*v>h*b)},${this._x1=e+k*f},${this._y1=n+k*d}`}}arc(e,n,r,i,s,o){if(e=+e,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let c=r*Math.cos(i),f=r*Math.sin(i),d=e+c,h=n+f,m=1^o,g=o?i-s:s-i;this._x1===null?this._append`M${d},${h}`:(Math.abs(this._x1-d)>nc||Math.abs(this._y1-h)>nc)&&this._append`L${d},${h}`,r&&(g<0&&(g=g%ww+ww),g>AQ?this._append`A${r},${r},0,1,${m},${e-c},${n-f}A${r},${r},0,1,${m},${this._x1=d},${this._y1=h}`:g>nc&&this._append`A${r},${r},0,${+(g>=_w)},${m},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function uL(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new NQ(e)}function RT(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function dL(t){this._context=t}dL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e);break}}};function Xy(t){return new dL(t)}function fL(t){return t[0]}function hL(t){return t[1]}function pL(t,e){var n=dn(!0),r=null,i=Xy,s=null,o=uL(c);t=typeof t=="function"?t:t===void 0?fL:dn(t),e=typeof e=="function"?e:e===void 0?hL:dn(e);function c(f){var d,h=(f=RT(f)).length,m,g=!1,v;for(r==null&&(s=i(v=o())),d=0;d<=h;++d)!(d<h&&n(m=f[d],d,f))===g&&((g=!g)?s.lineStart():s.lineEnd()),g&&s.point(+t(m,d,f),+e(m,d,f));if(v)return s=null,v+""||null}return c.x=function(f){return arguments.length?(t=typeof f=="function"?f:dn(+f),c):t},c.y=function(f){return arguments.length?(e=typeof f=="function"?f:dn(+f),c):e},c.defined=function(f){return arguments.length?(n=typeof f=="function"?f:dn(!!f),c):n},c.curve=function(f){return arguments.length?(i=f,r!=null&&(s=i(r)),c):i},c.context=function(f){return arguments.length?(f==null?r=s=null:s=i(r=f),c):r},c}function ug(t,e,n){var r=null,i=dn(!0),s=null,o=Xy,c=null,f=uL(d);t=typeof t=="function"?t:t===void 0?fL:dn(+t),e=typeof e=="function"?e:dn(e===void 0?0:+e),n=typeof n=="function"?n:n===void 0?hL:dn(+n);function d(m){var g,v,b,w=(m=RT(m)).length,S,C=!1,R,N=new Array(w),O=new Array(w);for(s==null&&(c=o(R=f())),g=0;g<=w;++g){if(!(g<w&&i(S=m[g],g,m))===C)if(C=!C)v=g,c.areaStart(),c.lineStart();else{for(c.lineEnd(),c.lineStart(),b=g-1;b>=v;--b)c.point(N[b],O[b]);c.lineEnd(),c.areaEnd()}C&&(N[g]=+t(S,g,m),O[g]=+e(S,g,m),c.point(r?+r(S,g,m):N[g],n?+n(S,g,m):O[g]))}if(R)return c=null,R+""||null}function h(){return pL().defined(i).curve(o).context(s)}return d.x=function(m){return arguments.length?(t=typeof m=="function"?m:dn(+m),r=null,d):t},d.x0=function(m){return arguments.length?(t=typeof m=="function"?m:dn(+m),d):t},d.x1=function(m){return arguments.length?(r=m==null?null:typeof m=="function"?m:dn(+m),d):r},d.y=function(m){return arguments.length?(e=typeof m=="function"?m:dn(+m),n=null,d):e},d.y0=function(m){return arguments.length?(e=typeof m=="function"?m:dn(+m),d):e},d.y1=function(m){return arguments.length?(n=m==null?null:typeof m=="function"?m:dn(+m),d):n},d.lineX0=d.lineY0=function(){return h().x(t).y(e)},d.lineY1=function(){return h().x(t).y(n)},d.lineX1=function(){return h().x(r).y(e)},d.defined=function(m){return arguments.length?(i=typeof m=="function"?m:dn(!!m),d):i},d.curve=function(m){return arguments.length?(o=m,s!=null&&(c=o(s)),d):o},d.context=function(m){return arguments.length?(m==null?s=c=null:c=o(s=m),d):s},d}class mL{constructor(e,n){this._context=e,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(e,n){switch(e=+e,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(e,n):this._context.moveTo(e,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,n,e,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,e,this._y0,e,n);break}}this._x0=e,this._y0=n}}function kQ(t){return new mL(t,!0)}function IQ(t){return new mL(t,!1)}function C0(){}function N0(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function gL(t){this._context=t}gL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:N0(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:N0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function RQ(t){return new gL(t)}function yL(t){this._context=t}yL.prototype={areaStart:C0,areaEnd:C0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:N0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function PQ(t){return new yL(t)}function vL(t){this._context=t}vL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:N0(this,t,e);break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}};function jQ(t){return new vL(t)}function xL(t){this._context=t}xL.prototype={areaStart:C0,areaEnd:C0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}};function MQ(t){return new xL(t)}function UI(t){return t<0?-1:1}function VI(t,e,n){var r=t._x1-t._x0,i=e-t._x1,s=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),c=(s*i+o*r)/(r+i);return(UI(s)+UI(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(c))||0}function FI(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function s1(t,e,n){var r=t._x0,i=t._y0,s=t._x1,o=t._y1,c=(s-r)/3;t._context.bezierCurveTo(r+c,i+c*e,s-c,o-c*n,s,o)}function k0(t){this._context=t}k0.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:s1(this,this._t0,FI(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,!(t===this._x1&&e===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,s1(this,FI(this,n=VI(this,t,e)),n);break;default:s1(this,this._t0,n=VI(this,t,e));break}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}};function bL(t){this._context=new _L(t)}(bL.prototype=Object.create(k0.prototype)).point=function(t,e){k0.prototype.point.call(this,e,t)};function _L(t){this._context=t}_L.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,s){this._context.bezierCurveTo(e,t,r,n,s,i)}};function DQ(t){return new k0(t)}function OQ(t){return new bL(t)}function wL(t){this._context=t}wL.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),n===2)this._context.lineTo(t[1],e[1]);else for(var r=BI(t),i=BI(e),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],t[o],e[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}};function BI(t){var e,n=t.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=t[0]+2*t[1],e=1;e<n-1;++e)i[e]=1,s[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*t[n-1]+t[n],e=1;e<n;++e)r=i[e]/s[e-1],s[e]-=r,o[e]-=r*o[e-1];for(i[n-1]=o[n-1]/s[n-1],e=n-2;e>=0;--e)i[e]=(o[e]-i[e+1])/s[e];for(s[n-1]=(t[n]+i[n-1])/2,e=0;e<n-1;++e)s[e]=2*t[e+1]-i[e+1];return[i,s]}function LQ(t){return new wL(t)}function Jy(t,e){this._context=t,this._t=e}Jy.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}break}}this._x=t,this._y=e}};function zQ(t){return new Jy(t,.5)}function UQ(t){return new Jy(t,0)}function VQ(t){return new Jy(t,1)}function Ec(t,e){if((o=t.length)>1)for(var n=1,r,i,s=t[e[0]],o,c=s.length;n<o;++n)for(i=s,s=t[e[n]],r=0;r<c;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Sw(t){for(var e=t.length,n=new Array(e);--e>=0;)n[e]=e;return n}function FQ(t,e){return t[e]}function BQ(t){const e=[];return e.key=t,e}function HQ(){var t=dn([]),e=Sw,n=Ec,r=FQ;function i(s){var o=Array.from(t.apply(this,arguments),BQ),c,f=o.length,d=-1,h;for(const m of s)for(c=0,++d;c<f;++c)(o[c][d]=[0,+r(m,o[c].key,d,s)]).data=m;for(c=0,h=RT(e(o));c<f;++c)o[h[c]].index=c;return n(o,h),o}return i.keys=function(s){return arguments.length?(t=typeof s=="function"?s:dn(Array.from(s)),i):t},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:dn(+s),i):r},i.order=function(s){return arguments.length?(e=s==null?Sw:typeof s=="function"?s:dn(Array.from(s)),i):e},i.offset=function(s){return arguments.length?(n=s??Ec,i):n},i}function qQ(t,e){if((r=t.length)>0){for(var n,r,i=0,s=t[0].length,o;i<s;++i){for(o=n=0;n<r;++n)o+=t[n][i][1]||0;if(o)for(n=0;n<r;++n)t[n][i][1]/=o}Ec(t,e)}}function $Q(t,e){if((i=t.length)>0){for(var n=0,r=t[e[0]],i,s=r.length;n<s;++n){for(var o=0,c=0;o<i;++o)c+=t[o][n][1]||0;r[n][1]+=r[n][0]=-c/2}Ec(t,e)}}function GQ(t,e){if(!(!((o=t.length)>0)||!((s=(i=t[e[0]]).length)>0))){for(var n=0,r=1,i,s,o;r<s;++r){for(var c=0,f=0,d=0;c<o;++c){for(var h=t[e[c]],m=h[r][1]||0,g=h[r-1][1]||0,v=(m-g)/2,b=0;b<c;++b){var w=t[e[b]],S=w[r][1]||0,C=w[r-1][1]||0;v+=S-C}f+=m,d+=v*m}i[r-1][1]+=i[r-1][0]=n,f&&(n-=d/f)}i[r-1][1]+=i[r-1][0]=n,Ec(t,e)}}var o1={},a1={},HI;function KQ(){return HI||(HI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==="__proto__"}t.isUnsafeProperty=e})(a1)),a1}var l1={},qI;function SL(){return qI||(qI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){switch(typeof n){case"number":case"symbol":return!1;case"string":return n.includes(".")||n.includes("[")||n.includes("]")}}t.isDeepKey=e})(l1)),l1}var c1={},$I;function PT(){return $I||($I=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){var r;return typeof n=="string"||typeof n=="symbol"?n:Object.is((r=n==null?void 0:n.valueOf)==null?void 0:r.call(n),-0)?"-0":String(n)}t.toKey=e})(c1)),c1}var u1={},d1={},GI;function WQ(){return GI||(GI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){if(n==null)return"";if(typeof n=="string")return n;if(Array.isArray(n))return n.map(e).join(",");const r=String(n);return r==="0"&&Object.is(Number(n),-0)?"-0":r}t.toString=e})(d1)),d1}var KI;function jT(){return KI||(KI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=WQ(),n=PT();function r(i){if(Array.isArray(i))return i.map(n.toKey);if(typeof i=="symbol")return[i];i=e.toString(i);const s=[],o=i.length;if(o===0)return s;let c=0,f="",d="",h=!1;for(i.charCodeAt(0)===46&&(s.push(""),c++);c<o;){const m=i[c];d?m==="\\"&&c+1<o?(c++,f+=i[c]):m===d?d="":f+=m:h?m==='"'||m==="'"?d=m:m==="]"?(h=!1,s.push(f),f=""):f+=m:m==="["?(h=!0,f&&(s.push(f),f="")):m==="."?f&&(s.push(f),f=""):f+=m,c++}return f&&s.push(f),s}t.toPath=r})(u1)),u1}var WI;function MT(){return WI||(WI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=KQ(),n=SL(),r=PT(),i=jT();function s(c,f,d){if(c==null)return d;switch(typeof f){case"string":{if(e.isUnsafeProperty(f))return d;const h=c[f];return h===void 0?n.isDeepKey(f)?s(c,i.toPath(f),d):d:h}case"number":case"symbol":{typeof f=="number"&&(f=r.toKey(f));const h=c[f];return h===void 0?d:h}default:{if(Array.isArray(f))return o(c,f,d);if(Object.is(f==null?void 0:f.valueOf(),-0)?f="-0":f=String(f),e.isUnsafeProperty(f))return d;const h=c[f];return h===void 0?d:h}}}function o(c,f,d){if(f.length===0)return d;let h=c;for(let m=0;m<f.length;m++){if(h==null||e.isUnsafeProperty(f[m]))return d;h=h[f[m]]}return h===void 0?d:h}t.get=s})(o1)),o1}var f1,YI;function YQ(){return YI||(YI=1,f1=MT().get),f1}var XQ=YQ();const Qy=ws(XQ);var JQ=4;function nl(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:JQ,n=10**e,r=Math.round(t*n)/n;return Object.is(r,-0)?0:r}function sr(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];return t.reduce((i,s,o)=>{var c=n[o-1];return typeof c=="string"?i+c+s:c!==void 0?i+nl(c)+s:i+s},"")}var fs=t=>t===0?0:t>0?1:-1,po=t=>typeof t=="number"&&t!=+t,Ac=t=>typeof t=="string"&&t.indexOf("%")===t.length-1,Je=t=>(typeof t=="number"||t instanceof Number)&&!po(t),mo=t=>Je(t)||typeof t=="string",QQ=0,Vh=t=>{var e=++QQ;return"".concat(t||"").concat(e)},vl=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Je(e)&&typeof e!="string")return r;var s;if(Ac(e)){if(n==null)return r;var o=e.indexOf("%");s=n*parseFloat(e.slice(0,o))/100}else s=+e;return po(s)&&(s=r),i&&n!=null&&s>n&&(s=n),s},TL=t=>{if(!Array.isArray(t))return!1;for(var e=t.length,n={},r=0;r<e;r++)if(!n[String(t[r])])n[String(t[r])]=!0;else return!0;return!1};function Xs(t,e,n){return Je(t)&&Je(e)?nl(t+n*(e-t)):e}function EL(t,e,n){if(!(!t||!t.length))return t.find(r=>r&&(typeof e=="function"?e(r):Qy(r,e))===n)}var Tr=t=>t===null||typeof t>"u",DT=t=>Tr(t)?t:"".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));function Zs(t){return t!=null}function Dd(){}var AL=t=>"radius"in t&&"startAngle"in t&&"endAngle"in t,OT=(t,e)=>{if(!t||typeof t=="function"||typeof t=="boolean")return null;var n=t;if(L.isValidElement(t)&&(n=t.props),typeof n!="object"&&typeof n!="function")return null;var r={};return Object.keys(n).forEach(i=>{IT(i)&&(r[i]=(s=>n[i](n,s)))}),r},ZQ=(t,e,n)=>r=>(t(e,n,r),null),eZ=(t,e,n)=>{if(t===null||typeof t!="object"&&typeof t!="function")return null;var r=null;return Object.keys(t).forEach(i=>{var s=t[i];IT(i)&&typeof s=="function"&&(r||(r={}),r[i]=ZQ(s,e,n))}),r};function XI(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function tZ(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?XI(Object(n),!0).forEach(function(r){nZ(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):XI(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function nZ(t,e,n){return(e=rZ(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function rZ(t){var e=iZ(t,"string");return typeof e=="symbol"?e:e+""}function iZ(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Ki(t,e){var n=tZ({},t),r=e,i=Object.keys(e),s=i.reduce((o,c)=>(o[c]===void 0&&r[c]!==void 0&&(o[c]=r[c]),o),n);return s}var h1={},p1={},JI;function sZ(){return JI||(JI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){const i=new Map;for(let s=0;s<n.length;s++){const o=n[s],c=r(o,s,n);i.has(c)||i.set(c,o)}return Array.from(i.values())}t.uniqBy=e})(p1)),p1}var m1={},QI;function oZ(){return QI||(QI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return function(...i){return n.apply(this,i.slice(0,r))}}t.ary=e})(m1)),m1}var g1={},ZI;function CL(){return ZI||(ZI=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n}t.identity=e})(g1)),g1}var y1={},v1={},x1={},eR;function aZ(){return eR||(eR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Number.isSafeInteger(n)&&n>=0}t.isLength=e})(x1)),x1}var tR;function LT(){return tR||(tR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=aZ();function n(r){return r!=null&&typeof r!="function"&&e.isLength(r.length)}t.isArrayLike=n})(v1)),v1}var b1={},nR;function lZ(){return nR||(nR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="object"&&n!==null}t.isObjectLike=e})(b1)),b1}var rR;function cZ(){return rR||(rR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LT(),n=lZ();function r(i){return n.isObjectLike(i)&&e.isArrayLike(i)}t.isArrayLikeObject=r})(y1)),y1}var _1={},w1={},iR;function uZ(){return iR||(iR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=MT();function n(r){return function(i){return e.get(i,r)}}t.property=n})(w1)),w1}var S1={},T1={},E1={},A1={},sR;function NL(){return sR||(sR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n!==null&&(typeof n=="object"||typeof n=="function")}t.isObject=e})(A1)),A1}var C1={},oR;function kL(){return oR||(oR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null||typeof n!="object"&&typeof n!="function"}t.isPrimitive=e})(C1)),C1}var N1={},aR;function IL(){return aR||(aR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r){return n===r||Number.isNaN(n)&&Number.isNaN(r)}t.isEqualsSameValueZero=e})(N1)),N1}var lR;function dZ(){return lR||(lR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=NL(),n=kL(),r=IL();function i(h,m,g){return typeof g!="function"?i(h,m,()=>{}):s(h,m,function v(b,w,S,C,R,N){const O=g(b,w,S,C,R,N);return O!==void 0?!!O:s(b,w,v,N)},new Map)}function s(h,m,g,v){if(m===h)return!0;switch(typeof m){case"object":return o(h,m,g,v);case"function":return Object.keys(m).length>0?s(h,{...m},g,v):r.isEqualsSameValueZero(h,m);default:return e.isObject(h)?typeof m=="string"?m==="":!0:r.isEqualsSameValueZero(h,m)}}function o(h,m,g,v){if(m==null)return!0;if(Array.isArray(m))return f(h,m,g,v);if(m instanceof Map)return c(h,m,g,v);if(m instanceof Set)return d(h,m,g,v);const b=Object.keys(m);if(h==null||n.isPrimitive(h))return b.length===0;if(b.length===0)return!0;if(v!=null&&v.has(m))return v.get(m)===h;v==null||v.set(m,h);try{for(let w=0;w<b.length;w++){const S=b[w];if(!n.isPrimitive(h)&&!(S in h)||m[S]===void 0&&h[S]!==void 0||m[S]===null&&h[S]!==null||!g(h[S],m[S],S,h,m,v))return!1}return!0}finally{v==null||v.delete(m)}}function c(h,m,g,v){if(m.size===0)return!0;if(!(h instanceof Map))return!1;for(const[b,w]of m.entries()){const S=h.get(b);if(g(S,w,b,h,m,v)===!1)return!1}return!0}function f(h,m,g,v){if(m.length===0)return!0;if(!Array.isArray(h))return!1;const b=new Set;for(let w=0;w<m.length;w++){const S=m[w];let C=!1;for(let R=0;R<h.length;R++){if(b.has(R))continue;const N=h[R];let O=!1;if(g(N,S,w,h,m,v)&&(O=!0),O){b.add(R),C=!0;break}}if(!C)return!1}return!0}function d(h,m,g,v){return m.size===0?!0:h instanceof Set?f([...h],[...m],g,v):!1}t.isMatchWith=i,t.isSetMatch=d})(E1)),E1}var cR;function RL(){return cR||(cR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=dZ();function n(r,i){return e.isMatchWith(r,i,()=>{})}t.isMatch=n})(T1)),T1}var k1={},I1={},R1={},uR;function fZ(){return uR||(uR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Object.getOwnPropertySymbols(n).filter(r=>Object.prototype.propertyIsEnumerable.call(n,r))}t.getSymbols=e})(R1)),R1}var P1={},dR;function zT(){return dR||(dR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n==null?n===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(n)}t.getTag=e})(P1)),P1}var j1={},fR;function PL(){return fR||(fR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e="[object RegExp]",n="[object String]",r="[object Number]",i="[object Boolean]",s="[object Arguments]",o="[object Symbol]",c="[object Date]",f="[object Map]",d="[object Set]",h="[object Array]",m="[object Function]",g="[object ArrayBuffer]",v="[object Object]",b="[object Error]",w="[object DataView]",S="[object Uint8Array]",C="[object Uint8ClampedArray]",R="[object Uint16Array]",N="[object Uint32Array]",O="[object BigUint64Array]",k="[object Int8Array]",D="[object Int16Array]",M="[object Int32Array]",j="[object BigInt64Array]",I="[object Float32Array]",U="[object Float64Array]";t.argumentsTag=s,t.arrayBufferTag=g,t.arrayTag=h,t.bigInt64ArrayTag=j,t.bigUint64ArrayTag=O,t.booleanTag=i,t.dataViewTag=w,t.dateTag=c,t.errorTag=b,t.float32ArrayTag=I,t.float64ArrayTag=U,t.functionTag=m,t.int16ArrayTag=D,t.int32ArrayTag=M,t.int8ArrayTag=k,t.mapTag=f,t.numberTag=r,t.objectTag=v,t.regexpTag=e,t.setTag=d,t.stringTag=n,t.symbolTag=o,t.uint16ArrayTag=R,t.uint32ArrayTag=N,t.uint8ArrayTag=S,t.uint8ClampedArrayTag=C})(j1)),j1}var M1={},hR;function hZ(){return hR||(hR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}t.isTypedArray=e})(M1)),M1}var pR;function jL(){return pR||(pR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=fZ(),n=zT(),r=PL(),i=kL(),s=hZ();function o(h,m){return c(h,void 0,h,new Map,m)}function c(h,m,g,v=new Map,b=void 0){const w=b==null?void 0:b(h,m,g,v);if(w!==void 0)return w;if(i.isPrimitive(h))return h;if(v.has(h))return v.get(h);if(Array.isArray(h)){const S=new Array(h.length);v.set(h,S);for(let C=0;C<h.length;C++)S[C]=c(h[C],C,g,v,b);return Object.hasOwn(h,"index")&&(S.index=h.index),Object.hasOwn(h,"input")&&(S.input=h.input),S}if(h instanceof Date)return new Date(h.getTime());if(h instanceof RegExp){const S=new RegExp(h.source,h.flags);return S.lastIndex=h.lastIndex,S}if(h instanceof Map){const S=new Map;v.set(h,S);for(const[C,R]of h)S.set(C,c(R,C,g,v,b));return S}if(h instanceof Set){const S=new Set;v.set(h,S);for(const C of h)S.add(c(C,void 0,g,v,b));return S}if(typeof Buffer<"u"&&Buffer.isBuffer(h))return h.subarray();if(s.isTypedArray(h)){const S=new(Object.getPrototypeOf(h)).constructor(h.length);v.set(h,S);for(let C=0;C<h.length;C++)S[C]=c(h[C],C,g,v,b);return S}if(h instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&h instanceof SharedArrayBuffer)return h.slice(0);if(h instanceof DataView){const S=new DataView(h.buffer.slice(0),h.byteOffset,h.byteLength);return v.set(h,S),f(S,h,g,v,b),S}if(typeof File<"u"&&h instanceof File){const S=new File([h],h.name,{type:h.type});return v.set(h,S),f(S,h,g,v,b),S}if(typeof Blob<"u"&&h instanceof Blob){const S=new Blob([h],{type:h.type});return v.set(h,S),f(S,h,g,v,b),S}if(h instanceof Error){const S=new h.constructor;return v.set(h,S),S.message=h.message,S.name=h.name,S.stack=h.stack,S.cause=h.cause,f(S,h,g,v,b),S}if(h instanceof Boolean){const S=new Boolean(h.valueOf());return v.set(h,S),f(S,h,g,v,b),S}if(h instanceof Number){const S=new Number(h.valueOf());return v.set(h,S),f(S,h,g,v,b),S}if(h instanceof String){const S=new String(h.valueOf());return v.set(h,S),f(S,h,g,v,b),S}if(typeof h=="object"&&d(h)){const S=Object.create(Object.getPrototypeOf(h));return v.set(h,S),f(S,h,g,v,b),S}return h}function f(h,m,g=h,v,b){const w=[...Object.keys(m),...e.getSymbols(m)];for(let S=0;S<w.length;S++){const C=w[S],R=Object.getOwnPropertyDescriptor(h,C);(R==null||R.writable)&&(h[C]=c(m[C],C,g,v,b))}}function d(h){switch(n.getTag(h)){case r.argumentsTag:case r.arrayTag:case r.arrayBufferTag:case r.dataViewTag:case r.booleanTag:case r.dateTag:case r.float32ArrayTag:case r.float64ArrayTag:case r.int8ArrayTag:case r.int16ArrayTag:case r.int32ArrayTag:case r.mapTag:case r.numberTag:case r.objectTag:case r.regexpTag:case r.setTag:case r.stringTag:case r.symbolTag:case r.uint8ArrayTag:case r.uint8ClampedArrayTag:case r.uint16ArrayTag:case r.uint32ArrayTag:return!0;default:return!1}}t.cloneDeepWith=o,t.cloneDeepWithImpl=c,t.copyProperties=f})(I1)),I1}var mR;function pZ(){return mR||(mR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jL();function n(r){return e.cloneDeepWithImpl(r,void 0,r,new Map,void 0)}t.cloneDeep=n})(k1)),k1}var gR;function mZ(){return gR||(gR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RL(),n=pZ();function r(i){return i=n.cloneDeep(i),s=>e.isMatch(s,i)}t.matches=r})(S1)),S1}var D1={},O1={},L1={},yR;function gZ(){return yR||(yR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=jL(),n=zT(),r=PL();function i(s,o){return e.cloneDeepWith(s,(c,f,d,h)=>{const m=o==null?void 0:o(c,f,d,h);if(m!==void 0)return m;if(typeof s=="object"){if(n.getTag(s)===r.objectTag&&typeof s.constructor!="function"){const g={};return h.set(s,g),e.copyProperties(g,s,d,h),g}switch(Object.prototype.toString.call(s)){case r.numberTag:case r.stringTag:case r.booleanTag:{const g=new s.constructor(s==null?void 0:s.valueOf());return e.copyProperties(g,s),g}case r.argumentsTag:{const g={};return e.copyProperties(g,s),g.length=s.length,g[Symbol.iterator]=s[Symbol.iterator],g}default:return}}})}t.cloneDeepWith=i})(L1)),L1}var vR;function yZ(){return vR||(vR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=gZ();function n(r){return e.cloneDeepWith(r)}t.cloneDeep=n})(O1)),O1}var z1={},U1={},xR;function ML(){return xR||(xR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=/^(?:0|[1-9]\d*)$/;function n(r,i=Number.MAX_SAFE_INTEGER){switch(typeof r){case"number":return Number.isInteger(r)&&r>=0&&r<i;case"symbol":return!1;case"string":return e.test(r)}}t.isIndex=n})(U1)),U1}var V1={},bR;function vZ(){return bR||(bR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=zT();function n(r){return r!==null&&typeof r=="object"&&e.getTag(r)==="[object Arguments]"}t.isArguments=n})(V1)),V1}var _R;function xZ(){return _R||(_R=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=SL(),n=ML(),r=vZ(),i=jT();function s(o,c){let f;if(Array.isArray(c)?f=c:typeof c=="string"&&e.isDeepKey(c)&&(o==null?void 0:o[c])==null?f=i.toPath(c):f=[c],f.length===0)return!1;let d=o;for(let h=0;h<f.length;h++){const m=f[h];if((d==null||!Object.hasOwn(d,m))&&!((Array.isArray(d)||r.isArguments(d))&&n.isIndex(m)&&m<d.length))return!1;d=d[m]}return!0}t.has=s})(z1)),z1}var wR;function bZ(){return wR||(wR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=RL(),n=PT(),r=yZ(),i=MT(),s=xZ();function o(c,f){switch(typeof c){case"object":{Object.is(c==null?void 0:c.valueOf(),-0)&&(c="-0");break}case"number":{c=n.toKey(c);break}}return f=r.cloneDeep(f),function(d){const h=i.get(d,c);return h===void 0?s.has(d,c):f===void 0?h===void 0:e.isMatch(h,f)}}t.matchesProperty=o})(D1)),D1}var SR;function _Z(){return SR||(SR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=CL(),n=uZ(),r=mZ(),i=bZ();function s(o){if(o==null)return e.identity;switch(typeof o){case"function":return o;case"object":return Array.isArray(o)&&o.length===2?i.matchesProperty(o[0],o[1]):r.matches(o);case"string":case"symbol":case"number":return n.property(o)}}t.iteratee=s})(_1)),_1}var TR;function wZ(){return TR||(TR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=sZ(),n=oZ(),r=CL(),i=cZ(),s=_Z();function o(c,f=r.identity){return i.isArrayLikeObject(c)?e.uniqBy(Array.from(c),n.ary(s.iteratee(f),1)):[]}t.uniqBy=o})(h1)),h1}var F1,ER;function SZ(){return ER||(ER=1,F1=wZ().uniqBy),F1}var TZ=SZ();const AR=ws(TZ);function EZ(t,e,n){return e===!0?AR(t,n):typeof e=="function"?AR(t,e):t}var B1={exports:{}},H1={},q1={exports:{}},$1={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CR;function AZ(){if(CR)return $1;CR=1;var t=Sd();function e(m,g){return m===g&&(m!==0||1/m===1/g)||m!==m&&g!==g}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function c(m,g){var v=g(),b=r({inst:{value:v,getSnapshot:g}}),w=b[0].inst,S=b[1];return s(function(){w.value=v,w.getSnapshot=g,f(w)&&S({inst:w})},[m,v,g]),i(function(){return f(w)&&S({inst:w}),m(function(){f(w)&&S({inst:w})})},[m]),o(v),v}function f(m){var g=m.getSnapshot;m=m.value;try{var v=g();return!n(m,v)}catch{return!0}}function d(m,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:c;return $1.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:h,$1}var NR;function CZ(){return NR||(NR=1,q1.exports=AZ()),q1.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kR;function NZ(){if(kR)return H1;kR=1;var t=Sd(),e=CZ();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,c=t.useMemo,f=t.useDebugValue;return H1.useSyncExternalStoreWithSelector=function(d,h,m,g,v){var b=s(null);if(b.current===null){var w={hasValue:!1,value:null};b.current=w}else w=b.current;b=c(function(){function C(D){if(!R){if(R=!0,N=D,D=g(D),v!==void 0&&w.hasValue){var M=w.value;if(v(M,D))return O=M}return O=D}if(M=O,r(N,D))return M;var j=g(D);return v!==void 0&&v(M,j)?(N=D,M):(N=D,O=j)}var R=!1,N,O,k=m===void 0?null:m;return[function(){return C(h())},k===null?void 0:function(){return C(k())}]},[h,m,g,v]);var S=i(d,b[0],b[1]);return o(function(){w.hasValue=!0,w.value=S},[S]),f(S),S},H1}var IR;function kZ(){return IR||(IR=1,B1.exports=NZ()),B1.exports}var IZ=kZ(),UT=L.createContext(null),RZ=t=>t,Wn=()=>{var t=L.useContext(UT);return t?t.store.dispatch:RZ},qg=()=>{},PZ=()=>qg,jZ=(t,e)=>t===e;function et(t){var e=L.useContext(UT),n=L.useMemo(()=>e?r=>{if(r!=null)return t(r)}:qg,[e,t]);return IZ.useSyncExternalStoreWithSelector(e?e.subscription.addNestedSub:PZ,e?e.store.getState:qg,e?e.store.getState:qg,n,jZ)}function MZ(t,e=`expected a function, instead received ${typeof t}`){if(typeof t!="function")throw new TypeError(e)}function DZ(t,e=`expected an object, instead received ${typeof t}`){if(typeof t!="object")throw new TypeError(e)}function OZ(t,e="expected all items to be functions, instead received the following types: "){if(!t.every(n=>typeof n=="function")){const n=t.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${e}[${n}]`)}}var RR=t=>Array.isArray(t)?t:[t];function LZ(t){const e=Array.isArray(t[0])?t[0]:t;return OZ(e,"createSelector expects all input-selectors to be functions, but received the following types: "),e}function zZ(t,e){const n=[],{length:r}=t;for(let i=0;i<r;i++)n.push(t[i].apply(null,e));return n}var UZ=class{constructor(t){this.value=t}deref(){return this.value}},VZ=typeof WeakRef<"u"?WeakRef:UZ,FZ=0,PR=1;function dg(){return{s:FZ,v:void 0,o:null,p:null}}function DL(t,e={}){let n=dg();const{resultEqualityCheck:r}=e;let i,s=0;function o(){var m;let c=n;const{length:f}=arguments;for(let g=0,v=f;g<v;g++){const b=arguments[g];if(typeof b=="function"||typeof b=="object"&&b!==null){let w=c.o;w===null&&(c.o=w=new WeakMap);const S=w.get(b);S===void 0?(c=dg(),w.set(b,c)):c=S}else{let w=c.p;w===null&&(c.p=w=new Map);const S=w.get(b);S===void 0?(c=dg(),w.set(b,c)):c=S}}const d=c;let h;if(c.s===PR)h=c.v;else if(h=t.apply(null,arguments),s++,r){const g=((m=i==null?void 0:i.deref)==null?void 0:m.call(i))??i;g!=null&&r(g,h)&&(h=g,s!==0&&s--),i=typeof h=="object"&&h!==null||typeof h=="function"?new VZ(h):h}return d.s=PR,d.v=h,h}return o.clearCache=()=>{n=dg(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function BZ(t,...e){const n=typeof t=="function"?{memoize:t,memoizeOptions:e}:t,r=(...i)=>{let s=0,o=0,c,f={},d=i.pop();typeof d=="object"&&(f=d,d=i.pop()),MZ(d,`createSelector expects an output function after the inputs, but received: [${typeof d}]`);const h={...n,...f},{memoize:m,memoizeOptions:g=[],argsMemoize:v=DL,argsMemoizeOptions:b=[]}=h,w=RR(g),S=RR(b),C=LZ(i),R=m(function(){return s++,d.apply(null,arguments)},...w),N=v(function(){o++;const k=zZ(C,arguments);return c=R.apply(null,k),c},...S);return Object.assign(N,{resultFunc:d,memoizedResultFunc:R,dependencies:C,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>c,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:m,argsMemoize:v})};return Object.assign(r,{withTypes:()=>r}),r}var we=BZ(DL),HZ=Object.assign((t,e=we)=>{DZ(t,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof t}`);const n=Object.keys(t),r=n.map(s=>t[s]);return e(r,(...s)=>s.reduce((o,c,f)=>(o[n[f]]=c,o),{}))},{withTypes:()=>HZ}),G1={},K1={},W1={},jR;function qZ(){return jR||(jR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(r){return typeof r=="symbol"?1:r===null?2:r===void 0?3:r!==r?4:0}const n=(r,i,s)=>{if(r!==i){const o=e(r),c=e(i);if(o===c&&o===0){if(r<i)return s==="desc"?1:-1;if(r>i)return s==="desc"?-1:1}return s==="desc"?c-o:o-c}return 0};t.compareValues=n})(W1)),W1}var Y1={},X1={},MR;function OL(){return MR||(MR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return typeof n=="symbol"||n instanceof Symbol}t.isSymbol=e})(X1)),X1}var DR;function $Z(){return DR||(DR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OL(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){return Array.isArray(s)?!1:typeof s=="number"||typeof s=="boolean"||s==null||e.isSymbol(s)?!0:typeof s=="string"&&(r.test(s)||!n.test(s))||o!=null&&Object.hasOwn(o,s)}t.isKey=i})(Y1)),Y1}var OR;function GZ(){return OR||(OR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=qZ(),n=$Z(),r=jT();function i(s,o,c,f){if(s==null)return[];c=f?void 0:c,Array.isArray(s)||(s=Object.values(s)),Array.isArray(o)||(o=o==null?[null]:[o]),o.length===0&&(o=[null]),Array.isArray(c)||(c=c==null?[]:[c]),c=c.map(v=>String(v));const d=(v,b)=>{let w=v;for(let S=0;S<b.length&&w!=null;++S)w=w[b[S]];return w},h=(v,b)=>b==null||v==null?b:typeof v=="object"&&"key"in v?Object.hasOwn(b,v.key)?b[v.key]:d(b,v.path):typeof v=="function"?v(b):Array.isArray(v)?d(b,v):typeof b=="object"?b[v]:b,m=o.map(v=>(Array.isArray(v)&&v.length===1&&(v=v[0]),v==null||typeof v=="function"||Array.isArray(v)||n.isKey(v)?v:{key:v,path:r.toPath(v)}));return s.map(v=>({original:v,criteria:m.map(b=>h(b,v))})).slice().sort((v,b)=>{for(let w=0;w<m.length;w++){const S=e.compareValues(v.criteria[w],b.criteria[w],c[w]);if(S!==0)return S}return 0}).map(v=>v.original)}t.orderBy=i})(K1)),K1}var J1={},LR;function KZ(){return LR||(LR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r=1){const i=[],s=Math.floor(r),o=(c,f)=>{for(let d=0;d<c.length;d++){const h=c[d];Array.isArray(h)&&f<s?o(h,f+1):i.push(h)}};return o(n,0),i}t.flatten=e})(J1)),J1}var Q1={},zR;function LL(){return zR||(zR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=ML(),n=LT(),r=NL(),i=IL();function s(o,c,f){return r.isObject(f)&&(typeof c=="number"&&n.isArrayLike(f)&&e.isIndex(c)&&c<f.length||typeof c=="string"&&c in f)?i.isEqualsSameValueZero(f[c],o):!1}t.isIterateeCall=s})(Q1)),Q1}var UR;function WZ(){return UR||(UR=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=GZ(),n=KZ(),r=LL();function i(s,...o){const c=o.length;return c>1&&r.isIterateeCall(s,o[0],o[1])?o=[]:c>2&&r.isIterateeCall(o[0],o[1],o[2])&&(o=[o[0]]),e.orderBy(s,n.flatten(o),["asc"])}t.sortBy=i})(G1)),G1}var Z1,VR;function YZ(){return VR||(VR=1,Z1=WZ().sortBy),Z1}var XZ=YZ();const Zy=ws(XZ);var zL=t=>t.legend.settings,JZ=t=>t.legend.size,QZ=t=>t.legend.payload;we([QZ,zL],(t,e)=>{var{itemSorter:n}=e,r=t.flat(1);return n?Zy(r,n):r});var fg=1;function ZZ(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],[e,n]=L.useState({height:0,left:0,top:0,width:0}),r=L.useCallback(i=>{if(i!=null){var s=i.getBoundingClientRect(),o={height:s.height,left:s.left,top:s.top,width:s.width};(Math.abs(o.height-e.height)>fg||Math.abs(o.left-e.left)>fg||Math.abs(o.top-e.top)>fg||Math.abs(o.width-e.width)>fg)&&n({height:o.height,left:o.left,top:o.top,width:o.width})}},[e.width,e.height,e.top,e.left,...t]);return[e,r]}function ir(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var eee=typeof Symbol=="function"&&Symbol.observable||"@@observable",FR=eee,e_=()=>Math.random().toString(36).substring(7).split("").join("."),tee={INIT:`@@redux/INIT${e_()}`,REPLACE:`@@redux/REPLACE${e_()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${e_()}`},I0=tee;function VT(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function UL(t,e,n){if(typeof t!="function")throw new Error(ir(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ir(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ir(1));return n(UL)(t,e)}let r=t,i=e,s=new Map,o=s,c=0,f=!1;function d(){o===s&&(o=new Map,s.forEach((S,C)=>{o.set(C,S)}))}function h(){if(f)throw new Error(ir(3));return i}function m(S){if(typeof S!="function")throw new Error(ir(4));if(f)throw new Error(ir(5));let C=!0;d();const R=c++;return o.set(R,S),function(){if(C){if(f)throw new Error(ir(6));C=!1,d(),o.delete(R),s=null}}}function g(S){if(!VT(S))throw new Error(ir(7));if(typeof S.type>"u")throw new Error(ir(8));if(typeof S.type!="string")throw new Error(ir(17));if(f)throw new Error(ir(9));try{f=!0,i=r(i,S)}finally{f=!1}return(s=o).forEach(R=>{R()}),S}function v(S){if(typeof S!="function")throw new Error(ir(10));r=S,g({type:I0.REPLACE})}function b(){const S=m;return{subscribe(C){if(typeof C!="object"||C===null)throw new Error(ir(11));function R(){const O=C;O.next&&O.next(h())}return R(),{unsubscribe:S(R)}},[FR](){return this}}}return g({type:I0.INIT}),{dispatch:g,subscribe:m,getState:h,replaceReducer:v,[FR]:b}}function nee(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:I0.INIT})>"u")throw new Error(ir(12));if(typeof n(void 0,{type:I0.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ir(13))})}function VL(t){const e=Object.keys(t),n={};for(let s=0;s<e.length;s++){const o=e[s];typeof t[o]=="function"&&(n[o]=t[o])}const r=Object.keys(n);let i;try{nee(n)}catch(s){i=s}return function(o={},c){if(i)throw i;let f=!1;const d={};for(let h=0;h<r.length;h++){const m=r[h],g=n[m],v=o[m],b=g(v,c);if(typeof b>"u")throw c&&c.type,new Error(ir(14));d[m]=b,f=f||b!==v}return f=f||r.length!==Object.keys(o).length,f?d:o}}function R0(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...r)=>e(n(...r)))}function ree(...t){return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(ir(15))};const o={getState:i.getState,dispatch:(f,...d)=>s(f,...d)},c=t.map(f=>f(o));return s=R0(...c)(i.dispatch),{...i,dispatch:s}}}function FL(t){return VT(t)&&"type"in t&&typeof t.type=="string"}var BL=Symbol.for("immer-nothing"),BR=Symbol.for("immer-draftable"),Lr=Symbol.for("immer-state");function as(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var ui=Object,vd=ui.getPrototypeOf,P0="constructor",ev="prototype",Tw="configurable",j0="enumerable",$g="writable",Fh="value",Jo=t=>!!t&&!!t[Lr];function _s(t){var e;return t?HL(t)||nv(t)||!!t[BR]||!!((e=t[P0])!=null&&e[BR])||rv(t)||iv(t):!1}var iee=ui[ev][P0].toString(),HR=new WeakMap;function HL(t){if(!t||!FT(t))return!1;const e=vd(t);if(e===null||e===ui[ev])return!0;const n=ui.hasOwnProperty.call(e,P0)&&e[P0];if(n===Object)return!0;if(!Vu(n))return!1;let r=HR.get(n);return r===void 0&&(r=Function.toString.call(n),HR.set(n,r)),r===iee}function tv(t,e,n=!0){gp(t)===0?(n?Reflect.ownKeys(t):ui.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function gp(t){const e=t[Lr];return e?e.type_:nv(t)?1:rv(t)?2:iv(t)?3:0}var qR=(t,e,n=gp(t))=>n===2?t.has(e):ui[ev].hasOwnProperty.call(t,e),Ew=(t,e,n=gp(t))=>n===2?t.get(e):t[e],M0=(t,e,n,r=gp(t))=>{r===2?t.set(e,n):r===3?t.add(n):t[e]=n};function see(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}var nv=Array.isArray,rv=t=>t instanceof Map,iv=t=>t instanceof Set,FT=t=>typeof t=="object",Vu=t=>typeof t=="function",t_=t=>typeof t=="boolean";function oee(t){const e=+t;return Number.isInteger(e)&&String(e)===t}var Uo=t=>t.copy_||t.base_,BT=t=>t.modified_?t.copy_:t.base_;function Aw(t,e){if(rv(t))return new Map(t);if(iv(t))return new Set(t);if(nv(t))return Array[ev].slice.call(t);const n=HL(t);if(e===!0||e==="class_only"&&!n){const r=ui.getOwnPropertyDescriptors(t);delete r[Lr];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],c=r[o];c[$g]===!1&&(c[$g]=!0,c[Tw]=!0),(c.get||c.set)&&(r[o]={[Tw]:!0,[$g]:!0,[j0]:c[j0],[Fh]:t[o]})}return ui.create(vd(t),r)}else{const r=vd(t);if(r!==null&&n)return{...t};const i=ui.create(r);return ui.assign(i,t)}}function HT(t,e=!1){return sv(t)||Jo(t)||!_s(t)||(gp(t)>1&&ui.defineProperties(t,{set:hg,add:hg,clear:hg,delete:hg}),ui.freeze(t),e&&tv(t,(n,r)=>{HT(r,!0)},!1)),t}function aee(){as(2)}var hg={[Fh]:aee};function sv(t){return t===null||!FT(t)?!0:ui.isFrozen(t)}var D0="MapSet",Cw="Patches",$R="ArrayMethods",qL={};function Cc(t){const e=qL[t];return e||as(0,t),e}var GR=t=>!!qL[t],Bh,$L=()=>Bh,lee=(t,e)=>({drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0,handledSet_:new Set,processedForPatches_:new Set,mapSetPlugin_:GR(D0)?Cc(D0):void 0,arrayMethodsPlugin_:GR($R)?Cc($R):void 0});function KR(t,e){e&&(t.patchPlugin_=Cc(Cw),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Nw(t){kw(t),t.drafts_.forEach(cee),t.drafts_=null}function kw(t){t===Bh&&(Bh=t.parent_)}var WR=t=>Bh=lee(Bh,t);function cee(t){const e=t[Lr];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function YR(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];if(t!==void 0&&t!==n){n[Lr].modified_&&(Nw(e),as(4)),_s(t)&&(t=XR(e,t));const{patchPlugin_:i}=e;i&&i.generateReplacementPatches_(n[Lr].base_,t,e)}else t=XR(e,n);return uee(e,t,!0),Nw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==BL?t:void 0}function XR(t,e){if(sv(e))return e;const n=e[Lr];if(!n)return O0(e,t.handledSet_,t);if(!ov(n,t))return e;if(!n.modified_)return n.base_;if(!n.finalized_){const{callbacks_:r}=n;if(r)for(;r.length>0;)r.pop()(t);WL(n,t)}return n.copy_}function uee(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&HT(e,n)}function GL(t){t.finalized_=!0,t.scope_.unfinalizedDrafts_--}var ov=(t,e)=>t.scope_===e,dee=[];function KL(t,e,n,r){const i=Uo(t),s=t.type_;if(r!==void 0&&Ew(i,r,s)===e){M0(i,r,n,s);return}if(!t.draftLocations_){const c=t.draftLocations_=new Map;tv(i,(f,d)=>{if(Jo(d)){const h=c.get(d)||[];h.push(f),c.set(d,h)}})}const o=t.draftLocations_.get(e)??dee;for(const c of o)M0(i,c,n,s)}function fee(t,e,n){t.callbacks_.push(function(i){var c;const s=e;if(!s||!ov(s,i))return;(c=i.mapSetPlugin_)==null||c.fixSetContents(s);const o=BT(s);KL(t,s.draft_??s,o,n),WL(s,i)})}function WL(t,e){var r;if(t.modified_&&!t.finalized_&&(t.type_===3||t.type_===1&&t.allIndicesReassigned_||(((r=t.assigned_)==null?void 0:r.size)??0)>0)){const{patchPlugin_:i}=e;if(i){const s=i.getPath(t);s&&i.generatePatches_(t,s,e)}GL(t)}}function hee(t,e,n){const{scope_:r}=t;if(Jo(n)){const i=n[Lr];ov(i,r)&&i.callbacks_.push(function(){Gg(t);const o=BT(i);KL(t,n,o,e)})}else _s(n)&&t.callbacks_.push(function(){const s=Uo(t);t.type_===3?s.has(n)&&O0(n,r.handledSet_,r):Ew(s,e,t.type_)===n&&r.drafts_.length>1&&(t.assigned_.get(e)??!1)===!0&&t.copy_&&O0(Ew(t.copy_,e,t.type_),r.handledSet_,r)})}function O0(t,e,n){return!n.immer_.autoFreeze_&&n.unfinalizedDrafts_<1||Jo(t)||e.has(t)||!_s(t)||sv(t)||(e.add(t),tv(t,(r,i)=>{if(Jo(i)){const s=i[Lr];if(ov(s,n)){const o=BT(s);M0(t,r,o,t.type_),GL(s)}}else _s(i)&&O0(i,e,n)})),t}function pee(t,e){const n=nv(t),r={type_:n?1:0,scope_:e?e.scope_:$L(),modified_:!1,finalized_:!1,assigned_:void 0,parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1,callbacks_:void 0};let i=r,s=L0;n&&(i=[r],s=Hh);const{revoke:o,proxy:c}=Proxy.revocable(i,s);return r.draft_=c,r.revoke_=o,[c,r]}var L0={get(t,e){if(e===Lr)return t;let n=t.scope_.arrayMethodsPlugin_;const r=t.type_===1&&typeof e=="string";if(r&&n!=null&&n.isArrayOperationMethod(e))return n.createMethodInterceptor(t,e);const i=Uo(t);if(!qR(i,e,t.type_))return mee(t,i,e);const s=i[e];if(t.finalized_||!_s(s)||r&&t.operationMethod&&(n!=null&&n.isMutatingArrayMethod(t.operationMethod))&&oee(e))return s;if(s===n_(t.base_,e)){Gg(t);const o=t.type_===1?+e:e,c=Rw(t.scope_,s,t,o);return t.copy_[o]=c}return s},has(t,e){return e in Uo(t)},ownKeys(t){return Reflect.ownKeys(Uo(t))},set(t,e,n){const r=YL(Uo(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=n_(Uo(t),e),s=i==null?void 0:i[Lr];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_.set(e,!1),!0;if(see(n,i)&&(n!==void 0||qR(t.base_,e,t.type_)))return!0;Gg(t),Iw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_.set(e,!0),hee(t,e,n)),!0},deleteProperty(t,e){return Gg(t),n_(t.base_,e)!==void 0||e in t.base_?(t.assigned_.set(e,!1),Iw(t)):t.assigned_.delete(e),t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=Uo(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{[$g]:!0,[Tw]:t.type_!==1||e!=="length",[j0]:r[j0],[Fh]:n[e]}},defineProperty(){as(11)},getPrototypeOf(t){return vd(t.base_)},setPrototypeOf(){as(12)}},Hh={};for(let t in L0){let e=L0[t];Hh[t]=function(){const n=arguments;return n[0]=n[0][0],e.apply(this,n)}}Hh.deleteProperty=function(t,e){return Hh.set.call(this,t,e,void 0)};Hh.set=function(t,e,n){return L0.set.call(this,t[0],e,n,t[0])};function n_(t,e){const n=t[Lr];return(n?Uo(n):t)[e]}function mee(t,e,n){var i;const r=YL(e,n);return r?Fh in r?r[Fh]:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function YL(t,e){if(!(e in t))return;let n=vd(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=vd(n)}}function Iw(t){t.modified_||(t.modified_=!0,t.parent_&&Iw(t.parent_))}function Gg(t){t.copy_||(t.assigned_=new Map,t.copy_=Aw(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var gee=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!1,this.produce=(n,r,i)=>{if(Vu(n)&&!Vu(r)){const o=r;r=n;const c=this;return function(d=o,...h){return c.produce(d,m=>r.call(this,m,...h))}}Vu(r)||as(6),i!==void 0&&!Vu(i)&&as(7);let s;if(_s(n)){const o=WR(this),c=Rw(o,n,void 0);let f=!0;try{s=r(c),f=!1}finally{f?Nw(o):kw(o)}return KR(o,i),YR(s,o)}else if(!n||!FT(n)){if(s=r(n),s===void 0&&(s=n),s===BL&&(s=void 0),this.autoFreeze_&&HT(s,!0),i){const o=[],c=[];Cc(Cw).generateReplacementPatches_(n,s,{patches_:o,inversePatches_:c}),i(o,c)}return s}else as(1,n)},this.produceWithPatches=(n,r)=>{if(Vu(n))return(c,...f)=>this.produceWithPatches(c,d=>n(d,...f));let i,s;return[this.produce(n,r,(c,f)=>{i=c,s=f}),i,s]},t_(e==null?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),t_(e==null?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy),t_(e==null?void 0:e.useStrictIteration)&&this.setUseStrictIteration(e.useStrictIteration)}createDraft(e){_s(e)||as(8),Jo(e)&&(e=gs(e));const n=WR(this),r=Rw(n,e,void 0);return r[Lr].isManual_=!0,kw(n),r}finishDraft(e,n){const r=e&&e[Lr];(!r||!r.isManual_)&&as(9);const{scope_:i}=r;return KR(i,n),YR(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}setUseStrictIteration(e){this.useStrictIteration_=e}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(e,n){let r;for(r=n.length-1;r>=0;r--){const s=n[r];if(s.path.length===0&&s.op==="replace"){e=s.value;break}}r>-1&&(n=n.slice(r+1));const i=Cc(Cw).applyPatches_;return Jo(e)?i(e,n):this.produce(e,s=>i(s,n))}};function Rw(t,e,n,r){const[i,s]=rv(e)?Cc(D0).proxyMap_(e,n):iv(e)?Cc(D0).proxySet_(e,n):pee(e,n);return((n==null?void 0:n.scope_)??$L()).drafts_.push(i),s.callbacks_=(n==null?void 0:n.callbacks_)??[],s.key_=r,n&&r!==void 0?fee(n,s,r):s.callbacks_.push(function(f){var h;(h=f.mapSetPlugin_)==null||h.fixSetContents(s);const{patchPlugin_:d}=f;s.modified_&&d&&d.generatePatches_(s,[],f)}),i}function gs(t){return Jo(t)||as(10,t),XL(t)}function XL(t){if(!_s(t)||sv(t))return t;const e=t[Lr];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Aw(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Aw(t,!0);return tv(n,(i,s)=>{M0(n,i,XL(s))},r),e&&(e.finalized_=!1),n}var yee=new gee,JL=yee.produce;function QL(t){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,t):i(s)}var vee=QL(),xee=QL,bee=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?R0:R0.apply(null,arguments)};function Hi(t,e){function n(...r){if(e){let i=e(...r);if(!i)throw new Error(fi(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:r[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=r=>FL(r)&&r.type===t,n}var ZL=class ph extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,ph.prototype)}static get[Symbol.species](){return ph}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new ph(...e[0].concat(this)):new ph(...e.concat(this))}};function JR(t){return _s(t)?JL(t,()=>{}):t}function pg(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function _ee(t){return typeof t=="boolean"}var wee=()=>function(e){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=e??{};let o=new ZL;return n&&(_ee(n)?o.push(vee):o.push(xee(n.extraArgument))),o},e6="RTK_autoBatch",tn=()=>t=>({payload:t,meta:{[e6]:!0}}),QR=t=>e=>{setTimeout(e,t)},t6=(t={type:"raf"})=>e=>(...n)=>{const r=e(...n);let i=!0,s=!1,o=!1;const c=new Set,f=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:QR(10):t.type==="callback"?t.queueNotification:QR(t.timeout),d=()=>{o=!1,s&&(s=!1,c.forEach(h=>h()))};return Object.assign({},r,{subscribe(h){const m=()=>i&&h(),g=r.subscribe(m);return c.add(h),()=>{g(),c.delete(h)}},dispatch(h){var m;try{return i=!((m=h==null?void 0:h.meta)!=null&&m[e6]),s=!i,s&&(o||(o=!0,f(d))),r.dispatch(h)}finally{i=!0}}})},See=t=>function(n){const{autoBatch:r=!0}=n??{};let i=new ZL(t);return r&&i.push(t6(typeof r=="object"?r:void 0)),i};function Tee(t){const e=wee(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=t||{};let c;if(typeof n=="function")c=n;else if(VT(n))c=VL(n);else throw new Error(fi(1));let f;typeof r=="function"?f=r(e):f=e();let d=R0;i&&(d=bee({trace:!1,...typeof i=="object"&&i}));const h=ree(...f),m=See(h);let g=typeof o=="function"?o(m):m();const v=d(...g);return UL(c,s,v)}function n6(t){const e={},n=[];let r;const i={addCase(s,o){const c=typeof s=="string"?s:s.type;if(!c)throw new Error(fi(28));if(c in e)throw new Error(fi(29));return e[c]=o,i},addAsyncThunk(s,o){return o.pending&&(e[s.pending.type]=o.pending),o.rejected&&(e[s.rejected.type]=o.rejected),o.fulfilled&&(e[s.fulfilled.type]=o.fulfilled),o.settled&&n.push({matcher:s.settled,reducer:o.settled}),i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return t(i),[e,n,r]}function Eee(t){return typeof t=="function"}function Aee(t,e){let[n,r,i]=n6(e),s;if(Eee(t))s=()=>JR(t());else{const c=JR(t);s=()=>c}function o(c=s(),f){let d=[n[f.type],...r.filter(({matcher:h})=>h(f)).map(({reducer:h})=>h)];return d.filter(h=>!!h).length===0&&(d=[i]),d.reduce((h,m)=>{if(m)if(Jo(h)){const v=m(h,f);return v===void 0?h:v}else{if(_s(h))return JL(h,g=>m(g,f));{const g=m(h,f);if(g===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return h},c)}return o.getInitialState=s,o}var Cee="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Nee=(t=21)=>{let e="",n=t;for(;n--;)e+=Cee[Math.random()*64|0];return e},kee=Symbol.for("rtk-slice-createasyncthunk");function Iee(t,e){return`${t}/${e}`}function Ree({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[kee];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(fi(11));const c=(typeof i.reducers=="function"?i.reducers(jee()):i.reducers)||{},f=Object.keys(c),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(O,k){const D=typeof O=="string"?O:O.type;if(!D)throw new Error(fi(12));if(D in d.sliceCaseReducersByType)throw new Error(fi(13));return d.sliceCaseReducersByType[D]=k,h},addMatcher(O,k){return d.sliceMatchers.push({matcher:O,reducer:k}),h},exposeAction(O,k){return d.actionCreators[O]=k,h},exposeCaseReducer(O,k){return d.sliceCaseReducersByName[O]=k,h}};f.forEach(O=>{const k=c[O],D={reducerName:O,type:Iee(s,O),createNotation:typeof i.reducers=="function"};Dee(k)?Lee(D,k,h,e):Mee(D,k,h)});function m(){const[O={},k=[],D=void 0]=typeof i.extraReducers=="function"?n6(i.extraReducers):[i.extraReducers],M={...O,...d.sliceCaseReducersByType};return Aee(i.initialState,j=>{for(let I in M)j.addCase(I,M[I]);for(let I of d.sliceMatchers)j.addMatcher(I.matcher,I.reducer);for(let I of k)j.addMatcher(I.matcher,I.reducer);D&&j.addDefaultCase(D)})}const g=O=>O,v=new Map,b=new WeakMap;let w;function S(O,k){return w||(w=m()),w(O,k)}function C(){return w||(w=m()),w.getInitialState()}function R(O,k=!1){function D(j){let I=j[O];return typeof I>"u"&&k&&(I=pg(b,D,C)),I}function M(j=g){const I=pg(v,k,()=>new WeakMap);return pg(I,j,()=>{const U={};for(const[B,P]of Object.entries(i.selectors??{}))U[B]=Pee(P,j,()=>pg(b,j,C),k);return U})}return{reducerPath:O,getSelectors:M,get selectors(){return M(D)},selectSlice:D}}const N={name:s,reducer:S,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:C,...R(o),injectInto(O,{reducerPath:k,...D}={}){const M=k??o;return O.inject({reducerPath:M,reducer:S},D),{...N,...R(M,!0)}}};return N}}function Pee(t,e,n,r){function i(s,...o){let c=e(s);return typeof c>"u"&&r&&(c=n()),t(c,...o)}return i.unwrapped=t,i}var Zr=Ree();function jee(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function Mee({type:t,reducerName:e,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Oee(r))throw new Error(fi(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(t,s).exposeCaseReducer(e,s).exposeAction(e,o?Hi(t,o):Hi(t))}function Dee(t){return t._reducerDefinitionType==="asyncThunk"}function Oee(t){return t._reducerDefinitionType==="reducerWithPrepare"}function Lee({type:t,reducerName:e},n,r,i){if(!i)throw new Error(fi(18));const{payloadCreator:s,fulfilled:o,pending:c,rejected:f,settled:d,options:h}=n,m=i(t,s,h);r.exposeAction(e,m),o&&r.addCase(m.fulfilled,o),c&&r.addCase(m.pending,c),f&&r.addCase(m.rejected,f),d&&r.addMatcher(m.settled,d),r.exposeCaseReducer(e,{fulfilled:o||mg,pending:c||mg,rejected:f||mg,settled:d||mg})}function mg(){}var zee="task",r6="listener",i6="completed",qT="cancelled",Uee=`task-${qT}`,Vee=`task-${i6}`,Pw=`${r6}-${qT}`,Fee=`${r6}-${i6}`,av=class{constructor(t){Db(this,"name","TaskAbortError");Db(this,"message");this.code=t,this.message=`${zee} ${qT} (reason: ${t})`}},$T=(t,e)=>{if(typeof t!="function")throw new TypeError(fi(32))},z0=()=>{},s6=(t,e=z0)=>(t.catch(e),t),o6=(t,e)=>(t.addEventListener("abort",e,{once:!0}),()=>t.removeEventListener("abort",e)),pc=t=>{if(t.aborted)throw new av(t.reason)};function a6(t,e){let n=z0;return new Promise((r,i)=>{const s=()=>i(new av(t.reason));if(t.aborted){s();return}n=o6(t,s),e.finally(()=>n()).then(r,i)}).finally(()=>{n=z0})}var Bee=async(t,e)=>{try{return await Promise.resolve(),{status:"ok",value:await t()}}catch(n){return{status:n instanceof av?"cancelled":"rejected",error:n}}finally{e==null||e()}},U0=t=>e=>s6(a6(t,e).then(n=>(pc(t),n))),l6=t=>{const e=U0(t);return n=>e(new Promise(r=>setTimeout(r,n)))},{assign:td}=Object,ZR={},lv="listenerMiddleware",Hee=(t,e)=>{const n=r=>o6(t,()=>r.abort(t.reason));return(r,i)=>{$T(r);const s=new AbortController;n(s);const o=Bee(async()=>{pc(t),pc(s.signal);const c=await r({pause:U0(s.signal),delay:l6(s.signal),signal:s.signal});return pc(s.signal),c},()=>s.abort(Vee));return i!=null&&i.autoJoin&&e.push(o.catch(z0)),{result:U0(t)(o),cancel(){s.abort(Uee)}}}},qee=(t,e)=>{const n=async(r,i)=>{pc(e);let s=()=>{};const c=[new Promise((f,d)=>{let h=t({predicate:r,effect:(m,g)=>{g.unsubscribe(),f([m,g.getState(),g.getOriginalState()])}});s=()=>{h(),d()}})];i!=null&&c.push(new Promise(f=>setTimeout(f,i,null)));try{const f=await a6(e,Promise.race(c));return pc(e),f}finally{s()}};return(r,i)=>s6(n(r,i))},c6=t=>{let{type:e,actionCreator:n,matcher:r,predicate:i,effect:s}=t;if(e)i=Hi(e).match;else if(n)e=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(fi(21));return $T(s),{predicate:i,type:e,effect:s}},u6=td(t=>{const{type:e,predicate:n,effect:r}=c6(t);return{id:Nee(),effect:r,type:e,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(fi(22))}}},{withTypes:()=>u6}),eP=(t,e)=>{const{type:n,effect:r,predicate:i}=c6(e);return Array.from(t.values()).find(s=>(typeof n=="string"?s.type===n:s.predicate===i)&&s.effect===r)},jw=t=>{t.pending.forEach(e=>{e.abort(Pw)})},$ee=(t,e)=>()=>{for(const n of e.keys())jw(n);t.clear()},tP=(t,e,n)=>{try{t(e,n)}catch(r){setTimeout(()=>{throw r},0)}},d6=td(Hi(`${lv}/add`),{withTypes:()=>d6}),Gee=Hi(`${lv}/removeAll`),f6=td(Hi(`${lv}/remove`),{withTypes:()=>f6}),Kee=(...t)=>{console.error(`${lv}/error`,...t)},yp=(t={})=>{const e=new Map,n=new Map,r=v=>{const b=n.get(v)??0;n.set(v,b+1)},i=v=>{const b=n.get(v)??1;b===1?n.delete(v):n.set(v,b-1)},{extra:s,onError:o=Kee}=t;$T(o);const c=v=>(v.unsubscribe=()=>e.delete(v.id),e.set(v.id,v),b=>{v.unsubscribe(),b!=null&&b.cancelActive&&jw(v)}),f=v=>{const b=eP(e,v)??u6(v);return c(b)};td(f,{withTypes:()=>f});const d=v=>{const b=eP(e,v);return b&&(b.unsubscribe(),v.cancelActive&&jw(b)),!!b};td(d,{withTypes:()=>d});const h=async(v,b,w,S)=>{const C=new AbortController,R=qee(f,C.signal),N=[];try{v.pending.add(C),r(v),await Promise.resolve(v.effect(b,td({},w,{getOriginalState:S,condition:(O,k)=>R(O,k).then(Boolean),take:R,delay:l6(C.signal),pause:U0(C.signal),extra:s,signal:C.signal,fork:Hee(C.signal,N),unsubscribe:v.unsubscribe,subscribe:()=>{e.set(v.id,v)},cancelActiveListeners:()=>{v.pending.forEach((O,k,D)=>{O!==C&&(O.abort(Pw),D.delete(O))})},cancel:()=>{C.abort(Pw),v.pending.delete(C)},throwIfCancelled:()=>{pc(C.signal)}})))}catch(O){O instanceof av||tP(o,O,{raisedBy:"effect"})}finally{await Promise.all(N),C.abort(Fee),i(v),v.pending.delete(C)}},m=$ee(e,n);return{middleware:v=>b=>w=>{if(!FL(w))return b(w);if(d6.match(w))return f(w.payload);if(Gee.match(w)){m();return}if(f6.match(w))return d(w.payload);let S=v.getState();const C=()=>{if(S===ZR)throw new Error(fi(23));return S};let R;try{if(R=b(w),e.size>0){const N=v.getState(),O=Array.from(e.values());for(const k of O){let D=!1;try{D=k.predicate(w,N,S)}catch(M){D=!1,tP(o,M,{raisedBy:"predicate"})}D&&h(k,w,v,C)}}}finally{S=ZR}return R},startListening:f,stopListening:d,clearListeners:m}};function fi(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var Wee={layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},h6=Zr({name:"chartLayout",initialState:Wee,reducers:{setLayout(t,e){t.layoutType=e.payload},setChartSize(t,e){t.width=e.payload.width,t.height=e.payload.height},setMargin(t,e){var n,r,i,s;t.margin.top=(n=e.payload.top)!==null&&n!==void 0?n:0,t.margin.right=(r=e.payload.right)!==null&&r!==void 0?r:0,t.margin.bottom=(i=e.payload.bottom)!==null&&i!==void 0?i:0,t.margin.left=(s=e.payload.left)!==null&&s!==void 0?s:0},setScale(t,e){t.scale=e.payload}}}),{setMargin:Yee,setLayout:Xee,setChartSize:Jee,setScale:Qee}=h6.actions,Zee=h6.reducer;function p6(t,e,n){return Array.isArray(t)&&t&&e+n!==0?t.slice(e,n+1):t}function Nt(t){return Number.isFinite(t)}function xl(t){return typeof t=="number"&&t>0&&Number.isFinite(t)}function nP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Hu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?nP(Object(n),!0).forEach(function(r){ete(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):nP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ete(t,e,n){return(e=tte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tte(t){var e=nte(t,"string");return typeof e=="symbol"?e:e+""}function nte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ur(t,e,n){return Tr(t)||Tr(e)?n:mo(e)?Qy(t,e,n):typeof e=="function"?e(t):n}var rte=(t,e,n)=>{if(e&&n){var{width:r,height:i}=n,{align:s,verticalAlign:o,layout:c}=e;if((c==="vertical"||c==="horizontal"&&o==="middle")&&s!=="center"&&Je(t[s]))return Hu(Hu({},t),{},{[s]:t[s]+(r||0)});if((c==="horizontal"||c==="vertical"&&s==="center")&&o!=="middle"&&Je(t[o]))return Hu(Hu({},t),{},{[o]:t[o]+(i||0)})}return t},vo=(t,e)=>t==="horizontal"&&e==="xAxis"||t==="vertical"&&e==="yAxis"||t==="centric"&&e==="angleAxis"||t==="radial"&&e==="radiusAxis",ite=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0,c=0;c<n;++c){var f=t[c],d=f==null?void 0:f[i];if(d!=null){var h=d[1],m=d[0],g=po(h)?m:h;g>=0?(d[0]=s,s+=g,d[1]=s):(d[0]=o,o+=g,d[1]=o)}}}},ste=t=>{var e,n=t.length;if(!(n<=0)){var r=(e=t[0])===null||e===void 0?void 0:e.length;if(!(r==null||r<=0))for(var i=0;i<r;++i)for(var s=0,o=0;o<n;++o){var c=t[o],f=c==null?void 0:c[i];if(f!=null){var d=po(f[1])?f[0]:f[1];d>=0?(f[0]=s,s+=d,f[1]=s):(f[0]=0,f[1]=0)}}}},ote={sign:ite,expand:qQ,none:Ec,silhouette:$Q,wiggle:GQ,positive:ste},ate=(t,e,n)=>{var r,i=(r=ote[n])!==null&&r!==void 0?r:Ec,s=HQ().keys(e).value((c,f)=>Number(ur(c,f,0))).order(Sw).offset(i),o=s(t);return o.forEach((c,f)=>{c.forEach((d,h)=>{var m=ur(t[h],e[f],0);Array.isArray(m)&&m.length===2&&Je(m[0])&&Je(m[1])&&(d[0]=m[0],d[1]=m[1])})}),o};function lte(t){return t==null?void 0:String(t)}function rP(t){var{axis:e,ticks:n,bandSize:r,entry:i,index:s,dataKey:o}=t;if(e.type==="category"){if(!e.allowDuplicatedCategory&&e.dataKey&&!Tr(i[e.dataKey])){var c=EL(n,"value",i[e.dataKey]);if(c)return c.coordinate+r/2}return n!=null&&n[s]?n[s].coordinate+r/2:null}var f=ur(i,Tr(o)?e.dataKey:o),d=e.scale.map(f);return Je(d)?d:null}var cte=t=>{var e=t.flat(2).filter(Je);return[Math.min(...e),Math.max(...e)]},ute=t=>[t[0]===1/0?0:t[0],t[1]===-1/0?0:t[1]],dte=(t,e,n)=>{if(t!=null)return ute(Object.keys(t).reduce((r,i)=>{var s=t[i];if(!s)return r;var{stackedData:o}=s,c=o.reduce((f,d)=>{var h=p6(d,e,n),m=cte(h);return!Nt(m[0])||!Nt(m[1])?f:[Math.min(f[0],m[0]),Math.max(f[1],m[1])]},[1/0,-1/0]);return[Math.min(c[0],r[0]),Math.max(c[1],r[1])]},[1/0,-1/0]))},iP=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,sP=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,V0=(t,e,n)=>{if(t&&t.scale&&t.scale.bandwidth){var r=t.scale.bandwidth();if(!n||r>0)return r}if(t&&e&&e.length>=2){for(var i=Zy(e,h=>h.coordinate),s=1/0,o=1,c=i.length;o<c;o++){var f=i[o],d=i[o-1];s=Math.min(((f==null?void 0:f.coordinate)||0)-((d==null?void 0:d.coordinate)||0),s)}return s===1/0?0:s}return n?void 0:0};function oP(t){var{tooltipEntrySettings:e,dataKey:n,payload:r,value:i,name:s}=t;return Hu(Hu({},e),{},{dataKey:n,payload:r,value:i,name:s})}function m6(t,e){if(t)return String(t);if(typeof e=="string")return e}var fte=(t,e)=>{if(e==="horizontal")return t.chartX;if(e==="vertical")return t.chartY},hte=(t,e)=>e==="centric"?t.angle:t.radius,sa=t=>t.layout.width,oa=t=>t.layout.height,pte=t=>t.layout.scale,g6=t=>t.layout.margin,cv=we(t=>t.cartesianAxis.xAxis,t=>Object.values(t)),uv=we(t=>t.cartesianAxis.yAxis,t=>Object.values(t)),mte="data-recharts-item-index",gte="data-recharts-item-id",vp=60;function aP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aP(Object(n),!0).forEach(function(r){yte(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yte(t,e,n){return(e=vte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vte(t){var e=xte(t,"string");return typeof e=="symbol"?e:e+""}function xte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bte=t=>t.brush.height;function _te(t){var e=uv(t);return e.reduce((n,r)=>{if(r.orientation==="left"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:vp;return n+i}return n},0)}function wte(t){var e=uv(t);return e.reduce((n,r)=>{if(r.orientation==="right"&&!r.mirror&&!r.hide){var i=typeof r.width=="number"?r.width:vp;return n+i}return n},0)}function Ste(t){var e=cv(t);return e.reduce((n,r)=>r.orientation==="top"&&!r.mirror&&!r.hide?n+r.height:n,0)}function Tte(t){var e=cv(t);return e.reduce((n,r)=>r.orientation==="bottom"&&!r.mirror&&!r.hide?n+r.height:n,0)}var pr=we([sa,oa,g6,bte,_te,wte,Ste,Tte,zL,JZ],(t,e,n,r,i,s,o,c,f,d)=>{var h={left:(n.left||0)+i,right:(n.right||0)+s},m={top:(n.top||0)+o,bottom:(n.bottom||0)+c},g=gg(gg({},m),h),v=g.bottom;g.bottom+=r,g=rte(g,f,d);var b=t-g.left-g.right,w=e-g.top-g.bottom;return gg(gg({brushBottom:v},g),{},{width:Math.max(b,0),height:Math.max(w,0)})}),Ete=we(pr,t=>({x:t.left,y:t.top,width:t.width,height:t.height})),y6=we(sa,oa,(t,e)=>({x:0,y:0,width:t,height:e})),Ate=L.createContext(null),bi=()=>L.useContext(Ate)!=null,dv=t=>t.brush,fv=we([dv,pr,g6],(t,e,n)=>({height:t.height,x:Je(t.x)?t.x:e.left,y:Je(t.y)?t.y:e.top+e.height+e.brushBottom-((n==null?void 0:n.bottom)||0),width:Je(t.width)?t.width:e.width})),r_={},i_={},s_={},lP;function Cte(){return lP||(lP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n,r,{signal:i,edges:s}={}){let o,c=null;const f=s!=null&&s.includes("leading"),d=s==null||s.includes("trailing"),h=()=>{c!==null&&(n.apply(o,c),o=void 0,c=null)},m=()=>{d&&h(),w()};let g=null;const v=()=>{g!=null&&clearTimeout(g),g=setTimeout(()=>{g=null,m()},r)},b=()=>{g!==null&&(clearTimeout(g),g=null)},w=()=>{b(),o=void 0,c=null},S=()=>{h()},C=function(...R){if(i!=null&&i.aborted)return;o=this,c=R;const N=g==null;v(),f&&N&&h()};return C.schedule=v,C.cancel=w,C.flush=S,i==null||i.addEventListener("abort",w,{once:!0}),C}t.debounce=e})(s_)),s_}var cP;function Nte(){return cP||(cP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Cte();function n(r,i=0,s={}){typeof s!="object"&&(s={});const{leading:o=!1,trailing:c=!0,maxWait:f}=s,d=Array(2);o&&(d[0]="leading"),c&&(d[1]="trailing");let h,m=null;const g=e.debounce(function(...w){h=r.apply(this,w),m=null},i,{edges:d}),v=function(...w){return f!=null&&(m===null&&(m=Date.now()),Date.now()-m>=f)?(h=r.apply(this,w),m=Date.now(),g.cancel(),g.schedule(),h):(g.apply(this,w),h)},b=()=>(g.flush(),h);return v.cancel=g.cancel,v.flush=b,v}t.debounce=n})(i_)),i_}var uP;function kte(){return uP||(uP=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Nte();function n(r,i=0,s={}){const{leading:o=!0,trailing:c=!0}=s;return e.debounce(r,i,{leading:o,maxWait:i,trailing:c})}t.throttle=n})(r_)),r_}var o_,dP;function Ite(){return dP||(dP=1,o_=kte().throttle),o_}var Rte=Ite();const Pte=ws(Rte);var fP=function(e,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];if(typeof console<"u"&&console.warn&&(n===void 0&&console.warn("LogUtils requires an error message argument"),!e))if(n===void 0)console.warn("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var o=0;console.warn(n.replace(/%s/g,()=>i[o++]))}},eo={width:"100%",height:"100%",debounce:0,minWidth:0,initialDimension:{width:-1,height:-1}},v6=(t,e,n)=>{var{width:r=eo.width,height:i=eo.height,aspect:s,maxHeight:o}=n,c=Ac(r)?t:Number(r),f=Ac(i)?e:Number(i);return s&&s>0&&(c?f=c/s:f&&(c=f*s),o&&f!=null&&f>o&&(f=o)),{calculatedWidth:c,calculatedHeight:f}},jte={width:0,height:0,overflow:"visible"},Mte={width:0,overflowX:"visible"},Dte={height:0,overflowY:"visible"},Ote={},Lte=t=>{var{width:e,height:n}=t,r=Ac(e),i=Ac(n);return r&&i?jte:r?Mte:i?Dte:Ote};function zte(t){var{width:e,height:n,aspect:r}=t,i=e,s=n;return i===void 0&&s===void 0?(i=eo.width,s=eo.height):i===void 0?i=r&&r>0?void 0:eo.width:s===void 0&&(s=r&&r>0?void 0:eo.height),{width:i,height:s}}function Mw(){return Mw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Mw.apply(null,arguments)}function hP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function pP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?hP(Object(n),!0).forEach(function(r){Ute(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):hP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ute(t,e,n){return(e=Vte(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vte(t){var e=Fte(t,"string");return typeof e=="symbol"?e:e+""}function Fte(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var x6=L.createContext(eo.initialDimension);function Bte(t){return xl(t.width)&&xl(t.height)}function b6(t){var{children:e,width:n,height:r}=t,i=L.useMemo(()=>({width:n,height:r}),[n,r]);return Bte(i)?L.createElement(x6.Provider,{value:i},e):null}var GT=()=>L.useContext(x6),Hte=L.forwardRef((t,e)=>{var{aspect:n,initialDimension:r=eo.initialDimension,width:i,height:s,minWidth:o=eo.minWidth,minHeight:c,maxHeight:f,children:d,debounce:h=eo.debounce,id:m,className:g,onResize:v,style:b={}}=t,w=L.useRef(null),S=L.useRef();S.current=v,L.useImperativeHandle(e,()=>w.current);var[C,R]=L.useState({containerWidth:r.width,containerHeight:r.height}),N=L.useCallback((j,I)=>{R(U=>{var B=Math.round(j),P=Math.round(I);return U.containerWidth===B&&U.containerHeight===P?U:{containerWidth:B,containerHeight:P}})},[]);L.useEffect(()=>{if(w.current==null||typeof ResizeObserver>"u")return Dd;var j=P=>{var F,z=P[0];if(z!=null){var{width:Q,height:W}=z.contentRect;N(Q,W),(F=S.current)===null||F===void 0||F.call(S,Q,W)}};h>0&&(j=Pte(j,h,{trailing:!0,leading:!1}));var I=new ResizeObserver(j),{width:U,height:B}=w.current.getBoundingClientRect();return N(U,B),I.observe(w.current),()=>{I.disconnect()}},[N,h]);var{containerWidth:O,containerHeight:k}=C;fP(!n||n>0,"The aspect(%s) must be greater than zero.",n);var{calculatedWidth:D,calculatedHeight:M}=v6(O,k,{width:i,height:s,aspect:n,maxHeight:f});return fP(D!=null&&D>0||M!=null&&M>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,D,M,i,s,o,c,n),L.createElement("div",{id:m?"".concat(m):void 0,className:Qt("recharts-responsive-container",g),style:pP(pP({},b),{},{width:i,height:s,minWidth:o,minHeight:c,maxHeight:f}),ref:w},L.createElement("div",{style:Lte({width:i,height:s})},L.createElement(b6,{width:D,height:M},d)))}),qte=L.forwardRef((t,e)=>{var n=GT();if(xl(n.width)&&xl(n.height))return t.children;var{width:r,height:i}=zte({width:t.width,height:t.height,aspect:t.aspect}),{calculatedWidth:s,calculatedHeight:o}=v6(void 0,void 0,{width:r,height:i,aspect:t.aspect,maxHeight:t.maxHeight});return Je(s)&&Je(o)?L.createElement(b6,{width:s,height:o},t.children):L.createElement(Hte,Mw({},t,{width:r,height:i,ref:e}))});function KT(t){if(t)return{x:t.x,y:t.y,upperWidth:"upperWidth"in t?t.upperWidth:t.width,lowerWidth:"lowerWidth"in t?t.lowerWidth:t.width,width:t.width,height:t.height}}var hv=()=>{var t,e=bi(),n=et(Ete),r=et(fv),i=(t=et(dv))===null||t===void 0?void 0:t.padding;return!e||!r||!i?n:{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}},$te={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},Gte=()=>{var t;return(t=et(pr))!==null&&t!==void 0?t:$te},Kte=()=>et(sa),Wte=()=>et(oa),rn=t=>t.layout.layoutType,Od=()=>et(rn),WT=()=>{var t=Od();if(t==="horizontal"||t==="vertical")return t},_6=t=>{var e=t.layout.layoutType;if(e==="centric"||e==="radial")return e},Yte=()=>{var t=Od();return t!==void 0},xp=t=>{var e=Wn(),n=bi(),{width:r,height:i}=t,s=GT(),o=r,c=i;return s&&(o=s.width>0?s.width:r,c=s.height>0?s.height:i),L.useEffect(()=>{!n&&xl(o)&&xl(c)&&e(Jee({width:o,height:c}))},[e,n,o,c]),null},w6=Symbol.for("immer-nothing"),mP=Symbol.for("immer-draftable"),gi=Symbol.for("immer-state");function ls(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var qh=Object.getPrototypeOf;function xd(t){return!!t&&!!t[gi]}function Nc(t){var e;return t?S6(t)||Array.isArray(t)||!!t[mP]||!!((e=t.constructor)!=null&&e[mP])||bp(t)||mv(t):!1}var Xte=Object.prototype.constructor.toString(),gP=new WeakMap;function S6(t){if(!t||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);if(e===null||e===Object.prototype)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;if(n===Object)return!0;if(typeof n!="function")return!1;let r=gP.get(n);return r===void 0&&(r=Function.toString.call(n),gP.set(n,r)),r===Xte}function F0(t,e,n=!0){pv(t)===0?(n?Reflect.ownKeys(t):Object.keys(t)).forEach(i=>{e(i,t[i],t)}):t.forEach((r,i)=>e(i,r,t))}function pv(t){const e=t[gi];return e?e.type_:Array.isArray(t)?1:bp(t)?2:mv(t)?3:0}function Dw(t,e){return pv(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function T6(t,e,n){const r=pv(t);r===2?t.set(e,n):r===3?t.add(n):t[e]=n}function Jte(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function bp(t){return t instanceof Map}function mv(t){return t instanceof Set}function rc(t){return t.copy_||t.base_}function Ow(t,e){if(bp(t))return new Map(t);if(mv(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=S6(t);if(e===!0||e==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(t);delete r[gi];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],c=r[o];c.writable===!1&&(c.writable=!0,c.configurable=!0),(c.get||c.set)&&(r[o]={configurable:!0,writable:!0,enumerable:c.enumerable,value:t[o]})}return Object.create(qh(t),r)}else{const r=qh(t);if(r!==null&&n)return{...t};const i=Object.create(r);return Object.assign(i,t)}}function YT(t,e=!1){return gv(t)||xd(t)||!Nc(t)||(pv(t)>1&&Object.defineProperties(t,{set:yg,add:yg,clear:yg,delete:yg}),Object.freeze(t),e&&Object.values(t).forEach(n=>YT(n,!0))),t}function Qte(){ls(2)}var yg={value:Qte};function gv(t){return t===null||typeof t!="object"?!0:Object.isFrozen(t)}var Zte={};function kc(t){const e=Zte[t];return e||ls(0,t),e}var $h;function E6(){return $h}function ene(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function yP(t,e){e&&(kc("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Lw(t){zw(t),t.drafts_.forEach(tne),t.drafts_=null}function zw(t){t===$h&&($h=t.parent_)}function vP(t){return $h=ene($h,t)}function tne(t){const e=t[gi];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function xP(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[gi].modified_&&(Lw(e),ls(4)),Nc(t)&&(t=B0(e,t),e.parent_||H0(e,t)),e.patches_&&kc("Patches").generateReplacementPatches_(n[gi].base_,t,e.patches_,e.inversePatches_)):t=B0(e,n,[]),Lw(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==w6?t:void 0}function B0(t,e,n){if(gv(e))return e;const r=t.immer_.shouldUseStrictIteration(),i=e[gi];if(!i)return F0(e,(s,o)=>bP(t,i,e,s,o,n),r),e;if(i.scope_!==t)return e;if(!i.modified_)return H0(t,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const s=i.copy_;let o=s,c=!1;i.type_===3&&(o=new Set(s),s.clear(),c=!0),F0(o,(f,d)=>bP(t,i,s,f,d,n,c),r),H0(t,s,!1),n&&t.patches_&&kc("Patches").generatePatches_(i,n,t.patches_,t.inversePatches_)}return i.copy_}function bP(t,e,n,r,i,s,o){if(i==null||typeof i!="object"&&!o)return;const c=gv(i);if(!(c&&!o)){if(xd(i)){const f=s&&e&&e.type_!==3&&!Dw(e.assigned_,r)?s.concat(r):void 0,d=B0(t,i,f);if(T6(n,r,d),xd(d))t.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Nc(i)&&!c){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1||e&&e.base_&&e.base_[r]===i&&c)return;B0(t,i),(!e||!e.scope_.parent_)&&typeof r!="symbol"&&(bp(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))&&H0(t,i)}}}function H0(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&YT(e,n)}function nne(t,e){const n=Array.isArray(t),r={type_:n?1:0,scope_:e?e.scope_:E6(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=XT;n&&(i=[r],s=Gh);const{revoke:o,proxy:c}=Proxy.revocable(i,s);return r.draft_=c,r.revoke_=o,c}var XT={get(t,e){if(e===gi)return t;const n=rc(t);if(!Dw(n,e))return rne(t,n,e);const r=n[e];return t.finalized_||!Nc(r)?r:r===a_(t.base_,e)?(l_(t),t.copy_[e]=Vw(r,t)):r},has(t,e){return e in rc(t)},ownKeys(t){return Reflect.ownKeys(rc(t))},set(t,e,n){const r=A6(rc(t),e);if(r!=null&&r.set)return r.set.call(t.draft_,n),!0;if(!t.modified_){const i=a_(rc(t),e),s=i==null?void 0:i[gi];if(s&&s.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(Jte(n,i)&&(n!==void 0||Dw(t.base_,e)))return!0;l_(t),Uw(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return a_(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,l_(t),Uw(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=rc(t),r=Reflect.getOwnPropertyDescriptor(n,e);return r&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:r.enumerable,value:n[e]}},defineProperty(){ls(11)},getPrototypeOf(t){return qh(t.base_)},setPrototypeOf(){ls(12)}},Gh={};F0(XT,(t,e)=>{Gh[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});Gh.deleteProperty=function(t,e){return Gh.set.call(this,t,e,void 0)};Gh.set=function(t,e,n){return XT.set.call(this,t[0],e,n,t[0])};function a_(t,e){const n=t[gi];return(n?rc(n):t)[e]}function rne(t,e,n){var i;const r=A6(e,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(t.draft_):void 0}function A6(t,e){if(!(e in t))return;let n=qh(t);for(;n;){const r=Object.getOwnPropertyDescriptor(n,e);if(r)return r;n=qh(n)}}function Uw(t){t.modified_||(t.modified_=!0,t.parent_&&Uw(t.parent_))}function l_(t){t.copy_||(t.copy_=Ow(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var ine=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.useStrictIteration_=!0,this.produce=(e,n,r)=>{if(typeof e=="function"&&typeof n!="function"){const s=n;n=e;const o=this;return function(f=s,...d){return o.produce(f,h=>n.call(this,h,...d))}}typeof n!="function"&&ls(6),r!==void 0&&typeof r!="function"&&ls(7);let i;if(Nc(e)){const s=vP(this),o=Vw(e,void 0);let c=!0;try{i=n(o),c=!1}finally{c?Lw(s):zw(s)}return yP(s,r),xP(i,s)}else if(!e||typeof e!="object"){if(i=n(e),i===void 0&&(i=e),i===w6&&(i=void 0),this.autoFreeze_&&YT(i,!0),r){const s=[],o=[];kc("Patches").generateReplacementPatches_(e,i,s,o),r(s,o)}return i}else ls(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...c)=>this.produceWithPatches(o,f=>e(f,...c));let r,i;return[this.produce(e,n,(o,c)=>{r=o,i=c}),r,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy),typeof(t==null?void 0:t.useStrictIteration)=="boolean"&&this.setUseStrictIteration(t.useStrictIteration)}createDraft(t){Nc(t)||ls(8),xd(t)&&(t=sne(t));const e=vP(this),n=Vw(t,void 0);return n[gi].isManual_=!0,zw(e),n}finishDraft(t,e){const n=t&&t[gi];(!n||!n.isManual_)&&ls(9);const{scope_:r}=n;return yP(r,e),xP(void 0,r)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}setUseStrictIteration(t){this.useStrictIteration_=t}shouldUseStrictIteration(){return this.useStrictIteration_}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const i=e[n];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}n>-1&&(e=e.slice(n+1));const r=kc("Patches").applyPatches_;return xd(t)?r(t,e):this.produce(t,i=>r(i,e))}};function Vw(t,e){const n=bp(t)?kc("MapSet").proxyMap_(t,e):mv(t)?kc("MapSet").proxySet_(t,e):nne(t,e);return(e?e.scope_:E6()).drafts_.push(n),n}function sne(t){return xd(t)||ls(10,t),C6(t)}function C6(t){if(!Nc(t)||gv(t))return t;const e=t[gi];let n,r=!0;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=Ow(t,e.scope_.immer_.useStrictShallowCopy_),r=e.scope_.immer_.shouldUseStrictIteration()}else n=Ow(t,!0);return F0(n,(i,s)=>{T6(n,i,C6(s))},r),e&&(e.finalized_=!1),n}var one=new ine;one.produce;var ane={settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},N6=Zr({name:"legend",initialState:ane,reducers:{setLegendSize(t,e){t.size.width=e.payload.width,t.size.height=e.payload.height},setLegendSettings(t,e){t.settings.align=e.payload.align,t.settings.layout=e.payload.layout,t.settings.verticalAlign=e.payload.verticalAlign,t.settings.itemSorter=e.payload.itemSorter},addLegendPayload:{reducer(t,e){t.payload.push(e.payload)},prepare:tn()},replaceLegendPayload:{reducer(t,e){var{prev:n,next:r}=e.payload,i=gs(t).payload.indexOf(n);i>-1&&(t.payload[i]=r)},prepare:tn()},removeLegendPayload:{reducer(t,e){var n=gs(t).payload.indexOf(e.payload);n>-1&&t.payload.splice(n,1)},prepare:tn()}}}),{setLegendSize:N_e,setLegendSettings:k_e,addLegendPayload:lne,replaceLegendPayload:cne,removeLegendPayload:une}=N6.actions,dne=N6.reducer;function Fw(){return Fw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Fw.apply(null,arguments)}function _P(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Qf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?_P(Object(n),!0).forEach(function(r){fne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_P(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fne(t,e,n){return(e=hne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hne(t){var e=pne(t,"string");return typeof e=="symbol"?e:e+""}function pne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function mne(t){return Array.isArray(t)&&mo(t[0])&&mo(t[1])?t.join(" ~ "):t}var Pu={separator:" : ",contentStyle:{margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},itemStyle:{display:"block",paddingTop:4,paddingBottom:4,color:"#000"},labelStyle:{},accessibilityLayer:!1},gne=t=>{var{separator:e=Pu.separator,contentStyle:n,itemStyle:r,labelStyle:i=Pu.labelStyle,payload:s,formatter:o,itemSorter:c,wrapperClassName:f,labelClassName:d,label:h,labelFormatter:m,accessibilityLayer:g=Pu.accessibilityLayer}=t,v=()=>{if(s&&s.length){var k={padding:0,margin:0},D=(c?Zy(s,c):s).map((M,j)=>{if(M.type==="none")return null;var I=M.formatter||o||mne,{value:U,name:B}=M,P=U,F=B;if(I){var z=I(U,B,M,j,s);if(Array.isArray(z))[P,F]=z;else if(z!=null)P=z;else return null}var Q=Qf(Qf({},Pu.itemStyle),{},{color:M.color||Pu.itemStyle.color},r);return L.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(j),style:Q},mo(F)?L.createElement("span",{className:"recharts-tooltip-item-name"},F):null,mo(F)?L.createElement("span",{className:"recharts-tooltip-item-separator"},e):null,L.createElement("span",{className:"recharts-tooltip-item-value"},P),L.createElement("span",{className:"recharts-tooltip-item-unit"},M.unit||""))});return L.createElement("ul",{className:"recharts-tooltip-item-list",style:k},D)}return null},b=Qf(Qf({},Pu.contentStyle),n),w=Qf({margin:0},i),S=!Tr(h),C=S?h:"",R=Qt("recharts-default-tooltip",f),N=Qt("recharts-tooltip-label",d);S&&m&&s!==void 0&&s!==null&&(C=m(h,s));var O=g?{role:"status","aria-live":"assertive"}:{};return L.createElement("div",Fw({className:R,style:b},O),L.createElement("p",{className:N,style:w},L.isValidElement(C)?C:"".concat(C)),v())},Zf="recharts-tooltip-wrapper",yne={visibility:"hidden"};function vne(t){var{coordinate:e,translateX:n,translateY:r}=t;return Qt(Zf,{["".concat(Zf,"-right")]:Je(n)&&e&&Je(e.x)&&n>=e.x,["".concat(Zf,"-left")]:Je(n)&&e&&Je(e.x)&&n<e.x,["".concat(Zf,"-bottom")]:Je(r)&&e&&Je(e.y)&&r>=e.y,["".concat(Zf,"-top")]:Je(r)&&e&&Je(e.y)&&r<e.y})}function wP(t){var{allowEscapeViewBox:e,coordinate:n,key:r,offset:i,position:s,reverseDirection:o,tooltipDimension:c,viewBox:f,viewBoxDimension:d}=t;if(s&&Je(s[r]))return s[r];var h=n[r]-c-(i>0?i:0),m=n[r]+i;if(e[r])return o[r]?h:m;var g=f[r];if(g==null)return 0;if(o[r]){var v=h,b=g;return v<b?Math.max(m,g):Math.max(h,g)}if(d==null)return 0;var w=m+c,S=g+d;return w>S?Math.max(h,g):Math.max(m,g)}function xne(t){var{translateX:e,translateY:n,useTranslate3d:r}=t;return{transform:r?"translate3d(".concat(e,"px, ").concat(n,"px, 0)"):"translate(".concat(e,"px, ").concat(n,"px)")}}function bne(t){var{allowEscapeViewBox:e,coordinate:n,offsetTop:r,offsetLeft:i,position:s,reverseDirection:o,tooltipBox:c,useTranslate3d:f,viewBox:d}=t,h,m,g;return c.height>0&&c.width>0&&n?(m=wP({allowEscapeViewBox:e,coordinate:n,key:"x",offset:i,position:s,reverseDirection:o,tooltipDimension:c.width,viewBox:d,viewBoxDimension:d.width}),g=wP({allowEscapeViewBox:e,coordinate:n,key:"y",offset:r,position:s,reverseDirection:o,tooltipDimension:c.height,viewBox:d,viewBoxDimension:d.height}),h=xne({translateX:m,translateY:g,useTranslate3d:f})):h=yne,{cssProperties:h,cssClasses:vne({translateX:m,translateY:g,coordinate:n})}}function SP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function vg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?SP(Object(n),!0).forEach(function(r){Bw(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):SP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Bw(t,e,n){return(e=_ne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function _ne(t){var e=wne(t,"string");return typeof e=="symbol"?e:e+""}function wne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class Sne extends L.PureComponent{constructor(){super(...arguments),Bw(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),Bw(this,"handleKeyDown",e=>{if(e.key==="Escape"){var n,r,i,s;this.setState({dismissed:!0,dismissedAtCoordinate:{x:(n=(r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==null&&n!==void 0?n:0,y:(i=(s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==null&&i!==void 0?i:0}})}})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,n;this.state.dismissed&&(((e=this.props.coordinate)===null||e===void 0?void 0:e.x)!==this.state.dismissedAtCoordinate.x||((n=this.props.coordinate)===null||n===void 0?void 0:n.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}render(){var{active:e,allowEscapeViewBox:n,animationDuration:r,animationEasing:i,children:s,coordinate:o,hasPayload:c,isAnimationActive:f,offset:d,position:h,reverseDirection:m,useTranslate3d:g,viewBox:v,wrapperStyle:b,lastBoundingBox:w,innerRef:S,hasPortalFromProps:C}=this.props,R=typeof d=="number"?d:d.x,N=typeof d=="number"?d:d.y,{cssClasses:O,cssProperties:k}=bne({allowEscapeViewBox:n,coordinate:o,offsetLeft:R,offsetTop:N,position:h,reverseDirection:m,tooltipBox:{height:w.height,width:w.width},useTranslate3d:g,viewBox:v}),D=C?{}:vg(vg({transition:f&&e?"transform ".concat(r,"ms ").concat(i):void 0},k),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&c?"visible":"hidden",position:"absolute",top:0,left:0}),M=vg(vg({},D),{},{visibility:!this.state.dismissed&&e&&c?"visible":"hidden"},b);return L.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:O,style:M,ref:S},s)}}var k6=()=>{var t;return(t=et(e=>e.rootProps.accessibilityLayer))!==null&&t!==void 0?t:!0};function Hw(){return Hw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Hw.apply(null,arguments)}function TP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function EP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?TP(Object(n),!0).forEach(function(r){Tne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):TP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Tne(t,e,n){return(e=Ene(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ene(t){var e=Ane(t,"string");return typeof e=="symbol"?e:e+""}function Ane(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var AP={curveBasisClosed:PQ,curveBasisOpen:jQ,curveBasis:RQ,curveBumpX:kQ,curveBumpY:IQ,curveLinearClosed:MQ,curveLinear:Xy,curveMonotoneX:DQ,curveMonotoneY:OQ,curveNatural:LQ,curveStep:zQ,curveStepAfter:VQ,curveStepBefore:UQ},q0=t=>Nt(t.x)&&Nt(t.y),CP=t=>t.base!=null&&q0(t.base)&&q0(t),eh=t=>t.x,th=t=>t.y,Cne=(t,e)=>{if(typeof t=="function")return t;var n="curve".concat(DT(t));if((n==="curveMonotone"||n==="curveBump")&&e){var r=AP["".concat(n).concat(e==="vertical"?"Y":"X")];if(r)return r}return AP[n]||Xy},NP={connectNulls:!1,type:"linear"},Nne=t=>{var{type:e=NP.type,points:n=[],baseLine:r,layout:i,connectNulls:s=NP.connectNulls}=t,o=Cne(e,i),c=s?n.filter(q0):n;if(Array.isArray(r)){var f,d=n.map((b,w)=>EP(EP({},b),{},{base:r[w]}));i==="vertical"?f=ug().y(th).x1(eh).x0(b=>b.base.x):f=ug().x(eh).y1(th).y0(b=>b.base.y);var h=f.defined(CP).curve(o),m=s?d.filter(CP):d;return h(m)}var g;i==="vertical"&&Je(r)?g=ug().y(th).x1(eh).x0(r):Je(r)?g=ug().x(eh).y1(th).y0(r):g=pL().x(eh).y(th);var v=g.defined(q0).curve(o);return v(c)},Kg=t=>{var{className:e,points:n,path:r,pathRef:i}=t,s=Od();if((!n||!n.length)&&!r)return null;var o={type:t.type,points:t.points,baseLine:t.baseLine,layout:t.layout||s,connectNulls:t.connectNulls},c=n&&n.length?Nne(o):r;return L.createElement("path",Hw({},fo(t),OT(t),{className:Qt("recharts-curve",e),d:c===null?void 0:c,ref:i}))},kne=["x","y","top","left","width","height","className"];function qw(){return qw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},qw.apply(null,arguments)}function kP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ine(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kP(Object(n),!0).forEach(function(r){Rne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Rne(t,e,n){return(e=Pne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pne(t){var e=jne(t,"string");return typeof e=="symbol"?e:e+""}function jne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Mne(t,e){if(t==null)return{};var n,r,i=Dne(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Dne(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var One=(t,e,n,r,i,s)=>"M".concat(t,",").concat(i,"v").concat(r,"M").concat(s,",").concat(e,"h").concat(n),Lne=t=>{var{x:e=0,y:n=0,top:r=0,left:i=0,width:s=0,height:o=0,className:c}=t,f=Mne(t,kne),d=Ine({x:e,y:n,top:r,left:i,width:s,height:o},f);return!Je(e)||!Je(n)||!Je(s)||!Je(o)||!Je(r)||!Je(i)?null:L.createElement("path",qw({},Bi(d),{className:Qt("recharts-cross",c),d:One(e,n,s,o,r,i)}))};function zne(t,e,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:t==="horizontal"?e.x-i:n.left+.5,y:t==="horizontal"?n.top+.5:e.y-i,width:t==="horizontal"?r:n.width-1,height:t==="horizontal"?n.height-1:r}}function IP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function RP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?IP(Object(n),!0).forEach(function(r){Une(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):IP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Une(t,e,n){return(e=Vne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Vne(t){var e=Fne(t,"string");return typeof e=="symbol"?e:e+""}function Fne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bne=t=>t.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())),Hne=(t,e,n)=>t.map(r=>"".concat(Bne(r)," ").concat(e,"ms ").concat(n)).join(","),qne=(t,e)=>[Object.keys(t),Object.keys(e)].reduce((n,r)=>n.filter(i=>r.includes(i))),Kh=(t,e)=>Object.keys(e).reduce((n,r)=>RP(RP({},n),{},{[r]:t(r,e[r])}),{});function PP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Pn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?PP(Object(n),!0).forEach(function(r){$ne(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):PP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function $ne(t,e,n){return(e=Gne(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Gne(t){var e=Kne(t,"string");return typeof e=="symbol"?e:e+""}function Kne(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var $0=(t,e,n)=>t+(e-t)*n,$w=t=>{var{from:e,to:n}=t;return e!==n},I6=(t,e,n)=>{var r=Kh((i,s)=>{if($w(s)){var[o,c]=t(s.from,s.to,s.velocity);return Pn(Pn({},s),{},{from:o,velocity:c})}return s},e);return n<1?Kh((i,s)=>$w(s)&&r[i]!=null?Pn(Pn({},s),{},{velocity:$0(s.velocity,r[i].velocity,n),from:$0(s.from,r[i].from,n)}):s,e):I6(t,r,n-1)};function Wne(t,e,n,r,i,s){var o,c=r.reduce((g,v)=>Pn(Pn({},g),{},{[v]:{from:t[v],velocity:0,to:e[v]}}),{}),f=()=>Kh((g,v)=>v.from,c),d=()=>!Object.values(c).filter($w).length,h=null,m=g=>{o||(o=g);var v=g-o,b=v/n.dt;c=I6(n,c,b),i(Pn(Pn(Pn({},t),e),f())),o=g,d()||(h=s.setTimeout(m))};return()=>(h=s.setTimeout(m),()=>{var g;(g=h)===null||g===void 0||g()})}function Yne(t,e,n,r,i,s,o){var c=null,f=i.reduce((m,g)=>{var v=t[g],b=e[g];return v==null||b==null?m:Pn(Pn({},m),{},{[g]:[v,b]})},{}),d,h=m=>{d||(d=m);var g=(m-d)/r,v=Kh((w,S)=>$0(...S,n(g)),f);if(s(Pn(Pn(Pn({},t),e),v)),g<1)c=o.setTimeout(h);else{var b=Kh((w,S)=>$0(...S,n(1)),f);s(Pn(Pn(Pn({},t),e),b))}};return()=>(c=o.setTimeout(h),()=>{var m;(m=c)===null||m===void 0||m()})}const Xne=(t,e,n,r,i,s)=>{var o=qne(t,e);return n==null?()=>(i(Pn(Pn({},t),e)),()=>{}):n.isStepper===!0?Wne(t,e,n,o,i,s):Yne(t,e,n,r,o,i,s)};var G0=1e-4,R6=(t,e)=>[0,3*t,3*e-6*t,3*t-3*e+1],P6=(t,e)=>t.map((n,r)=>n*e**r).reduce((n,r)=>n+r),jP=(t,e)=>n=>{var r=R6(t,e);return P6(r,n)},Jne=(t,e)=>n=>{var r=R6(t,e),i=[...r.map((s,o)=>s*o).slice(1),0];return P6(i,n)},Qne=t=>{var e,n=t.split("(");if(n.length!==2||n[0]!=="cubic-bezier")return null;var r=(e=n[1])===null||e===void 0||(e=e.split(")")[0])===null||e===void 0?void 0:e.split(",");if(r==null||r.length!==4)return null;var i=r.map(s=>parseFloat(s));return[i[0],i[1],i[2],i[3]]},Zne=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];if(n.length===1)switch(n[0]){case"linear":return[0,0,1,1];case"ease":return[.25,.1,.25,1];case"ease-in":return[.42,0,1,1];case"ease-out":return[.42,0,.58,1];case"ease-in-out":return[0,0,.58,1];default:{var i=Qne(n[0]);if(i)return i}}return n.length===4?n:[0,0,1,1]},ere=(t,e,n,r)=>{var i=jP(t,n),s=jP(e,r),o=Jne(t,n),c=d=>d>1?1:d<0?0:d,f=d=>{for(var h=d>1?1:d,m=h,g=0;g<8;++g){var v=i(m)-h,b=o(m);if(Math.abs(v-h)<G0||b<G0)return s(m);m=c(m-v/b)}return s(m)};return f.isStepper=!1,f},MP=function(){return ere(...Zne(...arguments))},tre=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},{stiff:n=100,damping:r=8,dt:i=17}=e,s=(o,c,f)=>{var d=-(o-c)*n,h=f*r,m=f+(d-h)*i/1e3,g=f*i/1e3+o;return Math.abs(g-c)<G0&&Math.abs(m)<G0?[c,0]:[g,m]};return s.isStepper=!0,s.dt=i,s},nre=t=>{if(typeof t=="string")switch(t){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return MP(t);case"spring":return tre();default:if(t.split("(")[0]==="cubic-bezier")return MP(t)}return typeof t=="function"?t:null};function rre(t){var e,n=()=>null,r=!1,i=null,s=o=>{if(!r){if(Array.isArray(o)){if(!o.length)return;var c=o,[f,...d]=c;if(typeof f=="number"){i=t.setTimeout(s.bind(null,d),f);return}s(f),i=t.setTimeout(s.bind(null,d));return}typeof o=="string"&&(e=o,n(e)),typeof o=="object"&&(e=o,n(e)),typeof o=="function"&&o()}};return{stop:()=>{r=!0},start:o=>{r=!1,i&&(i(),i=null),s(o)},subscribe:o=>(n=o,()=>{n=()=>null}),getTimeoutController:()=>t}}class ire{setTimeout(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=performance.now(),i=null,s=o=>{o-r>=n?e(o):typeof requestAnimationFrame=="function"&&(i=requestAnimationFrame(s))};return i=requestAnimationFrame(s),()=>{i!=null&&cancelAnimationFrame(i)}}}function sre(){return rre(new ire)}var ore=L.createContext(sre);function are(t,e){var n=L.useContext(ore);return L.useMemo(()=>e??n(t),[t,e,n])}var lre=()=>!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout),_p={isSsr:lre()},cre={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},DP={t:0},c_={t:1};function j6(t){var e=Ki(t,cre),{isActive:n,canBegin:r,duration:i,easing:s,begin:o,onAnimationEnd:c,onAnimationStart:f,children:d}=e,h=n==="auto"?!_p.isSsr:n,m=are(e.animationId,e.animationManager),[g,v]=L.useState(h?DP:c_),b=L.useRef(null);return L.useEffect(()=>{h||v(c_)},[h]),L.useEffect(()=>{if(!h||!r)return Dd;var w=Xne(DP,c_,nre(s),i,v,m.getTimeoutController()),S=()=>{b.current=w()};return m.start([f,o,S,i,c]),()=>{m.stop(),b.current&&b.current(),c()}},[h,r,i,s,o,f,c,m]),d(g.t)}function M6(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"animation-",n=L.useRef(Vh(e)),r=L.useRef(t);return r.current!==t&&(n.current=Vh(e),r.current=t),n.current}var ure=["radius"],dre=["radius"],OP,LP,zP,UP,VP,FP,BP,HP,qP,$P;function GP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function KP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?GP(Object(n),!0).forEach(function(r){fre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):GP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fre(t,e,n){return(e=hre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hre(t){var e=pre(t,"string");return typeof e=="symbol"?e:e+""}function pre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function K0(){return K0=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},K0.apply(null,arguments)}function WP(t,e){if(t==null)return{};var n,r,i=mre(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function mre(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Gs(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var YP=(t,e,n,r,i)=>{var s=nl(n),o=nl(r),c=Math.min(Math.abs(s)/2,Math.abs(o)/2),f=o>=0?1:-1,d=s>=0?1:-1,h=o>=0&&s>=0||o<0&&s<0?1:0,m;if(c>0&&Array.isArray(i)){for(var g=[0,0,0,0],v=0,b=4;v<b;v++){var w,S=(w=i[v])!==null&&w!==void 0?w:0;g[v]=S>c?c:S}m=sr(OP||(OP=Gs(["M",",",""])),t,e+f*g[0]),g[0]>0&&(m+=sr(LP||(LP=Gs(["A ",",",",0,0,",",",",",""])),g[0],g[0],h,t+d*g[0],e)),m+=sr(zP||(zP=Gs(["L ",",",""])),t+n-d*g[1],e),g[1]>0&&(m+=sr(UP||(UP=Gs(["A ",",",",0,0,",`,
        `,",",""])),g[1],g[1],h,t+n,e+f*g[1])),m+=sr(VP||(VP=Gs(["L ",",",""])),t+n,e+r-f*g[2]),g[2]>0&&(m+=sr(FP||(FP=Gs(["A ",",",",0,0,",`,
        `,",",""])),g[2],g[2],h,t+n-d*g[2],e+r)),m+=sr(BP||(BP=Gs(["L ",",",""])),t+d*g[3],e+r),g[3]>0&&(m+=sr(HP||(HP=Gs(["A ",",",",0,0,",`,
        `,",",""])),g[3],g[3],h,t,e+r-f*g[3])),m+="Z"}else if(c>0&&i===+i&&i>0){var C=Math.min(c,i);m=sr(qP||(qP=Gs(["M ",",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",",",`
            L `,",",`
            A `,",",",0,0,",",",","," Z"])),t,e+f*C,C,C,h,t+d*C,e,t+n-d*C,e,C,C,h,t+n,e+f*C,t+n,e+r-f*C,C,C,h,t+n-d*C,e+r,t+d*C,e+r,C,C,h,t,e+r-f*C)}else m=sr($P||($P=Gs(["M ",","," h "," v "," h "," Z"])),t,e,n,r,-n);return m},XP={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},gre=t=>{var e=Ki(t,XP),n=L.useRef(null),[r,i]=L.useState(-1);L.useEffect(()=>{if(n.current&&n.current.getTotalLength)try{var K=n.current.getTotalLength();K&&i(K)}catch{}},[]);var{x:s,y:o,width:c,height:f,radius:d,className:h}=e,{animationEasing:m,animationDuration:g,animationBegin:v,isAnimationActive:b,isUpdateAnimationActive:w}=e,S=L.useRef(c),C=L.useRef(f),R=L.useRef(s),N=L.useRef(o),O=L.useMemo(()=>({x:s,y:o,width:c,height:f,radius:d}),[s,o,c,f,d]),k=M6(O,"rectangle-");if(s!==+s||o!==+o||c!==+c||f!==+f||c===0||f===0)return null;var D=Qt("recharts-rectangle",h);if(!w){var M=Bi(e),{radius:j}=M,I=WP(M,ure);return L.createElement("path",K0({},I,{x:nl(s),y:nl(o),width:nl(c),height:nl(f),radius:typeof d=="number"?d:void 0,className:D,d:YP(s,o,c,f,d)}))}var U=S.current,B=C.current,P=R.current,F=N.current,z="0px ".concat(r===-1?1:r,"px"),Q="".concat(r,"px 0px"),W=Hne(["strokeDasharray"],g,typeof m=="string"?m:XP.animationEasing);return L.createElement(j6,{animationId:k,key:k,canBegin:r>0,duration:g,easing:m,isActive:w,begin:v},K=>{var te=Xs(U,c,K),ne=Xs(B,f,K),xe=Xs(P,s,K),G=Xs(F,o,K);n.current&&(S.current=te,C.current=ne,R.current=xe,N.current=G);var X;b?K>0?X={transition:W,strokeDasharray:Q}:X={strokeDasharray:z}:X={strokeDasharray:Q};var de=Bi(e),{radius:ce}=de,ve=WP(de,dre);return L.createElement("path",K0({},ve,{radius:typeof d=="number"?d:void 0,className:D,d:YP(xe,G,te,ne,d),ref:n,style:KP(KP({},X),e.style)}))})};function JP(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function QP(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?JP(Object(n),!0).forEach(function(r){yre(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):JP(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function yre(t,e,n){return(e=vre(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function vre(t){var e=xre(t,"string");return typeof e=="symbol"?e:e+""}function xre(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var W0=Math.PI/180,bre=t=>t*180/Math.PI,cr=(t,e,n,r)=>({x:t+Math.cos(-W0*r)*n,y:e+Math.sin(-W0*r)*n}),_re=function(e,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(e-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},wre=(t,e)=>{var{x:n,y:r}=t,{x:i,y:s}=e;return Math.sqrt((n-i)**2+(r-s)**2)},Sre=(t,e)=>{var{x:n,y:r}=t,{cx:i,cy:s}=e,o=wre({x:n,y:r},{x:i,y:s});if(o<=0)return{radius:o,angle:0};var c=(n-i)/o,f=Math.acos(c);return r>s&&(f=2*Math.PI-f),{radius:o,angle:bre(f),angleInRadian:f}},Tre=t=>{var{startAngle:e,endAngle:n}=t,r=Math.floor(e/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:e-s*360,endAngle:n-s*360}},Ere=(t,e)=>{var{startAngle:n,endAngle:r}=e,i=Math.floor(n/360),s=Math.floor(r/360),o=Math.min(i,s);return t+o*360},Are=(t,e)=>{var{chartX:n,chartY:r}=t,{radius:i,angle:s}=Sre({x:n,y:r},e),{innerRadius:o,outerRadius:c}=e;if(i<o||i>c||i===0)return null;var{startAngle:f,endAngle:d}=Tre(e),h=s,m;if(f<=d){for(;h>d;)h-=360;for(;h<f;)h+=360;m=h>=f&&h<=d}else{for(;h>f;)h-=360;for(;h<d;)h+=360;m=h>=d&&h<=f}return m?QP(QP({},e),{},{radius:i,angle:Ere(h,e)}):null};function D6(t){var{cx:e,cy:n,radius:r,startAngle:i,endAngle:s}=t,o=cr(e,n,r,i),c=cr(e,n,r,s);return{points:[o,c],cx:e,cy:n,radius:r,startAngle:i,endAngle:s}}var ZP,ej,tj,nj,rj,ij,sj;function Gw(){return Gw=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Gw.apply(null,arguments)}function ac(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}var Cre=(t,e)=>{var n=fs(e-t),r=Math.min(Math.abs(e-t),359.999);return n*r},xg=t=>{var{cx:e,cy:n,radius:r,angle:i,sign:s,isExternal:o,cornerRadius:c,cornerIsExternal:f}=t,d=c*(o?1:-1)+r,h=Math.asin(c/d)/W0,m=f?i:i+s*h,g=cr(e,n,d,m),v=cr(e,n,r,m),b=f?i-s*h:i,w=cr(e,n,d*Math.cos(h*W0),b);return{center:g,circleTangency:v,lineTangency:w,theta:h}},O6=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:o}=t,c=Cre(s,o),f=s+c,d=cr(e,n,i,s),h=cr(e,n,i,f),m=sr(ZP||(ZP=ac(["M ",",",`
    A `,",",`,0,
    `,",",`,
    `,",",`
  `])),d.x,d.y,i,i,+(Math.abs(c)>180),+(s>f),h.x,h.y);if(r>0){var g=cr(e,n,r,s),v=cr(e,n,r,f);m+=sr(ej||(ej=ac(["L ",",",`
            A `,",",`,0,
            `,",",`,
            `,","," Z"])),v.x,v.y,r,r,+(Math.abs(c)>180),+(s<=f),g.x,g.y)}else m+=sr(tj||(tj=ac(["L ",","," Z"])),e,n);return m},Nre=t=>{var{cx:e,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:o,cornerIsExternal:c,startAngle:f,endAngle:d}=t,h=fs(d-f),{circleTangency:m,lineTangency:g,theta:v}=xg({cx:e,cy:n,radius:i,angle:f,sign:h,cornerRadius:s,cornerIsExternal:c}),{circleTangency:b,lineTangency:w,theta:S}=xg({cx:e,cy:n,radius:i,angle:d,sign:-h,cornerRadius:s,cornerIsExternal:c}),C=c?Math.abs(f-d):Math.abs(f-d)-v-S;if(C<0)return o?sr(nj||(nj=ac(["M ",",",`
        a`,",",",0,0,1,",`,0
        a`,",",",0,0,1,",`,0
      `])),g.x,g.y,s,s,s*2,s,s,-s*2):O6({cx:e,cy:n,innerRadius:r,outerRadius:i,startAngle:f,endAngle:d});var R=sr(rj||(rj=ac(["M ",",",`
    A`,",",",0,0,",",",",",`
    A`,",",",0,",",",",",",",`
    A`,",",",0,0,",",",",",`
  `])),g.x,g.y,s,s,+(h<0),m.x,m.y,i,i,+(C>180),+(h<0),b.x,b.y,s,s,+(h<0),w.x,w.y);if(r>0){var{circleTangency:N,lineTangency:O,theta:k}=xg({cx:e,cy:n,radius:r,angle:f,sign:h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),{circleTangency:D,lineTangency:M,theta:j}=xg({cx:e,cy:n,radius:r,angle:d,sign:-h,isExternal:!0,cornerRadius:s,cornerIsExternal:c}),I=c?Math.abs(f-d):Math.abs(f-d)-k-j;if(I<0&&s===0)return"".concat(R,"L").concat(e,",").concat(n,"Z");R+=sr(ij||(ij=ac(["L",",",`
      A`,",",",0,0,",",",",",`
      A`,",",",0,",",",",",",",`
      A`,",",",0,0,",",",",","Z"])),M.x,M.y,s,s,+(h<0),D.x,D.y,r,r,+(I>180),+(h>0),N.x,N.y,s,s,+(h<0),O.x,O.y)}else R+=sr(sj||(sj=ac(["L",",","Z"])),e,n);return R},kre={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Ire=t=>{var e=Ki(t,kre),{cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:o,forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:h,className:m}=e;if(s<i||d===h)return null;var g=Qt("recharts-sector",m),v=s-i,b=vl(o,v,0,!0),w;return b>0&&Math.abs(d-h)<360?w=Nre({cx:n,cy:r,innerRadius:i,outerRadius:s,cornerRadius:Math.min(b,v/2),forceCornerRadius:c,cornerIsExternal:f,startAngle:d,endAngle:h}):w=O6({cx:n,cy:r,innerRadius:i,outerRadius:s,startAngle:d,endAngle:h}),L.createElement("path",Gw({},Bi(e),{className:g,d:w}))};function Rre(t,e,n){if(t==="horizontal")return[{x:e.x,y:n.top},{x:e.x,y:n.top+n.height}];if(t==="vertical")return[{x:n.left,y:e.y},{x:n.left+n.width,y:e.y}];if(AL(e)){if(t==="centric"){var{cx:r,cy:i,innerRadius:s,outerRadius:o,angle:c}=e,f=cr(r,i,s,c),d=cr(r,i,o,c);return[{x:f.x,y:f.y},{x:d.x,y:d.y}]}return D6(e)}}var u_={},d_={},f_={},oj;function Pre(){return oj||(oj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=OL();function n(r){return e.isSymbol(r)?NaN:Number(r)}t.toNumber=n})(f_)),f_}var aj;function jre(){return aj||(aj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Pre();function n(r){return r?(r=e.toNumber(r),r===1/0||r===-1/0?(r<0?-1:1)*Number.MAX_VALUE:r===r?r:0):r===0?r:0}t.toFinite=n})(d_)),d_}var lj;function Mre(){return lj||(lj=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=LL(),n=jre();function r(i,s,o){o&&typeof o!="number"&&e.isIterateeCall(i,s,o)&&(s=o=void 0),i=n.toFinite(i),s===void 0?(s=i,i=0):s=n.toFinite(s),o=o===void 0?i<s?1:-1:n.toFinite(o);const c=Math.max(Math.ceil((s-i)/(o||1)),0),f=new Array(c);for(let d=0;d<c;d++)f[d]=i,i+=o;return f}t.range=r})(u_)),u_}var h_,cj;function Dre(){return cj||(cj=1,h_=Mre().range),h_}var Ore=Dre();const L6=ws(Ore);function ll(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lre(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function JT(t){let e,n,r;t.length!==2?(e=ll,n=(c,f)=>ll(t(c),f),r=(c,f)=>t(c)-f):(e=t===ll||t===Lre?t:zre,n=t,r=t);function i(c,f,d=0,h=c.length){if(d<h){if(e(f,f)!==0)return h;do{const m=d+h>>>1;n(c[m],f)<0?d=m+1:h=m}while(d<h)}return d}function s(c,f,d=0,h=c.length){if(d<h){if(e(f,f)!==0)return h;do{const m=d+h>>>1;n(c[m],f)<=0?d=m+1:h=m}while(d<h)}return d}function o(c,f,d=0,h=c.length){const m=i(c,f,d,h-1);return m>d&&r(c[m-1],f)>-r(c[m],f)?m-1:m}return{left:i,center:o,right:s}}function zre(){return 0}function z6(t){return t===null?NaN:+t}function*Ure(t,e){for(let n of t)n!=null&&(n=+n)>=n&&(yield n)}const Vre=JT(ll),wp=Vre.right;JT(z6).center;class uj extends Map{constructor(e,n=Hre){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),e!=null)for(const[r,i]of e)this.set(r,i)}get(e){return super.get(dj(this,e))}has(e){return super.has(dj(this,e))}set(e,n){return super.set(Fre(this,e),n)}delete(e){return super.delete(Bre(this,e))}}function dj({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):n}function Fre({_intern:t,_key:e},n){const r=e(n);return t.has(r)?t.get(r):(t.set(r,n),n)}function Bre({_intern:t,_key:e},n){const r=e(n);return t.has(r)&&(n=t.get(r),t.delete(r)),n}function Hre(t){return t!==null&&typeof t=="object"?t.valueOf():t}function qre(t=ll){if(t===ll)return U6;if(typeof t!="function")throw new TypeError("compare is not a function");return(e,n)=>{const r=t(e,n);return r||r===0?r:(t(n,n)===0)-(t(e,e)===0)}}function U6(t,e){return(t==null||!(t>=t))-(e==null||!(e>=e))||(t<e?-1:t>e?1:0)}const $re=Math.sqrt(50),Gre=Math.sqrt(10),Kre=Math.sqrt(2);function Y0(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=$re?10:s>=Gre?5:s>=Kre?2:1;let c,f,d;return i<0?(d=Math.pow(10,-i)/o,c=Math.round(t*d),f=Math.round(e*d),c/d<t&&++c,f/d>e&&--f,d=-d):(d=Math.pow(10,i)*o,c=Math.round(t/d),f=Math.round(e/d),c*d<t&&++c,f*d>e&&--f),f<c&&.5<=n&&n<2?Y0(t,e,n*2):[c,f,d]}function Kw(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,o]=r?Y0(e,t,n):Y0(t,e,n);if(!(s>=i))return[];const c=s-i+1,f=new Array(c);if(r)if(o<0)for(let d=0;d<c;++d)f[d]=(s-d)/-o;else for(let d=0;d<c;++d)f[d]=(s-d)*o;else if(o<0)for(let d=0;d<c;++d)f[d]=(i+d)/-o;else for(let d=0;d<c;++d)f[d]=(i+d)*o;return f}function Ww(t,e,n){return e=+e,t=+t,n=+n,Y0(t,e,n)[2]}function Yw(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ww(e,t,n):Ww(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function fj(t,e){let n;for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function hj(t,e){let n;for(const r of t)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function V6(t,e,n=0,r=1/0,i){if(e=Math.floor(e),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(t.length-1,r)),!(n<=e&&e<=r))return t;for(i=i===void 0?U6:qre(i);r>n;){if(r-n>600){const f=r-n+1,d=e-n+1,h=Math.log(f),m=.5*Math.exp(2*h/3),g=.5*Math.sqrt(h*m*(f-m)/f)*(d-f/2<0?-1:1),v=Math.max(n,Math.floor(e-d*m/f+g)),b=Math.min(r,Math.floor(e+(f-d)*m/f+g));V6(t,e,v,b,i)}const s=t[e];let o=n,c=r;for(nh(t,n,e),i(t[r],s)>0&&nh(t,n,r);o<c;){for(nh(t,o,c),++o,--c;i(t[o],s)<0;)++o;for(;i(t[c],s)>0;)--c}i(t[n],s)===0?nh(t,n,c):(++c,nh(t,c,r)),c<=e&&(n=c+1),e<=c&&(r=c-1)}return t}function nh(t,e,n){const r=t[e];t[e]=t[n],t[n]=r}function Wre(t,e,n){if(t=Float64Array.from(Ure(t)),!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return hj(t);if(e>=1)return fj(t);var r,i=(r-1)*e,s=Math.floor(i),o=fj(V6(t,s).subarray(0,s+1)),c=hj(t.subarray(s+1));return o+(c-o)*(i-s)}}function Yre(t,e,n=z6){if(!(!(r=t.length)||isNaN(e=+e))){if(e<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,s=Math.floor(i),o=+n(t[s],s,t),c=+n(t[s+1],s+1,t);return o+(c-o)*(i-s)}}function Xre(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((e-t)/n))|0,s=new Array(i);++r<i;)s[r]=t+r*n;return s}function Wi(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function aa(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}const Xw=Symbol("implicit");function QT(){var t=new uj,e=[],n=[],r=Xw;function i(s){let o=t.get(s);if(o===void 0){if(r!==Xw)return r;t.set(s,o=e.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return e.slice();e=[],t=new uj;for(const o of s)t.has(o)||t.set(o,e.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return QT(e,n).unknown(r)},Wi.apply(i,arguments),i}function ZT(){var t=QT().unknown(void 0),e=t.domain,n=t.range,r=0,i=1,s,o,c=!1,f=0,d=0,h=.5;delete t.unknown;function m(){var g=e().length,v=i<r,b=v?i:r,w=v?r:i;s=(w-b)/Math.max(1,g-f+d*2),c&&(s=Math.floor(s)),b+=(w-b-s*(g-f))*h,o=s*(1-f),c&&(b=Math.round(b),o=Math.round(o));var S=Xre(g).map(function(C){return b+s*C});return n(v?S.reverse():S)}return t.domain=function(g){return arguments.length?(e(g),m()):e()},t.range=function(g){return arguments.length?([r,i]=g,r=+r,i=+i,m()):[r,i]},t.rangeRound=function(g){return[r,i]=g,r=+r,i=+i,c=!0,m()},t.bandwidth=function(){return o},t.step=function(){return s},t.round=function(g){return arguments.length?(c=!!g,m()):c},t.padding=function(g){return arguments.length?(f=Math.min(1,d=+g),m()):f},t.paddingInner=function(g){return arguments.length?(f=Math.min(1,g),m()):f},t.paddingOuter=function(g){return arguments.length?(d=+g,m()):d},t.align=function(g){return arguments.length?(h=Math.max(0,Math.min(1,g)),m()):h},t.copy=function(){return ZT(e(),[r,i]).round(c).paddingInner(f).paddingOuter(d).align(h)},Wi.apply(m(),arguments)}function F6(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,delete t.paddingOuter,t.copy=function(){return F6(e())},t}function Jre(){return F6(ZT.apply(null,arguments).paddingInner(1))}function eE(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function B6(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Sp(){}var Wh=.7,X0=1/Wh,nd="\\s*([+-]?\\d+)\\s*",Yh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oo="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Qre=/^#([0-9a-f]{3,8})$/,Zre=new RegExp(`^rgb\\(${nd},${nd},${nd}\\)$`),eie=new RegExp(`^rgb\\(${oo},${oo},${oo}\\)$`),tie=new RegExp(`^rgba\\(${nd},${nd},${nd},${Yh}\\)$`),nie=new RegExp(`^rgba\\(${oo},${oo},${oo},${Yh}\\)$`),rie=new RegExp(`^hsl\\(${Yh},${oo},${oo}\\)$`),iie=new RegExp(`^hsla\\(${Yh},${oo},${oo},${Yh}\\)$`),pj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};eE(Sp,Xh,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:mj,formatHex:mj,formatHex8:sie,formatHsl:oie,formatRgb:gj,toString:gj});function mj(){return this.rgb().formatHex()}function sie(){return this.rgb().formatHex8()}function oie(){return H6(this).formatHsl()}function gj(){return this.rgb().formatRgb()}function Xh(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Qre.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?yj(e):n===3?new Yr(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?bg(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?bg(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Zre.exec(t))?new Yr(e[1],e[2],e[3],1):(e=eie.exec(t))?new Yr(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=tie.exec(t))?bg(e[1],e[2],e[3],e[4]):(e=nie.exec(t))?bg(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=rie.exec(t))?bj(e[1],e[2]/100,e[3]/100,1):(e=iie.exec(t))?bj(e[1],e[2]/100,e[3]/100,e[4]):pj.hasOwnProperty(t)?yj(pj[t]):t==="transparent"?new Yr(NaN,NaN,NaN,0):null}function yj(t){return new Yr(t>>16&255,t>>8&255,t&255,1)}function bg(t,e,n,r){return r<=0&&(t=e=n=NaN),new Yr(t,e,n,r)}function aie(t){return t instanceof Sp||(t=Xh(t)),t?(t=t.rgb(),new Yr(t.r,t.g,t.b,t.opacity)):new Yr}function Jw(t,e,n,r){return arguments.length===1?aie(t):new Yr(t,e,n,r??1)}function Yr(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}eE(Yr,Jw,B6(Sp,{brighter(t){return t=t==null?X0:Math.pow(X0,t),new Yr(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Wh:Math.pow(Wh,t),new Yr(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Yr(mc(this.r),mc(this.g),mc(this.b),J0(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:vj,formatHex:vj,formatHex8:lie,formatRgb:xj,toString:xj}));function vj(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}`}function lie(){return`#${lc(this.r)}${lc(this.g)}${lc(this.b)}${lc((isNaN(this.opacity)?1:this.opacity)*255)}`}function xj(){const t=J0(this.opacity);return`${t===1?"rgb(":"rgba("}${mc(this.r)}, ${mc(this.g)}, ${mc(this.b)}${t===1?")":`, ${t})`}`}function J0(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function mc(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function lc(t){return t=mc(t),(t<16?"0":"")+t.toString(16)}function bj(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new cs(t,e,n,r)}function H6(t){if(t instanceof cs)return new cs(t.h,t.s,t.l,t.opacity);if(t instanceof Sp||(t=Xh(t)),!t)return new cs;if(t instanceof cs)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),o=NaN,c=s-i,f=(s+i)/2;return c?(e===s?o=(n-r)/c+(n<r)*6:n===s?o=(r-e)/c+2:o=(e-n)/c+4,c/=f<.5?s+i:2-s-i,o*=60):c=f>0&&f<1?0:o,new cs(o,c,f,t.opacity)}function cie(t,e,n,r){return arguments.length===1?H6(t):new cs(t,e,n,r??1)}function cs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}eE(cs,cie,B6(Sp,{brighter(t){return t=t==null?X0:Math.pow(X0,t),new cs(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Wh:Math.pow(Wh,t),new cs(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Yr(p_(t>=240?t-240:t+120,i,r),p_(t,i,r),p_(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new cs(_j(this.h),_g(this.s),_g(this.l),J0(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=J0(this.opacity);return`${t===1?"hsl(":"hsla("}${_j(this.h)}, ${_g(this.s)*100}%, ${_g(this.l)*100}%${t===1?")":`, ${t})`}`}}));function _j(t){return t=(t||0)%360,t<0?t+360:t}function _g(t){return Math.max(0,Math.min(1,t||0))}function p_(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const tE=t=>()=>t;function uie(t,e){return function(n){return t+n*e}}function die(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function fie(t){return(t=+t)==1?q6:function(e,n){return n-e?die(e,n,t):tE(isNaN(e)?n:e)}}function q6(t,e){var n=e-t;return n?uie(t,n):tE(isNaN(t)?e:t)}const wj=(function t(e){var n=fie(e);function r(i,s){var o=n((i=Jw(i)).r,(s=Jw(s)).r),c=n(i.g,s.g),f=n(i.b,s.b),d=q6(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=c(h),i.b=f(h),i.opacity=d(h),i+""}}return r.gamma=t,r})(1);function hie(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function pie(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function mie(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Ld(t[o],e[o]);for(;o<n;++o)s[o]=e[o];return function(c){for(o=0;o<r;++o)s[o]=i[o](c);return s}}function gie(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Q0(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function yie(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Ld(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Qw=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,m_=new RegExp(Qw.source,"g");function vie(t){return function(){return t}}function xie(t){return function(e){return t(e)+""}}function bie(t,e){var n=Qw.lastIndex=m_.lastIndex=0,r,i,s,o=-1,c=[],f=[];for(t=t+"",e=e+"";(r=Qw.exec(t))&&(i=m_.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),c[o]?c[o]+=s:c[++o]=s),(r=r[0])===(i=i[0])?c[o]?c[o]+=i:c[++o]=i:(c[++o]=null,f.push({i:o,x:Q0(r,i)})),n=m_.lastIndex;return n<e.length&&(s=e.slice(n),c[o]?c[o]+=s:c[++o]=s),c.length<2?f[0]?xie(f[0].x):vie(e):(e=f.length,function(d){for(var h=0,m;h<e;++h)c[(m=f[h]).i]=m.x(d);return c.join("")})}function Ld(t,e){var n=typeof e,r;return e==null||n==="boolean"?tE(e):(n==="number"?Q0:n==="string"?(r=Xh(e))?(e=r,wj):bie:e instanceof Xh?wj:e instanceof Date?gie:pie(e)?hie:Array.isArray(e)?mie:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?yie:Q0)(t,e)}function nE(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}function _ie(t,e){e===void 0&&(e=t,t=Ld);for(var n=0,r=e.length-1,i=e[0],s=new Array(r<0?0:r);n<r;)s[n]=t(i,i=e[++n]);return function(o){var c=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[c](o-c)}}function wie(t){return function(){return t}}function Z0(t){return+t}var Sj=[0,1];function Mr(t){return t}function Zw(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:wie(isNaN(e)?NaN:.5)}function Sie(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Tie(t,e,n){var r=t[0],i=t[1],s=e[0],o=e[1];return i<r?(r=Zw(i,r),s=n(o,s)):(r=Zw(r,i),s=n(s,o)),function(c){return s(r(c))}}function Eie(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),o=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<r;)i[o]=Zw(t[o],t[o+1]),s[o]=n(e[o],e[o+1]);return function(c){var f=wp(t,c,1,r)-1;return s[f](i[f](c))}}function Tp(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yv(){var t=Sj,e=Sj,n=Ld,r,i,s,o=Mr,c,f,d;function h(){var g=Math.min(t.length,e.length);return o!==Mr&&(o=Sie(t[0],t[g-1])),c=g>2?Eie:Tie,f=d=null,m}function m(g){return g==null||isNaN(g=+g)?s:(f||(f=c(t.map(r),e,n)))(r(o(g)))}return m.invert=function(g){return o(i((d||(d=c(e,t.map(r),Q0)))(g)))},m.domain=function(g){return arguments.length?(t=Array.from(g,Z0),h()):t.slice()},m.range=function(g){return arguments.length?(e=Array.from(g),h()):e.slice()},m.rangeRound=function(g){return e=Array.from(g),n=nE,h()},m.clamp=function(g){return arguments.length?(o=g?!0:Mr,h()):o!==Mr},m.interpolate=function(g){return arguments.length?(n=g,h()):n},m.unknown=function(g){return arguments.length?(s=g,m):s},function(g,v){return r=g,i=v,h()}}function rE(){return yv()(Mr,Mr)}function Aie(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ey(t,e){if(!isFinite(t)||t===0)return null;var n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"),r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function bd(t){return t=ey(Math.abs(t)),t?t[1]:NaN}function Cie(t,e){return function(n,r){for(var i=n.length,s=[],o=0,c=t[0],f=0;i>0&&c>0&&(f+c+1>r&&(c=Math.max(1,r-f)),s.push(n.substring(i-=c,i+c)),!((f+=c+1)>r));)c=t[o=(o+1)%t.length];return s.reverse().join(e)}}function Nie(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var kie=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Jh(t){if(!(e=kie.exec(t)))throw new Error("invalid format: "+t);var e;return new iE({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Jh.prototype=iE.prototype;function iE(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}iE.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Iie(t){e:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break e;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var ty;function Rie(t,e){var n=ey(t,e);if(!n)return ty=void 0,t.toPrecision(e);var r=n[0],i=n[1],s=i-(ty=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ey(t,Math.max(0,e+s-1))[0]}function Tj(t,e){var n=ey(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Ej={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Aie,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Tj(t*100,e),r:Tj,s:Rie,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Aj(t){return t}var Cj=Array.prototype.map,Nj=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Pie(t){var e=t.grouping===void 0||t.thousands===void 0?Aj:Cie(Cj.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Aj:Nie(Cj.call(t.numerals,String)),o=t.percent===void 0?"%":t.percent+"",c=t.minus===void 0?"":t.minus+"",f=t.nan===void 0?"NaN":t.nan+"";function d(m,g){m=Jh(m);var v=m.fill,b=m.align,w=m.sign,S=m.symbol,C=m.zero,R=m.width,N=m.comma,O=m.precision,k=m.trim,D=m.type;D==="n"?(N=!0,D="g"):Ej[D]||(O===void 0&&(O=12),k=!0,D="g"),(C||v==="0"&&b==="=")&&(C=!0,v="0",b="=");var M=(g&&g.prefix!==void 0?g.prefix:"")+(S==="$"?n:S==="#"&&/[boxX]/.test(D)?"0"+D.toLowerCase():""),j=(S==="$"?r:/[%p]/.test(D)?o:"")+(g&&g.suffix!==void 0?g.suffix:""),I=Ej[D],U=/[defgprs%]/.test(D);O=O===void 0?6:/[gprs]/.test(D)?Math.max(1,Math.min(21,O)):Math.max(0,Math.min(20,O));function B(P){var F=M,z=j,Q,W,K;if(D==="c")z=I(P)+z,P="";else{P=+P;var te=P<0||1/P<0;if(P=isNaN(P)?f:I(Math.abs(P),O),k&&(P=Iie(P)),te&&+P==0&&w!=="+"&&(te=!1),F=(te?w==="("?w:c:w==="-"||w==="("?"":w)+F,z=(D==="s"&&!isNaN(P)&&ty!==void 0?Nj[8+ty/3]:"")+z+(te&&w==="("?")":""),U){for(Q=-1,W=P.length;++Q<W;)if(K=P.charCodeAt(Q),48>K||K>57){z=(K===46?i+P.slice(Q+1):P.slice(Q))+z,P=P.slice(0,Q);break}}}N&&!C&&(P=e(P,1/0));var ne=F.length+P.length+z.length,xe=ne<R?new Array(R-ne+1).join(v):"";switch(N&&C&&(P=e(xe+P,xe.length?R-z.length:1/0),xe=""),b){case"<":P=F+P+z+xe;break;case"=":P=F+xe+P+z;break;case"^":P=xe.slice(0,ne=xe.length>>1)+F+P+z+xe.slice(ne);break;default:P=xe+F+P+z;break}return s(P)}return B.toString=function(){return m+""},B}function h(m,g){var v=Math.max(-8,Math.min(8,Math.floor(bd(g)/3)))*3,b=Math.pow(10,-v),w=d((m=Jh(m),m.type="f",m),{suffix:Nj[8+v/3]});return function(S){return w(b*S)}}return{format:d,formatPrefix:h}}var wg,sE,$6;jie({thousands:",",grouping:[3],currency:["$",""]});function jie(t){return wg=Pie(t),sE=wg.format,$6=wg.formatPrefix,wg}function Mie(t){return Math.max(0,-bd(Math.abs(t)))}function Die(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(bd(e)/3)))*3-bd(Math.abs(t)))}function Oie(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,bd(e)-bd(t))+1}function G6(t,e,n,r){var i=Yw(t,e,n),s;switch(r=Jh(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Die(i,o))&&(r.precision=s),$6(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Oie(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Mie(i))&&(r.precision=s-(r.type==="%")*2);break}}return sE(r)}function bl(t){var e=t.domain;return t.ticks=function(n){var r=e();return Kw(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return G6(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,o=r[i],c=r[s],f,d,h=10;for(c<o&&(d=o,o=c,c=d,d=i,i=s,s=d);h-- >0;){if(d=Ww(o,c,n),d===f)return r[i]=o,r[s]=c,e(r);if(d>0)o=Math.floor(o/d)*d,c=Math.ceil(c/d)*d;else if(d<0)o=Math.ceil(o*d)/d,c=Math.floor(c*d)/d;else break;f=d}return t},t}function K6(){var t=rE();return t.copy=function(){return Tp(t,K6())},Wi.apply(t,arguments),bl(t)}function W6(t){var e;function n(r){return r==null||isNaN(r=+r)?e:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(t=Array.from(r,Z0),n):t.slice()},n.unknown=function(r){return arguments.length?(e=r,n):e},n.copy=function(){return W6(t).unknown(e)},t=arguments.length?Array.from(t,Z0):[0,1],bl(n)}function Y6(t,e){t=t.slice();var n=0,r=t.length-1,i=t[n],s=t[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),t[n]=e.floor(i),t[r]=e.ceil(s),t}function kj(t){return Math.log(t)}function Ij(t){return Math.exp(t)}function Lie(t){return-Math.log(-t)}function zie(t){return-Math.exp(-t)}function Uie(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Vie(t){return t===10?Uie:t===Math.E?Math.exp:e=>Math.pow(t,e)}function Fie(t){return t===Math.E?Math.log:t===10&&Math.log10||t===2&&Math.log2||(t=Math.log(t),e=>Math.log(e)/t)}function Rj(t){return(e,n)=>-t(-e,n)}function oE(t){const e=t(kj,Ij),n=e.domain;let r=10,i,s;function o(){return i=Fie(r),s=Vie(r),n()[0]<0?(i=Rj(i),s=Rj(s),t(Lie,zie)):t(kj,Ij),e}return e.base=function(c){return arguments.length?(r=+c,o()):r},e.domain=function(c){return arguments.length?(n(c),o()):n()},e.ticks=c=>{const f=n();let d=f[0],h=f[f.length-1];const m=h<d;m&&([d,h]=[h,d]);let g=i(d),v=i(h),b,w;const S=c==null?10:+c;let C=[];if(!(r%1)&&v-g<S){if(g=Math.floor(g),v=Math.ceil(v),d>0){for(;g<=v;++g)for(b=1;b<r;++b)if(w=g<0?b/s(-g):b*s(g),!(w<d)){if(w>h)break;C.push(w)}}else for(;g<=v;++g)for(b=r-1;b>=1;--b)if(w=g>0?b/s(-g):b*s(g),!(w<d)){if(w>h)break;C.push(w)}C.length*2<S&&(C=Kw(d,h,S))}else C=Kw(g,v,Math.min(v-g,S)).map(s);return m?C.reverse():C},e.tickFormat=(c,f)=>{if(c==null&&(c=10),f==null&&(f=r===10?"s":","),typeof f!="function"&&(!(r%1)&&(f=Jh(f)).precision==null&&(f.trim=!0),f=sE(f)),c===1/0)return f;const d=Math.max(1,r*c/e.ticks().length);return h=>{let m=h/s(Math.round(i(h)));return m*r<r-.5&&(m*=r),m<=d?f(h):""}},e.nice=()=>n(Y6(n(),{floor:c=>s(Math.floor(i(c))),ceil:c=>s(Math.ceil(i(c)))})),e}function X6(){const t=oE(yv()).domain([1,10]);return t.copy=()=>Tp(t,X6()).base(t.base()),Wi.apply(t,arguments),t}function Pj(t){return function(e){return Math.sign(e)*Math.log1p(Math.abs(e/t))}}function jj(t){return function(e){return Math.sign(e)*Math.expm1(Math.abs(e))*t}}function aE(t){var e=1,n=t(Pj(e),jj(e));return n.constant=function(r){return arguments.length?t(Pj(e=+r),jj(e)):e},bl(n)}function J6(){var t=aE(yv());return t.copy=function(){return Tp(t,J6()).constant(t.constant())},Wi.apply(t,arguments)}function Mj(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function Bie(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Hie(t){return t<0?-t*t:t*t}function lE(t){var e=t(Mr,Mr),n=1;function r(){return n===1?t(Mr,Mr):n===.5?t(Bie,Hie):t(Mj(n),Mj(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},bl(e)}function cE(){var t=lE(yv());return t.copy=function(){return Tp(t,cE()).exponent(t.exponent())},Wi.apply(t,arguments),t}function qie(){return cE.apply(null,arguments).exponent(.5)}function Dj(t){return Math.sign(t)*t*t}function $ie(t){return Math.sign(t)*Math.sqrt(Math.abs(t))}function Q6(){var t=rE(),e=[0,1],n=!1,r;function i(s){var o=$ie(t(s));return isNaN(o)?r:n?Math.round(o):o}return i.invert=function(s){return t.invert(Dj(s))},i.domain=function(s){return arguments.length?(t.domain(s),i):t.domain()},i.range=function(s){return arguments.length?(t.range((e=Array.from(s,Z0)).map(Dj)),i):e.slice()},i.rangeRound=function(s){return i.range(s).round(!0)},i.round=function(s){return arguments.length?(n=!!s,i):n},i.clamp=function(s){return arguments.length?(t.clamp(s),i):t.clamp()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return Q6(t.domain(),e).round(n).clamp(t.clamp()).unknown(r)},Wi.apply(i,arguments),bl(i)}function Z6(){var t=[],e=[],n=[],r;function i(){var o=0,c=Math.max(1,e.length);for(n=new Array(c-1);++o<c;)n[o-1]=Yre(t,o/c);return s}function s(o){return o==null||isNaN(o=+o)?r:e[wp(n,o)]}return s.invertExtent=function(o){var c=e.indexOf(o);return c<0?[NaN,NaN]:[c>0?n[c-1]:t[0],c<n.length?n[c]:t[t.length-1]]},s.domain=function(o){if(!arguments.length)return t.slice();t=[];for(let c of o)c!=null&&!isNaN(c=+c)&&t.push(c);return t.sort(ll),i()},s.range=function(o){return arguments.length?(e=Array.from(o),i()):e.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return Z6().domain(t).range(e).unknown(r)},Wi.apply(s,arguments)}function ez(){var t=0,e=1,n=1,r=[.5],i=[0,1],s;function o(f){return f!=null&&f<=f?i[wp(r,f,0,n)]:s}function c(){var f=-1;for(r=new Array(n);++f<n;)r[f]=((f+1)*e-(f-n)*t)/(n+1);return o}return o.domain=function(f){return arguments.length?([t,e]=f,t=+t,e=+e,c()):[t,e]},o.range=function(f){return arguments.length?(n=(i=Array.from(f)).length-1,c()):i.slice()},o.invertExtent=function(f){var d=i.indexOf(f);return d<0?[NaN,NaN]:d<1?[t,r[0]]:d>=n?[r[n-1],e]:[r[d-1],r[d]]},o.unknown=function(f){return arguments.length&&(s=f),o},o.thresholds=function(){return r.slice()},o.copy=function(){return ez().domain([t,e]).range(i).unknown(s)},Wi.apply(bl(o),arguments)}function tz(){var t=[.5],e=[0,1],n,r=1;function i(s){return s!=null&&s<=s?e[wp(t,s,0,r)]:n}return i.domain=function(s){return arguments.length?(t=Array.from(s),r=Math.min(t.length,e.length-1),i):t.slice()},i.range=function(s){return arguments.length?(e=Array.from(s),r=Math.min(t.length,e.length-1),i):e.slice()},i.invertExtent=function(s){var o=e.indexOf(s);return[t[o-1],t[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return tz().domain(t).range(e).unknown(n)},Wi.apply(i,arguments)}const g_=new Date,y_=new Date;function Dn(t,e,n,r){function i(s){return t(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(t(s=new Date(+s)),s),i.ceil=s=>(t(s=new Date(s-1)),e(s,1),t(s),s),i.round=s=>{const o=i(s),c=i.ceil(s);return s-o<c-s?o:c},i.offset=(s,o)=>(e(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,c)=>{const f=[];if(s=i.ceil(s),c=c==null?1:Math.floor(c),!(s<o)||!(c>0))return f;let d;do f.push(d=new Date(+s)),e(s,c),t(s);while(d<s&&s<o);return f},i.filter=s=>Dn(o=>{if(o>=o)for(;t(o),!s(o);)o.setTime(o-1)},(o,c)=>{if(o>=o)if(c<0)for(;++c<=0;)for(;e(o,-1),!s(o););else for(;--c>=0;)for(;e(o,1),!s(o););}),n&&(i.count=(s,o)=>(g_.setTime(+s),y_.setTime(+o),t(g_),t(y_),Math.floor(n(g_,y_))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const ny=Dn(()=>{},(t,e)=>{t.setTime(+t+e)},(t,e)=>e-t);ny.every=t=>(t=Math.floor(t),!isFinite(t)||!(t>0)?null:t>1?Dn(e=>{e.setTime(Math.floor(e/t)*t)},(e,n)=>{e.setTime(+e+n*t)},(e,n)=>(n-e)/t):ny);ny.range;const Ho=1e3,Vi=Ho*60,qo=Vi*60,Qo=qo*24,uE=Qo*7,Oj=Qo*30,v_=Qo*365,cc=Dn(t=>{t.setTime(t-t.getMilliseconds())},(t,e)=>{t.setTime(+t+e*Ho)},(t,e)=>(e-t)/Ho,t=>t.getUTCSeconds());cc.range;const dE=Dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ho)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getMinutes());dE.range;const fE=Dn(t=>{t.setUTCSeconds(0,0)},(t,e)=>{t.setTime(+t+e*Vi)},(t,e)=>(e-t)/Vi,t=>t.getUTCMinutes());fE.range;const hE=Dn(t=>{t.setTime(t-t.getMilliseconds()-t.getSeconds()*Ho-t.getMinutes()*Vi)},(t,e)=>{t.setTime(+t+e*qo)},(t,e)=>(e-t)/qo,t=>t.getHours());hE.range;const pE=Dn(t=>{t.setUTCMinutes(0,0,0)},(t,e)=>{t.setTime(+t+e*qo)},(t,e)=>(e-t)/qo,t=>t.getUTCHours());pE.range;const Ep=Dn(t=>t.setHours(0,0,0,0),(t,e)=>t.setDate(t.getDate()+e),(t,e)=>(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*Vi)/Qo,t=>t.getDate()-1);Ep.range;const vv=Dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qo,t=>t.getUTCDate()-1);vv.range;const nz=Dn(t=>{t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCDate(t.getUTCDate()+e)},(t,e)=>(e-t)/Qo,t=>Math.floor(t/Qo));nz.range;function Uc(t){return Dn(e=>{e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},(e,n)=>{e.setDate(e.getDate()+n*7)},(e,n)=>(n-e-(n.getTimezoneOffset()-e.getTimezoneOffset())*Vi)/uE)}const xv=Uc(0),ry=Uc(1),Gie=Uc(2),Kie=Uc(3),_d=Uc(4),Wie=Uc(5),Yie=Uc(6);xv.range;ry.range;Gie.range;Kie.range;_d.range;Wie.range;Yie.range;function Vc(t){return Dn(e=>{e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCDate(e.getUTCDate()+n*7)},(e,n)=>(n-e)/uE)}const bv=Vc(0),iy=Vc(1),Xie=Vc(2),Jie=Vc(3),wd=Vc(4),Qie=Vc(5),Zie=Vc(6);bv.range;iy.range;Xie.range;Jie.range;wd.range;Qie.range;Zie.range;const mE=Dn(t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,e)=>{t.setMonth(t.getMonth()+e)},(t,e)=>e.getMonth()-t.getMonth()+(e.getFullYear()-t.getFullYear())*12,t=>t.getMonth());mE.range;const gE=Dn(t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCMonth(t.getUTCMonth()+e)},(t,e)=>e.getUTCMonth()-t.getUTCMonth()+(e.getUTCFullYear()-t.getUTCFullYear())*12,t=>t.getUTCMonth());gE.range;const Zo=Dn(t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,e)=>{t.setFullYear(t.getFullYear()+e)},(t,e)=>e.getFullYear()-t.getFullYear(),t=>t.getFullYear());Zo.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dn(e=>{e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},(e,n)=>{e.setFullYear(e.getFullYear()+n*t)});Zo.range;const ea=Dn(t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,e)=>{t.setUTCFullYear(t.getUTCFullYear()+e)},(t,e)=>e.getUTCFullYear()-t.getUTCFullYear(),t=>t.getUTCFullYear());ea.every=t=>!isFinite(t=Math.floor(t))||!(t>0)?null:Dn(e=>{e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,n)=>{e.setUTCFullYear(e.getUTCFullYear()+n*t)});ea.range;function rz(t,e,n,r,i,s){const o=[[cc,1,Ho],[cc,5,5*Ho],[cc,15,15*Ho],[cc,30,30*Ho],[s,1,Vi],[s,5,5*Vi],[s,15,15*Vi],[s,30,30*Vi],[i,1,qo],[i,3,3*qo],[i,6,6*qo],[i,12,12*qo],[r,1,Qo],[r,2,2*Qo],[n,1,uE],[e,1,Oj],[e,3,3*Oj],[t,1,v_]];function c(d,h,m){const g=h<d;g&&([d,h]=[h,d]);const v=m&&typeof m.range=="function"?m:f(d,h,m),b=v?v.range(d,+h+1):[];return g?b.reverse():b}function f(d,h,m){const g=Math.abs(h-d)/m,v=JT(([,,S])=>S).right(o,g);if(v===o.length)return t.every(Yw(d/v_,h/v_,m));if(v===0)return ny.every(Math.max(Yw(d,h,m),1));const[b,w]=o[g/o[v-1][2]<o[v][2]/g?v-1:v];return b.every(w)}return[c,f]}const[ese,tse]=rz(ea,gE,bv,nz,pE,fE),[nse,rse]=rz(Zo,mE,xv,Ep,hE,dE);function x_(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function b_(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function rh(t,e,n){return{y:t,m:e,d:n,H:0,M:0,S:0,L:0}}function ise(t){var e=t.dateTime,n=t.date,r=t.time,i=t.periods,s=t.days,o=t.shortDays,c=t.months,f=t.shortMonths,d=ih(i),h=sh(i),m=ih(s),g=sh(s),v=ih(o),b=sh(o),w=ih(c),S=sh(c),C=ih(f),R=sh(f),N={a:K,A:te,b:ne,B:xe,c:null,d:Bj,e:Bj,f:Cse,g:Lse,G:Use,H:Tse,I:Ese,j:Ase,L:iz,m:Nse,M:kse,p:G,q:X,Q:$j,s:Gj,S:Ise,u:Rse,U:Pse,V:jse,w:Mse,W:Dse,x:null,X:null,y:Ose,Y:zse,Z:Vse,"%":qj},O={a:de,A:ce,b:ve,B:ze,c:null,d:Hj,e:Hj,f:qse,g:eoe,G:noe,H:Fse,I:Bse,j:Hse,L:oz,m:$se,M:Gse,p:je,q:Fe,Q:$j,s:Gj,S:Kse,u:Wse,U:Yse,V:Xse,w:Jse,W:Qse,x:null,X:null,y:Zse,Y:toe,Z:roe,"%":qj},k={a:U,A:B,b:P,B:F,c:z,d:Vj,e:Vj,f:bse,g:Uj,G:zj,H:Fj,I:Fj,j:gse,L:xse,m:mse,M:yse,p:I,q:pse,Q:wse,s:Sse,S:vse,u:cse,U:use,V:dse,w:lse,W:fse,x:Q,X:W,y:Uj,Y:zj,Z:hse,"%":_se};N.x=D(n,N),N.X=D(r,N),N.c=D(e,N),O.x=D(n,O),O.X=D(r,O),O.c=D(e,O);function D(fe,Ce){return function(Ve){var Ne=[],ft=-1,q=0,ie=fe.length,le,Z,ee;for(Ve instanceof Date||(Ve=new Date(+Ve));++ft<ie;)fe.charCodeAt(ft)===37&&(Ne.push(fe.slice(q,ft)),(Z=Lj[le=fe.charAt(++ft)])!=null?le=fe.charAt(++ft):Z=le==="e"?" ":"0",(ee=Ce[le])&&(le=ee(Ve,Z)),Ne.push(le),q=ft+1);return Ne.push(fe.slice(q,ft)),Ne.join("")}}function M(fe,Ce){return function(Ve){var Ne=rh(1900,void 0,1),ft=j(Ne,fe,Ve+="",0),q,ie;if(ft!=Ve.length)return null;if("Q"in Ne)return new Date(Ne.Q);if("s"in Ne)return new Date(Ne.s*1e3+("L"in Ne?Ne.L:0));if(Ce&&!("Z"in Ne)&&(Ne.Z=0),"p"in Ne&&(Ne.H=Ne.H%12+Ne.p*12),Ne.m===void 0&&(Ne.m="q"in Ne?Ne.q:0),"V"in Ne){if(Ne.V<1||Ne.V>53)return null;"w"in Ne||(Ne.w=1),"Z"in Ne?(q=b_(rh(Ne.y,0,1)),ie=q.getUTCDay(),q=ie>4||ie===0?iy.ceil(q):iy(q),q=vv.offset(q,(Ne.V-1)*7),Ne.y=q.getUTCFullYear(),Ne.m=q.getUTCMonth(),Ne.d=q.getUTCDate()+(Ne.w+6)%7):(q=x_(rh(Ne.y,0,1)),ie=q.getDay(),q=ie>4||ie===0?ry.ceil(q):ry(q),q=Ep.offset(q,(Ne.V-1)*7),Ne.y=q.getFullYear(),Ne.m=q.getMonth(),Ne.d=q.getDate()+(Ne.w+6)%7)}else("W"in Ne||"U"in Ne)&&("w"in Ne||(Ne.w="u"in Ne?Ne.u%7:"W"in Ne?1:0),ie="Z"in Ne?b_(rh(Ne.y,0,1)).getUTCDay():x_(rh(Ne.y,0,1)).getDay(),Ne.m=0,Ne.d="W"in Ne?(Ne.w+6)%7+Ne.W*7-(ie+5)%7:Ne.w+Ne.U*7-(ie+6)%7);return"Z"in Ne?(Ne.H+=Ne.Z/100|0,Ne.M+=Ne.Z%100,b_(Ne)):x_(Ne)}}function j(fe,Ce,Ve,Ne){for(var ft=0,q=Ce.length,ie=Ve.length,le,Z;ft<q;){if(Ne>=ie)return-1;if(le=Ce.charCodeAt(ft++),le===37){if(le=Ce.charAt(ft++),Z=k[le in Lj?Ce.charAt(ft++):le],!Z||(Ne=Z(fe,Ve,Ne))<0)return-1}else if(le!=Ve.charCodeAt(Ne++))return-1}return Ne}function I(fe,Ce,Ve){var Ne=d.exec(Ce.slice(Ve));return Ne?(fe.p=h.get(Ne[0].toLowerCase()),Ve+Ne[0].length):-1}function U(fe,Ce,Ve){var Ne=v.exec(Ce.slice(Ve));return Ne?(fe.w=b.get(Ne[0].toLowerCase()),Ve+Ne[0].length):-1}function B(fe,Ce,Ve){var Ne=m.exec(Ce.slice(Ve));return Ne?(fe.w=g.get(Ne[0].toLowerCase()),Ve+Ne[0].length):-1}function P(fe,Ce,Ve){var Ne=C.exec(Ce.slice(Ve));return Ne?(fe.m=R.get(Ne[0].toLowerCase()),Ve+Ne[0].length):-1}function F(fe,Ce,Ve){var Ne=w.exec(Ce.slice(Ve));return Ne?(fe.m=S.get(Ne[0].toLowerCase()),Ve+Ne[0].length):-1}function z(fe,Ce,Ve){return j(fe,e,Ce,Ve)}function Q(fe,Ce,Ve){return j(fe,n,Ce,Ve)}function W(fe,Ce,Ve){return j(fe,r,Ce,Ve)}function K(fe){return o[fe.getDay()]}function te(fe){return s[fe.getDay()]}function ne(fe){return f[fe.getMonth()]}function xe(fe){return c[fe.getMonth()]}function G(fe){return i[+(fe.getHours()>=12)]}function X(fe){return 1+~~(fe.getMonth()/3)}function de(fe){return o[fe.getUTCDay()]}function ce(fe){return s[fe.getUTCDay()]}function ve(fe){return f[fe.getUTCMonth()]}function ze(fe){return c[fe.getUTCMonth()]}function je(fe){return i[+(fe.getUTCHours()>=12)]}function Fe(fe){return 1+~~(fe.getUTCMonth()/3)}return{format:function(fe){var Ce=D(fe+="",N);return Ce.toString=function(){return fe},Ce},parse:function(fe){var Ce=M(fe+="",!1);return Ce.toString=function(){return fe},Ce},utcFormat:function(fe){var Ce=D(fe+="",O);return Ce.toString=function(){return fe},Ce},utcParse:function(fe){var Ce=M(fe+="",!0);return Ce.toString=function(){return fe},Ce}}}var Lj={"-":"",_:" ",0:"0"},Yn=/^\s*\d+/,sse=/^%/,ose=/[\\^$*+?|[\]().{}]/g;function kt(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(e)+i:i)}function ase(t){return t.replace(ose,"\\$&")}function ih(t){return new RegExp("^(?:"+t.map(ase).join("|")+")","i")}function sh(t){return new Map(t.map((e,n)=>[e.toLowerCase(),n]))}function lse(t,e,n){var r=Yn.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function cse(t,e,n){var r=Yn.exec(e.slice(n,n+1));return r?(t.u=+r[0],n+r[0].length):-1}function use(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.U=+r[0],n+r[0].length):-1}function dse(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.V=+r[0],n+r[0].length):-1}function fse(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.W=+r[0],n+r[0].length):-1}function zj(t,e,n){var r=Yn.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Uj(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function hse(t,e,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function pse(t,e,n){var r=Yn.exec(e.slice(n,n+1));return r?(t.q=r[0]*3-3,n+r[0].length):-1}function mse(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Vj(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function gse(t,e,n){var r=Yn.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function Fj(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function yse(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function vse(t,e,n){var r=Yn.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function xse(t,e,n){var r=Yn.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function bse(t,e,n){var r=Yn.exec(e.slice(n,n+6));return r?(t.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function _se(t,e,n){var r=sse.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function wse(t,e,n){var r=Yn.exec(e.slice(n));return r?(t.Q=+r[0],n+r[0].length):-1}function Sse(t,e,n){var r=Yn.exec(e.slice(n));return r?(t.s=+r[0],n+r[0].length):-1}function Bj(t,e){return kt(t.getDate(),e,2)}function Tse(t,e){return kt(t.getHours(),e,2)}function Ese(t,e){return kt(t.getHours()%12||12,e,2)}function Ase(t,e){return kt(1+Ep.count(Zo(t),t),e,3)}function iz(t,e){return kt(t.getMilliseconds(),e,3)}function Cse(t,e){return iz(t,e)+"000"}function Nse(t,e){return kt(t.getMonth()+1,e,2)}function kse(t,e){return kt(t.getMinutes(),e,2)}function Ise(t,e){return kt(t.getSeconds(),e,2)}function Rse(t){var e=t.getDay();return e===0?7:e}function Pse(t,e){return kt(xv.count(Zo(t)-1,t),e,2)}function sz(t){var e=t.getDay();return e>=4||e===0?_d(t):_d.ceil(t)}function jse(t,e){return t=sz(t),kt(_d.count(Zo(t),t)+(Zo(t).getDay()===4),e,2)}function Mse(t){return t.getDay()}function Dse(t,e){return kt(ry.count(Zo(t)-1,t),e,2)}function Ose(t,e){return kt(t.getFullYear()%100,e,2)}function Lse(t,e){return t=sz(t),kt(t.getFullYear()%100,e,2)}function zse(t,e){return kt(t.getFullYear()%1e4,e,4)}function Use(t,e){var n=t.getDay();return t=n>=4||n===0?_d(t):_d.ceil(t),kt(t.getFullYear()%1e4,e,4)}function Vse(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+kt(e/60|0,"0",2)+kt(e%60,"0",2)}function Hj(t,e){return kt(t.getUTCDate(),e,2)}function Fse(t,e){return kt(t.getUTCHours(),e,2)}function Bse(t,e){return kt(t.getUTCHours()%12||12,e,2)}function Hse(t,e){return kt(1+vv.count(ea(t),t),e,3)}function oz(t,e){return kt(t.getUTCMilliseconds(),e,3)}function qse(t,e){return oz(t,e)+"000"}function $se(t,e){return kt(t.getUTCMonth()+1,e,2)}function Gse(t,e){return kt(t.getUTCMinutes(),e,2)}function Kse(t,e){return kt(t.getUTCSeconds(),e,2)}function Wse(t){var e=t.getUTCDay();return e===0?7:e}function Yse(t,e){return kt(bv.count(ea(t)-1,t),e,2)}function az(t){var e=t.getUTCDay();return e>=4||e===0?wd(t):wd.ceil(t)}function Xse(t,e){return t=az(t),kt(wd.count(ea(t),t)+(ea(t).getUTCDay()===4),e,2)}function Jse(t){return t.getUTCDay()}function Qse(t,e){return kt(iy.count(ea(t)-1,t),e,2)}function Zse(t,e){return kt(t.getUTCFullYear()%100,e,2)}function eoe(t,e){return t=az(t),kt(t.getUTCFullYear()%100,e,2)}function toe(t,e){return kt(t.getUTCFullYear()%1e4,e,4)}function noe(t,e){var n=t.getUTCDay();return t=n>=4||n===0?wd(t):wd.ceil(t),kt(t.getUTCFullYear()%1e4,e,4)}function roe(){return"+0000"}function qj(){return"%"}function $j(t){return+t}function Gj(t){return Math.floor(+t/1e3)}var ju,lz,cz;ioe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ioe(t){return ju=ise(t),lz=ju.format,ju.parse,cz=ju.utcFormat,ju.utcParse,ju}function soe(t){return new Date(t)}function ooe(t){return t instanceof Date?+t:+new Date(+t)}function yE(t,e,n,r,i,s,o,c,f,d){var h=rE(),m=h.invert,g=h.domain,v=d(".%L"),b=d(":%S"),w=d("%I:%M"),S=d("%I %p"),C=d("%a %d"),R=d("%b %d"),N=d("%B"),O=d("%Y");function k(D){return(f(D)<D?v:c(D)<D?b:o(D)<D?w:s(D)<D?S:r(D)<D?i(D)<D?C:R:n(D)<D?N:O)(D)}return h.invert=function(D){return new Date(m(D))},h.domain=function(D){return arguments.length?g(Array.from(D,ooe)):g().map(soe)},h.ticks=function(D){var M=g();return t(M[0],M[M.length-1],D??10)},h.tickFormat=function(D,M){return M==null?k:d(M)},h.nice=function(D){var M=g();return(!D||typeof D.range!="function")&&(D=e(M[0],M[M.length-1],D??10)),D?g(Y6(M,D)):h},h.copy=function(){return Tp(h,yE(t,e,n,r,i,s,o,c,f,d))},h}function aoe(){return Wi.apply(yE(nse,rse,Zo,mE,xv,Ep,hE,dE,cc,lz).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function loe(){return Wi.apply(yE(ese,tse,ea,gE,bv,vv,pE,fE,cc,cz).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _v(){var t=0,e=1,n,r,i,s,o=Mr,c=!1,f;function d(m){return m==null||isNaN(m=+m)?f:o(i===0?.5:(m=(s(m)-n)*i,c?Math.max(0,Math.min(1,m)):m))}d.domain=function(m){return arguments.length?([t,e]=m,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),d):[t,e]},d.clamp=function(m){return arguments.length?(c=!!m,d):c},d.interpolator=function(m){return arguments.length?(o=m,d):o};function h(m){return function(g){var v,b;return arguments.length?([v,b]=g,o=m(v,b),d):[o(0),o(1)]}}return d.range=h(Ld),d.rangeRound=h(nE),d.unknown=function(m){return arguments.length?(f=m,d):f},function(m){return s=m,n=m(t),r=m(e),i=n===r?0:1/(r-n),d}}function _l(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function uz(){var t=bl(_v()(Mr));return t.copy=function(){return _l(t,uz())},aa.apply(t,arguments)}function dz(){var t=oE(_v()).domain([1,10]);return t.copy=function(){return _l(t,dz()).base(t.base())},aa.apply(t,arguments)}function fz(){var t=aE(_v());return t.copy=function(){return _l(t,fz()).constant(t.constant())},aa.apply(t,arguments)}function vE(){var t=lE(_v());return t.copy=function(){return _l(t,vE()).exponent(t.exponent())},aa.apply(t,arguments)}function coe(){return vE.apply(null,arguments).exponent(.5)}function hz(){var t=[],e=Mr;function n(r){if(r!=null&&!isNaN(r=+r))return e((wp(t,r,1)-1)/(t.length-1))}return n.domain=function(r){if(!arguments.length)return t.slice();t=[];for(let i of r)i!=null&&!isNaN(i=+i)&&t.push(i);return t.sort(ll),n},n.interpolator=function(r){return arguments.length?(e=r,n):e},n.range=function(){return t.map((r,i)=>e(i/(t.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(i,s)=>Wre(t,s/r))},n.copy=function(){return hz(e).domain(t)},aa.apply(n,arguments)}function wv(){var t=0,e=.5,n=1,r=1,i,s,o,c,f,d=Mr,h,m=!1,g;function v(w){return isNaN(w=+w)?g:(w=.5+((w=+h(w))-s)*(r*w<r*s?c:f),d(m?Math.max(0,Math.min(1,w)):w))}v.domain=function(w){return arguments.length?([t,e,n]=w,i=h(t=+t),s=h(e=+e),o=h(n=+n),c=i===s?0:.5/(s-i),f=s===o?0:.5/(o-s),r=s<i?-1:1,v):[t,e,n]},v.clamp=function(w){return arguments.length?(m=!!w,v):m},v.interpolator=function(w){return arguments.length?(d=w,v):d};function b(w){return function(S){var C,R,N;return arguments.length?([C,R,N]=S,d=_ie(w,[C,R,N]),v):[d(0),d(.5),d(1)]}}return v.range=b(Ld),v.rangeRound=b(nE),v.unknown=function(w){return arguments.length?(g=w,v):g},function(w){return h=w,i=w(t),s=w(e),o=w(n),c=i===s?0:.5/(s-i),f=s===o?0:.5/(o-s),r=s<i?-1:1,v}}function pz(){var t=bl(wv()(Mr));return t.copy=function(){return _l(t,pz())},aa.apply(t,arguments)}function mz(){var t=oE(wv()).domain([.1,1,10]);return t.copy=function(){return _l(t,mz()).base(t.base())},aa.apply(t,arguments)}function gz(){var t=aE(wv());return t.copy=function(){return _l(t,gz()).constant(t.constant())},aa.apply(t,arguments)}function xE(){var t=lE(wv());return t.copy=function(){return _l(t,xE()).exponent(t.exponent())},aa.apply(t,arguments)}function uoe(){return xE.apply(null,arguments).exponent(.5)}const mh=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:ZT,scaleDiverging:pz,scaleDivergingLog:mz,scaleDivergingPow:xE,scaleDivergingSqrt:uoe,scaleDivergingSymlog:gz,scaleIdentity:W6,scaleImplicit:Xw,scaleLinear:K6,scaleLog:X6,scaleOrdinal:QT,scalePoint:Jre,scalePow:cE,scaleQuantile:Z6,scaleQuantize:ez,scaleRadial:Q6,scaleSequential:uz,scaleSequentialLog:dz,scaleSequentialPow:vE,scaleSequentialQuantile:hz,scaleSequentialSqrt:coe,scaleSequentialSymlog:fz,scaleSqrt:qie,scaleSymlog:J6,scaleThreshold:tz,scaleTime:aoe,scaleUtc:loe,tickFormat:G6},Symbol.toStringTag,{value:"Module"}));var la=t=>t.chartData,yz=we([la],t=>{var e=t.chartData!=null?t.chartData.length-1:0;return{chartData:t.chartData,computedData:t.computedData,dataEndIndex:e,dataStartIndex:0}}),vz=(t,e,n,r)=>r?yz(t):la(t),doe=(t,e,n)=>n?yz(t):la(t);function ta(t){if(Array.isArray(t)&&t.length===2){var[e,n]=t;if(Nt(e)&&Nt(n))return!0}return!1}function Kj(t,e,n){return n?t:[Math.min(t[0],e[0]),Math.max(t[1],e[1])]}function xz(t,e){if(e&&typeof t!="function"&&Array.isArray(t)&&t.length===2){var[n,r]=t,i,s;if(Nt(n))i=n;else if(typeof n=="function")return;if(Nt(r))s=r;else if(typeof r=="function")return;var o=[i,s];if(ta(o))return o}}function foe(t,e,n){if(!(!n&&e==null)){if(typeof t=="function"&&e!=null)try{var r=t(e,n);if(ta(r))return Kj(r,e,n)}catch{}if(Array.isArray(t)&&t.length===2){var[i,s]=t,o,c;if(i==="auto")e!=null&&(o=Math.min(...e));else if(Je(i))o=i;else if(typeof i=="function")try{e!=null&&(o=i(e==null?void 0:e[0]))}catch{}else if(typeof i=="string"&&iP.test(i)){var f=iP.exec(i);if(f==null||f[1]==null||e==null)o=void 0;else{var d=+f[1];o=e[0]-d}}else o=e==null?void 0:e[0];if(s==="auto")e!=null&&(c=Math.max(...e));else if(Je(s))c=s;else if(typeof s=="function")try{e!=null&&(c=s(e==null?void 0:e[1]))}catch{}else if(typeof s=="string"&&sP.test(s)){var h=sP.exec(s);if(h==null||h[1]==null||e==null)c=void 0;else{var m=+h[1];c=e[1]+m}}else c=e==null?void 0:e[1];var g=[o,c];if(ta(g))return e==null?g:Kj(g,e,n)}}}var zd=1e9,hoe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},_E,nn=!0,qi="[DecimalError] ",gc=qi+"Invalid argument: ",bE=qi+"Exponent out of range: ",Ud=Math.floor,ic=Math.pow,poe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ci,qn=1e7,Xt=7,bz=9007199254740991,sy=Ud(bz/Xt),qe={};qe.absoluteValue=qe.abs=function(){var t=new this.constructor(this);return t.s&&(t.s=1),t};qe.comparedTo=qe.cmp=function(t){var e,n,r,i,s=this;if(t=new s.constructor(t),s.s!==t.s)return s.s||-t.s;if(s.e!==t.e)return s.e>t.e^s.s<0?1:-1;for(r=s.d.length,i=t.d.length,e=0,n=r<i?r:i;e<n;++e)if(s.d[e]!==t.d[e])return s.d[e]>t.d[e]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1};qe.decimalPlaces=qe.dp=function(){var t=this,e=t.d.length-1,n=(e-t.e)*Xt;if(e=t.d[e],e)for(;e%10==0;e/=10)n--;return n<0?0:n};qe.dividedBy=qe.div=function(t){return Go(this,new this.constructor(t))};qe.dividedToIntegerBy=qe.idiv=function(t){var e=this,n=e.constructor;return Gt(Go(e,new n(t),0,1),n.precision)};qe.equals=qe.eq=function(t){return!this.cmp(t)};qe.exponent=function(){return In(this)};qe.greaterThan=qe.gt=function(t){return this.cmp(t)>0};qe.greaterThanOrEqualTo=qe.gte=function(t){return this.cmp(t)>=0};qe.isInteger=qe.isint=function(){return this.e>this.d.length-2};qe.isNegative=qe.isneg=function(){return this.s<0};qe.isPositive=qe.ispos=function(){return this.s>0};qe.isZero=function(){return this.s===0};qe.lessThan=qe.lt=function(t){return this.cmp(t)<0};qe.lessThanOrEqualTo=qe.lte=function(t){return this.cmp(t)<1};qe.logarithm=qe.log=function(t){var e,n=this,r=n.constructor,i=r.precision,s=i+5;if(t===void 0)t=new r(10);else if(t=new r(t),t.s<1||t.eq(ci))throw Error(qi+"NaN");if(n.s<1)throw Error(qi+(n.s?"NaN":"-Infinity"));return n.eq(ci)?new r(0):(nn=!1,e=Go(Qh(n,s),Qh(t,s),s),nn=!0,Gt(e,i))};qe.minus=qe.sub=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?Sz(e,t):_z(e,(t.s=-t.s,t))};qe.modulo=qe.mod=function(t){var e,n=this,r=n.constructor,i=r.precision;if(t=new r(t),!t.s)throw Error(qi+"NaN");return n.s?(nn=!1,e=Go(n,t,0,1).times(t),nn=!0,n.minus(e)):Gt(new r(n),i)};qe.naturalExponential=qe.exp=function(){return wz(this)};qe.naturalLogarithm=qe.ln=function(){return Qh(this)};qe.negated=qe.neg=function(){var t=new this.constructor(this);return t.s=-t.s||0,t};qe.plus=qe.add=function(t){var e=this;return t=new e.constructor(t),e.s==t.s?_z(e,t):Sz(e,(t.s=-t.s,t))};qe.precision=qe.sd=function(t){var e,n,r,i=this;if(t!==void 0&&t!==!!t&&t!==1&&t!==0)throw Error(gc+t);if(e=In(i)+1,r=i.d.length-1,n=r*Xt+1,r=i.d[r],r){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return t&&e>n?e:n};qe.squareRoot=qe.sqrt=function(){var t,e,n,r,i,s,o,c=this,f=c.constructor;if(c.s<1){if(!c.s)return new f(0);throw Error(qi+"NaN")}for(t=In(c),nn=!1,i=Math.sqrt(+c),i==0||i==1/0?(e=to(c.d),(e.length+t)%2==0&&(e+="0"),i=Math.sqrt(e),t=Ud((t+1)/2)-(t<0||t%2),i==1/0?e="5e"+t:(e=i.toExponential(),e=e.slice(0,e.indexOf("e")+1)+t),r=new f(e)):r=new f(i.toString()),n=f.precision,i=o=n+3;;)if(s=r,r=s.plus(Go(c,s,o+2)).times(.5),to(s.d).slice(0,o)===(e=to(r.d)).slice(0,o)){if(e=e.slice(o-3,o+1),i==o&&e=="4999"){if(Gt(s,n+1,0),s.times(s).eq(c)){r=s;break}}else if(e!="9999")break;o+=4}return nn=!0,Gt(r,n)};qe.times=qe.mul=function(t){var e,n,r,i,s,o,c,f,d,h=this,m=h.constructor,g=h.d,v=(t=new m(t)).d;if(!h.s||!t.s)return new m(0);for(t.s*=h.s,n=h.e+t.e,f=g.length,d=v.length,f<d&&(s=g,g=v,v=s,o=f,f=d,d=o),s=[],o=f+d,r=o;r--;)s.push(0);for(r=d;--r>=0;){for(e=0,i=f+r;i>r;)c=s[i]+v[r]*g[i-r-1]+e,s[i--]=c%qn|0,e=c/qn|0;s[i]=(s[i]+e)%qn|0}for(;!s[--o];)s.pop();return e?++n:s.shift(),t.d=s,t.e=n,nn?Gt(t,m.precision):t};qe.toDecimalPlaces=qe.todp=function(t,e){var n=this,r=n.constructor;return n=new r(n),t===void 0?n:(go(t,0,zd),e===void 0?e=r.rounding:go(e,0,8),Gt(n,t+In(n)+1,e))};qe.toExponential=function(t,e){var n,r=this,i=r.constructor;return t===void 0?n=Ic(r,!0):(go(t,0,zd),e===void 0?e=i.rounding:go(e,0,8),r=Gt(new i(r),t+1,e),n=Ic(r,!0,t+1)),n};qe.toFixed=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?Ic(i):(go(t,0,zd),e===void 0?e=s.rounding:go(e,0,8),r=Gt(new s(i),t+In(i)+1,e),n=Ic(r.abs(),!1,t+In(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)};qe.toInteger=qe.toint=function(){var t=this,e=t.constructor;return Gt(new e(t),In(t)+1,e.rounding)};qe.toNumber=function(){return+this};qe.toPower=qe.pow=function(t){var e,n,r,i,s,o,c=this,f=c.constructor,d=12,h=+(t=new f(t));if(!t.s)return new f(ci);if(c=new f(c),!c.s){if(t.s<1)throw Error(qi+"Infinity");return c}if(c.eq(ci))return c;if(r=f.precision,t.eq(ci))return Gt(c,r);if(e=t.e,n=t.d.length-1,o=e>=n,s=c.s,o){if((n=h<0?-h:h)<=bz){for(i=new f(ci),e=Math.ceil(r/Xt+4),nn=!1;n%2&&(i=i.times(c),Yj(i.d,e)),n=Ud(n/2),n!==0;)c=c.times(c),Yj(c.d,e);return nn=!0,t.s<0?new f(ci).div(i):Gt(i,r)}}else if(s<0)throw Error(qi+"NaN");return s=s<0&&t.d[Math.max(e,n)]&1?-1:1,c.s=1,nn=!1,i=t.times(Qh(c,r+d)),nn=!0,i=wz(i),i.s=s,i};qe.toPrecision=function(t,e){var n,r,i=this,s=i.constructor;return t===void 0?(n=In(i),r=Ic(i,n<=s.toExpNeg||n>=s.toExpPos)):(go(t,1,zd),e===void 0?e=s.rounding:go(e,0,8),i=Gt(new s(i),t,e),n=In(i),r=Ic(i,t<=n||n<=s.toExpNeg,t)),r};qe.toSignificantDigits=qe.tosd=function(t,e){var n=this,r=n.constructor;return t===void 0?(t=r.precision,e=r.rounding):(go(t,1,zd),e===void 0?e=r.rounding:go(e,0,8)),Gt(new r(n),t,e)};qe.toString=qe.valueOf=qe.val=qe.toJSON=qe[Symbol.for("nodejs.util.inspect.custom")]=function(){var t=this,e=In(t),n=t.constructor;return Ic(t,e<=n.toExpNeg||e>=n.toExpPos)};function _z(t,e){var n,r,i,s,o,c,f,d,h=t.constructor,m=h.precision;if(!t.s||!e.s)return e.s||(e=new h(t)),nn?Gt(e,m):e;if(f=t.d,d=e.d,o=t.e,i=e.e,f=f.slice(),s=o-i,s){for(s<0?(r=f,s=-s,c=d.length):(r=d,i=o,c=f.length),o=Math.ceil(m/Xt),c=o>c?o+1:c+1,s>c&&(s=c,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for(c=f.length,s=d.length,c-s<0&&(s=c,r=d,d=f,f=r),n=0;s;)n=(f[--s]=f[s]+d[s]+n)/qn|0,f[s]%=qn;for(n&&(f.unshift(n),++i),c=f.length;f[--c]==0;)f.pop();return e.d=f,e.e=i,nn?Gt(e,m):e}function go(t,e,n){if(t!==~~t||t<e||t>n)throw Error(gc+t)}function to(t){var e,n,r,i=t.length-1,s="",o=t[0];if(i>0){for(s+=o,e=1;e<i;e++)r=t[e]+"",n=Xt-r.length,n&&(s+=Ka(n)),s+=r;o=t[e],r=o+"",n=Xt-r.length,n&&(s+=Ka(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}var Go=(function(){function t(r,i){var s,o=0,c=r.length;for(r=r.slice();c--;)s=r[c]*i+o,r[c]=s%qn|0,o=s/qn|0;return o&&r.unshift(o),r}function e(r,i,s,o){var c,f;if(s!=o)f=s>o?1:-1;else for(c=f=0;c<s;c++)if(r[c]!=i[c]){f=r[c]>i[c]?1:-1;break}return f}function n(r,i,s){for(var o=0;s--;)r[s]-=o,o=r[s]<i[s]?1:0,r[s]=o*qn+r[s]-i[s];for(;!r[0]&&r.length>1;)r.shift()}return function(r,i,s,o){var c,f,d,h,m,g,v,b,w,S,C,R,N,O,k,D,M,j,I=r.constructor,U=r.s==i.s?1:-1,B=r.d,P=i.d;if(!r.s)return new I(r);if(!i.s)throw Error(qi+"Division by zero");for(f=r.e-i.e,M=P.length,k=B.length,v=new I(U),b=v.d=[],d=0;P[d]==(B[d]||0);)++d;if(P[d]>(B[d]||0)&&--f,s==null?R=s=I.precision:o?R=s+(In(r)-In(i))+1:R=s,R<0)return new I(0);if(R=R/Xt+2|0,d=0,M==1)for(h=0,P=P[0],R++;(d<k||h)&&R--;d++)N=h*qn+(B[d]||0),b[d]=N/P|0,h=N%P|0;else{for(h=qn/(P[0]+1)|0,h>1&&(P=t(P,h),B=t(B,h),M=P.length,k=B.length),O=M,w=B.slice(0,M),S=w.length;S<M;)w[S++]=0;j=P.slice(),j.unshift(0),D=P[0],P[1]>=qn/2&&++D;do h=0,c=e(P,w,M,S),c<0?(C=w[0],M!=S&&(C=C*qn+(w[1]||0)),h=C/D|0,h>1?(h>=qn&&(h=qn-1),m=t(P,h),g=m.length,S=w.length,c=e(m,w,g,S),c==1&&(h--,n(m,M<g?j:P,g))):(h==0&&(c=h=1),m=P.slice()),g=m.length,g<S&&m.unshift(0),n(w,m,S),c==-1&&(S=w.length,c=e(P,w,M,S),c<1&&(h++,n(w,M<S?j:P,S))),S=w.length):c===0&&(h++,w=[0]),b[d++]=h,c&&w[0]?w[S++]=B[O]||0:(w=[B[O]],S=1);while((O++<k||w[0]!==void 0)&&R--)}return b[0]||b.shift(),v.e=f,Gt(v,o?s+In(v)+1:s)}})();function wz(t,e){var n,r,i,s,o,c,f=0,d=0,h=t.constructor,m=h.precision;if(In(t)>16)throw Error(bE+In(t));if(!t.s)return new h(ci);for(nn=!1,c=m,o=new h(.03125);t.abs().gte(.1);)t=t.times(o),d+=5;for(r=Math.log(ic(2,d))/Math.LN10*2+5|0,c+=r,n=i=s=new h(ci),h.precision=c;;){if(i=Gt(i.times(t),c),n=n.times(++f),o=s.plus(Go(i,n,c)),to(o.d).slice(0,c)===to(s.d).slice(0,c)){for(;d--;)s=Gt(s.times(s),c);return h.precision=m,e==null?(nn=!0,Gt(s,m)):s}s=o}}function In(t){for(var e=t.e*Xt,n=t.d[0];n>=10;n/=10)e++;return e}function __(t,e,n){if(e>t.LN10.sd())throw nn=!0,n&&(t.precision=n),Error(qi+"LN10 precision limit exceeded");return Gt(new t(t.LN10),e)}function Ka(t){for(var e="";t--;)e+="0";return e}function Qh(t,e){var n,r,i,s,o,c,f,d,h,m=1,g=10,v=t,b=v.d,w=v.constructor,S=w.precision;if(v.s<1)throw Error(qi+(v.s?"NaN":"-Infinity"));if(v.eq(ci))return new w(0);if(e==null?(nn=!1,d=S):d=e,v.eq(10))return e==null&&(nn=!0),__(w,d);if(d+=g,w.precision=d,n=to(b),r=n.charAt(0),s=In(v),Math.abs(s)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)v=v.times(t),n=to(v.d),r=n.charAt(0),m++;s=In(v),r>1?(v=new w("0."+n),s++):v=new w(r+"."+n.slice(1))}else return f=__(w,d+2,S).times(s+""),v=Qh(new w(r+"."+n.slice(1)),d-g).plus(f),w.precision=S,e==null?(nn=!0,Gt(v,S)):v;for(c=o=v=Go(v.minus(ci),v.plus(ci),d),h=Gt(v.times(v),d),i=3;;){if(o=Gt(o.times(h),d),f=c.plus(Go(o,new w(i),d)),to(f.d).slice(0,d)===to(c.d).slice(0,d))return c=c.times(2),s!==0&&(c=c.plus(__(w,d+2,S).times(s+""))),c=Go(c,new w(m),d),w.precision=S,e==null?(nn=!0,Gt(c,S)):c;c=f,i+=2}}function Wj(t,e){var n,r,i;for((n=e.indexOf("."))>-1&&(e=e.replace(".","")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charCodeAt(r)===48;)++r;for(i=e.length;e.charCodeAt(i-1)===48;)--i;if(e=e.slice(r,i),e){if(i-=r,n=n-r-1,t.e=Ud(n/Xt),t.d=[],r=(n+1)%Xt,n<0&&(r+=Xt),r<i){for(r&&t.d.push(+e.slice(0,r)),i-=Xt;r<i;)t.d.push(+e.slice(r,r+=Xt));e=e.slice(r),r=Xt-e.length}else r-=i;for(;r--;)e+="0";if(t.d.push(+e),nn&&(t.e>sy||t.e<-sy))throw Error(bE+n)}else t.s=0,t.e=0,t.d=[0];return t}function Gt(t,e,n){var r,i,s,o,c,f,d,h,m=t.d;for(o=1,s=m[0];s>=10;s/=10)o++;if(r=e-o,r<0)r+=Xt,i=e,d=m[h=0];else{if(h=Math.ceil((r+1)/Xt),s=m.length,h>=s)return t;for(d=s=m[h],o=1;s>=10;s/=10)o++;r%=Xt,i=r-Xt+o}if(n!==void 0&&(s=ic(10,o-i-1),c=d/s%10|0,f=e<0||m[h+1]!==void 0||d%s,f=n<4?(c||f)&&(n==0||n==(t.s<0?3:2)):c>5||c==5&&(n==4||f||n==6&&(r>0?i>0?d/ic(10,o-i):0:m[h-1])%10&1||n==(t.s<0?8:7))),e<1||!m[0])return f?(s=In(t),m.length=1,e=e-s-1,m[0]=ic(10,(Xt-e%Xt)%Xt),t.e=Ud(-e/Xt)||0):(m.length=1,m[0]=t.e=t.s=0),t;if(r==0?(m.length=h,s=1,h--):(m.length=h+1,s=ic(10,Xt-r),m[h]=i>0?(d/ic(10,o-i)%ic(10,i)|0)*s:0),f)for(;;)if(h==0){(m[0]+=s)==qn&&(m[0]=1,++t.e);break}else{if(m[h]+=s,m[h]!=qn)break;m[h--]=0,s=1}for(r=m.length;m[--r]===0;)m.pop();if(nn&&(t.e>sy||t.e<-sy))throw Error(bE+In(t));return t}function Sz(t,e){var n,r,i,s,o,c,f,d,h,m,g=t.constructor,v=g.precision;if(!t.s||!e.s)return e.s?e.s=-e.s:e=new g(t),nn?Gt(e,v):e;if(f=t.d,m=e.d,r=e.e,d=t.e,f=f.slice(),o=d-r,o){for(h=o<0,h?(n=f,o=-o,c=m.length):(n=m,r=d,c=f.length),i=Math.max(Math.ceil(v/Xt),c)+2,o>i&&(o=i,n.length=1),n.reverse(),i=o;i--;)n.push(0);n.reverse()}else{for(i=f.length,c=m.length,h=i<c,h&&(c=i),i=0;i<c;i++)if(f[i]!=m[i]){h=f[i]<m[i];break}o=0}for(h&&(n=f,f=m,m=n,e.s=-e.s),c=f.length,i=m.length-c;i>0;--i)f[c++]=0;for(i=m.length;i>o;){if(f[--i]<m[i]){for(s=i;s&&f[--s]===0;)f[s]=qn-1;--f[s],f[i]+=qn}f[i]-=m[i]}for(;f[--c]===0;)f.pop();for(;f[0]===0;f.shift())--r;return f[0]?(e.d=f,e.e=r,nn?Gt(e,v):e):new g(0)}function Ic(t,e,n){var r,i=In(t),s=to(t.d),o=s.length;return e?(n&&(r=n-o)>0?s=s.charAt(0)+"."+s.slice(1)+Ka(r):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+Ka(-i-1)+s,n&&(r=n-o)>0&&(s+=Ka(r))):i>=o?(s+=Ka(i+1-o),n&&(r=n-i-1)>0&&(s=s+"."+Ka(r))):((r=i+1)<o&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-o)>0&&(i+1===o&&(s+="."),s+=Ka(r))),t.s<0?"-"+s:s}function Yj(t,e){if(t.length>e)return t.length=e,!0}function Tz(t){var e,n,r;function i(s){var o=this;if(!(o instanceof i))return new i(s);if(o.constructor=i,s instanceof i){o.s=s.s,o.e=s.e,o.d=(s=s.d)?s.slice():s;return}if(typeof s=="number"){if(s*0!==0)throw Error(gc+s);if(s>0)o.s=1;else if(s<0)s=-s,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(s===~~s&&s<1e7){o.e=0,o.d=[s];return}return Wj(o,s.toString())}else if(typeof s!="string")throw Error(gc+s);if(s.charCodeAt(0)===45?(s=s.slice(1),o.s=-1):o.s=1,poe.test(s))Wj(o,s);else throw Error(gc+s)}if(i.prototype=qe,i.ROUND_UP=0,i.ROUND_DOWN=1,i.ROUND_CEIL=2,i.ROUND_FLOOR=3,i.ROUND_HALF_UP=4,i.ROUND_HALF_DOWN=5,i.ROUND_HALF_EVEN=6,i.ROUND_HALF_CEIL=7,i.ROUND_HALF_FLOOR=8,i.clone=Tz,i.config=i.set=moe,t===void 0&&(t={}),t)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],e=0;e<r.length;)t.hasOwnProperty(n=r[e++])||(t[n]=this[n]);return i.config(t),i}function moe(t){if(!t||typeof t!="object")throw Error(qi+"Object expected");var e,n,r,i=["precision",1,zd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(e=0;e<i.length;e+=3)if((r=t[n=i[e]])!==void 0)if(Ud(r)===r&&r>=i[e+1]&&r<=i[e+2])this[n]=r;else throw Error(gc+n+": "+r);if((r=t[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(gc+n+": "+r);return this}var _E=Tz(hoe);ci=new _E(1);const zt=_E;function Ez(t){var e;return t===0?e=1:e=Math.floor(new zt(t).abs().log(10).toNumber())+1,e}function Az(t,e,n){for(var r=new zt(t),i=0,s=[];r.lt(e)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}var Cz=t=>{var[e,n]=t,[r,i]=[e,n];return e>n&&([r,i]=[n,e]),[r,i]},Nz=(t,e,n)=>{if(t.lte(0))return new zt(0);var r=Ez(t.toNumber()),i=new zt(10).pow(r),s=t.div(i),o=r!==1?.05:.1,c=new zt(Math.ceil(s.div(o).toNumber())).add(n).mul(o),f=c.mul(i);return e?new zt(f.toNumber()):new zt(Math.ceil(f.toNumber()))},goe=(t,e,n)=>{var r=new zt(1),i=new zt(t);if(!i.isint()&&n){var s=Math.abs(t);s<1?(r=new zt(10).pow(Ez(t)-1),i=new zt(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new zt(Math.floor(t)))}else t===0?i=new zt(Math.floor((e-1)/2)):n||(i=new zt(Math.floor(t)));for(var o=Math.floor((e-1)/2),c=[],f=0;f<e;f++)c.push(i.add(new zt(f-o).mul(r)).toNumber());return c},kz=function(e,n,r,i){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((n-e)/(r-1)))return{step:new zt(0),tickMin:new zt(0),tickMax:new zt(0)};var o=Nz(new zt(n).sub(e).div(r-1),i,s),c;e<=0&&n>=0?c=new zt(0):(c=new zt(e).add(n).div(2),c=c.sub(new zt(c).mod(o)));var f=Math.ceil(c.sub(e).div(o).toNumber()),d=Math.ceil(new zt(n).sub(c).div(o).toNumber()),h=f+d+1;return h>r?kz(e,n,r,i,s+1):(h<r&&(d=n>0?d+(r-h):d,f=n>0?f:f+(r-h)),{step:o,tickMin:c.sub(new zt(f).mul(o)),tickMax:c.add(new zt(d).mul(o))})},yoe=function(e){var[n,r]=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(i,2),[c,f]=Cz([n,r]);if(c===-1/0||f===1/0){var d=f===1/0?[c,...Array(i-1).fill(1/0)]:[...Array(i-1).fill(-1/0),f];return n>r?d.reverse():d}if(c===f)return goe(c,i,s);var{step:h,tickMin:m,tickMax:g}=kz(c,f,o,s,0),v=Az(m,g.add(new zt(.1).mul(h)),h);return n>r?v.reverse():v},voe=function(e,n){var[r,i]=e,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,[o,c]=Cz([r,i]);if(o===-1/0||c===1/0)return[r,i];if(o===c)return[o];var f=Math.max(n,2),d=Nz(new zt(c).sub(o).div(f-1),s,0),h=[...Az(new zt(o),new zt(c),d),c];return s===!1&&(h=h.map(m=>Math.round(m))),r>i?h.reverse():h},xoe=t=>t.rootProps.barCategoryGap,Sv=t=>t.rootProps.stackOffset,Iz=t=>t.rootProps.reverseStackOrder,wE=t=>t.options.chartName,SE=t=>t.rootProps.syncId,Rz=t=>t.rootProps.syncMethod,TE=t=>t.options.eventEmitter,boe=t=>t.rootProps.baseValue,Xr={grid:-100,barBackground:-50,area:100,cursorRectangle:200,bar:300,line:400,axis:500,scatter:600,activeBar:1e3,cursorLine:1100,activeDot:1200,label:2e3},Zl={allowDecimals:!1,allowDataOverflow:!1,angleAxisId:0,reversed:!1,scale:"auto",tick:!0,type:"auto"},Ks={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,includeHidden:!1,radiusAxisId:0,reversed:!1,scale:"auto",tick:!0,tickCount:5,type:"auto"},Tv=(t,e)=>{if(!(!t||!e))return t!=null&&t.reversed?[e[1],e[0]]:e};function Ev(t,e,n){if(n!=="auto")return n;if(t!=null)return vo(t,e)?"category":"number"}function Xj(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function oy(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Xj(Object(n),!0).forEach(function(r){_oe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Xj(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function _oe(t,e,n){return(e=woe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function woe(t){var e=Soe(t,"string");return typeof e=="symbol"?e:e+""}function Soe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Jj={allowDataOverflow:Zl.allowDataOverflow,allowDecimals:Zl.allowDecimals,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Zl.angleAxisId,includeHidden:!1,name:void 0,reversed:Zl.reversed,scale:Zl.scale,tick:Zl.tick,tickCount:void 0,ticks:void 0,type:Zl.type,unit:void 0},Qj={allowDataOverflow:Ks.allowDataOverflow,allowDecimals:Ks.allowDecimals,allowDuplicatedCategory:Ks.allowDuplicatedCategory,dataKey:void 0,domain:void 0,id:Ks.radiusAxisId,includeHidden:Ks.includeHidden,name:void 0,reversed:Ks.reversed,scale:Ks.scale,tick:Ks.tick,tickCount:Ks.tickCount,ticks:void 0,type:Ks.type,unit:void 0},Toe=(t,e)=>{if(e!=null)return t.polarAxis.angleAxis[e]},EE=we([Toe,_6],(t,e)=>{var n;if(t!=null)return t;var r=(n=Ev(e,"angleAxis",Jj.type))!==null&&n!==void 0?n:"category";return oy(oy({},Jj),{},{type:r})}),Eoe=(t,e)=>t.polarAxis.radiusAxis[e],AE=we([Eoe,_6],(t,e)=>{var n;if(t!=null)return t;var r=(n=Ev(e,"radiusAxis",Qj.type))!==null&&n!==void 0?n:"category";return oy(oy({},Qj),{},{type:r})}),Av=t=>t.polarOptions,CE=we([sa,oa,pr],_re),Pz=we([Av,CE],(t,e)=>{if(t!=null)return vl(t.innerRadius,e,0)}),jz=we([Av,CE],(t,e)=>{if(t!=null)return vl(t.outerRadius,e,e*.8)}),Aoe=t=>{if(t==null)return[0,0];var{startAngle:e,endAngle:n}=t;return[e,n]},Mz=we([Av],Aoe);we([EE,Mz],Tv);var Dz=we([CE,Pz,jz],(t,e,n)=>{if(!(t==null||e==null||n==null))return[e,n]});we([AE,Dz],Tv);var Oz=we([rn,Av,Pz,jz,sa,oa],(t,e,n,r,i,s)=>{if(!(t!=="centric"&&t!=="radial"||e==null||n==null||r==null)){var{cx:o,cy:c,startAngle:f,endAngle:d}=e;return{cx:vl(o,i,i/2),cy:vl(c,s,s/2),innerRadius:n,outerRadius:r,startAngle:f,endAngle:d,clockWise:!1}}}),Xn=(t,e)=>e,Cv=(t,e,n)=>n;function NE(t){return t==null?void 0:t.id}function Lz(t,e,n){var{chartData:r=[]}=e,{allowDuplicatedCategory:i,dataKey:s}=n,o=new Map;return t.forEach(c=>{var f,d=(f=c.data)!==null&&f!==void 0?f:r;if(!(d==null||d.length===0)){var h=NE(c);d.forEach((m,g)=>{var v=s==null||i?g:String(ur(m,s,null)),b=ur(m,c.dataKey,0),w;o.has(v)?w=o.get(v):w={},Object.assign(w,{[h]:b}),o.set(v,w)})}}),Array.from(o.values())}function kE(t){return"stackId"in t&&t.stackId!=null&&t.dataKey!=null}var Nv=(t,e)=>t===e?!0:t==null||e==null?!1:t[0]===e[0]&&t[1]===e[1];function kv(t,e){return Array.isArray(t)&&Array.isArray(e)&&t.length===0&&e.length===0?!0:t===e}function Coe(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0}return!1}var Jn=t=>{var e=rn(t);return e==="horizontal"?"xAxis":e==="vertical"?"yAxis":e==="centric"?"angleAxis":"radiusAxis"},Vd=t=>t.tooltip.settings.axisId;function Noe(t){if(t in mh)return mh[t]();var e="scale".concat(DT(t));if(e in mh)return mh[e]()}function Zj(t){var e=t.ticks,n=t.bandwidth,r=t.range(),i=[Math.min(...r),Math.max(...r)];return{domain:()=>t.domain(),range:(function(s){function o(){return s.apply(this,arguments)}return o.toString=function(){return s.toString()},o})(()=>i),rangeMin:()=>i[0],rangeMax:()=>i[1],isInRange(s){var o=i[0],c=i[1];return o<=c?s>=o&&s<=c:s>=c&&s<=o},bandwidth:n?()=>n.call(t):void 0,ticks:e?s=>e.call(t,s):void 0,map:(s,o)=>{var c=t(s);if(c!=null){if(t.bandwidth&&o!==null&&o!==void 0&&o.position){var f=t.bandwidth();switch(o.position){case"middle":c+=f/2;break;case"end":c+=f;break}}return c}}}}function eM(t,e,n){if(typeof t=="function")return Zj(t.copy().domain(e).range(n));if(t!=null){var r=Noe(t);if(r!=null)return r.domain(e).range(n),Zj(r)}}var koe=(t,e)=>{if(e!=null)switch(t){case"linear":{if(!ta(e)){for(var n,r,i=0;i<e.length;i++){var s=e[i];Nt(s)&&((n===void 0||s<n)&&(n=s),(r===void 0||s>r)&&(r=s))}return n!==void 0&&r!==void 0?[n,r]:void 0}return e}default:return e}};function tM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function ay(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tM(Object(n),!0).forEach(function(r){Ioe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ioe(t,e,n){return(e=Roe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Roe(t){var e=Poe(t,"string");return typeof e=="symbol"?e:e+""}function Poe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var eS=[0,"auto"],Fn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},zz=(t,e)=>t.cartesianAxis.xAxis[e],ca=(t,e)=>{var n=zz(t,e);return n??Fn},Bn={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:eS,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:vp},Uz=(t,e)=>t.cartesianAxis.yAxis[e],ua=(t,e)=>{var n=Uz(t,e);return n??Bn},joe={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},IE=(t,e)=>{var n=t.cartesianAxis.zAxis[e];return n??joe},Ur=(t,e,n)=>{switch(e){case"xAxis":return ca(t,n);case"yAxis":return ua(t,n);case"zAxis":return IE(t,n);case"angleAxis":return EE(t,n);case"radiusAxis":return AE(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Moe=(t,e,n)=>{switch(e){case"xAxis":return ca(t,n);case"yAxis":return ua(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Ap=(t,e,n)=>{switch(e){case"xAxis":return ca(t,n);case"yAxis":return ua(t,n);case"angleAxis":return EE(t,n);case"radiusAxis":return AE(t,n);default:throw new Error("Unexpected axis type: ".concat(e))}},Vz=t=>t.graphicalItems.cartesianItems.some(e=>e.type==="bar")||t.graphicalItems.polarItems.some(e=>e.type==="radialBar");function Fz(t,e){return n=>{switch(t){case"xAxis":return"xAxisId"in n&&n.xAxisId===e;case"yAxis":return"yAxisId"in n&&n.yAxisId===e;case"zAxis":return"zAxisId"in n&&n.zAxisId===e;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===e;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===e;default:return!1}}}var Bz=t=>t.graphicalItems.cartesianItems,Doe=we([Xn,Cv],Fz),Hz=(t,e,n)=>t.filter(n).filter(r=>(e==null?void 0:e.includeHidden)===!0?!0:!r.hide),Cp=we([Bz,Ur,Doe],Hz,{memoizeOptions:{resultEqualityCheck:kv}}),qz=we([Cp],t=>t.filter(e=>e.type==="area"||e.type==="bar").filter(kE)),$z=t=>t.filter(e=>!("stackId"in e)||e.stackId===void 0),Ooe=we([Cp],$z),Gz=t=>t.map(e=>e.data).filter(Boolean).flat(1),Loe=we([Cp],Gz,{memoizeOptions:{resultEqualityCheck:kv}}),Kz=(t,e)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=e;return t.length>0?t:n.slice(r,i+1)},RE=we([Loe,vz],Kz),Wz=(t,e,n)=>(e==null?void 0:e.dataKey)!=null?t.map(r=>({value:ur(r,e.dataKey)})):n.length>0?n.map(r=>r.dataKey).flatMap(r=>t.map(i=>({value:ur(i,r)}))):t.map(r=>({value:r})),Iv=we([RE,Ur,Cp],Wz);function Yz(t,e){switch(t){case"xAxis":return e.direction==="x";case"yAxis":return e.direction==="y";default:return!1}}function Wg(t){if(mo(t)||t instanceof Date){var e=Number(t);if(Nt(e))return e}}function nM(t){if(Array.isArray(t)){var e=[Wg(t[0]),Wg(t[1])];return ta(e)?e:void 0}var n=Wg(t);if(n!=null)return[n,n]}function na(t){return t.map(Wg).filter(Zs)}function zoe(t,e,n){return!n||typeof e!="number"||po(e)?[]:n.length?na(n.flatMap(r=>{var i=ur(t,r.dataKey),s,o;if(Array.isArray(i)?[s,o]=i:s=o=i,!(!Nt(s)||!Nt(o)))return[e-s,e+o]})):[]}var On=t=>{var e=Jn(t),n=Vd(t);return Ap(t,e,n)},Np=we([On],t=>t==null?void 0:t.dataKey),Uoe=we([qz,vz,On],Lz),Xz=(t,e,n,r)=>{var i={},s=e.reduce((o,c)=>{if(c.stackId==null)return o;var f=o[c.stackId];return f==null&&(f=[]),f.push(c),o[c.stackId]=f,o},i);return Object.fromEntries(Object.entries(s).map(o=>{var[c,f]=o,d=r?[...f].reverse():f,h=d.map(NE);return[c,{stackedData:ate(t,h,n),graphicalItems:d}]}))},Jz=we([Uoe,qz,Sv,Iz],Xz),Qz=(t,e,n,r)=>{var{dataStartIndex:i,dataEndIndex:s}=e;if(r==null&&n!=="zAxis"){var o=dte(t,i,s);if(!(o!=null&&o[0]===0&&o[1]===0))return o}},Voe=we([Ur],t=>t.allowDataOverflow),PE=t=>{var e;if(t==null||!("domain"in t))return eS;if(t.domain!=null)return t.domain;if("ticks"in t&&t.ticks!=null){if(t.type==="number"){var n=na(t.ticks);return[Math.min(...n),Math.max(...n)]}if(t.type==="category")return t.ticks.map(String)}return(e=t==null?void 0:t.domain)!==null&&e!==void 0?e:eS},Zz=we([Ur],PE),eU=we([Zz,Voe],xz),Foe=we([Jz,la,Xn,eU],Qz,{memoizeOptions:{resultEqualityCheck:Nv}}),jE=t=>t.errorBars,Boe=(t,e,n)=>t.flatMap(r=>e[r.id]).filter(Boolean).filter(r=>Yz(n,r)),ly=function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];var i=n.filter(Boolean);if(i.length!==0){var s=i.flat(),o=Math.min(...s),c=Math.max(...s);return[o,c]}},tU=(t,e,n,r,i)=>{var s,o;if(n.length>0&&t.forEach(c=>{n.forEach(f=>{var d,h,m=(d=r[f.id])===null||d===void 0?void 0:d.filter(C=>Yz(i,C)),g=ur(c,(h=e.dataKey)!==null&&h!==void 0?h:f.dataKey),v=zoe(c,g,m);if(v.length>=2){var b=Math.min(...v),w=Math.max(...v);(s==null||b<s)&&(s=b),(o==null||w>o)&&(o=w)}var S=nM(g);S!=null&&(s=s==null?S[0]:Math.min(s,S[0]),o=o==null?S[1]:Math.max(o,S[1]))})}),(e==null?void 0:e.dataKey)!=null&&t.forEach(c=>{var f=nM(ur(c,e.dataKey));f!=null&&(s=s==null?f[0]:Math.min(s,f[0]),o=o==null?f[1]:Math.max(o,f[1]))}),Nt(s)&&Nt(o))return[s,o]},Hoe=we([RE,Ur,Ooe,jE,Xn],tU,{memoizeOptions:{resultEqualityCheck:Nv}});function qoe(t){var{value:e}=t;if(mo(e)||e instanceof Date)return e}var $oe=(t,e,n)=>{var r=t.map(qoe).filter(i=>i!=null);return n&&(e.dataKey==null||e.allowDuplicatedCategory&&TL(r))?L6(0,t.length):e.allowDuplicatedCategory?r:Array.from(new Set(r))},nU=t=>t.referenceElements.dots,Fd=(t,e,n)=>t.filter(r=>r.ifOverflow==="extendDomain").filter(r=>e==="xAxis"?r.xAxisId===n:r.yAxisId===n),Goe=we([nU,Xn,Cv],Fd),rU=t=>t.referenceElements.areas,Koe=we([rU,Xn,Cv],Fd),iU=t=>t.referenceElements.lines,Woe=we([iU,Xn,Cv],Fd),sU=(t,e)=>{if(t!=null){var n=na(t.map(r=>e==="xAxis"?r.x:r.y));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Yoe=we(Goe,Xn,sU),oU=(t,e)=>{if(t!=null){var n=na(t.flatMap(r=>[e==="xAxis"?r.x1:r.y1,e==="xAxis"?r.x2:r.y2]));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Xoe=we([Koe,Xn],oU);function Joe(t){var e;if(t.x!=null)return na([t.x]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.x);return n==null||n.length===0?[]:na(n)}function Qoe(t){var e;if(t.y!=null)return na([t.y]);var n=(e=t.segment)===null||e===void 0?void 0:e.map(r=>r.y);return n==null||n.length===0?[]:na(n)}var aU=(t,e)=>{if(t!=null){var n=t.flatMap(r=>e==="xAxis"?Joe(r):Qoe(r));if(n.length!==0)return[Math.min(...n),Math.max(...n)]}},Zoe=we([Woe,Xn],aU),eae=we(Yoe,Zoe,Xoe,(t,e,n)=>ly(t,n,e)),lU=(t,e,n,r,i,s,o,c)=>{if(n!=null)return n;var f=o==="vertical"&&c==="xAxis"||o==="horizontal"&&c==="yAxis",d=f?ly(r,s,i):ly(s,i);return foe(e,d,t.allowDataOverflow)},tae=we([Ur,Zz,eU,Foe,Hoe,eae,rn,Xn],lU,{memoizeOptions:{resultEqualityCheck:Nv}}),nae=[0,1],cU=(t,e,n,r,i,s,o)=>{if(!((t==null||n==null||n.length===0)&&o===void 0)){var{dataKey:c,type:f}=t,d=vo(e,s);if(d&&c==null){var h;return L6(0,(h=n==null?void 0:n.length)!==null&&h!==void 0?h:0)}return f==="category"?$oe(r,t,d):i==="expand"?nae:o}},ME=we([Ur,rn,RE,Iv,Sv,Xn,tae],cU);function rae(t){return t in mh}var uU=(t,e,n)=>{if(t!=null){var{scale:r,type:i}=t;if(r==="auto")return i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!e)?"point":i==="category"?"band":"linear";if(typeof r=="string"){var s="scale".concat(DT(r));return rae(s)?s:"point"}}},Bd=we([Ur,Vz,wE],uU);function DE(t,e,n,r){if(!(n==null||r==null))return typeof t.scale=="function"?eM(t.scale,n,r):eM(e,n,r)}var dU=(t,e,n)=>{var r=PE(e);if(!(n!=="auto"&&n!=="linear")){if(e!=null&&e.tickCount&&Array.isArray(r)&&(r[0]==="auto"||r[1]==="auto")&&ta(t))return yoe(t,e.tickCount,e.allowDecimals);if(e!=null&&e.tickCount&&e.type==="number"&&ta(t))return voe(t,e.tickCount,e.allowDecimals)}},OE=we([ME,Ap,Bd],dU),fU=(t,e,n,r)=>{if(r!=="angleAxis"&&(t==null?void 0:t.type)==="number"&&ta(e)&&Array.isArray(n)&&n.length>0){var i,s,o=e[0],c=(i=n[0])!==null&&i!==void 0?i:0,f=e[1],d=(s=n[n.length-1])!==null&&s!==void 0?s:0;return[Math.min(o,c),Math.max(f,d)]}return e},iae=we([Ur,ME,OE,Xn],fU),sae=we(Iv,Ur,(t,e)=>{if(!(!e||e.type!=="number")){var n=1/0,r=Array.from(na(t.map(m=>m.value))).sort((m,g)=>m-g),i=r[0],s=r[r.length-1];if(i==null||s==null)return 1/0;var o=s-i;if(o===0)return 1/0;for(var c=0;c<r.length-1;c++){var f=r[c],d=r[c+1];if(!(f==null||d==null)){var h=d-f;n=Math.min(n,h)}}return n/o}}),hU=we(sae,rn,xoe,pr,(t,e,n,r,i)=>i,(t,e,n,r,i)=>{if(!Nt(t))return 0;var s=e==="vertical"?r.height:r.width;if(i==="gap")return t*s/2;if(i==="no-gap"){var o=vl(n,t*s),c=t*s/2;return c-o-(c-o)/s*o}return 0}),oae=(t,e,n)=>{var r=ca(t,e);return r==null||typeof r.padding!="string"?0:hU(t,"xAxis",e,n,r.padding)},aae=(t,e,n)=>{var r=ua(t,e);return r==null||typeof r.padding!="string"?0:hU(t,"yAxis",e,n,r.padding)},lae=we(ca,oae,(t,e)=>{var n,r;if(t==null)return{left:0,right:0};var{padding:i}=t;return typeof i=="string"?{left:e,right:e}:{left:((n=i.left)!==null&&n!==void 0?n:0)+e,right:((r=i.right)!==null&&r!==void 0?r:0)+e}}),cae=we(ua,aae,(t,e)=>{var n,r;if(t==null)return{top:0,bottom:0};var{padding:i}=t;return typeof i=="string"?{top:e,bottom:e}:{top:((n=i.top)!==null&&n!==void 0?n:0)+e,bottom:((r=i.bottom)!==null&&r!==void 0?r:0)+e}}),uae=we([pr,lae,fv,dv,(t,e,n)=>n],(t,e,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[t.left+e.left,t.left+t.width-e.right]}),dae=we([pr,rn,cae,fv,dv,(t,e,n)=>n],(t,e,n,r,i,s)=>{var{padding:o}=i;return s?[r.height-o.bottom,o.top]:e==="horizontal"?[t.top+t.height-n.bottom,t.top+n.top]:[t.top+n.top,t.top+t.height-n.bottom]}),kp=(t,e,n,r)=>{var i;switch(e){case"xAxis":return uae(t,n,r);case"yAxis":return dae(t,n,r);case"zAxis":return(i=IE(t,n))===null||i===void 0?void 0:i.range;case"angleAxis":return Mz(t);case"radiusAxis":return Dz(t,n);default:return}},pU=we([Ur,kp],Tv),fae=we([Bd,iae],koe),Rv=we([Ur,Bd,fae,pU],DE);we([Cp,jE,Xn],Boe);function mU(t,e){return t.id<e.id?-1:t.id>e.id?1:0}var Pv=(t,e)=>e,jv=(t,e,n)=>n,hae=we(cv,Pv,jv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(mU)),pae=we(uv,Pv,jv,(t,e,n)=>t.filter(r=>r.orientation===e).filter(r=>r.mirror===n).sort(mU)),gU=(t,e)=>({width:t.width,height:e.height}),mae=(t,e)=>{var n=typeof e.width=="number"?e.width:vp;return{width:n,height:t.height}},gae=we(pr,ca,gU),yae=(t,e,n)=>{switch(e){case"top":return t.top;case"bottom":return n-t.bottom;default:return 0}},vae=(t,e,n)=>{switch(e){case"left":return t.left;case"right":return n-t.right;default:return 0}},xae=we(oa,pr,hae,Pv,jv,(t,e,n,r,i)=>{var s={},o;return n.forEach(c=>{var f=gU(e,c);o==null&&(o=yae(e,r,t));var d=r==="top"&&!i||r==="bottom"&&i;s[c.id]=o-Number(d)*f.height,o+=(d?-1:1)*f.height}),s}),bae=we(sa,pr,pae,Pv,jv,(t,e,n,r,i)=>{var s={},o;return n.forEach(c=>{var f=mae(e,c);o==null&&(o=vae(e,r,t));var d=r==="left"&&!i||r==="right"&&i;s[c.id]=o-Number(d)*f.width,o+=(d?-1:1)*f.width}),s}),_ae=(t,e)=>{var n=ca(t,e);if(n!=null)return xae(t,n.orientation,n.mirror)},wae=we([pr,ca,_ae,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:t.left,y:0}:{x:t.left,y:i}}}),Sae=(t,e)=>{var n=ua(t,e);if(n!=null)return bae(t,n.orientation,n.mirror)},Tae=we([pr,ua,Sae,(t,e)=>e],(t,e,n,r)=>{if(e!=null){var i=n==null?void 0:n[r];return i==null?{x:0,y:t.top}:{x:i,y:t.top}}}),Eae=we(pr,ua,(t,e)=>{var n=typeof e.width=="number"?e.width:vp;return{width:n,height:t.height}}),yU=(t,e,n,r)=>{if(n!=null){var{allowDuplicatedCategory:i,type:s,dataKey:o}=n,c=vo(t,r),f=e.map(d=>d.value);if(o&&c&&s==="category"&&i&&TL(f))return f}},LE=we([rn,Iv,Ur,Xn],yU),vU=(t,e,n,r)=>{if(!(n==null||n.dataKey==null)){var{type:i,scale:s}=n,o=vo(t,r);if(o&&(i==="number"||s!=="auto"))return e.map(c=>c.value)}},zE=we([rn,Iv,Ap,Xn],vU);we([rn,Moe,Bd,Rv,LE,zE,kp,OE,Xn],(t,e,n,r,i,s,o,c,f)=>{if(e!=null){var d=vo(t,f);return{angle:e.angle,interval:e.interval,minTickGap:e.minTickGap,orientation:e.orientation,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit,axisType:f,categoricalDomain:s,duplicateDomain:i,isCategorical:d,niceTicks:c,range:o,realScaleType:n,scale:r}}});var Aae=(t,e,n,r,i,s,o,c,f)=>{if(!(e==null||r==null)){var d=vo(t,f),{type:h,ticks:m,tickCount:g}=e,v=n==="scaleBand"&&typeof r.bandwidth=="function"?r.bandwidth()/2:2,b=h==="category"&&r.bandwidth?r.bandwidth()/v:0;b=f==="angleAxis"&&s!=null&&s.length>=2?fs(s[0]-s[1])*2*b:b;var w=m||i;return w?w.map((S,C)=>{var R=o?o.indexOf(S):S,N=r.map(R);return Nt(N)?{index:C,coordinate:N+b,value:S,offset:b}:null}).filter(Zs):d&&c?c.map((S,C)=>{var R=r.map(S);return Nt(R)?{coordinate:R+b,value:S,index:C,offset:b}:null}).filter(Zs):r.ticks?r.ticks(g).map((S,C)=>{var R=r.map(S);return Nt(R)?{coordinate:R+b,value:S,index:C,offset:b}:null}).filter(Zs):r.domain().map((S,C)=>{var R=r.map(S);return Nt(R)?{coordinate:R+b,value:o?o[S]:S,index:C,offset:b}:null}).filter(Zs)}},xU=we([rn,Ap,Bd,Rv,OE,kp,LE,zE,Xn],Aae),Cae=(t,e,n,r,i,s,o)=>{if(!(e==null||n==null||r==null||r[0]===r[1])){var c=vo(t,o),{tickCount:f}=e,d=0;return d=o==="angleAxis"&&(r==null?void 0:r.length)>=2?fs(r[0]-r[1])*2*d:d,c&&s?s.map((h,m)=>{var g=n.map(h);return Nt(g)?{coordinate:g+d,value:h,index:m,offset:d}:null}).filter(Zs):n.ticks?n.ticks(f).map((h,m)=>{var g=n.map(h);return Nt(g)?{coordinate:g+d,value:h,index:m,offset:d}:null}).filter(Zs):n.domain().map((h,m)=>{var g=n.map(h);return Nt(g)?{coordinate:g+d,value:i?i[h]:h,index:m,offset:d}:null}).filter(Zs)}},bU=we([rn,Ap,Rv,kp,LE,zE,Xn],Cae),_U=we(Ur,Rv,(t,e)=>{if(!(t==null||e==null))return ay(ay({},t),{},{scale:e})}),Nae=we([Ur,Bd,ME,pU],DE);we((t,e,n)=>IE(t,n),Nae,(t,e)=>{if(!(t==null||e==null))return ay(ay({},t),{},{scale:e})});var kae=we([rn,cv,uv],(t,e,n)=>{switch(t){case"horizontal":return e.some(r=>r.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(r=>r.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}}),wU=t=>t.options.defaultTooltipEventType,SU=t=>t.options.validateTooltipEventTypes;function TU(t,e,n){if(t==null)return e;var r=t?"axis":"item";return n==null?e:n.includes(r)?r:e}function UE(t,e){var n=wU(t),r=SU(t);return TU(e,n,r)}function Iae(t){return et(e=>UE(e,t))}var EU=(t,e)=>{var n,r=Number(e);if(!(po(r)||e==null))return r>=0?t==null||(n=t[r])===null||n===void 0?void 0:n.value:void 0},Rae=t=>t.tooltip.settings,Qa={active:!1,index:null,dataKey:void 0,graphicalItemId:void 0,coordinate:void 0},Pae={itemInteraction:{click:Qa,hover:Qa},axisInteraction:{click:Qa,hover:Qa},keyboardInteraction:Qa,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0,sourceViewBox:void 0,graphicalItemId:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},AU=Zr({name:"tooltip",initialState:Pae,reducers:{addTooltipEntrySettings:{reducer(t,e){t.tooltipItemPayloads.push(e.payload)},prepare:tn()},replaceTooltipEntrySettings:{reducer(t,e){var{prev:n,next:r}=e.payload,i=gs(t).tooltipItemPayloads.indexOf(n);i>-1&&(t.tooltipItemPayloads[i]=r)},prepare:tn()},removeTooltipEntrySettings:{reducer(t,e){var n=gs(t).tooltipItemPayloads.indexOf(e.payload);n>-1&&t.tooltipItemPayloads.splice(n,1)},prepare:tn()},setTooltipSettingsState(t,e){t.settings=e.payload},setActiveMouseOverItemIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.itemInteraction.hover.active=!0,t.itemInteraction.hover.index=e.payload.activeIndex,t.itemInteraction.hover.dataKey=e.payload.activeDataKey,t.itemInteraction.hover.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.hover.coordinate=e.payload.activeCoordinate},mouseLeaveChart(t){t.itemInteraction.hover.active=!1,t.axisInteraction.hover.active=!1},mouseLeaveItem(t){t.itemInteraction.hover.active=!1},setActiveClickItemIndex(t,e){t.syncInteraction.active=!1,t.itemInteraction.click.active=!0,t.keyboardInteraction.active=!1,t.itemInteraction.click.index=e.payload.activeIndex,t.itemInteraction.click.dataKey=e.payload.activeDataKey,t.itemInteraction.click.graphicalItemId=e.payload.activeGraphicalItemId,t.itemInteraction.click.coordinate=e.payload.activeCoordinate},setMouseOverAxisIndex(t,e){t.syncInteraction.active=!1,t.axisInteraction.hover.active=!0,t.keyboardInteraction.active=!1,t.axisInteraction.hover.index=e.payload.activeIndex,t.axisInteraction.hover.dataKey=e.payload.activeDataKey,t.axisInteraction.hover.coordinate=e.payload.activeCoordinate},setMouseClickAxisIndex(t,e){t.syncInteraction.active=!1,t.keyboardInteraction.active=!1,t.axisInteraction.click.active=!0,t.axisInteraction.click.index=e.payload.activeIndex,t.axisInteraction.click.dataKey=e.payload.activeDataKey,t.axisInteraction.click.coordinate=e.payload.activeCoordinate},setSyncInteraction(t,e){t.syncInteraction=e.payload},setKeyboardInteraction(t,e){t.keyboardInteraction.active=e.payload.active,t.keyboardInteraction.index=e.payload.activeIndex,t.keyboardInteraction.coordinate=e.payload.activeCoordinate}}}),{addTooltipEntrySettings:jae,replaceTooltipEntrySettings:Mae,removeTooltipEntrySettings:Dae,setTooltipSettingsState:Oae,setActiveMouseOverItemIndex:Lae,mouseLeaveItem:I_e,mouseLeaveChart:CU,setActiveClickItemIndex:R_e,setMouseOverAxisIndex:NU,setMouseClickAxisIndex:zae,setSyncInteraction:tS,setKeyboardInteraction:nS}=AU.actions,Uae=AU.reducer;function rM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Sg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?rM(Object(n),!0).forEach(function(r){Vae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Vae(t,e,n){return(e=Fae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Fae(t){var e=Bae(t,"string");return typeof e=="symbol"?e:e+""}function Bae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Hae(t,e,n){return e==="axis"?n==="click"?t.axisInteraction.click:t.axisInteraction.hover:n==="click"?t.itemInteraction.click:t.itemInteraction.hover}function qae(t){return t.index!=null}var kU=(t,e,n,r)=>{if(e==null)return Qa;var i=Hae(t,e,n);if(i==null)return Qa;if(i.active)return i;if(t.keyboardInteraction.active)return t.keyboardInteraction;if(t.syncInteraction.active&&t.syncInteraction.index!=null)return t.syncInteraction;var s=t.settings.active===!0;if(qae(i)){if(s)return Sg(Sg({},i),{},{active:!0})}else if(r!=null)return{active:!0,coordinate:void 0,dataKey:void 0,index:r,graphicalItemId:void 0};return Sg(Sg({},Qa),{},{coordinate:i.coordinate})};function $ae(t){if(typeof t=="number")return Number.isFinite(t)?t:void 0;if(t instanceof Date){var e=t.valueOf();return Number.isFinite(e)?e:void 0}var n=Number(t);return Number.isFinite(n)?n:void 0}function Gae(t,e){var n=$ae(t),r=e[0],i=e[1];if(n===void 0)return!1;var s=Math.min(r,i),o=Math.max(r,i);return n>=s&&n<=o}function Kae(t,e,n){if(n==null||e==null)return!0;var r=ur(t,e);return r==null||!ta(n)?!0:Gae(r,n)}var VE=(t,e,n,r)=>{var i=t==null?void 0:t.index;if(i==null)return null;var s=Number(i);if(!Nt(s))return i;var o=0,c=1/0;e.length>0&&(c=e.length-1);var f=Math.max(o,Math.min(s,c)),d=e[f];return d==null||Kae(d,n,r)?String(f):null},IU=(t,e,n,r,i,s,o)=>{if(s!=null){var c=o[0],f=c==null?void 0:c.getPosition(s);if(f!=null)return f;var d=i==null?void 0:i[Number(s)];if(d)switch(n){case"horizontal":return{x:d.coordinate,y:(r.top+e)/2};default:return{x:(r.left+t)/2,y:d.coordinate}}}},RU=(t,e,n,r)=>{if(e==="axis")return t.tooltipItemPayloads;if(t.tooltipItemPayloads.length===0)return[];var i;if(n==="hover"?i=t.itemInteraction.hover.graphicalItemId:i=t.itemInteraction.click.graphicalItemId,i==null&&r!=null){var s=t.tooltipItemPayloads[0];return s!=null?[s]:[]}return t.tooltipItemPayloads.filter(o=>{var c;return((c=o.settings)===null||c===void 0?void 0:c.graphicalItemId)===i})},PU=t=>t.options.tooltipPayloadSearcher,Hd=t=>t.tooltip;function iM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function sM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?iM(Object(n),!0).forEach(function(r){Wae(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):iM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Wae(t,e,n){return(e=Yae(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Yae(t){var e=Xae(t,"string");return typeof e=="symbol"?e:e+""}function Xae(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Jae(t,e){return t??e}var jU=(t,e,n,r,i,s,o)=>{if(!(e==null||s==null)){var{chartData:c,computedData:f,dataStartIndex:d,dataEndIndex:h}=n,m=[];return t.reduce((g,v)=>{var b,{dataDefinedOnItem:w,settings:S}=v,C=Jae(w,c),R=Array.isArray(C)?p6(C,d,h):C,N=(b=S==null?void 0:S.dataKey)!==null&&b!==void 0?b:r,O=S==null?void 0:S.nameKey,k;if(r&&Array.isArray(R)&&!Array.isArray(R[0])&&o==="axis"?k=EL(R,r,i):k=s(R,e,f,O),Array.isArray(k))k.forEach(M=>{var j=sM(sM({},S),{},{name:M.name,unit:M.unit,color:void 0,fill:void 0});g.push(oP({tooltipEntrySettings:j,dataKey:M.dataKey,payload:M.payload,value:ur(M.payload,M.dataKey),name:M.name}))});else{var D;g.push(oP({tooltipEntrySettings:S,dataKey:N,payload:k,value:ur(k,N),name:(D=ur(k,O))!==null&&D!==void 0?D:S==null?void 0:S.name}))}return g},m)}},FE=we([On,Vz,wE],uU),Qae=we([t=>t.graphicalItems.cartesianItems,t=>t.graphicalItems.polarItems],(t,e)=>[...t,...e]),Zae=we([Jn,Vd],Fz),qd=we([Qae,On,Zae],Hz,{memoizeOptions:{resultEqualityCheck:kv}}),ele=we([qd],t=>t.filter(kE)),tle=we([qd],Gz,{memoizeOptions:{resultEqualityCheck:kv}}),$d=we([tle,la],Kz),nle=we([ele,la,On],Lz),BE=we([$d,On,qd],Wz),MU=we([On],PE),rle=we([On],t=>t.allowDataOverflow),DU=we([MU,rle],xz),ile=we([qd],t=>t.filter(kE)),sle=we([nle,ile,Sv,Iz],Xz),ole=we([sle,la,Jn,DU],Qz),ale=we([qd],$z),lle=we([$d,On,ale,jE,Jn],tU,{memoizeOptions:{resultEqualityCheck:Nv}}),cle=we([nU,Jn,Vd],Fd),ule=we([cle,Jn],sU),dle=we([rU,Jn,Vd],Fd),fle=we([dle,Jn],oU),hle=we([iU,Jn,Vd],Fd),ple=we([hle,Jn],aU),mle=we([ule,ple,fle],ly),gle=we([On,MU,DU,ole,lle,mle,rn,Jn],lU),Ip=we([On,rn,$d,BE,Sv,Jn,gle],cU),yle=we([Ip,On,FE],dU),vle=we([On,Ip,yle,Jn],fU),OU=t=>{var e=Jn(t),n=Vd(t),r=!1;return kp(t,e,n,r)},LU=we([On,OU],Tv),zU=we([On,FE,vle,LU],DE),xle=we([rn,BE,On,Jn],yU),ble=we([rn,BE,On,Jn],vU),_le=(t,e,n,r,i,s,o,c)=>{if(e){var{type:f}=e,d=vo(t,c);if(r){var h=n==="scaleBand"&&r.bandwidth?r.bandwidth()/2:2,m=f==="category"&&r.bandwidth?r.bandwidth()/h:0;return m=c==="angleAxis"&&i!=null&&(i==null?void 0:i.length)>=2?fs(i[0]-i[1])*2*m:m,d&&o?o.map((g,v)=>{var b=r.map(g);return Nt(b)?{coordinate:b+m,value:g,index:v,offset:m}:null}).filter(Zs):r.domain().map((g,v)=>{var b=r.map(g);return Nt(b)?{coordinate:b+m,value:s?s[g]:g,index:v,offset:m}:null}).filter(Zs)}}},da=we([rn,On,FE,zU,OU,xle,ble,Jn],_le),HE=we([wU,SU,Rae],(t,e,n)=>TU(n.shared,t,e)),UU=t=>t.tooltip.settings.trigger,qE=t=>t.tooltip.settings.defaultIndex,Rp=we([Hd,HE,UU,qE],kU),Zh=we([Rp,$d,Np,Ip],VE),VU=we([da,Zh],EU),wle=we([Rp],t=>{if(t)return t.dataKey});we([Rp],t=>{if(t)return t.graphicalItemId});var FU=we([Hd,HE,UU,qE],RU),Sle=we([sa,oa,rn,pr,da,qE,FU],IU),Tle=we([Rp,Sle],(t,e)=>t!=null&&t.coordinate?t.coordinate:e),Ele=we([Rp],t=>{var e;return(e=t==null?void 0:t.active)!==null&&e!==void 0?e:!1}),Ale=we([FU,Zh,la,Np,VU,PU,HE],jU),Cle=we([Ale],t=>{if(t!=null){var e=t.map(n=>n.payload).filter(n=>n!=null);return Array.from(new Set(e))}});function oM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function aM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?oM(Object(n),!0).forEach(function(r){Nle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):oM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Nle(t,e,n){return(e=kle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kle(t){var e=Ile(t,"string");return typeof e=="symbol"?e:e+""}function Ile(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Rle=()=>et(On),Ple=()=>{var t=Rle(),e=et(da),n=et(zU);return V0(!t||!n?void 0:aM(aM({},t),{},{scale:n}),e)};function lM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Mu(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?lM(Object(n),!0).forEach(function(r){jle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):lM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function jle(t,e,n){return(e=Mle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Mle(t){var e=Dle(t,"string");return typeof e=="symbol"?e:e+""}function Dle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ole=(t,e,n,r)=>{var i=e.find(s=>s&&s.index===n);if(i){if(t==="horizontal")return{x:i.coordinate,y:r.chartY};if(t==="vertical")return{x:r.chartX,y:i.coordinate}}return{x:0,y:0}},Lle=(t,e,n,r)=>{var i=e.find(d=>d&&d.index===n);if(i){if(t==="centric"){var s=i.coordinate,{radius:o}=r;return Mu(Mu(Mu({},r),cr(r.cx,r.cy,o,s)),{},{angle:s,radius:o})}var c=i.coordinate,{angle:f}=r;return Mu(Mu(Mu({},r),cr(r.cx,r.cy,c,f)),{},{angle:f,radius:c})}return{angle:0,clockWise:!1,cx:0,cy:0,endAngle:0,innerRadius:0,outerRadius:0,radius:0,startAngle:0,x:0,y:0}};function zle(t,e){var{chartX:n,chartY:r}=t;return n>=e.left&&n<=e.left+e.width&&r>=e.top&&r<=e.top+e.height}var BU=(t,e,n,r,i)=>{var s,o=(s=e==null?void 0:e.length)!==null&&s!==void 0?s:0;if(o<=1||t==null)return 0;if(r==="angleAxis"&&i!=null&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var c=0;c<o;c++){var f,d,h,m,g,v=c>0?(f=n[c-1])===null||f===void 0?void 0:f.coordinate:(d=n[o-1])===null||d===void 0?void 0:d.coordinate,b=(h=n[c])===null||h===void 0?void 0:h.coordinate,w=c>=o-1?(m=n[0])===null||m===void 0?void 0:m.coordinate:(g=n[c+1])===null||g===void 0?void 0:g.coordinate,S=void 0;if(!(v==null||b==null||w==null))if(fs(b-v)!==fs(w-b)){var C=[];if(fs(w-b)===fs(i[1]-i[0])){S=w;var R=b+i[1]-i[0];C[0]=Math.min(R,(R+v)/2),C[1]=Math.max(R,(R+v)/2)}else{S=v;var N=w+i[1]-i[0];C[0]=Math.min(b,(N+b)/2),C[1]=Math.max(b,(N+b)/2)}var O=[Math.min(b,(S+b)/2),Math.max(b,(S+b)/2)];if(t>O[0]&&t<=O[1]||t>=C[0]&&t<=C[1]){var k;return(k=n[c])===null||k===void 0?void 0:k.index}}else{var D=Math.min(v,w),M=Math.max(v,w);if(t>(D+b)/2&&t<=(M+b)/2){var j;return(j=n[c])===null||j===void 0?void 0:j.index}}}else if(e)for(var I=0;I<o;I++){var U=e[I];if(U!=null){var B=e[I+1],P=e[I-1];if(I===0&&B!=null&&t<=(U.coordinate+B.coordinate)/2||I===o-1&&P!=null&&t>(U.coordinate+P.coordinate)/2||I>0&&I<o-1&&P!=null&&B!=null&&t>(U.coordinate+P.coordinate)/2&&t<=(U.coordinate+B.coordinate)/2)return U.index}}return-1},HU=()=>et(wE),$E=(t,e)=>e,qU=(t,e,n)=>n,GE=(t,e,n,r)=>r,Ule=we(da,t=>Zy(t,e=>e.coordinate)),KE=we([Hd,$E,qU,GE],kU),WE=we([KE,$d,Np,Ip],VE),Vle=(t,e,n)=>{if(e!=null){var r=Hd(t);return e==="axis"?n==="hover"?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:n==="hover"?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}},$U=we([Hd,$E,qU,GE],RU),cy=we([sa,oa,rn,pr,da,GE,$U],IU),Fle=we([KE,cy],(t,e)=>{var n;return(n=t.coordinate)!==null&&n!==void 0?n:e}),GU=we([da,WE],EU),Ble=we([$U,WE,la,Np,GU,PU,$E],jU),Hle=we([KE,WE],(t,e)=>({isActive:t.active&&e!=null,activeIndex:e})),qle=(t,e,n,r,i,s,o)=>{if(!(!t||!n||!r||!i)&&zle(t,o)){var c=fte(t,e),f=BU(c,s,i,n,r),d=Ole(e,i,f,t);return{activeIndex:String(f),activeCoordinate:d}}},$le=(t,e,n,r,i,s,o)=>{if(!(!t||!r||!i||!s||!n)){var c=Are(t,n);if(c){var f=hte(c,e),d=BU(f,o,s,r,i),h=Lle(e,s,d,c);return{activeIndex:String(d),activeCoordinate:h}}}},Gle=(t,e,n,r,i,s,o,c)=>{if(!(!t||!e||!r||!i||!s))return e==="horizontal"||e==="vertical"?qle(t,e,r,i,s,o,c):$le(t,e,n,r,i,s,o)},Kle=we(t=>t.zIndex.zIndexMap,(t,e)=>e,(t,e,n)=>n,(t,e,n)=>{if(e!=null){var r=t[e];if(r!=null)return n?r.panoramaElement:r.element}}),Wle=we(t=>t.zIndex.zIndexMap,t=>{var e=Object.keys(t).map(r=>parseInt(r,10)).concat(Object.values(Xr)),n=Array.from(new Set(e));return n.sort((r,i)=>r-i)},{memoizeOptions:{resultEqualityCheck:Coe}});function cM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function uM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?cM(Object(n),!0).forEach(function(r){Yle(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):cM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Yle(t,e,n){return(e=Xle(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Xle(t){var e=Jle(t,"string");return typeof e=="symbol"?e:e+""}function Jle(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qle={},Zle={zIndexMap:Object.values(Xr).reduce((t,e)=>uM(uM({},t),{},{[e]:{element:void 0,panoramaElement:void 0,consumers:0}}),Qle)},ece=new Set(Object.values(Xr));function tce(t){return ece.has(t)}var KU=Zr({name:"zIndex",initialState:Zle,reducers:{registerZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]?t.zIndexMap[n].consumers+=1:t.zIndexMap[n]={consumers:1,element:void 0,panoramaElement:void 0}},prepare:tn()},unregisterZIndexPortal:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(t.zIndexMap[n].consumers-=1,t.zIndexMap[n].consumers<=0&&!tce(n)&&delete t.zIndexMap[n])},prepare:tn()},registerZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n,element:r,isPanorama:i}=e.payload;t.zIndexMap[n]?i?t.zIndexMap[n].panoramaElement=r:t.zIndexMap[n].element=r:t.zIndexMap[n]={consumers:0,element:i?void 0:r,panoramaElement:i?r:void 0}},prepare:tn()},unregisterZIndexPortalElement:{reducer:(t,e)=>{var{zIndex:n}=e.payload;t.zIndexMap[n]&&(e.payload.isPanorama?t.zIndexMap[n].panoramaElement=void 0:t.zIndexMap[n].element=void 0)},prepare:tn()}}}),{registerZIndexPortal:nce,unregisterZIndexPortal:rce,registerZIndexPortalElement:ice,unregisterZIndexPortalElement:sce}=KU.actions,oce=KU.reducer;function wl(t){var{zIndex:e,children:n}=t,r=Yte(),i=r&&e!==void 0&&e!==0,s=bi(),o=Wn();L.useLayoutEffect(()=>i?(o(nce({zIndex:e})),()=>{o(rce({zIndex:e}))}):Dd,[o,e,i]);var c=et(f=>Kle(f,e,s));return i?c?lL.createPortal(n,c):null:n}function rS(){return rS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},rS.apply(null,arguments)}function dM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Tg(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?dM(Object(n),!0).forEach(function(r){ace(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):dM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ace(t,e,n){return(e=lce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function lce(t){var e=cce(t,"string");return typeof e=="symbol"?e:e+""}function cce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uce(t){var{cursor:e,cursorComp:n,cursorProps:r}=t;return L.isValidElement(e)?L.cloneElement(e,r):L.createElement(n,r)}function dce(t){var e,{coordinate:n,payload:r,index:i,offset:s,tooltipAxisBandSize:o,layout:c,cursor:f,tooltipEventType:d,chartName:h}=t,m=n,g=r,v=i;if(!f||!m||h!=="ScatterChart"&&d!=="axis")return null;var b,w,S;if(h==="ScatterChart")b=m,w=Lne,S=Xr.cursorLine;else if(h==="BarChart")b=zne(c,m,s,o),w=gre,S=Xr.cursorRectangle;else if(c==="radial"&&AL(m)){var{cx:C,cy:R,radius:N,startAngle:O,endAngle:k}=D6(m);b={cx:C,cy:R,startAngle:O,endAngle:k,innerRadius:N,outerRadius:N},w=Ire,S=Xr.cursorLine}else b={points:Rre(c,m,s)},w=Kg,S=Xr.cursorLine;var D=typeof f=="object"&&"className"in f?f.className:void 0,M=Tg(Tg(Tg(Tg({stroke:"#ccc",pointerEvents:"none"},s),b),Yy(f)),{},{payload:g,payloadIndex:v,className:Qt("recharts-tooltip-cursor",D)});return L.createElement(wl,{zIndex:(e=t.zIndex)!==null&&e!==void 0?e:S},L.createElement(uce,{cursor:f,cursorComp:w,cursorProps:M}))}function fce(t){var e=Ple(),n=Gte(),r=Od(),i=HU();return e==null||n==null||r==null||i==null?null:L.createElement(dce,rS({},t,{offset:n,layout:r,tooltipAxisBandSize:e,chartName:i}))}var WU=L.createContext(null),hce=()=>L.useContext(WU),w_={exports:{}},fM;function pce(){return fM||(fM=1,(function(t){var e=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function i(f,d,h){this.fn=f,this.context=d,this.once=h||!1}function s(f,d,h,m,g){if(typeof h!="function")throw new TypeError("The listener must be a function");var v=new i(h,m||f,g),b=n?n+d:d;return f._events[b]?f._events[b].fn?f._events[b]=[f._events[b],v]:f._events[b].push(v):(f._events[b]=v,f._eventsCount++),f}function o(f,d){--f._eventsCount===0?f._events=new r:delete f._events[d]}function c(){this._events=new r,this._eventsCount=0}c.prototype.eventNames=function(){var d=[],h,m;if(this._eventsCount===0)return d;for(m in h=this._events)e.call(h,m)&&d.push(n?m.slice(1):m);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(h)):d},c.prototype.listeners=function(d){var h=n?n+d:d,m=this._events[h];if(!m)return[];if(m.fn)return[m.fn];for(var g=0,v=m.length,b=new Array(v);g<v;g++)b[g]=m[g].fn;return b},c.prototype.listenerCount=function(d){var h=n?n+d:d,m=this._events[h];return m?m.fn?1:m.length:0},c.prototype.emit=function(d,h,m,g,v,b){var w=n?n+d:d;if(!this._events[w])return!1;var S=this._events[w],C=arguments.length,R,N;if(S.fn){switch(S.once&&this.removeListener(d,S.fn,void 0,!0),C){case 1:return S.fn.call(S.context),!0;case 2:return S.fn.call(S.context,h),!0;case 3:return S.fn.call(S.context,h,m),!0;case 4:return S.fn.call(S.context,h,m,g),!0;case 5:return S.fn.call(S.context,h,m,g,v),!0;case 6:return S.fn.call(S.context,h,m,g,v,b),!0}for(N=1,R=new Array(C-1);N<C;N++)R[N-1]=arguments[N];S.fn.apply(S.context,R)}else{var O=S.length,k;for(N=0;N<O;N++)switch(S[N].once&&this.removeListener(d,S[N].fn,void 0,!0),C){case 1:S[N].fn.call(S[N].context);break;case 2:S[N].fn.call(S[N].context,h);break;case 3:S[N].fn.call(S[N].context,h,m);break;case 4:S[N].fn.call(S[N].context,h,m,g);break;default:if(!R)for(k=1,R=new Array(C-1);k<C;k++)R[k-1]=arguments[k];S[N].fn.apply(S[N].context,R)}}return!0},c.prototype.on=function(d,h,m){return s(this,d,h,m,!1)},c.prototype.once=function(d,h,m){return s(this,d,h,m,!0)},c.prototype.removeListener=function(d,h,m,g){var v=n?n+d:d;if(!this._events[v])return this;if(!h)return o(this,v),this;var b=this._events[v];if(b.fn)b.fn===h&&(!g||b.once)&&(!m||b.context===m)&&o(this,v);else{for(var w=0,S=[],C=b.length;w<C;w++)(b[w].fn!==h||g&&!b[w].once||m&&b[w].context!==m)&&S.push(b[w]);S.length?this._events[v]=S.length===1?S[0]:S:o(this,v)}return this},c.prototype.removeAllListeners=function(d){var h;return d?(h=n?n+d:d,this._events[h]&&o(this,h)):(this._events=new r,this._eventsCount=0),this},c.prototype.off=c.prototype.removeListener,c.prototype.addListener=c.prototype.on,c.prefixed=n,c.EventEmitter=c,t.exports=c})(w_)),w_.exports}var mce=pce();const gce=ws(mce);var ep=new gce,iS="recharts.syncEvent.tooltip",hM="recharts.syncEvent.brush",yce=(t,e)=>{if(e&&Array.isArray(t)){var n=Number.parseInt(e,10);if(!po(n))return t[n]}},vce={chartName:"",tooltipPayloadSearcher:()=>{},eventEmitter:void 0,defaultTooltipEventType:"axis"},YU=Zr({name:"options",initialState:vce,reducers:{createEventEmitter:t=>{t.eventEmitter==null&&(t.eventEmitter=Symbol("rechartsEventEmitter"))}}}),xce=YU.reducer,{createEventEmitter:bce}=YU.actions;function _ce(t){return t.tooltip.syncInteraction}var wce={chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},XU=Zr({name:"chartData",initialState:wce,reducers:{setChartData(t,e){if(t.chartData=e.payload,e.payload==null){t.dataStartIndex=0,t.dataEndIndex=0;return}e.payload.length>0&&t.dataEndIndex!==e.payload.length-1&&(t.dataEndIndex=e.payload.length-1)},setComputedData(t,e){t.computedData=e.payload},setDataStartEndIndexes(t,e){var{startIndex:n,endIndex:r}=e.payload;n!=null&&(t.dataStartIndex=n),r!=null&&(t.dataEndIndex=r)}}}),{setChartData:pM,setDataStartEndIndexes:Sce,setComputedData:P_e}=XU.actions,Tce=XU.reducer,Ece=["x","y"];function mM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Du(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?mM(Object(n),!0).forEach(function(r){Ace(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):mM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ace(t,e,n){return(e=Cce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cce(t){var e=Nce(t,"string");return typeof e=="symbol"?e:e+""}function Nce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function kce(t,e){if(t==null)return{};var n,r,i=Ice(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Ice(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Rce(){var t=et(SE),e=et(TE),n=Wn(),r=et(Rz),i=et(da),s=Od(),o=hv(),c=et(f=>f.rootProps.className);L.useEffect(()=>{if(t==null)return Dd;var f=(d,h,m)=>{if(e!==m&&t===d){if(r==="index"){var g;if(o&&h!==null&&h!==void 0&&(g=h.payload)!==null&&g!==void 0&&g.coordinate&&h.payload.sourceViewBox){var v=h.payload.coordinate,{x:b,y:w}=v,S=kce(v,Ece),{x:C,y:R,width:N,height:O}=h.payload.sourceViewBox,k=Du(Du({},S),{},{x:o.x+(N?(b-C)/N:0)*o.width,y:o.y+(O?(w-R)/O:0)*o.height});n(Du(Du({},h),{},{payload:Du(Du({},h.payload),{},{coordinate:k})}))}else n(h);return}if(i!=null){var D;if(typeof r=="function"){var M={activeTooltipIndex:h.payload.index==null?void 0:Number(h.payload.index),isTooltipActive:h.payload.active,activeIndex:h.payload.index==null?void 0:Number(h.payload.index),activeLabel:h.payload.label,activeDataKey:h.payload.dataKey,activeCoordinate:h.payload.coordinate},j=r(i,M);D=i[j]}else r==="value"&&(D=i.find(W=>String(W.value)===h.payload.label));var{coordinate:I}=h.payload;if(D==null||h.payload.active===!1||I==null||o==null){n(tS({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0,sourceViewBox:void 0,graphicalItemId:void 0}));return}var{x:U,y:B}=I,P=Math.min(U,o.x+o.width),F=Math.min(B,o.y+o.height),z={x:s==="horizontal"?D.coordinate:P,y:s==="horizontal"?F:D.coordinate},Q=tS({active:h.payload.active,coordinate:z,dataKey:h.payload.dataKey,index:String(D.index),label:h.payload.label,sourceViewBox:h.payload.sourceViewBox,graphicalItemId:h.payload.graphicalItemId});n(Q)}}};return ep.on(iS,f),()=>{ep.off(iS,f)}},[c,n,e,t,r,i,s,o])}function Pce(){var t=et(SE),e=et(TE),n=Wn();L.useEffect(()=>{if(t==null)return Dd;var r=(i,s,o)=>{e!==o&&t===i&&n(Sce(s))};return ep.on(hM,r),()=>{ep.off(hM,r)}},[n,e,t])}function jce(){var t=Wn();L.useEffect(()=>{t(bce())},[t]),Rce(),Pce()}function Mce(t,e,n,r,i,s){var o=et(v=>Vle(v,t,e)),c=et(TE),f=et(SE),d=et(Rz),h=et(_ce),m=h==null?void 0:h.active,g=hv();L.useEffect(()=>{if(!m&&f!=null&&c!=null){var v=tS({active:s,coordinate:n,dataKey:o,index:i,label:typeof r=="number"?String(r):r,sourceViewBox:g,graphicalItemId:void 0});ep.emit(iS,f,v,c)}},[m,n,o,i,r,c,f,d,s,g])}function gM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function yM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?gM(Object(n),!0).forEach(function(r){Dce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):gM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dce(t,e,n){return(e=Oce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Oce(t){var e=Lce(t,"string");return typeof e=="symbol"?e:e+""}function Lce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function zce(t){return t.dataKey}function Uce(t,e){return L.isValidElement(t)?L.cloneElement(t,e):typeof t=="function"?L.createElement(t,e):L.createElement(gne,e)}var vM=[],Vce={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,includeHidden:!1,isAnimationActive:"auto",itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function Fce(t){var e,n,r=Ki(t,Vce),{active:i,allowEscapeViewBox:s,animationDuration:o,animationEasing:c,content:f,filterNull:d,isAnimationActive:h,offset:m,payloadUniqBy:g,position:v,reverseDirection:b,useTranslate3d:w,wrapperStyle:S,cursor:C,shared:R,trigger:N,defaultIndex:O,portal:k,axisId:D}=r,M=Wn(),j=typeof O=="number"?String(O):O;L.useEffect(()=>{M(Oae({shared:R,trigger:N,axisId:D,active:i,defaultIndex:j}))},[M,R,N,D,i,j]);var I=hv(),U=k6(),B=Iae(R),{activeIndex:P,isActive:F}=(e=et(je=>Hle(je,B,N,j)))!==null&&e!==void 0?e:{},z=et(je=>Ble(je,B,N,j)),Q=et(je=>GU(je,B,N,j)),W=et(je=>Fle(je,B,N,j)),K=z,te=hce(),ne=(n=i??F)!==null&&n!==void 0?n:!1,[xe,G]=ZZ([K,ne]),X=B==="axis"?Q:void 0;Mce(B,N,W,X,P,ne);var de=k??te;if(de==null||I==null||B==null)return null;var ce=K??vM;ne||(ce=vM),d&&ce.length&&(ce=EZ(ce.filter(je=>je.value!=null&&(je.hide!==!0||r.includeHidden)),g,zce));var ve=ce.length>0,ze=L.createElement(Sne,{allowEscapeViewBox:s,animationDuration:o,animationEasing:c,isAnimationActive:h,active:ne,coordinate:W,hasPayload:ve,offset:m,position:v,reverseDirection:b,useTranslate3d:w,viewBox:I,wrapperStyle:S,lastBoundingBox:xe,innerRef:G,hasPortalFromProps:!!k},Uce(f,yM(yM({},r),{},{payload:ce,label:X,active:ne,activeIndex:P,coordinate:W,accessibilityLayer:U})));return L.createElement(L.Fragment,null,lL.createPortal(ze,de),ne&&L.createElement(fce,{cursor:C,tooltipEventType:B,coordinate:W,payload:ce,index:P}))}function Bce(t,e,n){return(e=Hce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Hce(t){var e=qce(t,"string");return typeof e=="symbol"?e:e+""}function qce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}class $ce{constructor(e){Bce(this,"cache",new Map),this.maxSize=e}get(e){var n=this.cache.get(e);return n!==void 0&&(this.cache.delete(e),this.cache.set(e,n)),n}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var r=this.cache.keys().next().value;r!=null&&this.cache.delete(r)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}function xM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Gce(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?xM(Object(n),!0).forEach(function(r){Kce(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Kce(t,e,n){return(e=Wce(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Wce(t){var e=Yce(t,"string");return typeof e=="symbol"?e:e+""}function Yce(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Xce={cacheSize:2e3,enableCache:!0},JU=Gce({},Xce),bM=new $ce(JU.cacheSize),Jce={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},_M="recharts_measurement_span";function Qce(t,e){var n=e.fontSize||"",r=e.fontFamily||"",i=e.fontWeight||"",s=e.fontStyle||"",o=e.letterSpacing||"",c=e.textTransform||"";return"".concat(t,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(o,"|").concat(c)}var wM=(t,e)=>{try{var n=document.getElementById(_M);n||(n=document.createElement("span"),n.setAttribute("id",_M),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,Jce,e),n.textContent="".concat(t);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch{return{width:0,height:0}}},Nh=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(e==null||_p.isSsr)return{width:0,height:0};if(!JU.enableCache)return wM(e,n);var r=Qce(e,n),i=bM.get(r);if(i)return i;var s=wM(e,n);return bM.set(r,s),s},QU;function Zce(t,e,n){return(e=eue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function eue(t){var e=tue(t,"string");return typeof e=="symbol"?e:e+""}function tue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var SM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,TM=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,nue=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,rue=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,iue={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},sue=["cm","mm","pt","pc","in","Q","px"];function oue(t){return sue.includes(t)}var qu="NaN";function aue(t,e){return t*iue[e]}class or{static parse(e){var n,[,r,i]=(n=rue.exec(e))!==null&&n!==void 0?n:[];return r==null?or.NaN:new or(parseFloat(r),i??"")}constructor(e,n){this.num=e,this.unit=n,this.num=e,this.unit=n,po(e)&&(this.unit=""),n!==""&&!nue.test(n)&&(this.num=NaN,this.unit=""),oue(n)&&(this.num=aue(e,n),this.unit="px")}add(e){return this.unit!==e.unit?new or(NaN,""):new or(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new or(NaN,""):new or(this.num-e.num,this.unit)}multiply(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new or(NaN,""):new or(this.num*e.num,this.unit||e.unit)}divide(e){return this.unit!==""&&e.unit!==""&&this.unit!==e.unit?new or(NaN,""):new or(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return po(this.num)}}QU=or;Zce(or,"NaN",new QU(NaN,""));function ZU(t){if(t==null||t.includes(qu))return qu;for(var e=t;e.includes("*")||e.includes("/");){var n,[,r,i,s]=(n=SM.exec(e))!==null&&n!==void 0?n:[],o=or.parse(r??""),c=or.parse(s??""),f=i==="*"?o.multiply(c):o.divide(c);if(f.isNaN())return qu;e=e.replace(SM,f.toString())}for(;e.includes("+")||/.-\d+(?:\.\d+)?/.test(e);){var d,[,h,m,g]=(d=TM.exec(e))!==null&&d!==void 0?d:[],v=or.parse(h??""),b=or.parse(g??""),w=m==="+"?v.add(b):v.subtract(b);if(w.isNaN())return qu;e=e.replace(TM,w.toString())}return e}var EM=/\(([^()]*)\)/;function lue(t){for(var e=t,n;(n=EM.exec(e))!=null;){var[,r]=n;e=e.replace(EM,ZU(r))}return e}function cue(t){var e=t.replace(/\s+/g,"");return e=lue(e),e=ZU(e),e}function uue(t){try{return cue(t)}catch{return qu}}function S_(t){var e=uue(t.slice(5,-1));return e===qu?"":e}var due=["x","y","lineHeight","capHeight","fill","scaleToFit","textAnchor","verticalAnchor"],fue=["dx","dy","angle","className","breakAll"];function sS(){return sS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},sS.apply(null,arguments)}function AM(t,e){if(t==null)return{};var n,r,i=hue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var e8=/[ \f\n\r\t\v\u2028\u2029]+/,t8=t=>{var{children:e,breakAll:n,style:r}=t;try{var i=[];Tr(e)||(n?i=e.toString().split(""):i=e.toString().split(e8));var s=i.map(c=>({word:c,width:Nh(c,r).width})),o=n?0:Nh("",r).width;return{wordsWithComputedWidth:s,spaceWidth:o}}catch{return null}};function pue(t){return t==="start"||t==="middle"||t==="end"||t==="inherit"}var n8=(t,e,n,r)=>t.reduce((i,s)=>{var{word:o,width:c}=s,f=i[i.length-1];if(f&&c!=null&&(e==null||r||f.width+c+n<Number(e)))f.words.push(o),f.width+=c+n;else{var d={words:[o],width:c};i.push(d)}return i},[]),r8=t=>t.reduce((e,n)=>e.width>n.width?e:n),mue="",CM=(t,e,n,r,i,s,o,c)=>{var f=t.slice(0,e),d=t8({breakAll:n,style:r,children:f+mue});if(!d)return[!1,[]];var h=n8(d.wordsWithComputedWidth,s,o,c),m=h.length>i||r8(h).width>Number(s);return[m,h]},gue=(t,e,n,r,i)=>{var{maxLines:s,children:o,style:c,breakAll:f}=t,d=Je(s),h=String(o),m=n8(e,r,n,i);if(!d||i)return m;var g=m.length>s||r8(m).width>Number(r);if(!g)return m;for(var v=0,b=h.length-1,w=0,S;v<=b&&w<=h.length-1;){var C=Math.floor((v+b)/2),R=C-1,[N,O]=CM(h,R,f,c,s,r,n,i),[k]=CM(h,C,f,c,s,r,n,i);if(!N&&!k&&(v=C+1),N&&k&&(b=C-1),!N&&k){S=O;break}w++}return S||m},NM=t=>{var e=Tr(t)?[]:t.toString().split(e8);return[{words:e,width:void 0}]},yue=t=>{var{width:e,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:o}=t;if((e||n)&&!_p.isSsr){var c,f,d=t8({breakAll:s,children:r,style:i});if(d){var{wordsWithComputedWidth:h,spaceWidth:m}=d;c=h,f=m}else return NM(r);return gue({breakAll:s,children:r,maxLines:o,style:i},c,f,e,!!n)}return NM(r)},i8="#808080",vue={angle:0,breakAll:!1,capHeight:"0.71em",fill:i8,lineHeight:"1em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",x:0,y:0},YE=L.forwardRef((t,e)=>{var n=Ki(t,vue),{x:r,y:i,lineHeight:s,capHeight:o,fill:c,scaleToFit:f,textAnchor:d,verticalAnchor:h}=n,m=AM(n,due),g=L.useMemo(()=>yue({breakAll:m.breakAll,children:m.children,maxLines:m.maxLines,scaleToFit:f,style:m.style,width:m.width}),[m.breakAll,m.children,m.maxLines,f,m.style,m.width]),{dx:v,dy:b,angle:w,className:S,breakAll:C}=m,R=AM(m,fue);if(!mo(r)||!mo(i)||g.length===0)return null;var N=Number(r)+(Je(v)?v:0),O=Number(i)+(Je(b)?b:0);if(!Nt(N)||!Nt(O))return null;var k;switch(h){case"start":k=S_("calc(".concat(o,")"));break;case"middle":k=S_("calc(".concat((g.length-1)/2," * -").concat(s," + (").concat(o," / 2))"));break;default:k=S_("calc(".concat(g.length-1," * -").concat(s,")"));break}var D=[],M=g[0];if(f&&M!=null){var j=M.width,{width:I}=m;D.push("scale(".concat(Je(I)&&Je(j)?I/j:1,")"))}return w&&D.push("rotate(".concat(w,", ").concat(N,", ").concat(O,")")),D.length&&(R.transform=D.join(" ")),L.createElement("text",sS({},Bi(R),{ref:e,x:N,y:O,className:Qt("recharts-text",S),textAnchor:d,fill:c.includes("url")?i8:c}),g.map((U,B)=>{var P=U.words.join(C?"":" ");return L.createElement("tspan",{x:N,dy:B===0?k:s,key:"".concat(P,"-").concat(B)},P)}))});YE.displayName="Text";function kM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function Ws(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?kM(Object(n),!0).forEach(function(r){xue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):kM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function xue(t,e,n){return(e=bue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function bue(t){var e=_ue(t,"string");return typeof e=="symbol"?e:e+""}function _ue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wue=t=>{var{viewBox:e,position:n,offset:r=0,parentViewBox:i}=t,{x:s,y:o,height:c,upperWidth:f,lowerWidth:d}=KT(e),h=s,m=s+(f-d)/2,g=(h+m)/2,v=(f+d)/2,b=h+f/2,w=c>=0?1:-1,S=w*r,C=w>0?"end":"start",R=w>0?"start":"end",N=f>=0?1:-1,O=N*r,k=N>0?"end":"start",D=N>0?"start":"end",M=i;if(n==="top"){var j={x:h+f/2,y:o-S,horizontalAnchor:"middle",verticalAnchor:C};return M&&(j.height=Math.max(o-M.y,0),j.width=f),j}if(n==="bottom"){var I={x:m+d/2,y:o+c+S,horizontalAnchor:"middle",verticalAnchor:R};return M&&(I.height=Math.max(M.y+M.height-(o+c),0),I.width=d),I}if(n==="left"){var U={x:g-O,y:o+c/2,horizontalAnchor:k,verticalAnchor:"middle"};return M&&(U.width=Math.max(U.x-M.x,0),U.height=c),U}if(n==="right"){var B={x:g+v+O,y:o+c/2,horizontalAnchor:D,verticalAnchor:"middle"};return M&&(B.width=Math.max(M.x+M.width-B.x,0),B.height=c),B}var P=M?{width:v,height:c}:{};return n==="insideLeft"?Ws({x:g+O,y:o+c/2,horizontalAnchor:D,verticalAnchor:"middle"},P):n==="insideRight"?Ws({x:g+v-O,y:o+c/2,horizontalAnchor:k,verticalAnchor:"middle"},P):n==="insideTop"?Ws({x:h+f/2,y:o+S,horizontalAnchor:"middle",verticalAnchor:R},P):n==="insideBottom"?Ws({x:m+d/2,y:o+c-S,horizontalAnchor:"middle",verticalAnchor:C},P):n==="insideTopLeft"?Ws({x:h+O,y:o+S,horizontalAnchor:D,verticalAnchor:R},P):n==="insideTopRight"?Ws({x:h+f-O,y:o+S,horizontalAnchor:k,verticalAnchor:R},P):n==="insideBottomLeft"?Ws({x:m+O,y:o+c-S,horizontalAnchor:D,verticalAnchor:C},P):n==="insideBottomRight"?Ws({x:m+d-O,y:o+c-S,horizontalAnchor:k,verticalAnchor:C},P):n&&typeof n=="object"&&(Je(n.x)||Ac(n.x))&&(Je(n.y)||Ac(n.y))?Ws({x:s+vl(n.x,v),y:o+vl(n.y,c),horizontalAnchor:"end",verticalAnchor:"end"},P):Ws({x:b,y:o+c/2,horizontalAnchor:"middle",verticalAnchor:"middle"},P)},Sue=["labelRef"],Tue=["content"];function IM(t,e){if(t==null)return{};var n,r,i=Eue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Eue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function RM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function gh(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?RM(Object(n),!0).forEach(function(r){Aue(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):RM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Aue(t,e,n){return(e=Cue(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cue(t){var e=Nue(t,"string");return typeof e=="symbol"?e:e+""}function Nue(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Vo(){return Vo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Vo.apply(null,arguments)}var s8=L.createContext(null),kue=t=>{var{x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o,children:c}=t,f=L.useMemo(()=>({x:e,y:n,upperWidth:r,lowerWidth:i,width:s,height:o}),[e,n,r,i,s,o]);return L.createElement(s8.Provider,{value:f},c)},o8=()=>{var t=L.useContext(s8),e=hv();return t||(e?KT(e):void 0)},Iue=L.createContext(null),Rue=()=>{var t=L.useContext(Iue),e=et(Oz);return t||e},Pue=t=>{var{value:e,formatter:n}=t,r=Tr(t.children)?e:t.children;return typeof n=="function"?n(r):r},XE=t=>t!=null&&typeof t=="function",jue=(t,e)=>{var n=fs(e-t),r=Math.min(Math.abs(e-t),360);return n*r},Mue=(t,e,n,r,i)=>{var{offset:s,className:o}=t,{cx:c,cy:f,innerRadius:d,outerRadius:h,startAngle:m,endAngle:g,clockWise:v}=i,b=(d+h)/2,w=jue(m,g),S=w>=0?1:-1,C,R;switch(e){case"insideStart":C=m+S*s,R=v;break;case"insideEnd":C=g-S*s,R=!v;break;case"end":C=g+S*s,R=v;break;default:throw new Error("Unsupported position ".concat(e))}R=w<=0?R:!R;var N=cr(c,f,b,C),O=cr(c,f,b,C+(R?1:-1)*359),k="M".concat(N.x,",").concat(N.y,`
    A`).concat(b,",").concat(b,",0,1,").concat(R?0:1,`,
    `).concat(O.x,",").concat(O.y),D=Tr(t.id)?Vh("recharts-radial-line-"):t.id;return L.createElement("text",Vo({},r,{dominantBaseline:"central",className:Qt("recharts-radial-bar-label",o)}),L.createElement("defs",null,L.createElement("path",{id:D,d:k})),L.createElement("textPath",{xlinkHref:"#".concat(D)},n))},Due=(t,e,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:o,startAngle:c,endAngle:f}=t,d=(c+f)/2;if(n==="outside"){var{x:h,y:m}=cr(r,i,o+e,d);return{x:h,y:m,textAnchor:h>=r?"start":"end",verticalAnchor:"middle"}}if(n==="center")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if(n==="centerTop")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if(n==="centerBottom")return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var g=(s+o)/2,{x:v,y:b}=cr(r,i,g,d);return{x:v,y:b,textAnchor:"middle",verticalAnchor:"middle"}},Yg=t=>t!=null&&"cx"in t&&Je(t.cx),Oue={angle:0,offset:5,zIndex:Xr.label,position:"middle",textBreakAll:!1};function Lue(t){if(!Yg(t))return t;var{cx:e,cy:n,outerRadius:r}=t,i=r*2;return{x:e-r,y:n-r,width:i,upperWidth:i,lowerWidth:i,height:i}}function Wa(t){var e=Ki(t,Oue),{viewBox:n,parentViewBox:r,position:i,value:s,children:o,content:c,className:f="",textBreakAll:d,labelRef:h}=e,m=Rue(),g=o8(),v=i==="center"?g:m??g,b,w,S;n==null?b=v:Yg(n)?b=n:b=KT(n);var C=Lue(b);if(!b||Tr(s)&&Tr(o)&&!L.isValidElement(c)&&typeof c!="function")return null;var R=gh(gh({},e),{},{viewBox:b});if(L.isValidElement(c)){var{labelRef:N}=R,O=IM(R,Sue);return L.cloneElement(c,O)}if(typeof c=="function"){var{content:k}=R,D=IM(R,Tue);if(w=L.createElement(c,D),L.isValidElement(w))return w}else w=Pue(e);var M=Bi(e);if(Yg(b)){if(i==="insideStart"||i==="insideEnd"||i==="end")return Mue(e,i,w,M,b);S=Due(b,e.offset,e.position)}else{if(!C)return null;var j=wue({viewBox:C,position:i,offset:e.offset,parentViewBox:Yg(r)?void 0:r});S=gh(gh({x:j.x,y:j.y,textAnchor:j.horizontalAnchor,verticalAnchor:j.verticalAnchor},j.width!==void 0?{width:j.width}:{}),j.height!==void 0?{height:j.height}:{})}return L.createElement(wl,{zIndex:e.zIndex},L.createElement(YE,Vo({ref:h,className:Qt("recharts-label",f)},M,S,{textAnchor:pue(M.textAnchor)?M.textAnchor:S.textAnchor,breakAll:d}),w))}Wa.displayName="Label";var zue=(t,e,n)=>{if(!t)return null;var r={viewBox:e,labelRef:n};return t===!0?L.createElement(Wa,Vo({key:"label-implicit"},r)):mo(t)?L.createElement(Wa,Vo({key:"label-implicit",value:t},r)):L.isValidElement(t)?t.type===Wa?L.cloneElement(t,gh({key:"label-implicit"},r)):L.createElement(Wa,Vo({key:"label-implicit",content:t},r)):XE(t)?L.createElement(Wa,Vo({key:"label-implicit",content:t},r)):t&&typeof t=="object"?L.createElement(Wa,Vo({},t,{key:"label-implicit"},r)):null};function Uue(t){var{label:e,labelRef:n}=t,r=o8();return zue(e,r,n)||null}var T_={},E_={},PM;function Vue(){return PM||(PM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return n[n.length-1]}t.last=e})(E_)),E_}var A_={},jM;function Fue(){return jM||(jM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});function e(n){return Array.isArray(n)?n:Array.from(n)}t.toArray=e})(A_)),A_}var MM;function Bue(){return MM||(MM=1,(function(t){Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const e=Vue(),n=Fue(),r=LT();function i(s){if(r.isArrayLike(s))return e.last(n.toArray(s))}t.last=i})(T_)),T_}var C_,DM;function Hue(){return DM||(DM=1,C_=Bue().last),C_}var que=Hue();const $ue=ws(que);var Gue=["valueAccessor"],Kue=["dataKey","clockWise","id","textBreakAll","zIndex"];function uy(){return uy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},uy.apply(null,arguments)}function OM(t,e){if(t==null)return{};var n,r,i=Wue(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Wue(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Yue=t=>Array.isArray(t.value)?$ue(t.value):t.value,a8=L.createContext(void 0),Xue=a8.Provider,l8=L.createContext(void 0);l8.Provider;function Jue(){return L.useContext(a8)}function Que(){return L.useContext(l8)}function Xg(t){var{valueAccessor:e=Yue}=t,n=OM(t,Gue),{dataKey:r,clockWise:i,id:s,textBreakAll:o,zIndex:c}=n,f=OM(n,Kue),d=Jue(),h=Que(),m=d||h;return!m||!m.length?null:L.createElement(wl,{zIndex:c??Xr.label},L.createElement(ho,{className:"recharts-label-list"},m.map((g,v)=>{var b,w=Tr(r)?e(g,v):ur(g.payload,r),S=Tr(s)?{}:{id:"".concat(s,"-").concat(v)};return L.createElement(Wa,uy({key:"label-".concat(v)},Bi(g),f,S,{fill:(b=n.fill)!==null&&b!==void 0?b:g.fill,parentViewBox:g.parentViewBox,value:w,textBreakAll:o,viewBox:g.viewBox,index:v,zIndex:0}))})))}Xg.displayName="LabelList";function Zue(t){var{label:e}=t;return e?e===!0?L.createElement(Xg,{key:"labelList-implicit"}):L.isValidElement(e)||XE(e)?L.createElement(Xg,{key:"labelList-implicit",content:e}):typeof e=="object"?L.createElement(Xg,uy({key:"labelList-implicit"},e,{type:String(e.type)})):null:null}function oS(){return oS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},oS.apply(null,arguments)}var c8=t=>{var{cx:e,cy:n,r,className:i}=t,s=Qt("recharts-dot",i);return Je(e)&&Je(n)&&Je(r)?L.createElement("circle",oS({},fo(t),OT(t),{className:s,cx:e,cy:n,r})):null},ede={radiusAxis:{},angleAxis:{}},u8=Zr({name:"polarAxis",initialState:ede,reducers:{addRadiusAxis(t,e){t.radiusAxis[e.payload.id]=e.payload},removeRadiusAxis(t,e){delete t.radiusAxis[e.payload.id]},addAngleAxis(t,e){t.angleAxis[e.payload.id]=e.payload},removeAngleAxis(t,e){delete t.angleAxis[e.payload.id]}}}),{addRadiusAxis:j_e,removeRadiusAxis:M_e,addAngleAxis:D_e,removeAngleAxis:O_e}=u8.actions,tde=u8.reducer;function nde(t){return t&&typeof t=="object"&&"className"in t&&typeof t.className=="string"?t.className:""}var d8=t=>t&&typeof t=="object"&&"clipDot"in t?!!t.clipDot:!0;function rde(t){var{tooltipEntrySettings:e}=t,n=Wn(),r=bi(),i=L.useRef(null);return L.useLayoutEffect(()=>{r||(i.current===null?n(jae(e)):i.current!==e&&n(Mae({prev:i.current,next:e})),i.current=e)},[e,n,r]),L.useLayoutEffect(()=>()=>{i.current&&(n(Dae(i.current)),i.current=null)},[n]),null}function ide(t){var{legendPayload:e}=t,n=Wn(),r=bi(),i=L.useRef(null);return L.useLayoutEffect(()=>{r||(i.current===null?n(lne(e)):i.current!==e&&n(cne({prev:i.current,next:e})),i.current=e)},[n,r,e]),L.useLayoutEffect(()=>()=>{i.current&&(n(une(i.current)),i.current=null)},[n]),null}var N_,sde=()=>{var[t]=L.useState(()=>Vh("uid-"));return t},ode=(N_=SF.useId)!==null&&N_!==void 0?N_:sde;function ade(t,e){var n=ode();return e||(t?"".concat(t,"-").concat(n):n)}var lde=L.createContext(void 0),cde=t=>{var{id:e,type:n,children:r}=t,i=ade("recharts-".concat(n),e);return L.createElement(lde.Provider,{value:i},r(i))},ude={cartesianItems:[],polarItems:[]},f8=Zr({name:"graphicalItems",initialState:ude,reducers:{addCartesianGraphicalItem:{reducer(t,e){t.cartesianItems.push(e.payload)},prepare:tn()},replaceCartesianGraphicalItem:{reducer(t,e){var{prev:n,next:r}=e.payload,i=gs(t).cartesianItems.indexOf(n);i>-1&&(t.cartesianItems[i]=r)},prepare:tn()},removeCartesianGraphicalItem:{reducer(t,e){var n=gs(t).cartesianItems.indexOf(e.payload);n>-1&&t.cartesianItems.splice(n,1)},prepare:tn()},addPolarGraphicalItem:{reducer(t,e){t.polarItems.push(e.payload)},prepare:tn()},removePolarGraphicalItem:{reducer(t,e){var n=gs(t).polarItems.indexOf(e.payload);n>-1&&t.polarItems.splice(n,1)},prepare:tn()}}}),{addCartesianGraphicalItem:dde,replaceCartesianGraphicalItem:fde,removeCartesianGraphicalItem:hde,addPolarGraphicalItem:L_e,removePolarGraphicalItem:z_e}=f8.actions,pde=f8.reducer,mde=t=>{var e=Wn(),n=L.useRef(null);return L.useLayoutEffect(()=>{n.current===null?e(dde(t)):n.current!==t&&e(fde({prev:n.current,next:t})),n.current=t},[e,t]),L.useLayoutEffect(()=>()=>{n.current&&(e(hde(n.current)),n.current=null)},[e]),null},gde=L.memo(mde),yde=["points"];function LM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function k_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?LM(Object(n),!0).forEach(function(r){vde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):LM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function vde(t,e,n){return(e=xde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function xde(t){var e=bde(t,"string");return typeof e=="symbol"?e:e+""}function bde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function dy(){return dy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},dy.apply(null,arguments)}function _de(t,e){if(t==null)return{};var n,r,i=wde(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function wde(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Sde(t){var{option:e,dotProps:n,className:r}=t;if(L.isValidElement(e))return L.cloneElement(e,n);if(typeof e=="function")return e(n);var i=Qt(r,typeof e!="boolean"?e.className:""),s=n??{},{points:o}=s,c=_de(s,yde);return L.createElement(c8,dy({},c,{className:i}))}function Tde(t,e){return t==null?!1:e?!0:t.length===1}function Ede(t){var{points:e,dot:n,className:r,dotClassName:i,dataKey:s,baseProps:o,needClip:c,clipPathId:f,zIndex:d=Xr.scatter}=t;if(!Tde(e,n))return null;var h=d8(n),m=vQ(n),g=e.map((b,w)=>{var S,C,R=k_(k_(k_({r:3},o),m),{},{index:w,cx:(S=b.x)!==null&&S!==void 0?S:void 0,cy:(C=b.y)!==null&&C!==void 0?C:void 0,dataKey:s,value:b.value,payload:b.payload,points:e});return L.createElement(Sde,{key:"dot-".concat(w),option:n,dotProps:R,className:i})}),v={};return c&&f!=null&&(v.clipPath="url(#clipPath-".concat(h?"":"dots-").concat(f,")")),L.createElement(wl,{zIndex:d},L.createElement(ho,dy({className:r},v),g))}function zM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function UM(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zM(Object(n),!0).forEach(function(r){Ade(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Ade(t,e,n){return(e=Cde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Cde(t){var e=Nde(t,"string");return typeof e=="symbol"?e:e+""}function Nde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h8=0,kde={xAxis:{},yAxis:{},zAxis:{}},p8=Zr({name:"cartesianAxis",initialState:kde,reducers:{addXAxis:{reducer(t,e){t.xAxis[e.payload.id]=e.payload},prepare:tn()},replaceXAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.xAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.xAxis[n.id],t.xAxis[r.id]=r)},prepare:tn()},removeXAxis:{reducer(t,e){delete t.xAxis[e.payload.id]},prepare:tn()},addYAxis:{reducer(t,e){t.yAxis[e.payload.id]=e.payload},prepare:tn()},replaceYAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.yAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.yAxis[n.id],t.yAxis[r.id]=r)},prepare:tn()},removeYAxis:{reducer(t,e){delete t.yAxis[e.payload.id]},prepare:tn()},addZAxis:{reducer(t,e){t.zAxis[e.payload.id]=e.payload},prepare:tn()},replaceZAxis:{reducer(t,e){var{prev:n,next:r}=e.payload;t.zAxis[n.id]!==void 0&&(n.id!==r.id&&delete t.zAxis[n.id],t.zAxis[r.id]=r)},prepare:tn()},removeZAxis:{reducer(t,e){delete t.zAxis[e.payload.id]},prepare:tn()},updateYAxisWidth(t,e){var{id:n,width:r}=e.payload,i=t.yAxis[n];if(i){var s,o=i.widthHistory||[];if(o.length===3&&o[0]===o[2]&&r===o[1]&&r!==i.width&&Math.abs(r-((s=o[0])!==null&&s!==void 0?s:0))<=1)return;var c=[...o,r].slice(-3);t.yAxis[n]=UM(UM({},i),{},{width:r,widthHistory:c})}}}}),{addXAxis:Ide,replaceXAxis:Rde,removeXAxis:Pde,addYAxis:jde,replaceYAxis:Mde,removeYAxis:Dde,addZAxis:U_e,replaceZAxis:V_e,removeZAxis:F_e,updateYAxisWidth:Ode}=p8.actions,Lde=p8.reducer,zde=we([pr],t=>({top:t.top,bottom:t.bottom,left:t.left,right:t.right})),Ude=we([zde,sa,oa],(t,e,n)=>{if(!(!t||e==null||n==null))return{x:t.left,y:t.top,width:Math.max(0,e-t.left-t.right),height:Math.max(0,n-t.top-t.bottom)}}),JE=()=>et(Ude),Vde=()=>et(Cle);function VM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function I_(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?VM(Object(n),!0).forEach(function(r){Fde(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):VM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Fde(t,e,n){return(e=Bde(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Bde(t){var e=Hde(t,"string");return typeof e=="symbol"?e:e+""}function Hde(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var qde=t=>{var{point:e,childIndex:n,mainColor:r,activeDot:i,dataKey:s,clipPath:o}=t;if(i===!1||e.x==null||e.y==null)return null;var c={index:n,dataKey:s,cx:e.x,cy:e.y,r:4,fill:r??"none",strokeWidth:2,stroke:"#fff",payload:e.payload,value:e.value},f=I_(I_(I_({},c),Yy(i)),OT(i)),d;return L.isValidElement(i)?d=L.cloneElement(i,f):typeof i=="function"?d=i(f):d=L.createElement(c8,f),L.createElement(ho,{className:"recharts-active-dot",clipPath:o},d)};function FM(t){var{points:e,mainColor:n,activeDot:r,itemDataKey:i,clipPath:s,zIndex:o=Xr.activeDot}=t,c=et(Zh),f=Vde();if(e==null||f==null)return null;var d=e.find(h=>f.includes(h.payload));return Tr(d)?null:L.createElement(wl,{zIndex:o},L.createElement(qde,{point:d,childIndex:Number(c),mainColor:n,dataKey:i,activeDot:r,clipPath:s}))}var $de=t=>{var{chartData:e}=t,n=Wn(),r=bi();return L.useEffect(()=>r?()=>{}:(n(pM(e)),()=>{n(pM(void 0))}),[e,n,r]),null},BM={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},m8=Zr({name:"brush",initialState:BM,reducers:{setBrushSettings(t,e){return e.payload==null?BM:e.payload}}}),{setBrushSettings:B_e}=m8.actions,Gde=m8.reducer;function Kde(t){return(t%180+180)%180}var Wde=function(e){var{width:n,height:r}=e,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,s=Kde(i),o=s*Math.PI/180,c=Math.atan(r/n),f=o>c&&o<Math.PI-c?r/Math.sin(o):n/Math.cos(o);return Math.abs(f)},Yde={dots:[],areas:[],lines:[]},g8=Zr({name:"referenceElements",initialState:Yde,reducers:{addDot:(t,e)=>{t.dots.push(e.payload)},removeDot:(t,e)=>{var n=gs(t).dots.findIndex(r=>r===e.payload);n!==-1&&t.dots.splice(n,1)},addArea:(t,e)=>{t.areas.push(e.payload)},removeArea:(t,e)=>{var n=gs(t).areas.findIndex(r=>r===e.payload);n!==-1&&t.areas.splice(n,1)},addLine:(t,e)=>{t.lines.push(e.payload)},removeLine:(t,e)=>{var n=gs(t).lines.findIndex(r=>r===e.payload);n!==-1&&t.lines.splice(n,1)}}}),{addDot:H_e,removeDot:q_e,addArea:$_e,removeArea:G_e,addLine:K_e,removeLine:W_e}=g8.actions,Xde=g8.reducer,Jde=L.createContext(void 0),Qde=t=>{var{children:e}=t,[n]=L.useState("".concat(Vh("recharts"),"-clip")),r=JE();if(r==null)return null;var{x:i,y:s,width:o,height:c}=r;return L.createElement(Jde.Provider,{value:n},L.createElement("defs",null,L.createElement("clipPath",{id:n},L.createElement("rect",{x:i,y:s,height:c,width:o}))),e)};function y8(t,e){if(e<1)return[];if(e===1)return t;for(var n=[],r=0;r<t.length;r+=e){var i=t[r];i!==void 0&&n.push(i)}return n}function Zde(t,e,n){var r={width:t.width+e.width,height:t.height+e.height};return Wde(r,n)}function efe(t,e,n){var r=n==="width",{x:i,y:s,width:o,height:c}=t;return e===1?{start:r?i:s,end:r?i+o:s+c}:{start:r?i+o:s+c,end:r?i:s}}function tp(t,e,n,r,i){if(t*e<t*r||t*e>t*i)return!1;var s=n();return t*(e-t*s/2-r)>=0&&t*(e+t*s/2-i)<=0}function tfe(t,e){return y8(t,e+1)}function nfe(t,e,n,r,i){for(var s=(r||[]).slice(),{start:o,end:c}=e,f=0,d=1,h=o,m=function(){var b=r==null?void 0:r[f];if(b===void 0)return{v:y8(r,d)};var w=f,S,C=()=>(S===void 0&&(S=n(b,w)),S),R=b.coordinate,N=f===0||tp(t,R,C,h,c);N||(f=0,h=o,d+=1),N&&(h=R+t*(C()/2+i),f+=d)},g;d<=s.length;)if(g=m(),g)return g.v;return[]}function rfe(t,e,n,r,i){var s=(r||[]).slice(),o=s.length;if(o===0)return[];for(var{start:c,end:f}=e,d=1;d<=o;d++){for(var h=(o-1)%d,m=c,g=!0,v=function(){var O=r[w];if(O==null)return 0;var k=w,D,M=()=>(D===void 0&&(D=n(O,k)),D),j=O.coordinate,I=w===h||tp(t,j,M,m,f);if(!I)return g=!1,1;I&&(m=j+t*(M()/2+i))},b,w=h;w<o&&(b=v(),!(b!==0&&b===1));w+=d);if(g){for(var S=[],C=h;C<o;C+=d){var R=r[C];R!=null&&S.push(R)}return S}}return[]}function HM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function xr(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?HM(Object(n),!0).forEach(function(r){ife(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):HM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function ife(t,e,n){return(e=sfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function sfe(t){var e=ofe(t,"string");return typeof e=="symbol"?e:e+""}function ofe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function afe(t,e,n,r,i){for(var s=(r||[]).slice(),o=s.length,{start:c}=e,{end:f}=e,d=function(g){var v=s[g];if(v==null)return 1;var b=v,w,S=()=>(w===void 0&&(w=n(v,g)),w);if(g===o-1){var C=t*(b.coordinate+t*S()/2-f);s[g]=b=xr(xr({},b),{},{tickCoord:C>0?b.coordinate-C*t:b.coordinate})}else s[g]=b=xr(xr({},b),{},{tickCoord:b.coordinate});if(b.tickCoord!=null){var R=tp(t,b.tickCoord,S,c,f);R&&(f=b.tickCoord-t*(S()/2+i),s[g]=xr(xr({},b),{},{isShow:!0}))}},h=o-1;h>=0;h--)d(h);return s}function lfe(t,e,n,r,i,s){var o=(r||[]).slice(),c=o.length,{start:f,end:d}=e;if(s){var h=r[c-1];if(h!=null){var m=n(h,c-1),g=t*(h.coordinate+t*m/2-d);if(o[c-1]=h=xr(xr({},h),{},{tickCoord:g>0?h.coordinate-g*t:h.coordinate}),h.tickCoord!=null){var v=tp(t,h.tickCoord,()=>m,f,d);v&&(d=h.tickCoord-t*(m/2+i),o[c-1]=xr(xr({},h),{},{isShow:!0}))}}}for(var b=s?c-1:c,w=function(R){var N=o[R];if(N==null)return 1;var O=N,k,D=()=>(k===void 0&&(k=n(N,R)),k);if(R===0){var M=t*(O.coordinate-t*D()/2-f);o[R]=O=xr(xr({},O),{},{tickCoord:M<0?O.coordinate-M*t:O.coordinate})}else o[R]=O=xr(xr({},O),{},{tickCoord:O.coordinate});if(O.tickCoord!=null){var j=tp(t,O.tickCoord,D,f,d);j&&(f=O.tickCoord+t*(D()/2+i),o[R]=xr(xr({},O),{},{isShow:!0}))}},S=0;S<b;S++)w(S);return o}function cfe(t,e,n){var{tick:r,ticks:i,viewBox:s,minTickGap:o,orientation:c,interval:f,tickFormatter:d,unit:h,angle:m}=t;if(!i||!i.length||!r)return[];if(Je(f)||_p.isSsr){var g;return(g=tfe(i,Je(f)?f:0))!==null&&g!==void 0?g:[]}var v=[],b=c==="top"||c==="bottom"?"width":"height",w=h&&b==="width"?Nh(h,{fontSize:e,letterSpacing:n}):{width:0,height:0},S=(k,D)=>{var M=typeof d=="function"?d(k.value,D):k.value;return b==="width"?Zde(Nh(M,{fontSize:e,letterSpacing:n}),w,m):Nh(M,{fontSize:e,letterSpacing:n})[b]},C=i[0],R=i[1],N=i.length>=2&&C!=null&&R!=null?fs(R.coordinate-C.coordinate):1,O=efe(s,N,b);return f==="equidistantPreserveStart"?nfe(N,O,S,i,o):f==="equidistantPreserveEnd"?rfe(N,O,S,i,o):(f==="preserveStart"||f==="preserveStartEnd"?v=lfe(N,O,S,i,o,f==="preserveStartEnd"):v=afe(N,O,S,i,o),v.filter(k=>k.isShow))}var ufe=t=>{var{ticks:e,label:n,labelGapWithTick:r=5,tickSize:i=0,tickMargin:s=0}=t,o=0;if(e){Array.from(e).forEach(h=>{if(h){var m=h.getBoundingClientRect();m.width>o&&(o=m.width)}});var c=n?n.getBoundingClientRect().width:0,f=i+s,d=o+f+c+(n?r:0);return Math.round(d)}return 0},dfe=["axisLine","width","height","className","hide","ticks","axisType"];function ffe(t,e){if(t==null)return{};var n,r,i=hfe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function hfe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Rc(){return Rc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Rc.apply(null,arguments)}function qM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function fn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?qM(Object(n),!0).forEach(function(r){pfe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):qM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function pfe(t,e,n){return(e=mfe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function mfe(t){var e=gfe(t,"string");return typeof e=="symbol"?e:e+""}function gfe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var yc={x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd",zIndex:Xr.axis};function yfe(t){var{x:e,y:n,width:r,height:i,orientation:s,mirror:o,axisLine:c,otherSvgProps:f}=t;if(!c)return null;var d=fn(fn(fn({},f),fo(c)),{},{fill:"none"});if(s==="top"||s==="bottom"){var h=+(s==="top"&&!o||s==="bottom"&&o);d=fn(fn({},d),{},{x1:e,y1:n+h*i,x2:e+r,y2:n+h*i})}else{var m=+(s==="left"&&!o||s==="right"&&o);d=fn(fn({},d),{},{x1:e+m*r,y1:n,x2:e+m*r,y2:n+i})}return L.createElement("line",Rc({},d,{className:Qt("recharts-cartesian-axis-line",Qy(c,"className"))}))}function vfe(t,e,n,r,i,s,o,c,f){var d,h,m,g,v,b,w=c?-1:1,S=t.tickSize||o,C=Je(t.tickCoord)?t.tickCoord:t.coordinate;switch(s){case"top":d=h=t.coordinate,g=n+ +!c*i,m=g-w*S,b=m-w*f,v=C;break;case"left":m=g=t.coordinate,h=e+ +!c*r,d=h-w*S,v=d-w*f,b=C;break;case"right":m=g=t.coordinate,h=e+ +c*r,d=h+w*S,v=d+w*f,b=C;break;default:d=h=t.coordinate,g=n+ +c*i,m=g+w*S,b=m+w*f,v=C;break}return{line:{x1:d,y1:m,x2:h,y2:g},tick:{x:v,y:b}}}function xfe(t,e){switch(t){case"left":return e?"start":"end";case"right":return e?"end":"start";default:return"middle"}}function bfe(t,e){switch(t){case"left":case"right":return"middle";case"top":return e?"start":"end";default:return e?"end":"start"}}function _fe(t){var{option:e,tickProps:n,value:r}=t,i,s=Qt(n.className,"recharts-cartesian-axis-tick-value");if(L.isValidElement(e))i=L.cloneElement(e,fn(fn({},n),{},{className:s}));else if(typeof e=="function")i=e(fn(fn({},n),{},{className:s}));else{var o="recharts-cartesian-axis-tick-value";typeof e!="boolean"&&(o=Qt(o,nde(e))),i=L.createElement(YE,Rc({},n,{className:o}),r)}return i}var wfe=L.forwardRef((t,e)=>{var{ticks:n=[],tick:r,tickLine:i,stroke:s,tickFormatter:o,unit:c,padding:f,tickTextProps:d,orientation:h,mirror:m,x:g,y:v,width:b,height:w,tickSize:S,tickMargin:C,fontSize:R,letterSpacing:N,getTicksConfig:O,events:k,axisType:D}=t,M=cfe(fn(fn({},O),{},{ticks:n}),R,N),j=xfe(h,m),I=bfe(h,m),U=fo(O),B=Yy(r),P={};typeof i=="object"&&(P=i);var F=fn(fn({},U),{},{fill:"none"},P),z=M.map(K=>fn({entry:K},vfe(K,g,v,b,w,h,S,m,C))),Q=z.map(K=>{var{entry:te,line:ne}=K;return L.createElement(ho,{className:"recharts-cartesian-axis-tick",key:"tick-".concat(te.value,"-").concat(te.coordinate,"-").concat(te.tickCoord)},i&&L.createElement("line",Rc({},F,ne,{className:Qt("recharts-cartesian-axis-tick-line",Qy(i,"className"))})))}),W=z.map((K,te)=>{var ne,xe,{entry:G,tick:X}=K,de=fn(fn(fn(fn({verticalAnchor:I},U),{},{textAnchor:j,stroke:"none",fill:s},X),{},{index:te,payload:G,visibleTicksCount:M.length,tickFormatter:o,padding:f},d),{},{angle:(ne=(xe=d==null?void 0:d.angle)!==null&&xe!==void 0?xe:U.angle)!==null&&ne!==void 0?ne:0}),ce=fn(fn({},de),B);return L.createElement(ho,Rc({className:"recharts-cartesian-axis-tick-label",key:"tick-label-".concat(G.value,"-").concat(G.coordinate,"-").concat(G.tickCoord)},eZ(k,G,te)),r&&L.createElement(_fe,{option:r,tickProps:ce,value:"".concat(typeof o=="function"?o(G.value,te):G.value).concat(c||"")}))});return L.createElement("g",{className:"recharts-cartesian-axis-ticks recharts-".concat(D,"-ticks")},W.length>0&&L.createElement(wl,{zIndex:Xr.label},L.createElement("g",{className:"recharts-cartesian-axis-tick-labels recharts-".concat(D,"-tick-labels"),ref:e},W)),Q.length>0&&L.createElement("g",{className:"recharts-cartesian-axis-tick-lines recharts-".concat(D,"-tick-lines")},Q))}),Sfe=L.forwardRef((t,e)=>{var{axisLine:n,width:r,height:i,className:s,hide:o,ticks:c,axisType:f}=t,d=ffe(t,dfe),[h,m]=L.useState(""),[g,v]=L.useState(""),b=L.useRef(null);L.useImperativeHandle(e,()=>({getCalculatedWidth:()=>{var S;return ufe({ticks:b.current,label:(S=t.labelRef)===null||S===void 0?void 0:S.current,labelGapWithTick:5,tickSize:t.tickSize,tickMargin:t.tickMargin})}}));var w=L.useCallback(S=>{if(S){var C=S.getElementsByClassName("recharts-cartesian-axis-tick-value");b.current=C;var R=C[0];if(R){var N=window.getComputedStyle(R),O=N.fontSize,k=N.letterSpacing;(O!==h||k!==g)&&(m(O),v(k))}}},[h,g]);return o||r!=null&&r<=0||i!=null&&i<=0?null:L.createElement(wl,{zIndex:t.zIndex},L.createElement(ho,{className:Qt("recharts-cartesian-axis",s)},L.createElement(yfe,{x:t.x,y:t.y,width:r,height:i,orientation:t.orientation,mirror:t.mirror,axisLine:n,otherSvgProps:fo(t)}),L.createElement(wfe,{ref:w,axisType:f,events:d,fontSize:h,getTicksConfig:t,height:t.height,letterSpacing:g,mirror:t.mirror,orientation:t.orientation,padding:t.padding,stroke:t.stroke,tick:t.tick,tickFormatter:t.tickFormatter,tickLine:t.tickLine,tickMargin:t.tickMargin,tickSize:t.tickSize,tickTextProps:t.tickTextProps,ticks:c,unit:t.unit,width:t.width,x:t.x,y:t.y}),L.createElement(kue,{x:t.x,y:t.y,width:t.width,height:t.height,lowerWidth:t.width,upperWidth:t.width},L.createElement(Uue,{label:t.label,labelRef:t.labelRef}),t.children)))}),QE=L.forwardRef((t,e)=>{var n=Ki(t,yc);return L.createElement(Sfe,Rc({},n,{ref:e}))});QE.displayName="CartesianAxis";var Tfe={},v8=Zr({name:"errorBars",initialState:Tfe,reducers:{addErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]||(t[n]=[]),t[n].push(r)},replaceErrorBar:(t,e)=>{var{itemId:n,prev:r,next:i}=e.payload;t[n]&&(t[n]=t[n].map(s=>s.dataKey===r.dataKey&&s.direction===r.direction?i:s))},removeErrorBar:(t,e)=>{var{itemId:n,errorBar:r}=e.payload;t[n]&&(t[n]=t[n].filter(i=>i.dataKey!==r.dataKey||i.direction!==r.direction))}}}),{addErrorBar:Y_e,replaceErrorBar:X_e,removeErrorBar:J_e}=v8.actions,Efe=v8.reducer;function x8(t,e){var n,r,i=et(d=>ca(d,t)),s=et(d=>ua(d,e)),o=(n=i==null?void 0:i.allowDataOverflow)!==null&&n!==void 0?n:Fn.allowDataOverflow,c=(r=s==null?void 0:s.allowDataOverflow)!==null&&r!==void 0?r:Bn.allowDataOverflow,f=o||c;return{needClip:f,needClipX:o,needClipY:c}}function Afe(t){var{xAxisId:e,yAxisId:n,clipPathId:r}=t,i=JE(),{needClipX:s,needClipY:o,needClip:c}=x8(e,n);if(!c||!i)return null;var{x:f,y:d,width:h,height:m}=i;return L.createElement("clipPath",{id:"clipPath-".concat(r)},L.createElement("rect",{x:s?f:f-h/2,y:o?d:d-m/2,width:s?h:h*2,height:o?m:m*2}))}function Cfe(t){var e=Yy(t),n=3,r=2;if(e!=null){var{r:i,strokeWidth:s}=e,o=Number(i),c=Number(s);return(Number.isNaN(o)||o<0)&&(o=n),(Number.isNaN(c)||c<0)&&(c=r),{r:o,strokeWidth:c}}return{r:n,strokeWidth:r}}var R_={exports:{}},P_={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $M;function Nfe(){if($M)return P_;$M=1;var t=Sd();function e(f,d){return f===d&&(f!==0||1/f===1/d)||f!==f&&d!==d}var n=typeof Object.is=="function"?Object.is:e,r=t.useSyncExternalStore,i=t.useRef,s=t.useEffect,o=t.useMemo,c=t.useDebugValue;return P_.useSyncExternalStoreWithSelector=function(f,d,h,m,g){var v=i(null);if(v.current===null){var b={hasValue:!1,value:null};v.current=b}else b=v.current;v=o(function(){function S(k){if(!C){if(C=!0,R=k,k=m(k),g!==void 0&&b.hasValue){var D=b.value;if(g(D,k))return N=D}return N=k}if(D=N,n(R,k))return D;var M=m(k);return g!==void 0&&g(D,M)?(R=k,D):(R=k,N=M)}var C=!1,R,N,O=h===void 0?null:h;return[function(){return S(d())},O===null?void 0:function(){return S(O())}]},[d,h,m,g]);var w=r(f,v[0],v[1]);return s(function(){b.hasValue=!0,b.value=w},[w]),c(w),w},P_}var GM;function kfe(){return GM||(GM=1,R_.exports=Nfe()),R_.exports}kfe();function Ife(t){t()}function Rfe(){let t=null,e=null;return{clear(){t=null,e=null},notify(){Ife(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=t;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=e={callback:n,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!r||t===null||(r=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var KM={notify(){},get:()=>[]};function Pfe(t,e){let n,r=KM,i=0,s=!1;function o(w){h();const S=r.subscribe(w);let C=!1;return()=>{C||(C=!0,S(),m())}}function c(){r.notify()}function f(){b.onStateChange&&b.onStateChange()}function d(){return s}function h(){i++,n||(n=t.subscribe(f),r=Rfe())}function m(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=KM)}function g(){s||(s=!0,h())}function v(){s&&(s=!1,m())}const b={addNestedSub:o,notifyNestedSubs:c,handleChangeWrapper:f,isSubscribed:d,trySubscribe:g,tryUnsubscribe:v,getListeners:()=>r};return b}var jfe=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Mfe=jfe(),Dfe=()=>typeof navigator<"u"&&navigator.product==="ReactNative",Ofe=Dfe(),Lfe=()=>Mfe||Ofe?L.useLayoutEffect:L.useEffect,zfe=Lfe();function WM(t,e){return t===e?t!==0||e!==0||1/t===1/e:t!==t&&e!==e}function Ufe(t,e){if(WM(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;const n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(!Object.prototype.hasOwnProperty.call(e,n[i])||!WM(t[n[i]],e[n[i]]))return!1;return!0}var j_=Symbol.for("react-redux-context"),M_=typeof globalThis<"u"?globalThis:{};function Vfe(){if(!L.createContext)return{};const t=M_[j_]??(M_[j_]=new Map);let e=t.get(L.createContext);return e||(e=L.createContext(null),t.set(L.createContext,e)),e}var Ffe=Vfe();function Bfe(t){const{children:e,context:n,serverState:r,store:i}=t,s=L.useMemo(()=>{const f=Pfe(i);return{store:i,subscription:f,getServerState:r?()=>r:void 0}},[i,r]),o=L.useMemo(()=>i.getState(),[i]);zfe(()=>{const{subscription:f}=s;return f.onStateChange=f.notifyNestedSubs,f.trySubscribe(),o!==i.getState()&&f.notifyNestedSubs(),()=>{f.tryUnsubscribe(),f.onStateChange=void 0}},[s,o]);const c=n||Ffe;return L.createElement(c.Provider,{value:s},e)}var Hfe=Bfe,qfe=new Set(["axisLine","tickLine","activeBar","activeDot","activeLabel","activeShape","allowEscapeViewBox","background","cursor","dot","label","line","margin","padding","position","shape","style","tick","wrapperStyle","radius"]);function $fe(t,e){return t==null&&e==null?!0:typeof t=="number"&&typeof e=="number"?t===e||t!==t&&e!==e:t===e}function ZE(t,e){var n=new Set([...Object.keys(t),...Object.keys(e)]);for(var r of n)if(qfe.has(r)){if(t[r]==null&&e[r]==null)continue;if(!Ufe(t[r],e[r]))return!1}else if(!$fe(t[r],e[r]))return!1;return!0}function eA(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.xAxisId)!==null&&n!==void 0?n:h8}function tA(t,e){var n,r;return(n=(r=t.graphicalItems.cartesianItems.find(i=>i.id===e))===null||r===void 0?void 0:r.yAxisId)!==null&&n!==void 0?n:h8}var b8=(t,e,n)=>_U(t,"xAxis",eA(t,e),n),_8=(t,e,n)=>bU(t,"xAxis",eA(t,e),n),w8=(t,e,n)=>_U(t,"yAxis",tA(t,e),n),S8=(t,e,n)=>bU(t,"yAxis",tA(t,e),n),Gfe=we([rn,b8,w8,_8,S8],(t,e,n,r,i)=>vo(t,"xAxis")?V0(e,r,!1):V0(n,i,!1)),Kfe=(t,e)=>e,T8=we([Bz,Kfe],(t,e)=>t.filter(n=>n.type==="area").find(n=>n.id===e)),E8=t=>{var e=rn(t),n=vo(e,"xAxis");return n?"yAxis":"xAxis"},Wfe=(t,e)=>{var n=E8(t);return n==="yAxis"?tA(t,e):eA(t,e)},Yfe=(t,e,n)=>Jz(t,E8(t),Wfe(t,e),n),Xfe=we([T8,Yfe],(t,e)=>{var n;if(!(t==null||e==null)){var{stackId:r}=t,i=NE(t);if(!(r==null||i==null)){var s=(n=e[r])===null||n===void 0?void 0:n.stackedData,o=s==null?void 0:s.find(c=>c.key===i);if(o!=null)return o.map(c=>[c[0],c[1]])}}}),Jfe=we([rn,b8,w8,_8,S8,Xfe,doe,Gfe,T8,boe],(t,e,n,r,i,s,o,c,f,d)=>{var{chartData:h,dataStartIndex:m,dataEndIndex:g}=o;if(!(f==null||t!=="horizontal"&&t!=="vertical"||e==null||n==null||r==null||i==null||r.length===0||i.length===0||c==null)){var{data:v}=f,b;if(v&&v.length>0?b=v:b=h==null?void 0:h.slice(m,g+1),b!=null)return ghe({layout:t,xAxis:e,yAxis:n,xAxisTicks:r,yAxisTicks:i,dataStartIndex:m,areaSettings:f,stackedData:s,displayedData:b,chartBaseValue:d,bandSize:c})}}),Qfe=["id"],Zfe=["activeDot","animationBegin","animationDuration","animationEasing","connectNulls","dot","fill","fillOpacity","hide","isAnimationActive","legendType","stroke","xAxisId","yAxisId"];function vc(){return vc=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vc.apply(null,arguments)}function A8(t,e){if(t==null)return{};var n,r,i=ehe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ehe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function YM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function $u(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?YM(Object(n),!0).forEach(function(r){the(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):YM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function the(t,e,n){return(e=nhe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function nhe(t){var e=rhe(t,"string");return typeof e=="symbol"?e:e+""}function rhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function fy(t,e){return t&&t!=="none"?t:e}var ihe=t=>{var{dataKey:e,name:n,stroke:r,fill:i,legendType:s,hide:o}=t;return[{inactive:o,dataKey:e,type:s,color:fy(r,i),value:m6(n,e),payload:t}]},she=L.memo(t=>{var{dataKey:e,data:n,stroke:r,strokeWidth:i,fill:s,name:o,hide:c,unit:f,tooltipType:d,id:h}=t,m={dataDefinedOnItem:n,getPosition:Dd,settings:{stroke:r,strokeWidth:i,fill:s,dataKey:e,nameKey:void 0,name:m6(o,e),hide:c,type:d,color:fy(r,s),unit:f,graphicalItemId:h}};return L.createElement(rde,{tooltipEntrySettings:m})});function ohe(t){var{clipPathId:e,points:n,props:r}=t,{needClip:i,dot:s,dataKey:o}=r,c=fo(r);return L.createElement(Ede,{points:n,dot:s,className:"recharts-area-dots",dotClassName:"recharts-area-dot",dataKey:o,baseProps:c,needClip:i,clipPathId:e})}function ahe(t){var{showLabels:e,children:n,points:r}=t,i=r.map(s=>{var o,c,f={x:(o=s.x)!==null&&o!==void 0?o:0,y:(c=s.y)!==null&&c!==void 0?c:0,width:0,lowerWidth:0,upperWidth:0,height:0};return $u($u({},f),{},{value:s.value,payload:s.payload,parentViewBox:void 0,viewBox:f,fill:void 0})});return L.createElement(Xue,{value:e?i:void 0},n)}function XM(t){var{points:e,baseLine:n,needClip:r,clipPathId:i,props:s}=t,{layout:o,type:c,stroke:f,connectNulls:d,isRange:h}=s,{id:m}=s,g=A8(s,Qfe),v=fo(g),b=Bi(g);return L.createElement(L.Fragment,null,(e==null?void 0:e.length)>1&&L.createElement(ho,{clipPath:r?"url(#clipPath-".concat(i,")"):void 0},L.createElement(Kg,vc({},b,{id:m,points:e,connectNulls:d,type:c,baseLine:n,layout:o,stroke:"none",className:"recharts-area-area"})),f!=="none"&&L.createElement(Kg,vc({},v,{className:"recharts-area-curve",layout:o,type:c,connectNulls:d,fill:"none",points:e})),f!=="none"&&h&&L.createElement(Kg,vc({},v,{className:"recharts-area-curve",layout:o,type:c,connectNulls:d,fill:"none",points:n}))),L.createElement(ohe,{points:e,props:g,clipPathId:i}))}function lhe(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,c=(e=s[0])===null||e===void 0?void 0:e.y,f=(n=s[s.length-1])===null||n===void 0?void 0:n.y;if(!Nt(c)||!Nt(f))return null;var d=r*Math.abs(c-f),h=Math.max(...s.map(m=>m.x||0));return Je(i)?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(...i.map(m=>m.x||0),h)),Je(h)?L.createElement("rect",{x:0,y:c<f?c:c-d,width:h+(o?parseInt("".concat(o),10):1),height:Math.floor(d)}):null}function che(t){var e,n,{alpha:r,baseLine:i,points:s,strokeWidth:o}=t,c=(e=s[0])===null||e===void 0?void 0:e.x,f=(n=s[s.length-1])===null||n===void 0?void 0:n.x;if(!Nt(c)||!Nt(f))return null;var d=r*Math.abs(c-f),h=Math.max(...s.map(m=>m.y||0));return Je(i)?h=Math.max(i,h):i&&Array.isArray(i)&&i.length&&(h=Math.max(...i.map(m=>m.y||0),h)),Je(h)?L.createElement("rect",{x:c<f?c:c-d,y:0,width:d,height:Math.floor(h+(o?parseInt("".concat(o),10):1))}):null}function uhe(t){var{alpha:e,layout:n,points:r,baseLine:i,strokeWidth:s}=t;return n==="vertical"?L.createElement(lhe,{alpha:e,points:r,baseLine:i,strokeWidth:s}):L.createElement(che,{alpha:e,points:r,baseLine:i,strokeWidth:s})}function dhe(t){var{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s}=t,{points:o,baseLine:c,isAnimationActive:f,animationBegin:d,animationDuration:h,animationEasing:m,onAnimationStart:g,onAnimationEnd:v}=r,b=L.useMemo(()=>({points:o,baseLine:c}),[o,c]),w=M6(b,"recharts-area-"),S=WT(),[C,R]=L.useState(!1),N=!C,O=L.useCallback(()=>{typeof v=="function"&&v(),R(!1)},[v]),k=L.useCallback(()=>{typeof g=="function"&&g(),R(!0)},[g]);if(S==null)return null;var D=i.current,M=s.current;return L.createElement(ahe,{showLabels:N,points:o},r.children,L.createElement(j6,{animationId:w,begin:d,duration:h,isActive:f,easing:m,onAnimationEnd:O,onAnimationStart:k,key:w},j=>{if(D){var I=D.length/o.length,U=j===1?o:o.map((P,F)=>{var z=Math.floor(F*I);if(D[z]){var Q=D[z];return $u($u({},P),{},{x:Xs(Q.x,P.x,j),y:Xs(Q.y,P.y,j)})}return P}),B;return Je(c)?B=Xs(M,c,j):Tr(c)||po(c)?B=Xs(M,0,j):B=c.map((P,F)=>{var z=Math.floor(F*I);if(Array.isArray(M)&&M[z]){var Q=M[z];return $u($u({},P),{},{x:Xs(Q.x,P.x,j),y:Xs(Q.y,P.y,j)})}return P}),j>0&&(i.current=U,s.current=B),L.createElement(XM,{points:U,baseLine:B,needClip:e,clipPathId:n,props:r})}return j>0&&(i.current=o,s.current=c),L.createElement(ho,null,f&&L.createElement("defs",null,L.createElement("clipPath",{id:"animationClipPath-".concat(n)},L.createElement(uhe,{alpha:j,points:o,baseLine:c,layout:S,strokeWidth:r.strokeWidth}))),L.createElement(ho,{clipPath:"url(#animationClipPath-".concat(n,")")},L.createElement(XM,{points:o,baseLine:c,needClip:e,clipPathId:n,props:r})))}),L.createElement(Zue,{label:r.label}))}function fhe(t){var{needClip:e,clipPathId:n,props:r}=t,i=L.useRef(null),s=L.useRef();return L.createElement(dhe,{needClip:e,clipPathId:n,props:r,previousPointsRef:i,previousBaselineRef:s})}class hhe extends L.PureComponent{render(){var{hide:e,dot:n,points:r,className:i,top:s,left:o,needClip:c,xAxisId:f,yAxisId:d,width:h,height:m,id:g,baseLine:v,zIndex:b}=this.props;if(e)return null;var w=Qt("recharts-area",i),S=g,{r:C,strokeWidth:R}=Cfe(n),N=d8(n),O=C*2+R,k=c?"url(#clipPath-".concat(N?"":"dots-").concat(S,")"):void 0;return L.createElement(wl,{zIndex:b},L.createElement(ho,{className:w},c&&L.createElement("defs",null,L.createElement(Afe,{clipPathId:S,xAxisId:f,yAxisId:d}),!N&&L.createElement("clipPath",{id:"clipPath-dots-".concat(S)},L.createElement("rect",{x:o-O/2,y:s-O/2,width:h+O,height:m+O}))),L.createElement(fhe,{needClip:c,clipPathId:S,props:this.props})),L.createElement(FM,{points:r,mainColor:fy(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:k}),this.props.isRange&&Array.isArray(v)&&L.createElement(FM,{points:v,mainColor:fy(this.props.stroke,this.props.fill),itemDataKey:this.props.dataKey,activeDot:this.props.activeDot,clipPath:k}))}}var C8={activeDot:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",connectNulls:!1,dot:!1,fill:"#3182bd",fillOpacity:.6,hide:!1,isAnimationActive:"auto",legendType:"line",stroke:"#3182bd",strokeWidth:1,type:"linear",label:!1,xAxisId:0,yAxisId:0,zIndex:Xr.area};function phe(t){var e,n=Ki(t,C8),{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,connectNulls:c,dot:f,fill:d,fillOpacity:h,hide:m,isAnimationActive:g,legendType:v,stroke:b,xAxisId:w,yAxisId:S}=n,C=A8(n,Zfe),R=Od(),N=HU(),{needClip:O}=x8(w,S),k=bi(),{points:D,isRange:M,baseLine:j}=(e=et(z=>Jfe(z,t.id,k)))!==null&&e!==void 0?e:{},I=JE();if(R!=="horizontal"&&R!=="vertical"||I==null||N!=="AreaChart"&&N!=="ComposedChart")return null;var{height:U,width:B,x:P,y:F}=I;return!D||!D.length?null:L.createElement(hhe,vc({},C,{activeDot:r,animationBegin:i,animationDuration:s,animationEasing:o,baseLine:j,connectNulls:c,dot:f,fill:d,fillOpacity:h,height:U,hide:m,layout:R,isAnimationActive:g==="auto"?!_p.isSsr:g,isRange:M,legendType:v,needClip:O,points:D,stroke:b,width:B,left:P,top:F,xAxisId:w,yAxisId:S}))}var mhe=(t,e,n,r,i)=>{var s=n??e;if(Je(s))return s;var o=t==="horizontal"?i:r,c=o.scale.domain();if(o.type==="number"){var f=Math.max(c[0],c[1]),d=Math.min(c[0],c[1]);return s==="dataMin"?d:s==="dataMax"||f<0?f:Math.max(Math.min(c[0],c[1]),0)}return s==="dataMin"?c[0]:s==="dataMax"?c[1]:c[0]};function ghe(t){var{areaSettings:{connectNulls:e,baseValue:n,dataKey:r},stackedData:i,layout:s,chartBaseValue:o,xAxis:c,yAxis:f,displayedData:d,dataStartIndex:h,xAxisTicks:m,yAxisTicks:g,bandSize:v}=t,b=i&&i.length,w=mhe(s,o,n,c,f),S=s==="horizontal",C=!1,R=d.map((O,k)=>{var D,M,j,I;if(b)I=i[h+k];else{var U=ur(O,r);Array.isArray(U)?(I=U,C=!0):I=[w,U]}var B=(D=(M=I)===null||M===void 0?void 0:M[1])!==null&&D!==void 0?D:null,P=B==null||b&&!e&&ur(O,r)==null;if(S){var F;return{x:rP({axis:c,ticks:m,bandSize:v,entry:O,index:k}),y:P?null:(F=f.scale.map(B))!==null&&F!==void 0?F:null,value:I,payload:O}}return{x:P?null:(j=c.scale.map(B))!==null&&j!==void 0?j:null,y:rP({axis:f,ticks:g,bandSize:v,entry:O,index:k}),value:I,payload:O}}),N;return b||C?N=R.map(O=>{var k,D=Array.isArray(O.value)?O.value[0]:null;if(S){var M;return{x:O.x,y:D!=null&&O.y!=null&&(M=f.scale.map(D))!==null&&M!==void 0?M:null,payload:O.payload}}return{x:D!=null&&(k=c.scale.map(D))!==null&&k!==void 0?k:null,y:O.y,payload:O.payload}}):N=S?f.scale.map(w):c.scale.map(w),{points:R,baseLine:N??0,isRange:C}}function yhe(t){var e=Ki(t,C8),n=bi();return L.createElement(cde,{id:e.id,type:"area"},r=>L.createElement(L.Fragment,null,L.createElement(ide,{legendPayload:ihe(e)}),L.createElement(she,{dataKey:e.dataKey,data:e.data,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,unit:e.unit,tooltipType:e.tooltipType,id:r}),L.createElement(gde,{type:"area",id:r,data:e.data,dataKey:e.dataKey,xAxisId:e.xAxisId,yAxisId:e.yAxisId,zAxisId:0,stackId:lte(e.stackId),hide:e.hide,barSize:void 0,baseValue:e.baseValue,isPanorama:n,connectNulls:e.connectNulls}),L.createElement(phe,vc({},e,{id:r}))))}var N8=L.memo(yhe,ZE);N8.displayName="Area";var vhe=["domain","range"],xhe=["domain","range"];function JM(t,e){if(t==null)return{};var n,r,i=bhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function bhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function QM(t,e){return t===e?!0:Array.isArray(t)&&t.length===2&&Array.isArray(e)&&e.length===2?t[0]===e[0]&&t[1]===e[1]:!1}function k8(t,e){if(t===e)return!0;var{domain:n,range:r}=t,i=JM(t,vhe),{domain:s,range:o}=e,c=JM(e,xhe);return!QM(n,s)||!QM(r,o)?!1:ZE(i,c)}var _he=["type"],whe=["dangerouslySetInnerHTML","ticks","scale"],She=["id","scale"];function aS(){return aS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},aS.apply(null,arguments)}function ZM(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function eD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?ZM(Object(n),!0).forEach(function(r){The(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ZM(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function The(t,e,n){return(e=Ehe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ehe(t){var e=Ahe(t,"string");return typeof e=="symbol"?e:e+""}function Ahe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function lS(t,e){if(t==null)return{};var n,r,i=Che(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Che(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Nhe(t){var e=Wn(),n=L.useRef(null),r=WT(),{type:i}=t,s=lS(t,_he),o=Ev(r,"xAxis",i),c=L.useMemo(()=>{if(o!=null)return eD(eD({},s),{},{type:o})},[s,o]);return L.useLayoutEffect(()=>{c!=null&&(n.current===null?e(Ide(c)):n.current!==c&&e(Rde({prev:n.current,next:c})),n.current=c)},[c,e]),L.useLayoutEffect(()=>()=>{n.current&&(e(Pde(n.current)),n.current=null)},[e]),null}var khe=t=>{var{xAxisId:e,className:n}=t,r=et(y6),i=bi(),s="xAxis",o=et(C=>xU(C,s,e,i)),c=et(C=>gae(C,e)),f=et(C=>wae(C,e)),d=et(C=>zz(C,e));if(c==null||f==null||d==null)return null;var{dangerouslySetInnerHTML:h,ticks:m,scale:g}=t,v=lS(t,whe),{id:b,scale:w}=d,S=lS(d,She);return L.createElement(QE,aS({},v,S,{x:f.x,y:f.y,width:c.width,height:c.height,className:Qt("recharts-".concat(s," ").concat(s),n),viewBox:r,ticks:o,axisType:s}))},Ihe={allowDataOverflow:Fn.allowDataOverflow,allowDecimals:Fn.allowDecimals,allowDuplicatedCategory:Fn.allowDuplicatedCategory,angle:Fn.angle,axisLine:yc.axisLine,height:Fn.height,hide:!1,includeHidden:Fn.includeHidden,interval:Fn.interval,label:!1,minTickGap:Fn.minTickGap,mirror:Fn.mirror,orientation:Fn.orientation,padding:Fn.padding,reversed:Fn.reversed,scale:Fn.scale,tick:Fn.tick,tickCount:Fn.tickCount,tickLine:yc.tickLine,tickSize:yc.tickSize,type:Fn.type,xAxisId:0},Rhe=t=>{var e=Ki(t,Ihe);return L.createElement(L.Fragment,null,L.createElement(Nhe,{allowDataOverflow:e.allowDataOverflow,allowDecimals:e.allowDecimals,allowDuplicatedCategory:e.allowDuplicatedCategory,angle:e.angle,dataKey:e.dataKey,domain:e.domain,height:e.height,hide:e.hide,id:e.xAxisId,includeHidden:e.includeHidden,interval:e.interval,minTickGap:e.minTickGap,mirror:e.mirror,name:e.name,orientation:e.orientation,padding:e.padding,reversed:e.reversed,scale:e.scale,tick:e.tick,tickCount:e.tickCount,tickFormatter:e.tickFormatter,ticks:e.ticks,type:e.type,unit:e.unit}),L.createElement(khe,e))},I8=L.memo(Rhe,k8);I8.displayName="XAxis";var Phe=["type"],jhe=["dangerouslySetInnerHTML","ticks","scale"],Mhe=["id","scale"];function cS(){return cS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cS.apply(null,arguments)}function tD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function nD(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?tD(Object(n),!0).forEach(function(r){Dhe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function Dhe(t,e,n){return(e=Ohe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Ohe(t){var e=Lhe(t,"string");return typeof e=="symbol"?e:e+""}function Lhe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function uS(t,e){if(t==null)return{};var n,r,i=zhe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function zhe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function Uhe(t){var e=Wn(),n=L.useRef(null),r=WT(),{type:i}=t,s=uS(t,Phe),o=Ev(r,"yAxis",i),c=L.useMemo(()=>{if(o!=null)return nD(nD({},s),{},{type:o})},[o,s]);return L.useLayoutEffect(()=>{c!=null&&(n.current===null?e(jde(c)):n.current!==c&&e(Mde({prev:n.current,next:c})),n.current=c)},[c,e]),L.useLayoutEffect(()=>()=>{n.current&&(e(Dde(n.current)),n.current=null)},[e]),null}function Vhe(t){var{yAxisId:e,className:n,width:r,label:i}=t,s=L.useRef(null),o=L.useRef(null),c=et(y6),f=bi(),d=Wn(),h="yAxis",m=et(D=>Eae(D,e)),g=et(D=>Tae(D,e)),v=et(D=>xU(D,h,e,f)),b=et(D=>Uz(D,e));if(L.useLayoutEffect(()=>{if(!(r!=="auto"||!m||XE(i)||L.isValidElement(i)||b==null)){var D=s.current;if(D){var M=D.getCalculatedWidth();Math.round(m.width)!==Math.round(M)&&d(Ode({id:e,width:M}))}}},[v,m,d,i,e,r,b]),m==null||g==null||b==null)return null;var{dangerouslySetInnerHTML:w,ticks:S,scale:C}=t,R=uS(t,jhe),{id:N,scale:O}=b,k=uS(b,Mhe);return L.createElement(QE,cS({},R,k,{ref:s,labelRef:o,x:g.x,y:g.y,tickTextProps:r==="auto"?{width:void 0}:{width:r},width:m.width,height:m.height,className:Qt("recharts-".concat(h," ").concat(h),n),viewBox:c,ticks:v,axisType:h}))}var Fhe={allowDataOverflow:Bn.allowDataOverflow,allowDecimals:Bn.allowDecimals,allowDuplicatedCategory:Bn.allowDuplicatedCategory,angle:Bn.angle,axisLine:yc.axisLine,hide:!1,includeHidden:Bn.includeHidden,interval:Bn.interval,label:!1,minTickGap:Bn.minTickGap,mirror:Bn.mirror,orientation:Bn.orientation,padding:Bn.padding,reversed:Bn.reversed,scale:Bn.scale,tick:Bn.tick,tickCount:Bn.tickCount,tickLine:yc.tickLine,tickSize:yc.tickSize,type:Bn.type,width:Bn.width,yAxisId:0},Bhe=t=>{var e=Ki(t,Fhe);return L.createElement(L.Fragment,null,L.createElement(Uhe,{interval:e.interval,id:e.yAxisId,scale:e.scale,type:e.type,domain:e.domain,allowDataOverflow:e.allowDataOverflow,dataKey:e.dataKey,allowDuplicatedCategory:e.allowDuplicatedCategory,allowDecimals:e.allowDecimals,tickCount:e.tickCount,padding:e.padding,includeHidden:e.includeHidden,reversed:e.reversed,ticks:e.ticks,width:e.width,orientation:e.orientation,mirror:e.mirror,hide:e.hide,unit:e.unit,name:e.name,angle:e.angle,minTickGap:e.minTickGap,tick:e.tick,tickFormatter:e.tickFormatter}),L.createElement(Vhe,e))},R8=L.memo(Bhe,k8);R8.displayName="YAxis";var Hhe=(t,e)=>e,nA=we([Hhe,rn,Oz,Jn,LU,da,Ule,pr],Gle),rA=t=>{var e=t.currentTarget.getBoundingClientRect(),n=e.width/t.currentTarget.offsetWidth,r=e.height/t.currentTarget.offsetHeight;return{chartX:Math.round((t.clientX-e.left)/n),chartY:Math.round((t.clientY-e.top)/r)}},P8=Hi("mouseClick"),j8=yp();j8.startListening({actionCreator:P8,effect:(t,e)=>{var n=t.payload,r=nA(e.getState(),rA(n));(r==null?void 0:r.activeIndex)!=null&&e.dispatch(zae({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var dS=Hi("mouseMove"),M8=yp(),Eg=null;M8.startListening({actionCreator:dS,effect:(t,e)=>{var n=t.payload;Eg!==null&&cancelAnimationFrame(Eg);var r=rA(n);Eg=requestAnimationFrame(()=>{var i=e.getState(),s=UE(i,i.tooltip.settings.shared);if(s==="axis"){var o=nA(i,r);(o==null?void 0:o.activeIndex)!=null?e.dispatch(NU({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate})):e.dispatch(CU())}Eg=null})}});function qhe(t,e){return e instanceof HTMLElement?"HTMLElement <".concat(e.tagName,' class="').concat(e.className,'">'):e===window?"global.window":t==="children"&&typeof e=="object"&&e!==null?"<<CHILDREN>>":e}var rD={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index",baseValue:void 0,reverseStackOrder:!1},D8=Zr({name:"rootProps",initialState:rD,reducers:{updateOptions:(t,e)=>{var n;t.accessibilityLayer=e.payload.accessibilityLayer,t.barCategoryGap=e.payload.barCategoryGap,t.barGap=(n=e.payload.barGap)!==null&&n!==void 0?n:rD.barGap,t.barSize=e.payload.barSize,t.maxBarSize=e.payload.maxBarSize,t.stackOffset=e.payload.stackOffset,t.syncId=e.payload.syncId,t.syncMethod=e.payload.syncMethod,t.className=e.payload.className,t.baseValue=e.payload.baseValue,t.reverseStackOrder=e.payload.reverseStackOrder}}}),$he=D8.reducer,{updateOptions:Ghe}=D8.actions,Khe=null,Whe={updatePolarOptions:(t,e)=>e.payload},O8=Zr({name:"polarOptions",initialState:Khe,reducers:Whe}),{updatePolarOptions:Q_e}=O8.actions,Yhe=O8.reducer,L8=Hi("keyDown"),z8=Hi("focus"),iA=yp();iA.startListening({actionCreator:L8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip,s=t.payload;if(!(s!=="ArrowRight"&&s!=="ArrowLeft"&&s!=="Enter")){var o=VE(i,$d(n),Np(n),Ip(n)),c=o==null?-1:Number(o);if(!(!Number.isFinite(c)||c<0)){var f=da(n);if(s==="Enter"){var d=cy(n,"axis","hover",String(i.index));e.dispatch(nS({active:!i.active,activeIndex:i.index,activeCoordinate:d}));return}var h=kae(n),m=h==="left-to-right"?1:-1,g=s==="ArrowRight"?1:-1,v=c+g*m;if(!(f==null||v>=f.length||v<0)){var b=cy(n,"axis","hover",String(v));e.dispatch(nS({active:!0,activeIndex:v.toString(),activeCoordinate:b}))}}}}}});iA.startListening({actionCreator:z8,effect:(t,e)=>{var n=e.getState(),r=n.rootProps.accessibilityLayer!==!1;if(r){var{keyboardInteraction:i}=n.tooltip;if(!i.active&&i.index==null){var s="0",o=cy(n,"axis","hover",String(s));e.dispatch(nS({active:!0,activeIndex:s,activeCoordinate:o}))}}}});var Di=Hi("externalEvent"),U8=yp(),D_=new Map;U8.startListening({actionCreator:Di,effect:(t,e)=>{var{handler:n,reactEvent:r}=t.payload;if(n!=null){r.persist();var i=r.type,s=D_.get(i);s!==void 0&&cancelAnimationFrame(s);var o=requestAnimationFrame(()=>{try{var c=e.getState(),f={activeCoordinate:Tle(c),activeDataKey:wle(c),activeIndex:Zh(c),activeLabel:VU(c),activeTooltipIndex:Zh(c),isTooltipActive:Ele(c)};n(f,r)}finally{D_.delete(i)}});D_.set(i,o)}}});var Xhe=we([Hd],t=>t.tooltipItemPayloads),Jhe=we([Xhe,(t,e)=>e,(t,e,n)=>n],(t,e,n)=>{if(e!=null){var r=t.find(s=>s.settings.graphicalItemId===n);if(r!=null){var{getPosition:i}=r;if(i!=null)return i(e)}}}),V8=Hi("touchMove"),F8=yp();F8.startListening({actionCreator:V8,effect:(t,e)=>{var n=t.payload;if(!(n.touches==null||n.touches.length===0)){var r=e.getState(),i=UE(r,r.tooltip.settings.shared);if(i==="axis"){var s=n.touches[0];if(s==null)return;var o=nA(r,rA({clientX:s.clientX,clientY:s.clientY,currentTarget:n.currentTarget}));(o==null?void 0:o.activeIndex)!=null&&e.dispatch(NU({activeIndex:o.activeIndex,activeDataKey:void 0,activeCoordinate:o.activeCoordinate}))}else if(i==="item"){var c,f=n.touches[0];if(document.elementFromPoint==null||f==null)return;var d=document.elementFromPoint(f.clientX,f.clientY);if(!d||!d.getAttribute)return;var h=d.getAttribute(mte),m=(c=d.getAttribute(gte))!==null&&c!==void 0?c:void 0,g=qd(r).find(w=>w.id===m);if(h==null||g==null||m==null)return;var{dataKey:v}=g,b=Jhe(r,h,m);e.dispatch(Lae({activeDataKey:v,activeIndex:h,activeCoordinate:b,activeGraphicalItemId:m}))}}}});var Qhe=VL({brush:Gde,cartesianAxis:Lde,chartData:Tce,errorBars:Efe,graphicalItems:pde,layout:Zee,legend:dne,options:xce,polarAxis:tde,polarOptions:Yhe,referenceElements:Xde,rootProps:$he,tooltip:Uae,zIndex:oce}),Zhe=function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"Chart";return Tee({reducer:Qhe,preloadedState:e,middleware:r=>{var i;return r({serializableCheck:!1,immutableCheck:!["commonjs","es6","production"].includes((i="es6")!==null&&i!==void 0?i:"")}).concat([j8.middleware,M8.middleware,iA.middleware,U8.middleware,F8.middleware])},enhancers:r=>{var i=r;return typeof r=="function"&&(i=r()),i.concat(t6({type:"raf"}))},devTools:{serialize:{replacer:qhe},name:"recharts-".concat(n)}})};function epe(t){var{preloadedState:e,children:n,reduxStoreName:r}=t,i=bi(),s=L.useRef(null);if(i)return n;s.current==null&&(s.current=Zhe(e,r));var o=UT;return L.createElement(Hfe,{context:o,store:s.current},n)}function tpe(t){var{layout:e,margin:n}=t,r=Wn(),i=bi();return L.useEffect(()=>{i||(r(Xee(e)),r(Yee(n)))},[r,i,e,n]),null}var npe=L.memo(tpe,ZE);function rpe(t){var e=Wn();return L.useEffect(()=>{e(Ghe(t))},[e,t]),null}function iD(t){var{zIndex:e,isPanorama:n}=t,r=L.useRef(null),i=Wn();return L.useLayoutEffect(()=>(r.current&&i(ice({zIndex:e,element:r.current,isPanorama:n})),()=>{i(sce({zIndex:e,isPanorama:n}))}),[i,e,n]),L.createElement("g",{tabIndex:-1,ref:r})}function sD(t){var{children:e,isPanorama:n}=t,r=et(Wle);if(!r||r.length===0)return e;var i=r.filter(o=>o<0),s=r.filter(o=>o>0);return L.createElement(L.Fragment,null,i.map(o=>L.createElement(iD,{key:o,zIndex:o,isPanorama:n})),e,s.map(o=>L.createElement(iD,{key:o,zIndex:o,isPanorama:n})))}var ipe=["children"];function spe(t,e){if(t==null)return{};var n,r,i=ope(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function ope(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}function hy(){return hy=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},hy.apply(null,arguments)}var ape={width:"100%",height:"100%",display:"block"},lpe=L.forwardRef((t,e)=>{var n=Kte(),r=Wte(),i=k6();if(!xl(n)||!xl(r))return null;var{children:s,otherAttributes:o,title:c,desc:f}=t,d,h;return o!=null&&(typeof o.tabIndex=="number"?d=o.tabIndex:d=i?0:void 0,typeof o.role=="string"?h=o.role:h=i?"application":void 0),L.createElement(aL,hy({},o,{title:c,desc:f,role:h,tabIndex:d,width:n,height:r,style:ape,ref:e}),s)}),cpe=t=>{var{children:e}=t,n=et(fv);if(!n)return null;var{width:r,height:i,y:s,x:o}=n;return L.createElement(aL,{width:r,height:i,x:o,y:s},e)},oD=L.forwardRef((t,e)=>{var{children:n}=t,r=spe(t,ipe),i=bi();return i?L.createElement(cpe,null,L.createElement(sD,{isPanorama:!0},n)):L.createElement(lpe,hy({ref:e},r),L.createElement(sD,{isPanorama:!1},n))});function upe(){var t=Wn(),[e,n]=L.useState(null),r=et(pte);return L.useEffect(()=>{if(e!=null){var i=e.getBoundingClientRect(),s=i.width/e.offsetWidth;Nt(s)&&s!==r&&t(Qee(s))}},[e,t,r]),n}function aD(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),n.push.apply(n,r)}return n}function dpe(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?aD(Object(n),!0).forEach(function(r){fpe(t,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):aD(Object(n)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(n,r))})}return t}function fpe(t,e,n){return(e=hpe(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function hpe(t){var e=ppe(t,"string");return typeof e=="symbol"?e:e+""}function ppe(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var r=n.call(t,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function cl(){return cl=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},cl.apply(null,arguments)}var mpe=()=>(jce(),null);function py(t){if(typeof t=="number")return t;if(typeof t=="string"){var e=parseFloat(t);if(!Number.isNaN(e))return e}return 0}var gpe=L.forwardRef((t,e)=>{var n,r,i=L.useRef(null),[s,o]=L.useState({containerWidth:py((n=t.style)===null||n===void 0?void 0:n.width),containerHeight:py((r=t.style)===null||r===void 0?void 0:r.height)}),c=L.useCallback((d,h)=>{o(m=>{var g=Math.round(d),v=Math.round(h);return m.containerWidth===g&&m.containerHeight===v?m:{containerWidth:g,containerHeight:v}})},[]),f=L.useCallback(d=>{if(typeof e=="function"&&e(d),d!=null&&typeof ResizeObserver<"u"){var{width:h,height:m}=d.getBoundingClientRect();c(h,m);var g=b=>{var w=b[0];if(w!=null){var{width:S,height:C}=w.contentRect;c(S,C)}},v=new ResizeObserver(g);v.observe(d),i.current=v}},[e,c]);return L.useEffect(()=>()=>{var d=i.current;d!=null&&d.disconnect()},[c]),L.createElement(L.Fragment,null,L.createElement(xp,{width:s.containerWidth,height:s.containerHeight}),L.createElement("div",cl({ref:f},t)))}),ype=L.forwardRef((t,e)=>{var{width:n,height:r}=t,[i,s]=L.useState({containerWidth:py(n),containerHeight:py(r)}),o=L.useCallback((f,d)=>{s(h=>{var m=Math.round(f),g=Math.round(d);return h.containerWidth===m&&h.containerHeight===g?h:{containerWidth:m,containerHeight:g}})},[]),c=L.useCallback(f=>{if(typeof e=="function"&&e(f),f!=null){var{width:d,height:h}=f.getBoundingClientRect();o(d,h)}},[e,o]);return L.createElement(L.Fragment,null,L.createElement(xp,{width:i.containerWidth,height:i.containerHeight}),L.createElement("div",cl({ref:c},t)))}),vpe=L.forwardRef((t,e)=>{var{width:n,height:r}=t;return L.createElement(L.Fragment,null,L.createElement(xp,{width:n,height:r}),L.createElement("div",cl({ref:e},t)))}),xpe=L.forwardRef((t,e)=>{var{width:n,height:r}=t;return typeof n=="string"||typeof r=="string"?L.createElement(ype,cl({},t,{ref:e})):typeof n=="number"&&typeof r=="number"?L.createElement(vpe,cl({},t,{width:n,height:r,ref:e})):L.createElement(L.Fragment,null,L.createElement(xp,{width:n,height:r}),L.createElement("div",cl({ref:e},t)))});function bpe(t){return t?gpe:xpe}var _pe=L.forwardRef((t,e)=>{var{children:n,className:r,height:i,onClick:s,onContextMenu:o,onDoubleClick:c,onMouseDown:f,onMouseEnter:d,onMouseLeave:h,onMouseMove:m,onMouseUp:g,onTouchEnd:v,onTouchMove:b,onTouchStart:w,style:S,width:C,responsive:R,dispatchTouchEvents:N=!0}=t,O=L.useRef(null),k=Wn(),[D,M]=L.useState(null),[j,I]=L.useState(null),U=upe(),B=GT(),P=(B==null?void 0:B.width)>0?B.width:C,F=(B==null?void 0:B.height)>0?B.height:i,z=L.useCallback(fe=>{U(fe),typeof e=="function"&&e(fe),M(fe),I(fe),fe!=null&&(O.current=fe)},[U,e,M,I]),Q=L.useCallback(fe=>{k(P8(fe)),k(Di({handler:s,reactEvent:fe}))},[k,s]),W=L.useCallback(fe=>{k(dS(fe)),k(Di({handler:d,reactEvent:fe}))},[k,d]),K=L.useCallback(fe=>{k(CU()),k(Di({handler:h,reactEvent:fe}))},[k,h]),te=L.useCallback(fe=>{k(dS(fe)),k(Di({handler:m,reactEvent:fe}))},[k,m]),ne=L.useCallback(()=>{k(z8())},[k]),xe=L.useCallback(fe=>{k(L8(fe.key))},[k]),G=L.useCallback(fe=>{k(Di({handler:o,reactEvent:fe}))},[k,o]),X=L.useCallback(fe=>{k(Di({handler:c,reactEvent:fe}))},[k,c]),de=L.useCallback(fe=>{k(Di({handler:f,reactEvent:fe}))},[k,f]),ce=L.useCallback(fe=>{k(Di({handler:g,reactEvent:fe}))},[k,g]),ve=L.useCallback(fe=>{k(Di({handler:w,reactEvent:fe}))},[k,w]),ze=L.useCallback(fe=>{N&&k(V8(fe)),k(Di({handler:b,reactEvent:fe}))},[k,N,b]),je=L.useCallback(fe=>{k(Di({handler:v,reactEvent:fe}))},[k,v]),Fe=bpe(R);return L.createElement(WU.Provider,{value:D},L.createElement(EQ.Provider,{value:j},L.createElement(Fe,{width:P??(S==null?void 0:S.width),height:F??(S==null?void 0:S.height),className:Qt("recharts-wrapper",r),style:dpe({position:"relative",cursor:"default",width:P,height:F},S),onClick:Q,onContextMenu:G,onDoubleClick:X,onFocus:ne,onKeyDown:xe,onMouseDown:de,onMouseEnter:W,onMouseLeave:K,onMouseMove:te,onMouseUp:ce,onTouchEnd:je,onTouchMove:ze,onTouchStart:ve,ref:z},L.createElement(mpe,null),n)))}),wpe=["width","height","responsive","children","className","style","compact","title","desc"];function Spe(t,e){if(t==null)return{};var n,r,i=Tpe(t,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)n=s[r],e.indexOf(n)===-1&&{}.propertyIsEnumerable.call(t,n)&&(i[n]=t[n])}return i}function Tpe(t,e){if(t==null)return{};var n={};for(var r in t)if({}.hasOwnProperty.call(t,r)){if(e.indexOf(r)!==-1)continue;n[r]=t[r]}return n}var Epe=L.forwardRef((t,e)=>{var{width:n,height:r,responsive:i,children:s,className:o,style:c,compact:f,title:d,desc:h}=t,m=Spe(t,wpe),g=fo(m);return f?L.createElement(L.Fragment,null,L.createElement(xp,{width:n,height:r}),L.createElement(oD,{otherAttributes:g,title:d,desc:h},s)):L.createElement(_pe,{className:o,style:c,width:n,height:r,responsive:i??!1,onClick:t.onClick,onMouseLeave:t.onMouseLeave,onMouseEnter:t.onMouseEnter,onMouseMove:t.onMouseMove,onMouseDown:t.onMouseDown,onMouseUp:t.onMouseUp,onContextMenu:t.onContextMenu,onDoubleClick:t.onDoubleClick,onTouchStart:t.onTouchStart,onTouchMove:t.onTouchMove,onTouchEnd:t.onTouchEnd},L.createElement(oD,{otherAttributes:g,title:d,desc:h,ref:e},L.createElement(Qde,null,s)))});function fS(){return fS=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},fS.apply(null,arguments)}var Ape={top:5,right:5,bottom:5,left:5},Cpe={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,layout:"horizontal",margin:Ape,responsive:!1,reverseStackOrder:!1,stackOffset:"none",syncMethod:"index"},Npe=L.forwardRef(function(e,n){var r,i=Ki(e.categoricalChartProps,Cpe),{chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,categoricalChartProps:d}=e,h={chartName:s,defaultTooltipEventType:o,validateTooltipEventTypes:c,tooltipPayloadSearcher:f,eventEmitter:void 0};return L.createElement(epe,{preloadedState:{options:h},reduxStoreName:(r=d.id)!==null&&r!==void 0?r:s},L.createElement($de,{chartData:d.data}),L.createElement(npe,{layout:i.layout,margin:i.margin}),L.createElement(rpe,{baseValue:i.baseValue,accessibilityLayer:i.accessibilityLayer,barCategoryGap:i.barCategoryGap,maxBarSize:i.maxBarSize,stackOffset:i.stackOffset,barGap:i.barGap,barSize:i.barSize,syncId:i.syncId,syncMethod:i.syncMethod,className:i.className,reverseStackOrder:i.reverseStackOrder}),L.createElement(Epe,fS({},i,{ref:n})))}),kpe=["axis"],Ipe=L.forwardRef((t,e)=>L.createElement(Npe,{chartName:"AreaChart",defaultTooltipEventType:"axis",validateTooltipEventTypes:kpe,tooltipPayloadSearcher:yce,categoricalChartProps:t,ref:e}));const lD={Novice:"text-life-muted border-life-muted",Adept:"text-life-normal border-life-normal",Expert:"text-purple-400 border-purple-400",Master:"text-life-gold border-life-gold",Grandmaster:"text-life-diamond border-life-diamond"},Rpe=({stat:t,size:e=14})=>{switch(t){case ae.STR:return l.jsx(Jr,{size:e});case ae.INT:return l.jsx(xn,{size:e});case ae.DIS:return l.jsx(St,{size:e});case ae.HEA:return l.jsx(vi,{size:e});case ae.CRT:return l.jsx(hr,{size:e});case ae.SPR:return l.jsx(fr,{size:e});case ae.REL:return l.jsx(xi,{size:e});case ae.FIN:return l.jsx(Kn,{size:e});default:return l.jsx(hn,{size:e})}},Ppe=()=>{const{skillState:t,skillDispatch:e}=an(),{dispatch:n}=Ge(),{skills:r,activeSkillId:i}=t,[s,o]=L.useState(!1),[c,f]=L.useState(!1),d=r.find(D=>D.id===i);if(!d)return null;const h=()=>{e.setActiveSkill(null)},m=()=>{e.addSkillXP(d.id,1)},g=()=>{n.setModal("confirmation",{title:"Forget Skill?",message:"Are you sure you want to remove this skill? All accrued XP and progress will be lost permanently.",confirmText:"Forget",isDangerous:!0,onConfirm:()=>{e.deleteSkill(d.id)}})},v=lD[d.rank]||lD.Novice,b=v.split(" ")[0],w=Math.min(100,d.currentXP/d.targetXP*100),S=new Date(d.createdAt),C=new Date,R=Math.max(1,Math.floor((C.getTime()-S.getTime())/(1e3*60*60*24))),N=new Date(d.lastPracticed),O=Math.floor((C.getTime()-N.getTime())/(1e3*60*60*24)),k=Array.from({length:Math.max(5,d.level)}).map((D,M)=>({level:M+1,xp:Math.floor(Math.pow(M+1,1.5)*100)}));return l.jsx("div",{onClick:h,className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:D=>D.stopPropagation(),className:`
                    relative bg-life-paper w-full max-w-md rounded-2xl border shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in zoom-in-95 slide-in-from-bottom-8 duration-500
                    ${d.isRusty?"border-orange-500/30":"border-zinc-800"}
                `,children:[d.isRusty&&l.jsx("div",{className:"absolute inset-0 pointer-events-none z-0 opacity-10",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)' opacity='1' fill='#f97316'/%3E%3C/svg%3E")`}}),l.jsxs("div",{className:"relative p-6 pb-6 border-b border-zinc-800 overflow-hidden z-10 bg-life-black/50",children:[l.jsx("div",{className:`absolute top-0 right-0 w-64 h-64 bg-current opacity-5 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none ${b}`}),l.jsxs("div",{className:"flex justify-between items-start relative z-10",children:[s?l.jsxs("button",{onClick:()=>o(!1),className:"flex items-center gap-1 text-life-muted hover:text-white text-xs font-bold uppercase tracking-widest",children:[l.jsx(Vy,{size:14})," Back"]}):l.jsxs("div",{className:`inline-flex items-center gap-1 px-2 py-1 rounded border bg-life-black/50 text-[10px] font-black uppercase tracking-widest ${v}`,children:[l.jsx(Gy,{size:12}),d.rank]}),l.jsxs("div",{className:"flex items-center gap-2",children:[!s&&l.jsxs(l.Fragment,{children:[l.jsx("button",{onClick:()=>f(!c),className:`w-8 h-8 flex items-center justify-center rounded-full transition-all ${c?"bg-life-gold text-black":"bg-life-black/50 text-life-muted hover:text-white hover:bg-life-muted/20"}`,children:l.jsx(kI,{size:16})}),l.jsx("button",{onClick:()=>o(!0),className:"w-8 h-8 flex items-center justify-center rounded-full bg-life-black/50 text-life-muted hover:text-white hover:bg-life-muted/20 transition-all",children:l.jsx(gw,{size:16})})]}),l.jsx("button",{onClick:h,className:"w-8 h-8 flex items-center justify-center rounded-full bg-life-black/50 text-life-muted hover:text-white hover:bg-life-muted/20 transition-all",children:l.jsx(wt,{size:20})})]})]}),!s&&l.jsxs("div",{className:"mt-4",children:[l.jsx("h2",{className:`text-2xl font-black text-life-text tracking-tight mb-2 ${d.isRusty?"opacity-80":""}`,children:d.title}),l.jsx("div",{className:"p-3 rounded-lg bg-black/40 border border-zinc-800/50",children:l.jsx("p",{className:"text-sm text-life-muted leading-relaxed",children:d.description||"No description provided."})})]})]}),l.jsx("div",{className:"overflow-y-auto p-6 space-y-6 relative z-10",children:s?l.jsx(rL,{onClose:()=>o(!1),initialData:d}):c?l.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-bottom-4",children:[l.jsxs("h3",{className:"text-xs font-black uppercase tracking-widest text-life-muted flex items-center gap-2",children:[l.jsx(kI,{size:14})," Progression Curve"]}),l.jsx("div",{className:"h-48 w-full bg-life-black rounded-xl border border-zinc-800 p-4",children:l.jsx(qte,{width:"100%",height:"100%",children:l.jsxs(Ipe,{data:k,children:[l.jsx("defs",{children:l.jsxs("linearGradient",{id:"colorXp",x1:"0",y1:"0",x2:"0",y2:"1",children:[l.jsx("stop",{offset:"5%",stopColor:"#fbbf24",stopOpacity:.3}),l.jsx("stop",{offset:"95%",stopColor:"#fbbf24",stopOpacity:0})]})}),l.jsx(I8,{dataKey:"level",stroke:"#525252",fontSize:10,tickLine:!1,axisLine:!1}),l.jsx(R8,{stroke:"#525252",fontSize:10,tickLine:!1,axisLine:!1,width:30}),l.jsx(Fce,{contentStyle:{backgroundColor:"#0a0a0a",border:"1px solid #27272a",borderRadius:"8px",fontSize:"12px"},itemStyle:{color:"#fbbf24"}}),l.jsx(N8,{type:"monotone",dataKey:"xp",stroke:"#fbbf24",strokeWidth:2,fillOpacity:1,fill:"url(#colorXp)"})]})})}),l.jsx("p",{className:"text-[10px] text-life-muted text-center",children:"Estimated XP required for future levels."})]}):l.jsxs("div",{className:"space-y-6 animate-in fade-in",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between items-end",children:[l.jsxs("span",{className:"text-4xl font-black font-mono leading-none",style:{color:w>=100?"#10b981":void 0},children:["LVL ",d.level]}),l.jsxs("span",{className:"text-xs font-mono text-life-muted mb-1",children:[l.jsx("span",{className:"text-life-text",children:d.currentXP})," / ",d.targetXP," XP"]})]}),l.jsxs("div",{className:"h-3 w-full bg-life-black rounded-full overflow-hidden border border-zinc-800 relative",children:[l.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:"linear-gradient(90deg, transparent 95%, #000 95%)",backgroundSize:"10% 100%"}}),l.jsxs("div",{className:`h-full transition-all duration-1000 ease-out relative overflow-hidden ${d.isRusty?"grayscale":""}`,style:{width:`${w}%`},children:[l.jsx("div",{className:`absolute inset-0 opacity-80 ${b.replace("text-","bg-")} shadow-[0_0_15px_currentColor]`}),l.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-white/20 to-transparent w-full -translate-x-full animate-[shimmer_2s_infinite]"})]})]})]}),d.isRusty?l.jsxs("div",{className:"p-4 rounded-xl bg-orange-900/10 border border-orange-500/30 flex items-center gap-4 animate-pulse",children:[l.jsx("div",{className:"p-2 bg-orange-500/10 rounded-full text-orange-500",children:l.jsx(yo,{size:24})}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-sm font-bold text-orange-400",children:"Skill Rusting"}),l.jsxs("p",{className:"text-[10px] text-orange-300/70",children:["Inactive for ",O," days. XP gain is paused."]})]}),l.jsx("button",{onClick:m,className:"ml-auto px-3 py-1.5 rounded bg-orange-500 text-black text-xs font-bold uppercase tracking-wider hover:bg-orange-400 transition-colors shadow-lg shadow-orange-500/20",children:"Polish"})]}):l.jsxs("div",{className:"flex items-center gap-2 text-life-easy opacity-80 p-3 rounded-lg bg-life-easy/5 border border-life-easy/10",children:[l.jsx(St,{size:16}),l.jsxs("span",{className:"text-xs font-bold uppercase",children:["Active  ",O,"d since practice"]})]}),l.jsxs("div",{children:[l.jsx("h4",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-3",children:"DNA Source (Parent Stats)"}),l.jsx("div",{className:"flex flex-wrap gap-2",children:d.relatedStats.map(D=>l.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-life-black border border-zinc-800",children:[l.jsx("div",{style:{color:$t[D]},children:l.jsx(Rpe,{stat:D,size:18})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-[10px] font-bold text-life-text leading-none",children:D}),l.jsx("span",{className:"text-[8px] text-life-muted leading-none mt-0.5",children:"Linked"})]})]},D))})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"p-3 rounded-lg bg-life-black border border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted mb-1",children:[l.jsx(vn,{size:12}),l.jsx("span",{className:"text-[9px] uppercase font-bold",children:"Time Invested"})]}),l.jsxs("span",{className:"text-xs font-mono text-life-text",children:[R," Days"]})]}),l.jsxs("div",{className:"p-3 rounded-lg bg-life-black border border-zinc-800",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted mb-1",children:[l.jsx(mi,{size:12}),l.jsx("span",{className:"text-[9px] uppercase font-bold",children:"Last Session"})]}),l.jsx("span",{className:"text-xs font-mono text-life-text",children:new Date(d.lastPracticed).toLocaleDateString()})]})]}),l.jsx("div",{className:"pt-4 border-t border-zinc-800",children:l.jsxs("button",{onClick:g,className:"w-full py-3 flex items-center justify-center gap-2 text-life-muted hover:text-life-hard hover:bg-life-hard/5 rounded-lg transition-colors text-xs font-bold uppercase tracking-widest",children:[l.jsx(Dr,{size:14}),"Forget Skill"]})})]})})]})})},jpe=["S","M","T","W","T","F","S"],Mpe=()=>{const{habitState:t,habitDispatch:e}=Ar(),{habits:n,activeHabitId:r}=t,i=n.find(S=>S.id===r);if(!i)return null;const s=AT(i.streak),o=$t[i.stats[0]],c=Wy(i.streak),f=i.streak-c,h=(()=>{const S=[],C=new Date;for(let R=29;R>=0;R--){const N=new Date;N.setDate(C.getDate()-R);const O=N.toISOString().split("T")[0],k=i.history.some(j=>j.startsWith(O)),D=R===0;let M="neutral";k?M="done":D&&(i.status==="completed"?M="done":i.status==="failed"?M="failed":M="pending"),S.push({date:N,status:M,isToday:D})}return S})(),m=i.history.length+(i.status==="completed"?1:0),g=new Date(i.createdAt),v=Math.max(1,Math.floor((new Date().getTime()-g.getTime())/(1e3*60*60*24))),b=Math.round(m/v*100),w=()=>{var S,C;switch(i.type){case"daily":return l.jsxs("div",{className:"flex items-center gap-2 text-life-text font-medium",children:[l.jsx(eX,{size:14,className:"text-life-gold"}),l.jsx("span",{children:"Daily Protocol"})]});case"interval":return l.jsxs("div",{className:"flex items-center gap-2 text-life-text font-medium",children:[l.jsx(hn,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["Every ",l.jsx("span",{className:"text-life-gold font-bold",children:i.intervalValue})," Days"]})]});case"specific_days":return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 text-life-text font-medium",children:[l.jsx(mi,{size:14,className:"text-life-gold"}),l.jsx("span",{children:"Weekly Schedule"})]}),l.jsx("div",{className:"flex justify-between gap-1 bg-life-black p-1.5 rounded-lg border border-zinc-800",children:jpe.map((R,N)=>{var k;const O=(k=i.specificDays)==null?void 0:k.includes(N);return l.jsx("div",{className:`w-6 h-6 rounded flex items-center justify-center text-[10px] font-bold ${O?"bg-life-gold text-life-black":"text-life-muted/30"}`,children:R},N)})})]});case"custom":return l.jsxs("div",{className:"w-full",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2 text-life-text font-medium",children:[l.jsx(wY,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["The Matrix (",(S=i.pattern)==null?void 0:S.length," Day Loop)"]})]}),l.jsx("div",{className:"flex flex-wrap gap-0.5",children:(C=i.pattern)==null?void 0:C.split("").map((R,N)=>l.jsx("div",{className:`w-2 h-4 rounded-sm ${R==="1"?"bg-life-gold":"bg-life-muted/20"}`,title:R==="1"?"Active":"Rest"},N))})]});default:return null}};return l.jsx("div",{onClick:()=>e.setActiveHabit(null),className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:S=>S.stopPropagation(),className:"bg-life-paper w-full max-w-md rounded-2xl border border-zinc-800 shadow-2xl overflow-hidden flex flex-col max-h-[90vh] animate-in slide-in-from-bottom-8 duration-500",children:[l.jsxs("div",{className:"relative p-6 border-b border-zinc-800 overflow-hidden bg-life-black",children:[l.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-current opacity-5 blur-[80px] rounded-full translate-x-1/2 -translate-y-1/2 pointer-events-none",style:{color:o}}),l.jsx("button",{onClick:()=>e.setActiveHabit(null),className:"absolute top-4 right-4 text-life-muted hover:text-white transition-colors z-10",children:l.jsx(wt,{size:20})}),l.jsxs("div",{className:"flex items-start gap-4 relative z-10",children:[l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsx("div",{className:"text-4xl font-black text-life-gold leading-none mb-1 drop-shadow-lg font-mono",children:i.streak}),l.jsxs("div",{className:"text-[9px] uppercase font-bold text-life-muted tracking-widest flex items-center gap-1",children:[l.jsx(fr,{size:10,className:"text-life-gold",fill:"currentColor"})," Streak"]})]}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsx("h2",{className:"text-xl font-bold text-life-text leading-tight mb-1 truncate",children:i.title}),l.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded border text-[9px] font-black uppercase tracking-widest ${s.phaseColor} bg-black/50`,children:["Phase: ",s.phase]})]})]})]}),l.jsxs("div",{className:"overflow-y-auto p-6 space-y-6",children:[l.jsxs("div",{className:"bg-life-black/40 border border-zinc-800 rounded-xl p-4",children:[l.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-3 flex items-center gap-2",children:[l.jsx(vn,{size:12})," Execution Parameters"]}),l.jsxs("div",{className:"space-y-4",children:[l.jsx("div",{className:"text-xs",children:w()}),l.jsxs("div",{className:"flex items-center gap-4 pt-3 border-t border-zinc-800",children:[i.scheduledTime?l.jsxs("div",{className:"flex items-center gap-2 bg-life-gold/10 px-3 py-1.5 rounded border border-life-gold/20 text-xs font-mono font-bold text-life-gold",children:[l.jsx(pd,{size:12}),i.scheduledTime]}):l.jsx("div",{className:"text-xs text-life-muted italic",children:"No set time"}),i.isTimed&&l.jsxs("div",{className:"flex items-center gap-2 text-xs text-life-muted",children:[l.jsx(PX,{size:12}),l.jsxs("span",{children:["Duration: ",i.durationMinutes,"m"]})]})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[l.jsx($y,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Fibonacci Sequence"})]}),l.jsxs("span",{className:"text-[9px] font-mono text-life-gold",children:[s.progress,"% to Next Checkpoint"]})]}),l.jsxs("div",{className:"relative py-4",children:[l.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-life-muted/10 -translate-y-1/2 z-0"}),l.jsx("div",{className:"flex items-center gap-4 relative z-10 overflow-x-auto no-scrollbar pb-4 px-2 snap-x",children:wr.map(S=>{const C=i.streak>=S,R=!C&&i.streak<S&&i.streak>=(wr[wr.indexOf(S)-1]||0),N=S===s.prevCheckpoint;return l.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[50px] snap-center shrink-0",children:[l.jsxs("div",{className:`
                                                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all relative
                                                    ${C?"bg-life-gold border-life-gold text-life-black shadow-[0_0_10px_rgba(251,191,36,0.3)]":R?"bg-life-black border-life-gold text-life-gold animate-pulse scale-110 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"bg-life-black border-zinc-800 text-life-muted/30"}
                                                `,children:[C?l.jsx(xs,{size:14}):R?l.jsx(Oc,{size:14}):l.jsx(jd,{size:12}),N&&l.jsx("div",{className:"absolute -bottom-2 -right-2 bg-life-black border border-zinc-800 rounded-full p-0.5",title:"Safety Net",children:l.jsx(ms,{size:10,className:"text-life-text"})})]}),l.jsx("span",{className:`text-[10px] font-mono font-bold ${C||R?"text-life-text":"text-life-muted/30"}`,children:S})]},S)})})]}),l.jsxs("div",{className:"bg-life-black rounded-lg p-3 border border-zinc-800 flex items-start gap-3 relative overflow-hidden group",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-hard/50"}),l.jsx(yo,{size:16,className:"text-life-hard shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-life-muted",children:"Failure Consequence"}),l.jsxs("span",{className:"text-[10px] font-black text-life-hard uppercase",children:["Streak -",f]})]}),l.jsxs("div",{className:"text-xs text-life-text",children:["If you miss today, your streak will fall to ",l.jsx("span",{className:"font-mono font-bold text-life-gold",children:c}),"."]}),l.jsxs("div",{className:"text-[9px] text-life-muted/50 mt-1",children:["Reaching ",l.jsx("span",{className:"text-life-text",children:s.nextCheckpoint})," will secure your next safety net."]})]})]})]}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-4 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[l.jsx(hn,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"30-Day Consistency"})]}),l.jsxs("span",{className:"text-[10px] font-mono text-life-text",children:[b,"%"]})]}),l.jsx("div",{className:"grid grid-cols-7 gap-1",children:h.map((S,C)=>l.jsx("div",{className:`
                                        aspect-square rounded flex items-center justify-center text-[9px] font-mono
                                        ${S.status==="done"?"bg-life-easy text-life-black":S.status==="failed"?"bg-life-hard/20 text-life-hard border border-life-hard/30":S.isToday?"bg-life-gold/20 text-life-gold border border-life-gold/30 animate-pulse":"bg-life-black border border-zinc-800 text-life-muted/20"}
                                    `,title:S.date.toLocaleDateString(),children:S.date.getDate()},C))})]})]})]})})},B8=({onClose:t,initialData:e})=>{const{taskDispatch:n}=Er(),{skillState:r}=an(),{state:i}=Ge(),[s,o]=L.useState(""),[c,f]=L.useState(""),[d,h]=L.useState(rt.EASY),[m,g]=L.useState([ae.DIS]),[v,b]=L.useState(""),[w,S]=L.useState(""),[C,R]=L.useState(""),[N,O]=L.useState(!1),[k,D]=L.useState(0),[M,j]=L.useState([]),[I,U]=L.useState(""),[B,P]=L.useState(""),[F,z]=L.useState(!1);L.useEffect(()=>{e&&(o(e.title),f(e.description||""),h(e.difficulty),g(e.stats||[ae.DIS]),b(e.skillId||""),S(e.deadline?new Date(e.deadline).toISOString().slice(0,16):""),R(e.scheduledTime?new Date(e.scheduledTime).toISOString().slice(0,16):""),O(e.isTimed||!1),D(e.durationMinutes||0),j(e.subtasks||[]),e.skillId&&W("skill"))},[e]);const[Q,W]=L.useState("stat"),K=G=>{if(G.preventDefault(),!s.trim())return;const X={title:s,description:c,difficulty:d,stats:m,skillId:Q==="skill"&&v||void 0,deadline:w||void 0,scheduledTime:C||void 0,isTimed:N,durationMinutes:N?k:0,subtasks:M};e?n.updateTask(e.id,X):(n.addTask(X),F&&C&&CT(s,c,C,N?k:60)),t()},te=()=>{if(!I.trim())return;const G={id:`st_${Date.now()}`,title:I,isCompleted:!1};j([...M,G]),U("")},ne=G=>{j(M.filter(X=>X.id!==G))},xe=({type:G})=>{switch(G){case ae.STR:return l.jsx(Jr,{size:18});case ae.INT:return l.jsx(xn,{size:18});case ae.DIS:return l.jsx(St,{size:18});case ae.HEA:return l.jsx(vi,{size:18});case ae.CRT:return l.jsx(hr,{size:18});case ae.SPR:return l.jsx(fr,{size:18});case ae.REL:return l.jsx(xi,{size:18});case ae.FIN:return l.jsx(Kn,{size:18});default:return l.jsx(hn,{size:18})}};return l.jsxs("form",{onSubmit:K,className:"space-y-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Mission Objective"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:s,onChange:G=>o(G.target.value),placeholder:"e.g. Complete Project Alpha",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pr-12 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"}),l.jsx("button",{type:"button",onClick:()=>O(!N),className:`absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-md transition-colors ${N?"bg-life-gold text-life-black":"text-life-muted hover:bg-life-muted/10"}`,title:"Toggle Timer",children:l.jsx(vn,{size:16})})]}),N&&l.jsx("div",{className:"mt-2 animate-in slide-in-from-top-2 fade-in",children:l.jsxs("div",{className:"flex items-center gap-2 bg-life-black border border-life-muted/20 rounded-lg p-2 w-fit",children:[l.jsx(vn,{size:14,className:"text-life-gold"}),l.jsx("input",{type:"number",min:"1",value:k||"",onChange:G=>D(parseInt(G.target.value)||0),placeholder:"Min",className:"w-12 bg-transparent text-sm text-life-text focus:outline-none text-center font-mono"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase",children:"Mins"})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(rt).map(G=>l.jsx("button",{type:"button",onClick:()=>h(G),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===G?`${bs[G]} ${Ky[G]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:G},G))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Reward Source"}),l.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/20 p-1 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>W("stat"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Q==="stat"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Attribute Focus"}),l.jsx("button",{type:"button",onClick:()=>W("skill"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${Q==="skill"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Skill Link"})]}),Q==="stat"?l.jsx("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ae).map(G=>l.jsxs("button",{type:"button",onClick:()=>g([G]),className:`
                                            flex flex-col items-center justify-center p-3 rounded-lg border transition-all aspect-square
                                            ${m.includes(G)?"bg-life-muted/10 border-current shadow-lg scale-105":"bg-life-black border-life-muted/20 text-life-muted opacity-70 hover:opacity-100 hover:bg-life-muted/5"}
                                        `,style:{color:m.includes(G)?$t[G]:void 0},children:[l.jsx(xe,{type:G}),l.jsx("span",{className:"text-[9px] font-bold mt-1.5",children:G})]},G))})}):l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),l.jsxs("select",{value:v,onChange:G=>{const X=G.target.value;b(X);const de=r.skills.find(ce=>ce.id===X);de&&de.relatedStats.length>0&&g(de.relatedStats)},className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[l.jsx("option",{value:"",children:"Select a Skill..."}),r.skills.map(G=>l.jsxs("option",{value:G.id,children:[G.title," (Lvl ",G.level,")"]},G.id))]}),l.jsx(jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90 pointer-events-none",size:14})]}),v&&l.jsxs("div",{className:"p-3 bg-life-gold/10 border border-life-gold/20 rounded-lg flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/20 rounded-full text-life-gold",children:l.jsx(St,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-[10px] text-life-gold font-bold uppercase tracking-wider",children:"Auto-Linked Attribute"}),l.jsx("p",{className:"text-xs text-life-text font-mono",children:m.join(", ")})]})]})]})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Md,{size:12})," Intel / Notes"]}),l.jsx("textarea",{rows:3,value:c,onChange:G=>f(G.target.value),placeholder:"Add details, links, or sub-objectives...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Gi,{size:12})," Tactical Steps"]}),l.jsxs("div",{className:"space-y-2",children:[M.map(G=>l.jsxs("div",{className:"flex items-center gap-2 bg-life-black p-2 rounded border border-life-muted/20",children:[l.jsx("span",{className:"text-xs text-life-text flex-1",children:G.title}),l.jsx("button",{type:"button",onClick:()=>ne(G.id),className:"text-life-muted hover:text-life-hard",children:l.jsx(Dr,{size:12})})]},G.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:I,onChange:G=>U(G.target.value),onKeyDown:G=>G.key==="Enter"&&(G.preventDefault(),te()),placeholder:"Add step...",className:"flex-1 bg-life-black border border-life-muted/30 rounded p-2 text-xs focus:outline-none focus:border-life-gold/50"}),l.jsx("button",{type:"button",onClick:te,className:"p-2 bg-life-muted/10 rounded border border-life-muted/20 hover:bg-life-muted/20 text-life-muted hover:text-white",children:l.jsx(kn,{size:14})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(vn,{size:12})," Scheduled Start"]}),l.jsx("input",{type:"datetime-local",value:C,onChange:G=>R(G.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(mi,{size:12})," Deadline"]}),l.jsx("input",{type:"datetime-local",value:w,onChange:G=>S(G.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]})]}),!e&&C&&l.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-life-black border border-life-muted/20",children:[l.jsx(xT,{size:16,className:F?"text-life-gold":"text-life-muted"}),l.jsx("span",{className:"text-xs text-life-text flex-1",children:"Sync to Google Calendar"}),l.jsx("button",{type:"button",onClick:()=>z(!F),className:`w-10 h-5 rounded-full relative transition-colors ${F?"bg-life-gold":"bg-life-muted/30"}`,children:l.jsx("div",{className:`absolute top-1 left-1 w-3 h-3 rounded-full bg-white transition-transform ${F?"translate-x-5":""}`})})]}),l.jsx("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg ${s?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}`,disabled:!s,children:e?"Update Mission":"Initiate Mission"})]})},Dpe=["S","M","T","W","T","F","S"],Ope=({habitType:t,setHabitType:e,selectedDays:n,toggleDay:r,intervalVal:i,setIntervalVal:s,pattern:o,setPattern:c,reps:f,setReps:d,totalRepetitions:h,setTotalRepetitions:m})=>{const g=w=>{const S=o.split("");S[w]=S[w]==="1"?"0":"1",c(S.join(""))},v=()=>c(w=>w+"1"),b=()=>{o.length>1&&c(w=>w.slice(0,-1))};return l.jsxs("div",{className:"p-4 bg-life-black/40 rounded-xl border border-life-muted/10 space-y-4",children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Habit Taxonomy"}),l.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"daily",label:"Daily",icon:l.jsx(vn,{size:14})},{id:"specific_days",label:"Specific Days",icon:l.jsx(mi,{size:14})},{id:"interval",label:"Interval",icon:l.jsx(Fi,{size:14})},{id:"custom",label:"The Matrix",icon:l.jsx(mw,{size:14})}].map(w=>l.jsxs("button",{type:"button",onClick:()=>e(w.id),className:`
                            flex items-center justify-center gap-2 py-3 rounded-lg border text-xs font-bold uppercase tracking-wider transition-all
                            ${t===w.id?"bg-life-gold/10 border-life-gold text-life-gold":"bg-life-black border-life-muted/20 text-life-muted hover:border-life-muted/50"}
                        `,children:[w.icon," ",w.label]},w.id))}),t==="specific_days"&&l.jsx("div",{className:"flex justify-between gap-1 pt-2",children:Dpe.map((w,S)=>l.jsx("button",{type:"button",onClick:()=>r(S),className:`w-10 h-10 rounded-lg border flex items-center justify-center text-sm font-bold transition-all ${n.includes(S)?"bg-life-easy border-life-easy text-life-black":"border-life-muted/30 text-life-muted hover:bg-life-muted/10"}`,children:w},S))}),t==="interval"&&l.jsxs("div",{className:"pt-2 flex items-center gap-4",children:[l.jsx("span",{className:"text-sm text-life-muted",children:"Every"}),l.jsx("input",{type:"number",min:"2",max:"365",value:i,onChange:w=>s(parseInt(w.target.value)||2),className:"w-20 bg-life-black border border-life-muted/50 rounded-lg p-2 text-center text-life-text font-mono font-bold focus:border-life-gold focus:outline-none"}),l.jsx("span",{className:"text-sm text-life-muted",children:"Days"})]}),t==="custom"&&l.jsxs("div",{className:"pt-2",children:[l.jsxs("div",{className:"flex justify-between items-center mb-2",children:[l.jsx("p",{className:"text-[10px] text-life-muted",children:"The Matrix Pattern"}),l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("button",{type:"button",onClick:b,className:"w-6 h-6 flex items-center justify-center rounded border border-life-muted/30 text-life-muted hover:text-white hover:border-life-muted/50 transition-all",children:l.jsx(Ah,{size:12})}),l.jsxs("span",{className:"text-[10px] font-mono text-life-gold min-w-[24px] text-center",children:[o.length,"d"]}),l.jsx("button",{type:"button",onClick:v,className:"w-6 h-6 flex items-center justify-center rounded border border-life-muted/30 text-life-muted hover:text-white hover:border-life-muted/50 transition-all",children:l.jsx(kn,{size:12})}),l.jsx("div",{className:"w-px h-3 bg-life-muted/20 mx-1"}),l.jsxs("button",{type:"button",onClick:()=>c(o.includes("0")?"11111111111111":"00000000000000"),className:"text-[10px] text-life-gold hover:underline flex items-center gap-1",children:[l.jsx(Ch,{size:10})," Reset"]})]})]}),l.jsx("div",{className:"flex flex-wrap gap-1",children:o.split("").map((w,S)=>l.jsx("button",{type:"button",onClick:()=>g(S),className:`w-6 h-8 rounded border text-[9px] font-mono flex items-center justify-center transition-all ${w==="1"?"bg-life-gold border-life-gold text-life-black":"bg-life-black border-life-muted/20 text-life-muted/30 hover:bg-life-muted/10"}`,title:w==="1"?"Active Day":"Rest Day",children:w},S))})]}),l.jsxs("div",{className:"pt-2 border-t border-life-muted/10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ch,{size:14,className:"text-life-gold"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Daily Repetitions"})]}),l.jsxs("div",{className:"flex items-center gap-3 bg-life-black border border-life-muted/30 rounded-lg p-1",children:[l.jsx("button",{type:"button",onClick:()=>d(Math.max(1,f-1)),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-white/5 text-life-muted transition-colors",children:l.jsx(Ah,{size:14})}),l.jsx("span",{className:"text-sm font-bold text-life-gold min-w-[20px] text-center",children:f}),l.jsx("button",{type:"button",onClick:()=>d(f+1),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-white/5 text-life-muted transition-colors",children:l.jsx(kn,{size:14})})]})]}),l.jsx("p",{className:"text-[9px] text-life-muted/50 mt-2 italic",children:"How many times must this protocol be executed per day?"})]}),l.jsxs("div",{className:"pt-2 border-t border-life-muted/10",children:[l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(mw,{size:14,className:"text-life-hard"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest",children:"Archive Limit"})]}),l.jsx("div",{className:"flex items-center gap-2",children:h>0?l.jsxs("div",{className:"flex items-center gap-3 bg-life-black border border-life-hard/30 rounded-lg p-1 animate-in fade-in slide-in-from-right-2",children:[l.jsx("button",{type:"button",onClick:()=>m(Math.max(1,h-1)),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-white/5 text-life-muted transition-colors",children:l.jsx(Ah,{size:14})}),l.jsx("span",{className:"text-sm font-bold text-life-hard min-w-[30px] text-center",children:h}),l.jsx("button",{type:"button",onClick:()=>m(h+1),className:"w-8 h-8 flex items-center justify-center rounded-md hover:bg-white/5 text-life-muted transition-colors",children:l.jsx(kn,{size:14})}),l.jsx("button",{type:"button",onClick:()=>m(0),className:"ml-1 p-1.5 text-life-muted hover:text-life-hard transition-colors",title:"Disable Limit",children:l.jsx(Ch,{size:12})})]}):l.jsx("button",{type:"button",onClick:()=>m(30),className:"px-3 py-1.5 bg-life-black border border-life-muted/20 rounded-lg text-[10px] text-life-muted uppercase font-bold hover:border-life-hard hover:text-life-hard transition-all",children:"Set Limit"})})]}),l.jsx("p",{className:"text-[9px] text-life-muted/50 mt-2 italic",children:h>0?`Protocol will be archived after ${h} total completions.`:"Protocol runs indefinitely (Infinite Loop)."})]})]})},H8=({onClose:t,initialData:e})=>{const{habitDispatch:n}=Ar(),{skillState:r}=an(),{state:i}=Ge(),[s,o]=L.useState(""),[c,f]=L.useState(""),[d,h]=L.useState(rt.EASY),[m,g]=L.useState([ae.DIS]),[v,b]=L.useState(""),[w,S]=L.useState(""),[C,R]=L.useState("daily"),[N,O]=L.useState([1,2,3,4,5]),[k,D]=L.useState(2),[M,j]=L.useState("1010101"),[I,U]=L.useState(1),[B,P]=L.useState(0),[F,z]=L.useState(!1),[Q,W]=L.useState(0),[K,te]=L.useState(""),[ne,xe]=L.useState([]),[G,X]=L.useState("");L.useEffect(()=>{e&&(o(e.title),f(e.description||""),h(e.difficulty),g(e.stats||[ae.DIS]),b(e.skillId||""),S(e.categoryId||""),R(e.type),O(e.specificDays||[]),U(e.dailyTarget||1),P(e.totalRepetitions||0),z(e.isTimed||!1),W(e.durationMinutes||0),xe(e.subtasks||[]),e.skillId&&ce("skill"))},[e]);const[de,ce]=L.useState("stat"),ve=Ce=>{if(Ce.preventDefault(),!s.trim())return;const Ve={title:s,description:c,difficulty:d,stats:m,skillId:de==="skill"&&v||void 0,categoryId:w||void 0,type:C,specificDays:C==="specific_days"?N:void 0,dailyTarget:I,totalRepetitions:B>0?B:void 0,isTimed:F,durationMinutes:F?Q:0,subtasks:ne};e?n.updateHabit(e.id,Ve):n.addHabit(Ve),t()},ze=Ce=>{N.includes(Ce)?O(N.filter(Ve=>Ve!==Ce)):O([...N,Ce].sort())},je=()=>{G.trim()&&(xe([...ne,{id:`st_${Date.now()}`,title:G}]),X(""))},Fe=Ce=>{xe(ne.filter(Ve=>Ve.id!==Ce))},fe=({type:Ce})=>{switch(Ce){case ae.STR:return l.jsx(Jr,{size:18});case ae.INT:return l.jsx(xn,{size:18});case ae.DIS:return l.jsx(St,{size:18});case ae.HEA:return l.jsx(vi,{size:18});case ae.CRT:return l.jsx(hr,{size:18});case ae.SPR:return l.jsx(fr,{size:18});case ae.REL:return l.jsx(xi,{size:18});case ae.FIN:return l.jsx(Kn,{size:18});default:return l.jsx(hn,{size:18})}};return l.jsxs("form",{onSubmit:ve,className:"space-y-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Protocol Name"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:s,onChange:Ce=>o(Ce.target.value),placeholder:"e.g. Morning Meditation",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pr-12 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"}),l.jsx("button",{type:"button",onClick:()=>z(!F),className:`absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-md transition-colors ${F?"bg-life-gold text-life-black":"text-life-muted hover:bg-life-muted/10"}`,title:"Toggle Timer",children:l.jsx(vn,{size:16})})]}),F&&l.jsx("div",{className:"mt-2 animate-in slide-in-from-top-2 fade-in",children:l.jsxs("div",{className:"flex items-center gap-2 bg-life-black border border-life-muted/20 rounded-lg p-2 w-fit",children:[l.jsx(vn,{size:14,className:"text-life-gold"}),l.jsx("input",{type:"number",min:"1",value:Q||"",onChange:Ce=>W(parseInt(Ce.target.value)||0),placeholder:"Min",className:"w-12 bg-transparent text-sm text-life-text focus:outline-none text-center font-mono"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase",children:"Mins"})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Description"}),l.jsx("textarea",{value:c,onChange:Ce=>f(Ce.target.value),placeholder:"Why is this protocol important?",rows:2,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Difficulty"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(rt).map(Ce=>l.jsx("button",{type:"button",onClick:()=>h(Ce),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===Ce?`${bs[Ce]} ${Ky[Ce]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:Ce},Ce))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Reward Source"}),l.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/20 p-1 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>ce("stat"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${de==="stat"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Attribute Focus"}),l.jsx("button",{type:"button",onClick:()=>ce("skill"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${de==="skill"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Skill Link"})]}),de==="stat"?l.jsx("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ae).map(Ce=>l.jsxs("button",{type:"button",onClick:()=>g([Ce]),className:`
                                            flex flex-col items-center justify-center p-3 rounded-lg border transition-all aspect-square
                                            ${m.includes(Ce)?"bg-life-muted/10 border-current shadow-lg scale-105":"bg-life-black border-life-muted/20 text-life-muted opacity-70 hover:opacity-100 hover:bg-life-muted/5"}
                                        `,style:{color:m.includes(Ce)?$t[Ce]:void 0},children:[l.jsx(fe,{type:Ce}),l.jsx("span",{className:"text-[9px] font-bold mt-1.5",children:Ce})]},Ce))})}):l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),l.jsxs("select",{value:v,onChange:Ce=>{const Ve=Ce.target.value;b(Ve);const Ne=r.skills.find(ft=>ft.id===Ve);Ne&&Ne.relatedStats.length>0&&g(Ne.relatedStats)},className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[l.jsx("option",{value:"",children:"Select a Skill..."}),r.skills.map(Ce=>l.jsxs("option",{value:Ce.id,children:[Ce.title," (Lvl ",Ce.level,")"]},Ce.id))]}),l.jsx(jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90 pointer-events-none",size:14})]}),v&&l.jsxs("div",{className:"p-3 bg-life-gold/10 border border-life-gold/20 rounded-lg flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/20 rounded-full text-life-gold",children:l.jsx(St,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-[10px] text-life-gold font-bold uppercase tracking-wider",children:"Auto-Linked Attribute"}),l.jsx("p",{className:"text-xs text-life-text font-mono",children:m.join(", ")})]})]})]})]})]}),l.jsx(Ope,{habitType:C,setHabitType:R,selectedDays:N,toggleDay:ze,intervalVal:k,setIntervalVal:D,pattern:M,setPattern:j,reps:I,setReps:U,totalRepetitions:B,setTotalRepetitions:P}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(pd,{size:12})," Daily Reminder"]}),l.jsx("input",{type:"time",value:K,onChange:Ce=>te(Ce.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Fi,{size:12})," Checklist (Optional)"]}),l.jsxs("div",{className:"space-y-2",children:[ne.map(Ce=>l.jsxs("div",{className:"flex items-center gap-2 bg-life-black p-2 rounded border border-life-muted/20",children:[l.jsx("span",{className:"text-xs text-life-text flex-1",children:Ce.title}),l.jsx("button",{type:"button",onClick:()=>Fe(Ce.id),className:"text-life-muted hover:text-life-hard",children:l.jsx(Dr,{size:12})})]},Ce.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:G,onChange:Ce=>X(Ce.target.value),onKeyDown:Ce=>Ce.key==="Enter"&&(Ce.preventDefault(),je()),placeholder:"Add step...",className:"flex-1 bg-life-black border border-life-muted/30 rounded p-2 text-xs focus:outline-none focus:border-life-gold/50"}),l.jsx("button",{type:"button",onClick:je,className:"p-2 bg-life-muted/10 rounded border border-life-muted/20 hover:bg-life-muted/20 text-life-muted hover:text-white",children:l.jsx(kn,{size:14})})]})]})]})]}),l.jsx("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg ${s?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}`,disabled:!s,children:e?"Update Protocol":"Initialize Protocol"})]})},Lpe=({type:t})=>{switch(t){case ae.STR:return l.jsx(Jr,{size:18});case ae.INT:return l.jsx(xn,{size:18});case ae.DIS:return l.jsx(St,{size:18});case ae.HEA:return l.jsx(vi,{size:18});case ae.CRT:return l.jsx(hr,{size:18});case ae.SPR:return l.jsx(fr,{size:18});case ae.REL:return l.jsx(xi,{size:18});case ae.FIN:return l.jsx(Kn,{size:18});default:return l.jsx(hn,{size:18})}},q8=({step:t,onSave:e,onClose:n})=>{const[r,i]=L.useState(t.title),[s,o]=L.useState(t.isTimed||!1),[c,f]=L.useState(t.durationMinutes||0),[d,h]=L.useState(t.difficulty),[m,g]=L.useState(t.stats||[]),[v,b]=L.useState(t.notes||""),[w,S]=L.useState(t.subtasks||[]),[C,R]=L.useState(""),[N,O]=L.useState(t.scheduledTime||""),[k,D]=L.useState(t.deadline||""),M=()=>{e({...t,title:r,isTimed:s,durationMinutes:s?c:0,difficulty:d,stats:m,notes:v,subtasks:w,scheduledTime:N,deadline:k})},j=()=>{C.trim()&&(S([...w,{id:`st_${Date.now()}`,title:C,isCompleted:!1}]),R(""))},I=U=>{S(w.filter(B=>B.id!==U))};return l.jsxs("div",{className:"space-y-6 animate-in slide-in-from-right fade-in duration-300",children:[l.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[l.jsx("button",{type:"button",onClick:n,className:"p-2 bg-life-black border border-life-muted/20 rounded-lg text-life-muted hover:text-white transition-colors",children:l.jsx(Vy,{size:16})}),l.jsx("h3",{className:"text-sm font-bold text-life-text uppercase tracking-widest",children:"Step Details"})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Step Objective"}),l.jsxs("div",{className:"relative",children:[l.jsx("input",{type:"text",value:r,onChange:U=>i(U.target.value),placeholder:"e.g. Hack the mainframe",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pr-12 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"}),l.jsx("button",{type:"button",onClick:()=>o(!s),className:`absolute right-3 top-1/2 -translate-y-1/2 p-1.5 rounded-md transition-colors ${s?"bg-life-gold text-life-black":"text-life-muted hover:bg-life-muted/10"}`,title:"Toggle Timer",children:l.jsx(vn,{size:16})})]}),s&&l.jsx("div",{className:"mt-2 animate-in slide-in-from-top-2 fade-in",children:l.jsxs("div",{className:"flex items-center gap-2 bg-life-black border border-life-muted/20 rounded-lg p-2 w-fit",children:[l.jsx(vn,{size:14,className:"text-life-gold"}),l.jsx("input",{type:"number",min:"1",value:c||"",onChange:U=>f(parseInt(U.target.value)||0),placeholder:"Min",className:"w-12 bg-transparent text-sm text-life-text focus:outline-none text-center font-mono"}),l.jsx("span",{className:"text-[10px] text-life-muted uppercase",children:"Mins"})]})})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level (Overrides Raid)"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(rt).map(U=>l.jsx("button",{type:"button",onClick:()=>h(d===U?void 0:U),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===U?`${bs[U]} ${Ky[U]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:U},U))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Reward Source (Overrides Raid)"}),l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ae).map(U=>{const B=m.includes(U);return l.jsxs("button",{type:"button",onClick:()=>{g(B?m.filter(P=>P!==U):[...m,U])},className:`
                                        flex flex-col items-center justify-center p-3 rounded-lg border transition-all aspect-square
                                        ${B?"bg-life-muted/10 border-current shadow-lg scale-105":"bg-life-black border-life-muted/20 text-life-muted opacity-70 hover:opacity-100 hover:bg-life-muted/5"}
                                    `,style:{color:B?$t[U]:void 0},children:[l.jsx(Lpe,{type:U}),l.jsx("span",{className:"text-[9px] font-bold mt-1.5",children:U})]},U)})}),m.length===0&&l.jsx("p",{className:"text-[10px] text-life-muted mt-2 italic text-center",children:"Inheriting from Raid / Skill"})]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Md,{size:12})," Intel / Notes"]}),l.jsx("textarea",{rows:3,value:v,onChange:U=>b(U.target.value),placeholder:"Add details, links, or sub-objectives...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Gi,{size:12})," Tactical Steps"]}),l.jsxs("div",{className:"space-y-2",children:[w.map(U=>l.jsxs("div",{className:"flex items-center gap-2 bg-life-black p-2 rounded border border-life-muted/20",children:[l.jsx("span",{className:"text-xs text-life-text flex-1",children:U.title}),l.jsx("button",{type:"button",onClick:()=>I(U.id),className:"text-life-muted hover:text-life-hard",children:l.jsx(Dr,{size:12})})]},U.id)),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"text",value:C,onChange:U=>R(U.target.value),onKeyDown:U=>U.key==="Enter"&&(U.preventDefault(),j()),placeholder:"Add step...",className:"flex-1 bg-life-black border border-life-muted/30 rounded p-2 text-xs focus:outline-none focus:border-life-gold/50"}),l.jsx("button",{type:"button",onClick:j,className:"p-2 bg-life-muted/10 rounded border border-life-muted/20 hover:bg-life-muted/20 text-life-muted hover:text-white",children:l.jsx(kn,{size:14})})]})]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(vn,{size:12})," Scheduled Start"]}),l.jsx("input",{type:"datetime-local",value:N,onChange:U=>O(U.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]}),l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(mi,{size:12})," Deadline"]}),l.jsx("input",{type:"datetime-local",value:k,onChange:U=>D(U.target.value),className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-2.5 text-xs text-life-text focus:outline-none focus:border-life-gold/50"})]})]}),l.jsx("button",{type:"button",onClick:M,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20",children:"Save Step Details"})]})},cD=t=>`${t}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,$8=({onClose:t,initialData:e})=>{const{raidDispatch:n}=Qr(),{skillState:r}=an(),{state:i}=Ge(),[s,o]=L.useState(""),[c,f]=L.useState(""),[d,h]=L.useState(rt.EASY),[m,g]=L.useState(ae.DIS),[v,b]=L.useState(""),[w,S]=L.useState([]),[C,R]=L.useState(null);L.useEffect(()=>{e?(o(e.title),f(e.description||""),h(e.difficulty),g(e.stats[0]||ae.DIS),b(e.skillId||""),S(e.steps.map(P=>({id:P.id,title:P.title,isLocked:P.isLocked||!1,notes:P.notes||"",subtasks:P.subtasks||[],reminders:P.reminders||[],difficulty:P.difficulty,stat:P.stat,scheduledTime:P.scheduledTime,deadline:P.deadline,isTimed:P.isTimed,durationMinutes:P.durationMinutes}))),e.skillId&&O("skill")):S([{id:cD("rs"),title:"",isLocked:!1,notes:"",subtasks:[],reminders:[]}])},[e]);const[N,O]=L.useState("stat"),k=P=>{if(P.preventDefault(),!s.trim())return;const F=w.map(z=>({id:z.id,title:z.title,isCompleted:!1,isLocked:z.isLocked||!1,notes:z.notes,subtasks:z.subtasks,reminders:z.reminders,difficulty:z.difficulty,stat:z.stat,scheduledTime:z.scheduledTime,deadline:z.deadline,isTimed:z.isTimed,durationMinutes:z.durationMinutes}));if(e){const z=F.map(Q=>{const W=e.steps.find(K=>K.id===Q.id);return W?{...Q,isCompleted:W.isCompleted}:Q});n.updateRaid(e.id,{title:s,description:c,difficulty:d,stats:[m],skillId:N==="skill"&&v||void 0,steps:z})}else n.addRaid({title:s,description:c,difficulty:d,stats:[m],skillId:N==="skill"&&v||void 0,steps:F});t()},D=()=>{const P=cD("rs");S([...w,{id:P,title:"",isLocked:!1,notes:"",subtasks:[],reminders:[]}])},M=P=>{const F=[...w];F.splice(P,1),S(F)},j=(P,F,z)=>{const Q=[...w];Q[P]={...Q[P],[F]:z},S(Q)},I=P=>{R(P)},U=P=>{S(w.map(F=>F.id===P.id?P:F)),R(null)},B=({type:P})=>{switch(P){case ae.STR:return l.jsx(Jr,{size:18});case ae.INT:return l.jsx(xn,{size:18});case ae.DIS:return l.jsx(St,{size:18});case ae.HEA:return l.jsx(vi,{size:18});case ae.CRT:return l.jsx(hr,{size:18});case ae.SPR:return l.jsx(fr,{size:18});case ae.REL:return l.jsx(xi,{size:18});case ae.FIN:return l.jsx(Kn,{size:18});default:return l.jsx(hn,{size:18})}};if(C){const P=w.find(F=>F.id===C);if(P)return l.jsx(q8,{step:P,onSave:U,onClose:()=>R(null)})}return l.jsxs("form",{onSubmit:k,className:"space-y-6 animate-in slide-in-from-bottom-4 fade-in duration-300",children:[l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Operation Name"}),l.jsx("input",{type:"text",value:s,onChange:P=>o(P.target.value),placeholder:"e.g. Project Spartan",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-medium"})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Threat Level"}),l.jsx("div",{className:"grid grid-cols-3 gap-2",children:Object.values(rt).map(P=>l.jsx("button",{type:"button",onClick:()=>h(P),className:`py-3 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all border ${d===P?`${bs[P]} ${Ky[P]} shadow-lg scale-[1.02] border-transparent`:"bg-life-black border-life-muted/20 text-life-muted hover:bg-life-muted/5"}`,children:P},P))})]}),l.jsxs("div",{children:[l.jsx("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2",children:"Reward Source"}),l.jsxs("div",{className:"flex bg-life-black rounded-lg border border-life-muted/20 p-1 mb-4",children:[l.jsx("button",{type:"button",onClick:()=>O("stat"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${N==="stat"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Attribute Focus"}),l.jsx("button",{type:"button",onClick:()=>O("skill"),className:`flex-1 py-2 rounded-md text-[10px] font-bold uppercase transition-all ${N==="skill"?"bg-life-gold text-life-black shadow-sm":"text-life-muted hover:text-white hover:bg-white/5"}`,children:"Skill Link"})]}),N==="stat"?l.jsx("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:l.jsx("div",{className:"grid grid-cols-4 gap-2",children:Object.values(ae).map(P=>l.jsxs("button",{type:"button",onClick:()=>g(P),className:`
                                            flex flex-col items-center justify-center p-3 rounded-lg border transition-all aspect-square
                                            ${m===P?"bg-life-muted/10 border-current shadow-lg scale-105":"bg-life-black border-life-muted/20 text-life-muted opacity-70 hover:opacity-100 hover:bg-life-muted/5"}
                                        `,style:{color:m===P?$t[P]:void 0},children:[l.jsx(B,{type:P}),l.jsx("span",{className:"text-[9px] font-bold mt-1.5",children:P})]},P))})}):l.jsxs("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300 space-y-2",children:[l.jsxs("div",{className:"relative",children:[l.jsx(pi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-life-muted",size:16}),l.jsxs("select",{value:v,onChange:P=>{const F=P.target.value;b(F);const z=r.skills.find(Q=>Q.id===F);z&&z.relatedStats.length>0&&g(z.relatedStats[0])},className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 pl-10 text-xs text-life-text appearance-none focus:outline-none focus:border-life-gold/50",children:[l.jsx("option",{value:"",children:"Select a Skill..."}),r.skills.map(P=>l.jsxs("option",{value:P.id,children:[P.title," (Lvl ",P.level,")"]},P.id))]}),l.jsx(jr,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-life-muted rotate-90 pointer-events-none",size:14})]}),v&&l.jsxs("div",{className:"p-3 bg-life-gold/10 border border-life-gold/20 rounded-lg flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/20 rounded-full text-life-gold",children:l.jsx(St,{size:14})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("p",{className:"text-[10px] text-life-gold font-bold uppercase tracking-wider",children:"Auto-Linked Attribute"}),l.jsx("p",{className:"text-xs text-life-text font-mono",children:m})]})]})]})]})]}),l.jsx("div",{className:"space-y-4",children:l.jsxs("div",{children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest mb-2 flex items-center gap-1",children:[l.jsx(Pd,{size:12})," Briefing / Intel"]}),l.jsx("textarea",{rows:3,value:c,onChange:P=>f(P.target.value),placeholder:"Add mission briefing...",className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all resize-none"})]})}),l.jsxs("div",{children:[l.jsxs("div",{className:"flex items-center justify-between mb-2",children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest flex items-center gap-1",children:[l.jsx(Fi,{size:12})," Operational Steps"]}),l.jsxs("button",{type:"button",onClick:D,className:"text-[10px] flex items-center gap-1 text-life-gold hover:text-white transition-colors uppercase font-bold",children:[l.jsx(kn,{size:12})," Add Step"]})]}),l.jsx("div",{className:"space-y-2",children:w.map((P,F)=>l.jsx("div",{className:"bg-life-black border border-life-muted/20 rounded-lg p-2 transition-all hover:border-life-muted/40",children:l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx("div",{className:"flex flex-col items-center justify-center w-5 h-5 rounded bg-life-muted/10 text-life-muted font-black text-[9px]",children:F+1}),l.jsx("div",{className:"flex-1 relative",children:l.jsx("input",{type:"text",value:P.title,onChange:z=>j(F,"title",z.target.value),onKeyDown:z=>{z.key==="Enter"&&(z.preventDefault(),D())},placeholder:"Step Title...",className:"w-full bg-transparent border-none text-xs font-bold text-life-text focus:outline-none placeholder:text-life-muted/30",autoFocus:F===w.length-1&&w.length>1})}),l.jsx("button",{type:"button",onClick:()=>j(F,"isTimed",!P.isTimed),className:`p-1.5 rounded-md transition-colors ${P.isTimed?"text-life-gold":"text-life-muted hover:text-white"}`,title:"Toggle Timer",children:l.jsx(vn,{size:14})}),l.jsx("button",{type:"button",onClick:()=>I(P.id),className:"p-1.5 rounded-md transition-colors text-life-muted hover:text-life-gold hover:bg-life-gold/10",title:"Step Details",children:l.jsx(Md,{size:14})}),l.jsx("button",{type:"button",onClick:()=>M(F),className:"text-life-muted hover:text-life-hard p-1.5",children:l.jsx(Dr,{size:14})})]})},P.id))})]}),l.jsx("button",{type:"submit",className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm transition-all shadow-lg ${s?"bg-life-gold text-life-black hover:bg-yellow-400 shadow-life-gold/20":"bg-life-muted/10 text-life-muted cursor-not-allowed"}`,disabled:!s,children:e?"Update Operation":"Launch Operation"})]})};var oh={exports:{}},O_={},L_,uD;function zpe(){if(uD)return L_;uD=1;function t(e,n){typeof n=="boolean"&&(n={forever:n}),this._originalTimeouts=JSON.parse(JSON.stringify(e)),this._timeouts=e,this._options=n||{},this._maxRetryTime=n&&n.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}return L_=t,t.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)},t.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null},t.prototype.retry=function(e){if(this._timeout&&clearTimeout(this._timeout),!e)return!1;var n=new Date().getTime();if(e&&n-this._operationStart>=this._maxRetryTime)return this._errors.push(e),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(e);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var i=this;return this._timer=setTimeout(function(){i._attempts++,i._operationTimeoutCb&&(i._timeout=setTimeout(function(){i._operationTimeoutCb(i._attempts)},i._operationTimeout),i._options.unref&&i._timeout.unref()),i._fn(i._attempts)},r),this._options.unref&&this._timer.unref(),!0},t.prototype.attempt=function(e,n){this._fn=e,n&&(n.timeout&&(this._operationTimeout=n.timeout),n.cb&&(this._operationTimeoutCb=n.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)},t.prototype.try=function(e){console.log("Using RetryOperation.try() is deprecated"),this.attempt(e)},t.prototype.start=function(e){console.log("Using RetryOperation.start() is deprecated"),this.attempt(e)},t.prototype.start=t.prototype.try,t.prototype.errors=function(){return this._errors},t.prototype.attempts=function(){return this._attempts},t.prototype.mainError=function(){if(this._errors.length===0)return null;for(var e={},n=null,r=0,i=0;i<this._errors.length;i++){var s=this._errors[i],o=s.message,c=(e[o]||0)+1;e[o]=c,c>=r&&(n=s,r=c)}return n},L_}var dD;function Upe(){return dD||(dD=1,(function(t){var e=zpe();t.operation=function(n){var r=t.timeouts(n);return new e(r,{forever:n&&(n.forever||n.retries===1/0),unref:n&&n.unref,maxRetryTime:n&&n.maxRetryTime})},t.timeouts=function(n){if(n instanceof Array)return[].concat(n);var r={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var i in n)r[i]=n[i];if(r.minTimeout>r.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var s=[],o=0;o<r.retries;o++)s.push(this.createTimeout(o,r));return n&&n.forever&&!s.length&&s.push(this.createTimeout(o,r)),s.sort(function(c,f){return c-f}),s},t.createTimeout=function(n,r){var i=r.randomize?Math.random()+1:1,s=Math.round(i*Math.max(r.minTimeout,1)*Math.pow(r.factor,n));return s=Math.min(s,r.maxTimeout),s},t.wrap=function(n,r,i){if(r instanceof Array&&(i=r,r=null),!i){i=[];for(var s in n)typeof n[s]=="function"&&i.push(s)}for(var o=0;o<i.length;o++){var c=i[o],f=n[c];n[c]=(function(h){var m=t.operation(r),g=Array.prototype.slice.call(arguments,1),v=g.pop();g.push(function(b){m.retry(b)||(b&&(arguments[0]=m.mainError()),v.apply(this,arguments))}),m.attempt(function(){h.apply(n,g)})}).bind(n,f),n[c].options=r}}})(O_)),O_}var z_,fD;function Vpe(){return fD||(fD=1,z_=Upe()),z_}var hD;function Fpe(){if(hD)return oh.exports;hD=1;const t=Vpe(),e=["Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Network request failed"];class n extends Error{constructor(c){super(),c instanceof Error?(this.originalError=c,{message:c}=c):(this.originalError=new Error(c),this.originalError.stack=this.stack),this.name="AbortError",this.message=c}}const r=(o,c,f)=>{const d=f.retries-(c-1);return o.attemptNumber=c,o.retriesLeft=d,o},i=o=>e.includes(o),s=(o,c)=>new Promise((f,d)=>{c={onFailedAttempt:()=>{},retries:10,...c};const h=t.operation(c);h.attempt(async m=>{try{f(await o(m))}catch(g){if(!(g instanceof Error)){d(new TypeError(`Non-error was thrown: "${g}". You should only throw errors.`));return}if(g instanceof n)h.stop(),d(g.originalError);else if(g instanceof TypeError&&!i(g.message))h.stop(),d(g);else{r(g,m,c);try{await c.onFailedAttempt(g)}catch(v){d(v);return}h.retry(g)||d(h.mainError())}}})});return oh.exports=s,oh.exports.default=s,oh.exports.AbortError=n,oh.exports}var G8=Fpe();const Bpe=ws(G8);var Hpe={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let qpe,$pe;function Gpe(){return{geminiUrl:qpe,vertexUrl:$pe}}function Kpe(t,e,n,r){var i,s;if(!(t!=null&&t.baseUrl)){const o=Gpe();return e?(i=o.vertexUrl)!==null&&i!==void 0?i:n:(s=o.geminiUrl)!==null&&s!==void 0?s:r}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class fa{}function Ue(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(r,i)=>{if(Object.prototype.hasOwnProperty.call(e,i)){const s=e[i];return s!=null?String(s):""}else throw new Error(`Key '${i}' not found in valueMap.`)})}function _(t,e,n){for(let s=0;s<e.length-1;s++){const o=e[s];if(o.endsWith("[]")){const c=o.slice(0,-2);if(!(c in t))if(Array.isArray(n))t[c]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(t[c])){const f=t[c];if(Array.isArray(n))for(let d=0;d<f.length;d++){const h=f[d];_(h,e.slice(s+1),n[d])}else for(const d of f)_(d,e.slice(s+1),n)}return}else if(o.endsWith("[0]")){const c=o.slice(0,-3);c in t||(t[c]=[{}]);const f=t[c];_(f[0],e.slice(s+1),n);return}(!t[o]||typeof t[o]!="object")&&(t[o]={}),t=t[o]}const r=e[e.length-1],i=t[r];if(i!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===i)return;if(typeof i=="object"&&typeof n=="object"&&i!==null&&n!==null)Object.assign(i,n);else throw new Error(`Cannot set value for an existing key. Key: ${r}`)}else r==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[r]=n}function x(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let r=0;r<e.length;r++){if(typeof t!="object"||t===null)return n;const i=e[r];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in t){const o=t[s];return Array.isArray(o)?o.map(c=>x(c,e.slice(r+1),n)):n}else return n}else t=t[i]}return t}catch(r){if(r instanceof TypeError)return n;throw r}}function Wpe(t,e){for(const[n,r]of Object.entries(e)){const i=n.split("."),s=r.split("."),o=new Set;let c=-1;for(let f=0;f<i.length;f++)if(i[f]==="*"){c=f;break}if(c!==-1&&s.length>c)for(let f=c;f<s.length;f++){const d=s[f];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&o.add(d)}hS(t,i,s,0,o)}}function hS(t,e,n,r,i){if(r>=e.length||typeof t!="object"||t===null)return;const s=e[r];if(s.endsWith("[]")){const o=s.slice(0,-2),c=t;if(o in c&&Array.isArray(c[o]))for(const f of c[o])hS(f,e,n,r+1,i)}else if(s==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const o=t,c=Object.keys(o).filter(d=>!d.startsWith("_")&&!i.has(d)),f={};for(const d of c)f[d]=o[d];for(const[d,h]of Object.entries(f)){const m=[];for(const g of n.slice(r))g==="*"?m.push(d):m.push(g);_(o,m,h)}for(const d of c)delete o[d]}}else{const o=t;s in o&&hS(o[s],e,n,r+1,i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function sA(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ype(t){const e={},n=x(t,["operationName"]);n!=null&&_(e,["operationName"],n);const r=x(t,["resourceName"]);return r!=null&&_(e,["_url","resourceName"],r),e}function Xpe(t){const e={},n=x(t,["name"]);n!=null&&_(e,["name"],n);const r=x(t,["metadata"]);r!=null&&_(e,["metadata"],r);const i=x(t,["done"]);i!=null&&_(e,["done"],i);const s=x(t,["error"]);s!=null&&_(e,["error"],s);const o=x(t,["response","generateVideoResponse"]);return o!=null&&_(e,["response"],Qpe(o)),e}function Jpe(t){const e={},n=x(t,["name"]);n!=null&&_(e,["name"],n);const r=x(t,["metadata"]);r!=null&&_(e,["metadata"],r);const i=x(t,["done"]);i!=null&&_(e,["done"],i);const s=x(t,["error"]);s!=null&&_(e,["error"],s);const o=x(t,["response"]);return o!=null&&_(e,["response"],Zpe(o)),e}function Qpe(t){const e={},n=x(t,["generatedSamples"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>eme(o))),_(e,["generatedVideos"],s)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&_(e,["raiMediaFilteredCount"],r);const i=x(t,["raiMediaFilteredReasons"]);return i!=null&&_(e,["raiMediaFilteredReasons"],i),e}function Zpe(t){const e={},n=x(t,["videos"]);if(n!=null){let s=n;Array.isArray(s)&&(s=s.map(o=>tme(o))),_(e,["generatedVideos"],s)}const r=x(t,["raiMediaFilteredCount"]);r!=null&&_(e,["raiMediaFilteredCount"],r);const i=x(t,["raiMediaFilteredReasons"]);return i!=null&&_(e,["raiMediaFilteredReasons"],i),e}function eme(t){const e={},n=x(t,["video"]);return n!=null&&_(e,["video"],ame(n)),e}function tme(t){const e={},n=x(t,["_self"]);return n!=null&&_(e,["video"],lme(n)),e}function nme(t){const e={},n=x(t,["operationName"]);return n!=null&&_(e,["_url","operationName"],n),e}function rme(t){const e={},n=x(t,["operationName"]);return n!=null&&_(e,["_url","operationName"],n),e}function ime(t){const e={},n=x(t,["name"]);n!=null&&_(e,["name"],n);const r=x(t,["metadata"]);r!=null&&_(e,["metadata"],r);const i=x(t,["done"]);i!=null&&_(e,["done"],i);const s=x(t,["error"]);s!=null&&_(e,["error"],s);const o=x(t,["response"]);return o!=null&&_(e,["response"],sme(o)),e}function sme(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["parent"]);r!=null&&_(e,["parent"],r);const i=x(t,["documentName"]);return i!=null&&_(e,["documentName"],i),e}function K8(t){const e={},n=x(t,["name"]);n!=null&&_(e,["name"],n);const r=x(t,["metadata"]);r!=null&&_(e,["metadata"],r);const i=x(t,["done"]);i!=null&&_(e,["done"],i);const s=x(t,["error"]);s!=null&&_(e,["error"],s);const o=x(t,["response"]);return o!=null&&_(e,["response"],ome(o)),e}function ome(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["parent"]);r!=null&&_(e,["parent"],r);const i=x(t,["documentName"]);return i!=null&&_(e,["documentName"],i),e}function ame(t){const e={},n=x(t,["uri"]);n!=null&&_(e,["uri"],n);const r=x(t,["encodedVideo"]);r!=null&&_(e,["videoBytes"],sA(r));const i=x(t,["encoding"]);return i!=null&&_(e,["mimeType"],i),e}function lme(t){const e={},n=x(t,["gcsUri"]);n!=null&&_(e,["uri"],n);const r=x(t,["bytesBase64Encoded"]);r!=null&&_(e,["videoBytes"],sA(r));const i=x(t,["mimeType"]);return i!=null&&_(e,["mimeType"],i),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var pD;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(pD||(pD={}));var mD;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(mD||(mD={}));var gD;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(gD||(gD={}));var rl;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(rl||(rl={}));var yD;(function(t){t.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",t.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",t.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",t.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(yD||(yD={}));var vD;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(vD||(vD={}));var xD;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(xD||(xD={}));var bD;(function(t){t.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",t.HTTP_IN_QUERY="HTTP_IN_QUERY",t.HTTP_IN_HEADER="HTTP_IN_HEADER",t.HTTP_IN_PATH="HTTP_IN_PATH",t.HTTP_IN_BODY="HTTP_IN_BODY",t.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(bD||(bD={}));var _D;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(_D||(_D={}));var wD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(wD||(wD={}));var SD;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(SD||(SD={}));var TD;(function(t){t.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH",t.MINIMAL="MINIMAL"})(TD||(TD={}));var ED;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(ED||(ED={}));var AD;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(AD||(AD={}));var CD;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(CD||(CD={}));var ND;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE",t.IMAGE_RECITATION="IMAGE_RECITATION",t.IMAGE_OTHER="IMAGE_OTHER"})(ND||(ND={}));var kD;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(kD||(kD={}));var ID;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(ID||(ID={}));var RD;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(RD||(RD={}));var PD;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(PD||(PD={}));var jD;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(jD||(jD={}));var my;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(my||(my={}));var MD;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(MD||(MD={}));var DD;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(DD||(DD={}));var OD;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(OD||(OD={}));var pS;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(pS||(pS={}));var LD;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V",t.TUNING_TASK_R2V="TUNING_TASK_R2V"})(LD||(LD={}));var zD;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",t.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(zD||(zD={}));var mS;(function(t){t.COLLECTION="COLLECTION"})(mS||(mS={}));var UD;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(UD||(UD={}));var VD;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(VD||(VD={}));var FD;(function(t){t.PROMINENT_PEOPLE_UNSPECIFIED="PROMINENT_PEOPLE_UNSPECIFIED",t.ALLOW_PROMINENT_PEOPLE="ALLOW_PROMINENT_PEOPLE",t.BLOCK_PROMINENT_PEOPLE="BLOCK_PROMINENT_PEOPLE"})(FD||(FD={}));var gy;(function(t){t.PREDICT="PREDICT",t.EMBED_CONTENT="EMBED_CONTENT"})(gy||(gy={}));var BD;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(BD||(BD={}));var HD;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(HD||(HD={}));var qD;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(qD||(qD={}));var $D;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})($D||($D={}));var GD;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(GD||(GD={}));var KD;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(KD||(KD={}));var WD;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(WD||(WD={}));var YD;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})(YD||(YD={}));var XD;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(XD||(XD={}));var JD;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(JD||(JD={}));var QD;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(QD||(QD={}));var ZD;(function(t){t.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",t.PREFERENCE_TUNING="PREFERENCE_TUNING",t.DISTILLATION="DISTILLATION"})(ZD||(ZD={}));var eO;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.STATE_PENDING="STATE_PENDING",t.STATE_ACTIVE="STATE_ACTIVE",t.STATE_FAILED="STATE_FAILED"})(eO||(eO={}));var tO;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(tO||(tO={}));var nO;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED",t.REGISTERED="REGISTERED"})(nO||(nO={}));var rO;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(rO||(rO={}));var iO;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(iO||(iO={}));var sO;(function(t){t.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",t.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",t.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(sO||(sO={}));var oO;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.ACTIVITY_START="ACTIVITY_START",t.ACTIVITY_END="ACTIVITY_END"})(oO||(oO={}));var aO;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(aO||(aO={}));var lO;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(lO||(lO={}));var cO;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(cO||(cO={}));var uO;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(uO||(uO={}));var dO;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(dO||(dO={}));var fO;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(fO||(fO={}));var Gu;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(Gu||(Gu={}));class gS{constructor(e){const n={};for(const r of e.headers.entries())n[r[0]]=r[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class ah{get text(){var e,n,r,i,s,o,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",h=!1;const m=[];for(const g of(f=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[v,b]of Object.entries(g))v!=="text"&&v!=="thought"&&v!=="thoughtSignature"&&(b!==null||b!==void 0)&&m.push(v);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;h=!0,d+=g.text}}return m.length>0&&console.warn(`there are non-text parts ${m} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),h?d:void 0}get data(){var e,n,r,i,s,o,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const h=[];for(const m of(f=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)!==null&&f!==void 0?f:[]){for(const[g,v]of Object.entries(m))g!=="inlineData"&&(v!==null||v!==void 0)&&h.push(g);m.inlineData&&typeof m.inlineData.data=="string"&&(d+=atob(m.inlineData.data))}return h.length>0&&console.warn(`there are non-data parts ${h} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,r,i,s,o,c,f;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(f=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(h=>h.functionCall).map(h=>h.functionCall).filter(h=>h!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,r,i,s,o,c,f,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const h=(f=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.executableCode).map(m=>m.executableCode).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,r,i,s,o,c,f,d;if(((i=(r=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||r===void 0?void 0:r.parts)===null||i===void 0?void 0:i.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const h=(f=(c=(o=(s=this.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content)===null||c===void 0?void 0:c.parts)===null||f===void 0?void 0:f.filter(m=>m.codeExecutionResult).map(m=>m.codeExecutionResult).filter(m=>m!==void 0);if((h==null?void 0:h.length)!==0)return(d=h==null?void 0:h[0])===null||d===void 0?void 0:d.output}}class hO{}class pO{}class cme{}class ume{}class dme{}class fme{}class mO{}class gO{}class yO{}class hme{}class yy{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new yy;let i;const s=e;return n?i=Jpe(s):i=Xpe(s),Object.assign(r,i),r}}class vO{}class xO{}class bO{}class _O{}class pme{}class mme{}class gme{}class oA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new oA,s=ime(e);return Object.assign(r,s),r}}class yme{}class vme{}class xme{}class bme{}class wO{}class _me{get text(){var e,n,r;let i="",s=!1;const o=[];for(const c of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[f,d]of Object.entries(c))f!=="text"&&f!=="thought"&&d!==null&&o.push(f);if(typeof c.text=="string"){if(typeof c.thought=="boolean"&&c.thought)continue;s=!0,i+=c.text}}return o.length>0&&console.warn(`there are non-text parts ${o} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),s?i:void 0}get data(){var e,n,r;let i="";const s=[];for(const o of(r=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&r!==void 0?r:[]){for(const[c,f]of Object.entries(o))c!=="inlineData"&&f!==null&&s.push(c);o.inlineData&&typeof o.inlineData.data=="string"&&(i+=atob(o.inlineData.data))}return s.length>0&&console.warn(`there are non-data parts ${s} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),i.length>0?btoa(i):void 0}}class wme{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}class aA{_fromAPIResponse({apiResponse:e,_isVertexAI:n}){const r=new aA,s=K8(e);return Object.assign(r,s),r}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function It(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(e.includes("..")||e.includes("?")||e.includes("&"))throw new Error("invalid model parameter");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function W8(t,e){const n=It(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function Y8(t){return Array.isArray(t)?t.map(e=>vy(e)):[vy(t)]}function vy(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function X8(t){const e=vy(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function J8(t){const e=vy(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function SO(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function Q8(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>SO(e)):[SO(t)]}function yS(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function TO(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function EO(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function Gn(t){if(t==null)throw new Error("ContentUnion is required");return yS(t)?t:{role:"user",parts:Q8(t)}}function lA(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const r=Gn(n);return r.parts&&r.parts.length>0&&r.parts[0].text!==void 0?[r.parts[0].text]:[]});if(t.isVertexAI()){const n=Gn(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>Gn(n)):[Gn(e)]}function di(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(TO(t)||EO(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Gn(t)]}const e=[],n=[],r=yS(t[0]);for(const i of t){const s=yS(i);if(s!=r)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(s)e.push(i);else{if(TO(i)||EO(i))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(i)}}return r||e.push({role:"user",parts:Q8(n)}),e}function Sme(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(r=>r!=="null");if(n.length===1)e.type=Object.values(rl).includes(n[0].toUpperCase())?n[0].toUpperCase():rl.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const r of n)e.anyOf.push({type:Object.values(rl).includes(r.toUpperCase())?r.toUpperCase():rl.TYPE_UNSPECIFIED})}}function rd(t){const e={},n=["items"],r=["anyOf"],i=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const s=t.anyOf;s!=null&&s.length==2&&(s[0].type==="null"?(e.nullable=!0,t=s[1]):s[1].type==="null"&&(e.nullable=!0,t=s[0])),t.type instanceof Array&&Sme(t.type,e);for(const[o,c]of Object.entries(t))if(c!=null)if(o=="type"){if(c==="null")throw new Error("type: null can not be the only possible type for the field.");if(c instanceof Array)continue;e.type=Object.values(rl).includes(c.toUpperCase())?c.toUpperCase():rl.TYPE_UNSPECIFIED}else if(n.includes(o))e[o]=rd(c);else if(r.includes(o)){const f=[];for(const d of c){if(d.type=="null"){e.nullable=!0;continue}f.push(rd(d))}e[o]=f}else if(i.includes(o)){const f={};for(const[d,h]of Object.entries(c))f[d]=rd(h);e[o]=f}else{if(o==="additionalProperties")continue;e[o]=c}return e}function cA(t){return rd(t)}function uA(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function dA(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Gd(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=rd(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=rd(e.response));return t}function Kd(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function Tme(t,e,n,r=1){const i=!e.startsWith(`${n}/`)&&e.split("/").length===r;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:i?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:i?`${n}/${e}`:e}function ha(t,e){if(typeof e!="string")throw new Error("name must be a string");return Tme(t,e,"cachedContents")}function Z8(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Sl(t){return sA(t)}function Eme(t){return t!=null&&typeof t=="object"&&"name"in t}function Ame(t){return t!=null&&typeof t=="object"&&"video"in t}function Cme(t){return t!=null&&typeof t=="object"&&"uri"in t}function eV(t){var e;let n;if(Eme(t)&&(n=t.name),!(Cme(t)&&(n=t.uri,n===void 0))&&!(Ame(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const i=n.split("files/")[1].match(/[a-z0-9]+/);if(i===null)throw new Error(`Could not extract file name from URI ${n}`);n=i[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function tV(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function nV(t){for(const e of["models","tunedModels","publisherModels"])if(Nme(t,e))return t[e];return[]}function Nme(t,e){return t!==null&&typeof t=="object"&&e in t}function kme(t,e={}){const n=t,r={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(r.responseJsonSchema=n.outputSchema),e.behavior&&(r.behavior=e.behavior),{functionDeclarations:[r]}}function Ime(t,e={}){const n=[],r=new Set;for(const i of t){const s=i.name;if(r.has(s))throw new Error(`Duplicate function name ${s} found in MCP tools. Please ensure function names are unique.`);r.add(s);const o=kme(i,e);o.functionDeclarations&&n.push(...o.functionDeclarations)}return{functionDeclarations:n}}function rV(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const r=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,i=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(i>0||r!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(r>0||i!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function Rme(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function iV(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const i=n.inlinedResponses;if(!Array.isArray(i)||i.length===0)return t;let s=!1;for(const o of i){if(typeof o!="object"||o===null)continue;const f=o.response;if(typeof f!="object"||f===null)continue;if(f.embedding!==void 0){s=!0;break}}return s&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function Wd(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function sV(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}function Pme(t){return t.includes("gemini")&&t!=="gemini-embedding-001"||t.includes("maas")}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jme(t){const e={},n=x(t,["responsesFile"]);n!=null&&_(e,["fileName"],n);const r=x(t,["inlinedResponses","inlinedResponses"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>hge(o))),_(e,["inlinedResponses"],s)}const i=x(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["inlinedEmbedContentResponses"],s)}return e}function Mme(t){const e={},n=x(t,["predictionsFormat"]);n!=null&&_(e,["format"],n);const r=x(t,["gcsDestination","outputUriPrefix"]);r!=null&&_(e,["gcsUri"],r);const i=x(t,["bigqueryDestination","outputUri"]);return i!=null&&_(e,["bigqueryUri"],i),e}function Dme(t){const e={},n=x(t,["format"]);n!=null&&_(e,["predictionsFormat"],n);const r=x(t,["gcsUri"]);r!=null&&_(e,["gcsDestination","outputUriPrefix"],r);const i=x(t,["bigqueryUri"]);if(i!=null&&_(e,["bigqueryDestination","outputUri"],i),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(x(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function Jg(t){const e={},n=x(t,["name"]);n!=null&&_(e,["name"],n);const r=x(t,["metadata","displayName"]);r!=null&&_(e,["displayName"],r);const i=x(t,["metadata","state"]);i!=null&&_(e,["state"],sV(i));const s=x(t,["metadata","createTime"]);s!=null&&_(e,["createTime"],s);const o=x(t,["metadata","endTime"]);o!=null&&_(e,["endTime"],o);const c=x(t,["metadata","updateTime"]);c!=null&&_(e,["updateTime"],c);const f=x(t,["metadata","model"]);f!=null&&_(e,["model"],f);const d=x(t,["metadata","output"]);return d!=null&&_(e,["dest"],jme(iV(d))),e}function vS(t){const e={},n=x(t,["name"]);n!=null&&_(e,["name"],n);const r=x(t,["displayName"]);r!=null&&_(e,["displayName"],r);const i=x(t,["state"]);i!=null&&_(e,["state"],sV(i));const s=x(t,["error"]);s!=null&&_(e,["error"],s);const o=x(t,["createTime"]);o!=null&&_(e,["createTime"],o);const c=x(t,["startTime"]);c!=null&&_(e,["startTime"],c);const f=x(t,["endTime"]);f!=null&&_(e,["endTime"],f);const d=x(t,["updateTime"]);d!=null&&_(e,["updateTime"],d);const h=x(t,["model"]);h!=null&&_(e,["model"],h);const m=x(t,["inputConfig"]);m!=null&&_(e,["src"],Ome(m));const g=x(t,["outputConfig"]);g!=null&&_(e,["dest"],Mme(iV(g)));const v=x(t,["completionStats"]);return v!=null&&_(e,["completionStats"],v),e}function Ome(t){const e={},n=x(t,["instancesFormat"]);n!=null&&_(e,["format"],n);const r=x(t,["gcsSource","uris"]);r!=null&&_(e,["gcsUri"],r);const i=x(t,["bigquerySource","inputUri"]);return i!=null&&_(e,["bigqueryUri"],i),e}function Lme(t,e){const n={};if(x(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(x(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const r=x(e,["fileName"]);r!=null&&_(n,["fileName"],r);const i=x(e,["inlinedRequests"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>fge(t,o))),_(n,["requests","requests"],s)}return n}function zme(t){const e={},n=x(t,["format"]);n!=null&&_(e,["instancesFormat"],n);const r=x(t,["gcsUri"]);r!=null&&_(e,["gcsSource","uris"],r);const i=x(t,["bigqueryUri"]);if(i!=null&&_(e,["bigquerySource","inputUri"],i),x(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(x(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Ume(t){const e={},n=x(t,["data"]);if(n!=null&&_(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Vme(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],Wd(t,r)),n}function Fme(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],Wd(t,r)),n}function Bme(t){const e={},n=x(t,["content"]);n!=null&&_(e,["content"],n);const r=x(t,["citationMetadata"]);r!=null&&_(e,["citationMetadata"],Hme(r));const i=x(t,["tokenCount"]);i!=null&&_(e,["tokenCount"],i);const s=x(t,["finishReason"]);s!=null&&_(e,["finishReason"],s);const o=x(t,["groundingMetadata"]);o!=null&&_(e,["groundingMetadata"],o);const c=x(t,["avgLogprobs"]);c!=null&&_(e,["avgLogprobs"],c);const f=x(t,["index"]);f!=null&&_(e,["index"],f);const d=x(t,["logprobsResult"]);d!=null&&_(e,["logprobsResult"],d);const h=x(t,["safetyRatings"]);if(h!=null){let g=h;Array.isArray(g)&&(g=g.map(v=>v)),_(e,["safetyRatings"],g)}const m=x(t,["urlContextMetadata"]);return m!=null&&_(e,["urlContextMetadata"],m),e}function Hme(t){const e={},n=x(t,["citationSources"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),_(e,["citations"],r)}return e}function oV(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>bge(s))),_(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&_(e,["role"],r),e}function qme(t,e){const n={},r=x(t,["displayName"]);if(e!==void 0&&r!=null&&_(e,["batch","displayName"],r),x(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function $me(t,e){const n={},r=x(t,["displayName"]);e!==void 0&&r!=null&&_(e,["displayName"],r);const i=x(t,["dest"]);return e!==void 0&&i!=null&&_(e,["outputConfig"],Dme(Rme(i))),n}function AO(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["_url","model"],It(t,r));const i=x(e,["src"]);i!=null&&_(n,["batch","inputConfig"],Lme(t,rV(t,i)));const s=x(e,["config"]);return s!=null&&qme(s,n),n}function Gme(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["model"],It(t,r));const i=x(e,["src"]);i!=null&&_(n,["inputConfig"],zme(rV(t,i)));const s=x(e,["config"]);return s!=null&&$me(s,n),n}function Kme(t,e){const n={},r=x(t,["displayName"]);return e!==void 0&&r!=null&&_(e,["batch","displayName"],r),n}function Wme(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["_url","model"],It(t,r));const i=x(e,["src"]);i!=null&&_(n,["batch","inputConfig"],tge(t,i));const s=x(e,["config"]);return s!=null&&Kme(s,n),n}function Yme(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],Wd(t,r)),n}function Xme(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],Wd(t,r)),n}function Jme(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&_(e,["name"],r);const i=x(t,["done"]);i!=null&&_(e,["done"],i);const s=x(t,["error"]);return s!=null&&_(e,["error"],s),e}function Qme(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["name"]);r!=null&&_(e,["name"],r);const i=x(t,["done"]);i!=null&&_(e,["done"],i);const s=x(t,["error"]);return s!=null&&_(e,["error"],s),e}function Zme(t,e){const n={},r=x(e,["contents"]);if(r!=null){let s=lA(t,r);Array.isArray(s)&&(s=s.map(o=>o)),_(n,["requests[]","request","content"],s)}const i=x(e,["config"]);return i!=null&&(_(n,["_self"],ege(i,n)),Wpe(n,{"requests[].*":"requests[].request.*"})),n}function ege(t,e){const n={},r=x(t,["taskType"]);e!==void 0&&r!=null&&_(e,["requests[]","taskType"],r);const i=x(t,["title"]);e!==void 0&&i!=null&&_(e,["requests[]","title"],i);const s=x(t,["outputDimensionality"]);if(e!==void 0&&s!=null&&_(e,["requests[]","outputDimensionality"],s),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function tge(t,e){const n={},r=x(e,["fileName"]);r!=null&&_(n,["file_name"],r);const i=x(e,["inlinedRequests"]);return i!=null&&_(n,["requests"],Zme(t,i)),n}function nge(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function rge(t){const e={},n=x(t,["id"]);n!=null&&_(e,["id"],n);const r=x(t,["args"]);r!=null&&_(e,["args"],r);const i=x(t,["name"]);if(i!=null&&_(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function ige(t){const e={},n=x(t,["allowedFunctionNames"]);n!=null&&_(e,["allowedFunctionNames"],n);const r=x(t,["mode"]);if(r!=null&&_(e,["mode"],r),x(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function sge(t,e,n){const r={},i=x(e,["systemInstruction"]);n!==void 0&&i!=null&&_(n,["systemInstruction"],oV(Gn(i)));const s=x(e,["temperature"]);s!=null&&_(r,["temperature"],s);const o=x(e,["topP"]);o!=null&&_(r,["topP"],o);const c=x(e,["topK"]);c!=null&&_(r,["topK"],c);const f=x(e,["candidateCount"]);f!=null&&_(r,["candidateCount"],f);const d=x(e,["maxOutputTokens"]);d!=null&&_(r,["maxOutputTokens"],d);const h=x(e,["stopSequences"]);h!=null&&_(r,["stopSequences"],h);const m=x(e,["responseLogprobs"]);m!=null&&_(r,["responseLogprobs"],m);const g=x(e,["logprobs"]);g!=null&&_(r,["logprobs"],g);const v=x(e,["presencePenalty"]);v!=null&&_(r,["presencePenalty"],v);const b=x(e,["frequencyPenalty"]);b!=null&&_(r,["frequencyPenalty"],b);const w=x(e,["seed"]);w!=null&&_(r,["seed"],w);const S=x(e,["responseMimeType"]);S!=null&&_(r,["responseMimeType"],S);const C=x(e,["responseSchema"]);C!=null&&_(r,["responseSchema"],cA(C));const R=x(e,["responseJsonSchema"]);if(R!=null&&_(r,["responseJsonSchema"],R),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const N=x(e,["safetySettings"]);if(n!==void 0&&N!=null){let F=N;Array.isArray(F)&&(F=F.map(z=>_ge(z))),_(n,["safetySettings"],F)}const O=x(e,["tools"]);if(n!==void 0&&O!=null){let F=Kd(O);Array.isArray(F)&&(F=F.map(z=>Sge(Gd(z)))),_(n,["tools"],F)}const k=x(e,["toolConfig"]);if(n!==void 0&&k!=null&&_(n,["toolConfig"],wge(k)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const D=x(e,["cachedContent"]);n!==void 0&&D!=null&&_(n,["cachedContent"],ha(t,D));const M=x(e,["responseModalities"]);M!=null&&_(r,["responseModalities"],M);const j=x(e,["mediaResolution"]);j!=null&&_(r,["mediaResolution"],j);const I=x(e,["speechConfig"]);if(I!=null&&_(r,["speechConfig"],uA(I)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const U=x(e,["thinkingConfig"]);U!=null&&_(r,["thinkingConfig"],U);const B=x(e,["imageConfig"]);B!=null&&_(r,["imageConfig"],dge(B));const P=x(e,["enableEnhancedCivicAnswers"]);if(P!=null&&_(r,["enableEnhancedCivicAnswers"],P),x(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return r}function oge(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["candidates"]);if(r!=null){let f=r;Array.isArray(f)&&(f=f.map(d=>Bme(d))),_(e,["candidates"],f)}const i=x(t,["modelVersion"]);i!=null&&_(e,["modelVersion"],i);const s=x(t,["promptFeedback"]);s!=null&&_(e,["promptFeedback"],s);const o=x(t,["responseId"]);o!=null&&_(e,["responseId"],o);const c=x(t,["usageMetadata"]);return c!=null&&_(e,["usageMetadata"],c),e}function age(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],Wd(t,r)),n}function lge(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],Wd(t,r)),n}function cge(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&_(e,["enableWidget"],n),e}function uge(t){const e={},n=x(t,["searchTypes"]);if(n!=null&&_(e,["searchTypes"],n),x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=x(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function dge(t){const e={},n=x(t,["aspectRatio"]);n!=null&&_(e,["aspectRatio"],n);const r=x(t,["imageSize"]);if(r!=null&&_(e,["imageSize"],r),x(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(x(t,["prominentPeople"])!==void 0)throw new Error("prominentPeople parameter is not supported in Gemini API.");if(x(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return e}function fge(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["request","model"],It(t,r));const i=x(e,["contents"]);if(i!=null){let c=di(i);Array.isArray(c)&&(c=c.map(f=>oV(f))),_(n,["request","contents"],c)}const s=x(e,["metadata"]);s!=null&&_(n,["metadata"],s);const o=x(e,["config"]);return o!=null&&_(n,["request","generationConfig"],sge(t,o,x(n,["request"],{}))),n}function hge(t){const e={},n=x(t,["response"]);n!=null&&_(e,["response"],oge(n));const r=x(t,["metadata"]);r!=null&&_(e,["metadata"],r);const i=x(t,["error"]);return i!=null&&_(e,["error"],i),e}function pge(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);if(e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),x(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function mge(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);e!==void 0&&i!=null&&_(e,["_query","pageToken"],i);const s=x(t,["filter"]);return e!==void 0&&s!=null&&_(e,["_query","filter"],s),n}function gge(t){const e={},n=x(t,["config"]);return n!=null&&pge(n,e),e}function yge(t){const e={},n=x(t,["config"]);return n!=null&&mge(n,e),e}function vge(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const i=x(t,["operations"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Jg(o))),_(e,["batchJobs"],s)}return e}function xge(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const i=x(t,["batchPredictionJobs"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>vS(o))),_(e,["batchJobs"],s)}return e}function bge(t){const e={},n=x(t,["mediaResolution"]);n!=null&&_(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&_(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=x(t,["fileData"]);s!=null&&_(e,["fileData"],nge(s));const o=x(t,["functionCall"]);o!=null&&_(e,["functionCall"],rge(o));const c=x(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const f=x(t,["inlineData"]);f!=null&&_(e,["inlineData"],Ume(f));const d=x(t,["text"]);d!=null&&_(e,["text"],d);const h=x(t,["thought"]);h!=null&&_(e,["thought"],h);const m=x(t,["thoughtSignature"]);m!=null&&_(e,["thoughtSignature"],m);const g=x(t,["videoMetadata"]);return g!=null&&_(e,["videoMetadata"],g),e}function _ge(t){const e={},n=x(t,["category"]);if(n!=null&&_(e,["category"],n),x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const r=x(t,["threshold"]);return r!=null&&_(e,["threshold"],r),e}function wge(t){const e={},n=x(t,["retrievalConfig"]);n!=null&&_(e,["retrievalConfig"],n);const r=x(t,["functionCallingConfig"]);return r!=null&&_(e,["functionCallingConfig"],ige(r)),e}function Sge(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&_(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&_(e,["fileSearch"],r);const i=x(t,["googleSearch"]);i!=null&&_(e,["googleSearch"],uge(i));const s=x(t,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(t,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["functionDeclarations"],m)}const c=x(t,["googleMaps"]);c!=null&&_(e,["googleMaps"],cge(c));const f=x(t,["googleSearchRetrieval"]);f!=null&&_(e,["googleSearchRetrieval"],f);const d=x(t,["urlContext"]);d!=null&&_(e,["urlContext"],d);const h=x(t,["mcpServers"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["mcpServers"],m)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var ra;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents",t.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",t.PAGED_ITEM_DOCUMENTS="documents"})(ra||(ra={}));class Fc{constructor(e,n,r,i){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,r,i)}init(e,n,r){var i,s;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let o={config:{}};!r||Object.keys(r).length===0?o={config:{}}:typeof r=="object"?o=Object.assign({},r):o=r,o.config&&(o.config.pageToken=n.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(s=(i=o.config)===null||i===void 0?void 0:i.pageSize)!==null&&s!==void 0?s:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Tge extends fa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fc(ra.PAGED_ITEM_BATCH_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)}}createInlinedGenerateContentRequest(e){const n=AO(this.apiClient,e),r=n._url,i=Ue("{model}:batchGenerateContent",r),c=n.batch.inputConfig.requests,f=c.requests,d=[];for(const h of f){const m=Object.assign({},h);if(m.systemInstruction){const g=m.systemInstruction;delete m.systemInstruction;const v=m.request;v.systemInstruction=g,m.request=v}d.push(m)}return c.requests=d,delete n.config,delete n._url,delete n._query,{path:i,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const r=n?Object.assign({},n):{},i=Date.now().toString();if(r.displayName||(r.displayName=`genaiBatchJob_${i}`),r.dest===void 0){const s=this.getGcsUri(e),o=this.getBigqueryUri(e);if(s)s.endsWith(".jsonl")?r.dest=`${s.slice(0,-6)}/dest`:r.dest=`${s}_dest_${i}`;else if(o)r.dest=`${o}_dest_${i}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return r}async createInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Gme(this.apiClient,e);return c=Ue("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>vS(h))}else{const d=AO(this.apiClient,e);return c=Ue("{model}:batchGenerateContent",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Jg(h))}}async createEmbeddingsInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Wme(this.apiClient,e);return s=Ue("{model}:asyncBatchEmbedContent",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>Jg(f))}}async get(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=lge(this.apiClient,e);return c=Ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>vS(h))}else{const d=age(this.apiClient,e);return c=Ue("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>Jg(h))}}async cancel(e){var n,r,i,s;let o="",c={};if(this.apiClient.isVertexAI()){const f=Fme(this.apiClient,e);o=Ue("batchPredictionJobs/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}else{const f=Vme(this.apiClient,e);o=Ue("batches/{name}:cancel",f._url),c=f._query,delete f._url,delete f._query,await this.apiClient.request({path:o,queryParams:c,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal})}}async listInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=yge(e);return c=Ue("batchPredictionJobs",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=xge(h),g=new wO;return Object.assign(g,m),g})}else{const d=gge(e);return c=Ue("batches",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=vge(h),g=new wO;return Object.assign(g,m),g})}}async delete(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Xme(this.apiClient,e);return c=Ue("batchPredictionJobs/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>Qme(h))}else{const d=Yme(this.apiClient,e);return c=Ue("batches/{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>Jme(h))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ege(t){const e={},n=x(t,["data"]);if(n!=null&&_(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function CO(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Wge(s))),_(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&_(e,["role"],r),e}function Age(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const i=x(t,["expireTime"]);e!==void 0&&i!=null&&_(e,["expireTime"],i);const s=x(t,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const o=x(t,["contents"]);if(e!==void 0&&o!=null){let h=di(o);Array.isArray(h)&&(h=h.map(m=>CO(m))),_(e,["contents"],h)}const c=x(t,["systemInstruction"]);e!==void 0&&c!=null&&_(e,["systemInstruction"],CO(Gn(c)));const f=x(t,["tools"]);if(e!==void 0&&f!=null){let h=f;Array.isArray(h)&&(h=h.map(m=>Xge(m))),_(e,["tools"],h)}const d=x(t,["toolConfig"]);if(e!==void 0&&d!=null&&_(e,["toolConfig"],Yge(d)),x(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function Cge(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const i=x(t,["expireTime"]);e!==void 0&&i!=null&&_(e,["expireTime"],i);const s=x(t,["displayName"]);e!==void 0&&s!=null&&_(e,["displayName"],s);const o=x(t,["contents"]);if(e!==void 0&&o!=null){let m=di(o);Array.isArray(m)&&(m=m.map(g=>g)),_(e,["contents"],m)}const c=x(t,["systemInstruction"]);e!==void 0&&c!=null&&_(e,["systemInstruction"],Gn(c));const f=x(t,["tools"]);if(e!==void 0&&f!=null){let m=f;Array.isArray(m)&&(m=m.map(g=>Jge(g))),_(e,["tools"],m)}const d=x(t,["toolConfig"]);e!==void 0&&d!=null&&_(e,["toolConfig"],d);const h=x(t,["kmsKeyName"]);return e!==void 0&&h!=null&&_(e,["encryption_spec","kmsKeyName"],h),n}function Nge(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["model"],W8(t,r));const i=x(e,["config"]);return i!=null&&Age(i,n),n}function kge(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["model"],W8(t,r));const i=x(e,["config"]);return i!=null&&Cge(i,n),n}function Ige(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],ha(t,r)),n}function Rge(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],ha(t,r)),n}function Pge(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&_(e,["sdkHttpResponse"],n),e}function jge(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&_(e,["sdkHttpResponse"],n),e}function Mge(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Dge(t){const e={},n=x(t,["id"]);n!=null&&_(e,["id"],n);const r=x(t,["args"]);r!=null&&_(e,["args"],r);const i=x(t,["name"]);if(i!=null&&_(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Oge(t){const e={},n=x(t,["allowedFunctionNames"]);n!=null&&_(e,["allowedFunctionNames"],n);const r=x(t,["mode"]);if(r!=null&&_(e,["mode"],r),x(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return e}function Lge(t){const e={},n=x(t,["description"]);n!=null&&_(e,["description"],n);const r=x(t,["name"]);r!=null&&_(e,["name"],r);const i=x(t,["parameters"]);i!=null&&_(e,["parameters"],i);const s=x(t,["parametersJsonSchema"]);s!=null&&_(e,["parametersJsonSchema"],s);const o=x(t,["response"]);o!=null&&_(e,["response"],o);const c=x(t,["responseJsonSchema"]);if(c!=null&&_(e,["responseJsonSchema"],c),x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function zge(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],ha(t,r)),n}function Uge(t,e){const n={},r=x(e,["name"]);return r!=null&&_(n,["_url","name"],ha(t,r)),n}function Vge(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&_(e,["enableWidget"],n),e}function Fge(t){const e={},n=x(t,["searchTypes"]);if(n!=null&&_(e,["searchTypes"],n),x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=x(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function Bge(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),n}function Hge(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),n}function qge(t){const e={},n=x(t,["config"]);return n!=null&&Bge(n,e),e}function $ge(t){const e={},n=x(t,["config"]);return n!=null&&Hge(n,e),e}function Gge(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const i=x(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["cachedContents"],s)}return e}function Kge(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const i=x(t,["cachedContents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["cachedContents"],s)}return e}function Wge(t){const e={},n=x(t,["mediaResolution"]);n!=null&&_(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&_(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=x(t,["fileData"]);s!=null&&_(e,["fileData"],Mge(s));const o=x(t,["functionCall"]);o!=null&&_(e,["functionCall"],Dge(o));const c=x(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const f=x(t,["inlineData"]);f!=null&&_(e,["inlineData"],Ege(f));const d=x(t,["text"]);d!=null&&_(e,["text"],d);const h=x(t,["thought"]);h!=null&&_(e,["thought"],h);const m=x(t,["thoughtSignature"]);m!=null&&_(e,["thoughtSignature"],m);const g=x(t,["videoMetadata"]);return g!=null&&_(e,["videoMetadata"],g),e}function Yge(t){const e={},n=x(t,["retrievalConfig"]);n!=null&&_(e,["retrievalConfig"],n);const r=x(t,["functionCallingConfig"]);return r!=null&&_(e,["functionCallingConfig"],Oge(r)),e}function Xge(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&_(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&_(e,["fileSearch"],r);const i=x(t,["googleSearch"]);i!=null&&_(e,["googleSearch"],Fge(i));const s=x(t,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(t,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["functionDeclarations"],m)}const c=x(t,["googleMaps"]);c!=null&&_(e,["googleMaps"],Vge(c));const f=x(t,["googleSearchRetrieval"]);f!=null&&_(e,["googleSearchRetrieval"],f);const d=x(t,["urlContext"]);d!=null&&_(e,["urlContext"],d);const h=x(t,["mcpServers"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["mcpServers"],m)}return e}function Jge(t){const e={},n=x(t,["retrieval"]);n!=null&&_(e,["retrieval"],n);const r=x(t,["computerUse"]);if(r!=null&&_(e,["computerUse"],r),x(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=x(t,["googleSearch"]);i!=null&&_(e,["googleSearch"],i);const s=x(t,["codeExecution"]);s!=null&&_(e,["codeExecution"],s);const o=x(t,["enterpriseWebSearch"]);o!=null&&_(e,["enterpriseWebSearch"],o);const c=x(t,["functionDeclarations"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>Lge(g))),_(e,["functionDeclarations"],m)}const f=x(t,["googleMaps"]);f!=null&&_(e,["googleMaps"],f);const d=x(t,["googleSearchRetrieval"]);d!=null&&_(e,["googleSearchRetrieval"],d);const h=x(t,["urlContext"]);if(h!=null&&_(e,["urlContext"],h),x(t,["mcpServers"])!==void 0)throw new Error("mcpServers parameter is not supported in Vertex AI.");return e}function Qge(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const i=x(t,["expireTime"]);return e!==void 0&&i!=null&&_(e,["expireTime"],i),n}function Zge(t,e){const n={},r=x(t,["ttl"]);e!==void 0&&r!=null&&_(e,["ttl"],r);const i=x(t,["expireTime"]);return e!==void 0&&i!=null&&_(e,["expireTime"],i),n}function e0e(t,e){const n={},r=x(e,["name"]);r!=null&&_(n,["_url","name"],ha(t,r));const i=x(e,["config"]);return i!=null&&Qge(i,n),n}function t0e(t,e){const n={},r=x(e,["name"]);r!=null&&_(n,["_url","name"],ha(t,r));const i=x(e,["config"]);return i!=null&&Zge(i,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n0e extends fa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fc(ra.PAGED_ITEM_CACHED_CONTENTS,r=>this.listInternal(r),await this.listInternal(n),n)}async create(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=kge(this.apiClient,e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=Nge(this.apiClient,e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async get(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Uge(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=zge(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async delete(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Rge(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=jge(h),g=new bO;return Object.assign(g,m),g})}else{const d=Ige(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Pge(h),g=new bO;return Object.assign(g,m),g})}}async update(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=t0e(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>h)}else{const d=e0e(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>h)}}async listInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=$ge(e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Kge(h),g=new _O;return Object.assign(g,m),g})}else{const d=qge(e);return c=Ue("cachedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Gge(h),g=new _O;return Object.assign(g,m),g})}}}function xy(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function NO(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function it(t){return this instanceof it?(this.v=t,this):new it(t)}function ys(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(t,e||[]),i,s=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),c("next"),c("throw"),c("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(v){return function(b){return Promise.resolve(b).then(v,m)}}function c(v,b){r[v]&&(i[v]=function(w){return new Promise(function(S,C){s.push([v,w,S,C])>1||f(v,w)})},b&&(i[v]=b(i[v])))}function f(v,b){try{d(r[v](b))}catch(w){g(s[0][3],w)}}function d(v){v.value instanceof it?Promise.resolve(v.value.v).then(h,m):g(s[0][2],v)}function h(v){f("next",v)}function m(v){f("throw",v)}function g(v,b){v(b),s.shift(),s.length&&f(s[0][0],s[0][1])}}function vs(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof NO=="function"?NO(t):t[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=t[s]&&function(o){return new Promise(function(c,f){o=t[s](o),i(c,f,o.done,o.value)})}}function i(s,o,c,f){Promise.resolve(f).then(function(d){s({value:d,done:c})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function r0e(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:aV(n)}function aV(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function i0e(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function kO(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let r=0;for(;r<n;)if(t[r].role==="user")e.push(t[r]),r++;else{const i=[];let s=!0;for(;r<n&&t[r].role==="model";)i.push(t[r]),s&&!aV(t[r])&&(s=!1),r++;s?e.push(...i):e.pop()}return e}class s0e{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new o0e(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class o0e{constructor(e,n,r,i={},s=[]){this.apiClient=e,this.modelsModule=n,this.model=r,this.config=i,this.history=s,this.sendPromise=Promise.resolve(),i0e(s)}async sendMessage(e){var n;await this.sendPromise;const r=Gn(e.message),i=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var s,o,c;const f=await i,d=(o=(s=f.candidates)===null||s===void 0?void 0:s[0])===null||o===void 0?void 0:o.content,h=f.automaticFunctionCallingHistory,m=this.getHistory(!0).length;let g=[];h!=null&&(g=(c=h.slice(m))!==null&&c!==void 0?c:[]);const v=d?[d]:[];this.recordHistory(r,v,g)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),i}async sendMessageStream(e){var n;await this.sendPromise;const r=Gn(e.message),i=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(r),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=i.then(()=>{}).catch(()=>{});const s=await i;return this.processStreamResponse(s,r)}getHistory(e=!1){const n=e?kO(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){return ys(this,arguments,function*(){var i,s,o,c,f,d;const h=[];try{for(var m=!0,g=vs(e),v;v=yield it(g.next()),i=v.done,!i;m=!0){c=v.value,m=!1;const b=c;if(r0e(b)){const w=(d=(f=b.candidates)===null||f===void 0?void 0:f[0])===null||d===void 0?void 0:d.content;w!==void 0&&h.push(w)}yield yield it(b)}}catch(b){s={error:b}}finally{try{!m&&!i&&(o=g.return)&&(yield it(o.call(g)))}finally{if(s)throw s.error}}this.recordHistory(n,h)})}recordHistory(e,n,r){let i=[];n.length>0&&n.every(s=>s.role!==void 0)?i=n:i.push({role:"model",parts:[]}),r&&r.length>0?this.history.push(...kO(r)):this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class np extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,np.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function a0e(t){const e={},n=x(t,["file"]);return n!=null&&_(e,["file"],n),e}function l0e(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&_(e,["sdkHttpResponse"],n),e}function c0e(t){const e={},n=x(t,["name"]);return n!=null&&_(e,["_url","file"],eV(n)),e}function u0e(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&_(e,["sdkHttpResponse"],n),e}function d0e(t){const e={},n=x(t,["name"]);return n!=null&&_(e,["_url","file"],eV(n)),e}function f0e(t){const e={},n=x(t,["uris"]);return n!=null&&_(e,["uris"],n),e}function h0e(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),n}function p0e(t){const e={},n=x(t,["config"]);return n!=null&&h0e(n,e),e}function m0e(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const i=x(t,["files"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["files"],s)}return e}function g0e(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),_(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class y0e extends fa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fc(ra.PAGED_ITEM_FILES,r=>this.listInternal(r),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async registerFiles(e){throw new Error("registerFiles is only supported in Node.js environments.")}async _registerFiles(e){return this.registerFilesInternal(e)}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=p0e(e);return s=Ue("files",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=m0e(f),h=new yme;return Object.assign(h,d),h})}}async createInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=a0e(e);return s=Ue("upload/v1beta/files",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=l0e(f),h=new vme;return Object.assign(h,d),h})}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=d0e(e);return s=Ue("files/{file}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=c0e(e);return s=Ue("files/{file}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=u0e(f),h=new xme;return Object.assign(h,d),h})}}async registerFilesInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=f0e(e);return s=Ue("files:register",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=g0e(f),h=new bme;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Qg(t){const e={},n=x(t,["data"]);if(n!=null&&_(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function v0e(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>M0e(s))),_(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&_(e,["role"],r),e}function x0e(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function b0e(t){const e={},n=x(t,["id"]);n!=null&&_(e,["id"],n);const r=x(t,["args"]);r!=null&&_(e,["args"],r);const i=x(t,["name"]);if(i!=null&&_(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function _0e(t){const e={},n=x(t,["description"]);n!=null&&_(e,["description"],n);const r=x(t,["name"]);r!=null&&_(e,["name"],r);const i=x(t,["parameters"]);i!=null&&_(e,["parameters"],i);const s=x(t,["parametersJsonSchema"]);s!=null&&_(e,["parametersJsonSchema"],s);const o=x(t,["response"]);o!=null&&_(e,["response"],o);const c=x(t,["responseJsonSchema"]);if(c!=null&&_(e,["responseJsonSchema"],c),x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return e}function w0e(t){const e={},n=x(t,["modelSelectionConfig"]);n!=null&&_(e,["modelConfig"],n);const r=x(t,["responseJsonSchema"]);r!=null&&_(e,["responseJsonSchema"],r);const i=x(t,["audioTimestamp"]);i!=null&&_(e,["audioTimestamp"],i);const s=x(t,["candidateCount"]);s!=null&&_(e,["candidateCount"],s);const o=x(t,["enableAffectiveDialog"]);o!=null&&_(e,["enableAffectiveDialog"],o);const c=x(t,["frequencyPenalty"]);c!=null&&_(e,["frequencyPenalty"],c);const f=x(t,["logprobs"]);f!=null&&_(e,["logprobs"],f);const d=x(t,["maxOutputTokens"]);d!=null&&_(e,["maxOutputTokens"],d);const h=x(t,["mediaResolution"]);h!=null&&_(e,["mediaResolution"],h);const m=x(t,["presencePenalty"]);m!=null&&_(e,["presencePenalty"],m);const g=x(t,["responseLogprobs"]);g!=null&&_(e,["responseLogprobs"],g);const v=x(t,["responseMimeType"]);v!=null&&_(e,["responseMimeType"],v);const b=x(t,["responseModalities"]);b!=null&&_(e,["responseModalities"],b);const w=x(t,["responseSchema"]);w!=null&&_(e,["responseSchema"],w);const S=x(t,["routingConfig"]);S!=null&&_(e,["routingConfig"],S);const C=x(t,["seed"]);C!=null&&_(e,["seed"],C);const R=x(t,["speechConfig"]);R!=null&&_(e,["speechConfig"],R);const N=x(t,["stopSequences"]);N!=null&&_(e,["stopSequences"],N);const O=x(t,["temperature"]);O!=null&&_(e,["temperature"],O);const k=x(t,["thinkingConfig"]);k!=null&&_(e,["thinkingConfig"],k);const D=x(t,["topK"]);D!=null&&_(e,["topK"],D);const M=x(t,["topP"]);if(M!=null&&_(e,["topP"],M),x(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function S0e(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&_(e,["enableWidget"],n),e}function T0e(t){const e={},n=x(t,["searchTypes"]);if(n!=null&&_(e,["searchTypes"],n),x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=x(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function E0e(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig"],r);const i=x(t,["responseModalities"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","responseModalities"],i);const s=x(t,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=x(t,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const c=x(t,["topK"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topK"],c);const f=x(t,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const d=x(t,["mediaResolution"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","mediaResolution"],d);const h=x(t,["seed"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","seed"],h);const m=x(t,["speechConfig"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","speechConfig"],dA(m));const g=x(t,["thinkingConfig"]);e!==void 0&&g!=null&&_(e,["setup","generationConfig","thinkingConfig"],g);const v=x(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],v);const b=x(t,["systemInstruction"]);e!==void 0&&b!=null&&_(e,["setup","systemInstruction"],v0e(Gn(b)));const w=x(t,["tools"]);if(e!==void 0&&w!=null){let D=Kd(w);Array.isArray(D)&&(D=D.map(M=>O0e(Gd(M)))),_(e,["setup","tools"],D)}const S=x(t,["sessionResumption"]);e!==void 0&&S!=null&&_(e,["setup","sessionResumption"],D0e(S));const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&_(e,["setup","inputAudioTranscription"],C);const R=x(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&_(e,["setup","outputAudioTranscription"],R);const N=x(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&_(e,["setup","realtimeInputConfig"],N);const O=x(t,["contextWindowCompression"]);e!==void 0&&O!=null&&_(e,["setup","contextWindowCompression"],O);const k=x(t,["proactivity"]);if(e!==void 0&&k!=null&&_(e,["setup","proactivity"],k),x(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function A0e(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig"],w0e(r));const i=x(t,["responseModalities"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","responseModalities"],i);const s=x(t,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=x(t,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const c=x(t,["topK"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topK"],c);const f=x(t,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const d=x(t,["mediaResolution"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","mediaResolution"],d);const h=x(t,["seed"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","seed"],h);const m=x(t,["speechConfig"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","speechConfig"],dA(m));const g=x(t,["thinkingConfig"]);e!==void 0&&g!=null&&_(e,["setup","generationConfig","thinkingConfig"],g);const v=x(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],v);const b=x(t,["systemInstruction"]);e!==void 0&&b!=null&&_(e,["setup","systemInstruction"],Gn(b));const w=x(t,["tools"]);if(e!==void 0&&w!=null){let M=Kd(w);Array.isArray(M)&&(M=M.map(j=>L0e(Gd(j)))),_(e,["setup","tools"],M)}const S=x(t,["sessionResumption"]);e!==void 0&&S!=null&&_(e,["setup","sessionResumption"],S);const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&_(e,["setup","inputAudioTranscription"],C);const R=x(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&_(e,["setup","outputAudioTranscription"],R);const N=x(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&_(e,["setup","realtimeInputConfig"],N);const O=x(t,["contextWindowCompression"]);e!==void 0&&O!=null&&_(e,["setup","contextWindowCompression"],O);const k=x(t,["proactivity"]);e!==void 0&&k!=null&&_(e,["setup","proactivity"],k);const D=x(t,["explicitVadSignal"]);return e!==void 0&&D!=null&&_(e,["setup","explicitVadSignal"],D),n}function C0e(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["setup","model"],It(t,r));const i=x(e,["config"]);return i!=null&&_(n,["config"],E0e(i,n)),n}function N0e(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["setup","model"],It(t,r));const i=x(e,["config"]);return i!=null&&_(n,["config"],A0e(i,n)),n}function k0e(t){const e={},n=x(t,["musicGenerationConfig"]);return n!=null&&_(e,["musicGenerationConfig"],n),e}function I0e(t){const e={},n=x(t,["weightedPrompts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>i)),_(e,["weightedPrompts"],r)}return e}function R0e(t){const e={},n=x(t,["media"]);if(n!=null){let d=Y8(n);Array.isArray(d)&&(d=d.map(h=>Qg(h))),_(e,["mediaChunks"],d)}const r=x(t,["audio"]);r!=null&&_(e,["audio"],Qg(J8(r)));const i=x(t,["audioStreamEnd"]);i!=null&&_(e,["audioStreamEnd"],i);const s=x(t,["video"]);s!=null&&_(e,["video"],Qg(X8(s)));const o=x(t,["text"]);o!=null&&_(e,["text"],o);const c=x(t,["activityStart"]);c!=null&&_(e,["activityStart"],c);const f=x(t,["activityEnd"]);return f!=null&&_(e,["activityEnd"],f),e}function P0e(t){const e={},n=x(t,["media"]);if(n!=null){let d=Y8(n);Array.isArray(d)&&(d=d.map(h=>h)),_(e,["mediaChunks"],d)}const r=x(t,["audio"]);r!=null&&_(e,["audio"],J8(r));const i=x(t,["audioStreamEnd"]);i!=null&&_(e,["audioStreamEnd"],i);const s=x(t,["video"]);s!=null&&_(e,["video"],X8(s));const o=x(t,["text"]);o!=null&&_(e,["text"],o);const c=x(t,["activityStart"]);c!=null&&_(e,["activityStart"],c);const f=x(t,["activityEnd"]);return f!=null&&_(e,["activityEnd"],f),e}function j0e(t){const e={},n=x(t,["setupComplete"]);n!=null&&_(e,["setupComplete"],n);const r=x(t,["serverContent"]);r!=null&&_(e,["serverContent"],r);const i=x(t,["toolCall"]);i!=null&&_(e,["toolCall"],i);const s=x(t,["toolCallCancellation"]);s!=null&&_(e,["toolCallCancellation"],s);const o=x(t,["usageMetadata"]);o!=null&&_(e,["usageMetadata"],z0e(o));const c=x(t,["goAway"]);c!=null&&_(e,["goAway"],c);const f=x(t,["sessionResumptionUpdate"]);f!=null&&_(e,["sessionResumptionUpdate"],f);const d=x(t,["voiceActivityDetectionSignal"]);d!=null&&_(e,["voiceActivityDetectionSignal"],d);const h=x(t,["voiceActivity"]);return h!=null&&_(e,["voiceActivity"],U0e(h)),e}function M0e(t){const e={},n=x(t,["mediaResolution"]);n!=null&&_(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&_(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=x(t,["fileData"]);s!=null&&_(e,["fileData"],x0e(s));const o=x(t,["functionCall"]);o!=null&&_(e,["functionCall"],b0e(o));const c=x(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const f=x(t,["inlineData"]);f!=null&&_(e,["inlineData"],Qg(f));const d=x(t,["text"]);d!=null&&_(e,["text"],d);const h=x(t,["thought"]);h!=null&&_(e,["thought"],h);const m=x(t,["thoughtSignature"]);m!=null&&_(e,["thoughtSignature"],m);const g=x(t,["videoMetadata"]);return g!=null&&_(e,["videoMetadata"],g),e}function D0e(t){const e={},n=x(t,["handle"]);if(n!=null&&_(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function O0e(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&_(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&_(e,["fileSearch"],r);const i=x(t,["googleSearch"]);i!=null&&_(e,["googleSearch"],T0e(i));const s=x(t,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(t,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["functionDeclarations"],m)}const c=x(t,["googleMaps"]);c!=null&&_(e,["googleMaps"],S0e(c));const f=x(t,["googleSearchRetrieval"]);f!=null&&_(e,["googleSearchRetrieval"],f);const d=x(t,["urlContext"]);d!=null&&_(e,["urlContext"],d);const h=x(t,["mcpServers"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["mcpServers"],m)}return e}function L0e(t){const e={},n=x(t,["retrieval"]);n!=null&&_(e,["retrieval"],n);const r=x(t,["computerUse"]);if(r!=null&&_(e,["computerUse"],r),x(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const i=x(t,["googleSearch"]);i!=null&&_(e,["googleSearch"],i);const s=x(t,["codeExecution"]);s!=null&&_(e,["codeExecution"],s);const o=x(t,["enterpriseWebSearch"]);o!=null&&_(e,["enterpriseWebSearch"],o);const c=x(t,["functionDeclarations"]);if(c!=null){let m=c;Array.isArray(m)&&(m=m.map(g=>_0e(g))),_(e,["functionDeclarations"],m)}const f=x(t,["googleMaps"]);f!=null&&_(e,["googleMaps"],f);const d=x(t,["googleSearchRetrieval"]);d!=null&&_(e,["googleSearchRetrieval"],d);const h=x(t,["urlContext"]);if(h!=null&&_(e,["urlContext"],h),x(t,["mcpServers"])!==void 0)throw new Error("mcpServers parameter is not supported in Vertex AI.");return e}function z0e(t){const e={},n=x(t,["promptTokenCount"]);n!=null&&_(e,["promptTokenCount"],n);const r=x(t,["cachedContentTokenCount"]);r!=null&&_(e,["cachedContentTokenCount"],r);const i=x(t,["candidatesTokenCount"]);i!=null&&_(e,["responseTokenCount"],i);const s=x(t,["toolUsePromptTokenCount"]);s!=null&&_(e,["toolUsePromptTokenCount"],s);const o=x(t,["thoughtsTokenCount"]);o!=null&&_(e,["thoughtsTokenCount"],o);const c=x(t,["totalTokenCount"]);c!=null&&_(e,["totalTokenCount"],c);const f=x(t,["promptTokensDetails"]);if(f!=null){let v=f;Array.isArray(v)&&(v=v.map(b=>b)),_(e,["promptTokensDetails"],v)}const d=x(t,["cacheTokensDetails"]);if(d!=null){let v=d;Array.isArray(v)&&(v=v.map(b=>b)),_(e,["cacheTokensDetails"],v)}const h=x(t,["candidatesTokensDetails"]);if(h!=null){let v=h;Array.isArray(v)&&(v=v.map(b=>b)),_(e,["responseTokensDetails"],v)}const m=x(t,["toolUsePromptTokensDetails"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(b=>b)),_(e,["toolUsePromptTokensDetails"],v)}const g=x(t,["trafficType"]);return g!=null&&_(e,["trafficType"],g),e}function U0e(t){const e={},n=x(t,["type"]);return n!=null&&_(e,["voiceActivityType"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function V0e(t,e){const n={},r=x(t,["data"]);if(r!=null&&_(n,["data"],r),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const i=x(t,["mimeType"]);return i!=null&&_(n,["mimeType"],i),n}function F0e(t,e){const n={},r=x(t,["content"]);r!=null&&_(n,["content"],r);const i=x(t,["citationMetadata"]);i!=null&&_(n,["citationMetadata"],B0e(i));const s=x(t,["tokenCount"]);s!=null&&_(n,["tokenCount"],s);const o=x(t,["finishReason"]);o!=null&&_(n,["finishReason"],o);const c=x(t,["groundingMetadata"]);c!=null&&_(n,["groundingMetadata"],c);const f=x(t,["avgLogprobs"]);f!=null&&_(n,["avgLogprobs"],f);const d=x(t,["index"]);d!=null&&_(n,["index"],d);const h=x(t,["logprobsResult"]);h!=null&&_(n,["logprobsResult"],h);const m=x(t,["safetyRatings"]);if(m!=null){let v=m;Array.isArray(v)&&(v=v.map(b=>b)),_(n,["safetyRatings"],v)}const g=x(t,["urlContextMetadata"]);return g!=null&&_(n,["urlContextMetadata"],g),n}function B0e(t,e){const n={},r=x(t,["citationSources"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),_(n,["citations"],i)}return n}function H0e(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["contents"]);if(s!=null){let o=di(s);Array.isArray(o)&&(o=o.map(c=>c)),_(r,["contents"],o)}return r}function q0e(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["tokensInfo"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(n,["tokensInfo"],s)}return n}function $0e(t,e){const n={},r=x(t,["values"]);r!=null&&_(n,["values"],r);const i=x(t,["statistics"]);return i!=null&&_(n,["statistics"],G0e(i)),n}function G0e(t,e){const n={},r=x(t,["truncated"]);r!=null&&_(n,["truncated"],r);const i=x(t,["token_count"]);return i!=null&&_(n,["tokenCount"],i),n}function Pp(t,e){const n={},r=x(t,["parts"]);if(r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>tve(o))),_(n,["parts"],s)}const i=x(t,["role"]);return i!=null&&_(n,["role"],i),n}function K0e(t,e){const n={},r=x(t,["controlType"]);r!=null&&_(n,["controlType"],r);const i=x(t,["enableControlImageComputation"]);return i!=null&&_(n,["computeControl"],i),n}function W0e(t,e){const n={};if(x(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(x(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(x(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return n}function Y0e(t,e,n){const r={},i=x(t,["systemInstruction"]);e!==void 0&&i!=null&&_(e,["systemInstruction"],Gn(i));const s=x(t,["tools"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>dV(f))),_(e,["tools"],c)}const o=x(t,["generationConfig"]);return e!==void 0&&o!=null&&_(e,["generationConfig"],Vye(o)),r}function X0e(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["contents"]);if(s!=null){let c=di(s);Array.isArray(c)&&(c=c.map(f=>Pp(f))),_(r,["contents"],c)}const o=x(e,["config"]);return o!=null&&W0e(o),r}function J0e(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["contents"]);if(s!=null){let c=di(s);Array.isArray(c)&&(c=c.map(f=>f)),_(r,["contents"],c)}const o=x(e,["config"]);return o!=null&&Y0e(o,r),r}function Q0e(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["totalTokens"]);i!=null&&_(n,["totalTokens"],i);const s=x(t,["cachedContentTokenCount"]);return s!=null&&_(n,["cachedContentTokenCount"],s),n}function Z0e(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["totalTokens"]);return i!=null&&_(n,["totalTokens"],i),n}function eye(t,e,n){const r={},i=x(e,["model"]);return i!=null&&_(r,["_url","name"],It(t,i)),r}function tye(t,e,n){const r={},i=x(e,["model"]);return i!=null&&_(r,["_url","name"],It(t,i)),r}function nye(t,e){const n={},r=x(t,["sdkHttpResponse"]);return r!=null&&_(n,["sdkHttpResponse"],r),n}function rye(t,e){const n={},r=x(t,["sdkHttpResponse"]);return r!=null&&_(n,["sdkHttpResponse"],r),n}function iye(t,e,n){const r={},i=x(t,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&_(e,["parameters","negativePrompt"],s);const o=x(t,["numberOfImages"]);e!==void 0&&o!=null&&_(e,["parameters","sampleCount"],o);const c=x(t,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const f=x(t,["guidanceScale"]);e!==void 0&&f!=null&&_(e,["parameters","guidanceScale"],f);const d=x(t,["seed"]);e!==void 0&&d!=null&&_(e,["parameters","seed"],d);const h=x(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const m=x(t,["personGeneration"]);e!==void 0&&m!=null&&_(e,["parameters","personGeneration"],m);const g=x(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&_(e,["parameters","includeSafetyAttributes"],g);const v=x(t,["includeRaiReason"]);e!==void 0&&v!=null&&_(e,["parameters","includeRaiReason"],v);const b=x(t,["language"]);e!==void 0&&b!=null&&_(e,["parameters","language"],b);const w=x(t,["outputMimeType"]);e!==void 0&&w!=null&&_(e,["parameters","outputOptions","mimeType"],w);const S=x(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&_(e,["parameters","outputOptions","compressionQuality"],S);const C=x(t,["addWatermark"]);e!==void 0&&C!=null&&_(e,["parameters","addWatermark"],C);const R=x(t,["labels"]);e!==void 0&&R!=null&&_(e,["labels"],R);const N=x(t,["editMode"]);e!==void 0&&N!=null&&_(e,["parameters","editMode"],N);const O=x(t,["baseSteps"]);return e!==void 0&&O!=null&&_(e,["parameters","editConfig","baseSteps"],O),r}function sye(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["prompt"]);s!=null&&_(r,["instances[0]","prompt"],s);const o=x(e,["referenceImages"]);if(o!=null){let f=o;Array.isArray(f)&&(f=f.map(d=>ave(d))),_(r,["instances[0]","referenceImages"],f)}const c=x(e,["config"]);return c!=null&&iye(c,r),r}function oye(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Mv(o))),_(n,["generatedImages"],s)}return n}function aye(t,e,n){const r={},i=x(t,["taskType"]);e!==void 0&&i!=null&&_(e,["requests[]","taskType"],i);const s=x(t,["title"]);e!==void 0&&s!=null&&_(e,["requests[]","title"],s);const o=x(t,["outputDimensionality"]);if(e!==void 0&&o!=null&&_(e,["requests[]","outputDimensionality"],o),x(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(x(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return r}function lye(t,e,n){const r={};let i=x(n,["embeddingApiType"]);if(i===void 0&&(i="PREDICT"),i==="PREDICT"){const d=x(t,["taskType"]);e!==void 0&&d!=null&&_(e,["instances[]","task_type"],d)}else if(i==="EMBED_CONTENT"){const d=x(t,["taskType"]);e!==void 0&&d!=null&&_(e,["taskType"],d)}let s=x(n,["embeddingApiType"]);if(s===void 0&&(s="PREDICT"),s==="PREDICT"){const d=x(t,["title"]);e!==void 0&&d!=null&&_(e,["instances[]","title"],d)}else if(s==="EMBED_CONTENT"){const d=x(t,["title"]);e!==void 0&&d!=null&&_(e,["title"],d)}let o=x(n,["embeddingApiType"]);if(o===void 0&&(o="PREDICT"),o==="PREDICT"){const d=x(t,["outputDimensionality"]);e!==void 0&&d!=null&&_(e,["parameters","outputDimensionality"],d)}else if(o==="EMBED_CONTENT"){const d=x(t,["outputDimensionality"]);e!==void 0&&d!=null&&_(e,["outputDimensionality"],d)}let c=x(n,["embeddingApiType"]);if(c===void 0&&(c="PREDICT"),c==="PREDICT"){const d=x(t,["mimeType"]);e!==void 0&&d!=null&&_(e,["instances[]","mimeType"],d)}let f=x(n,["embeddingApiType"]);if(f===void 0&&(f="PREDICT"),f==="PREDICT"){const d=x(t,["autoTruncate"]);e!==void 0&&d!=null&&_(e,["parameters","autoTruncate"],d)}else if(f==="EMBED_CONTENT"){const d=x(t,["autoTruncate"]);e!==void 0&&d!=null&&_(e,["autoTruncate"],d)}return r}function cye(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["contents"]);if(s!=null){let d=lA(t,s);Array.isArray(d)&&(d=d.map(h=>h)),_(r,["requests[]","content"],d)}const o=x(e,["content"]);o!=null&&Pp(Gn(o));const c=x(e,["config"]);c!=null&&aye(c,r);const f=x(e,["model"]);return f!==void 0&&_(r,["requests[]","model"],It(t,f)),r}function uye(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));let s=x(n,["embeddingApiType"]);if(s===void 0&&(s="PREDICT"),s==="PREDICT"){const f=x(e,["contents"]);if(f!=null){let d=lA(t,f);Array.isArray(d)&&(d=d.map(h=>h)),_(r,["instances[]","content"],d)}}let o=x(n,["embeddingApiType"]);if(o===void 0&&(o="PREDICT"),o==="EMBED_CONTENT"){const f=x(e,["content"]);f!=null&&_(r,["content"],Gn(f))}const c=x(e,["config"]);return c!=null&&lye(c,r,n),r}function dye(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>c)),_(n,["embeddings"],o)}const s=x(t,["metadata"]);return s!=null&&_(n,["metadata"],s),n}function fye(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["predictions[]","embeddings"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>$0e(c))),_(n,["embeddings"],o)}const s=x(t,["metadata"]);if(s!=null&&_(n,["metadata"],s),e&&x(e,["embeddingApiType"])==="EMBED_CONTENT"){const o=x(t,["embedding"]),c=x(t,["usageMetadata"]),f=x(t,["truncated"]);if(o){const d={};c&&c.promptTokenCount&&(d.tokenCount=c.promptTokenCount),f&&(d.truncated=f),o.statistics=d,_(n,["embeddings"],[o])}}return n}function hye(t,e){const n={},r=x(t,["endpoint"]);r!=null&&_(n,["name"],r);const i=x(t,["deployedModelId"]);return i!=null&&_(n,["deployedModelId"],i),n}function pye(t,e){const n={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["fileUri"]);r!=null&&_(n,["fileUri"],r);const i=x(t,["mimeType"]);return i!=null&&_(n,["mimeType"],i),n}function mye(t,e){const n={},r=x(t,["id"]);r!=null&&_(n,["id"],r);const i=x(t,["args"]);i!=null&&_(n,["args"],i);const s=x(t,["name"]);if(s!=null&&_(n,["name"],s),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return n}function gye(t,e){const n={},r=x(t,["allowedFunctionNames"]);r!=null&&_(n,["allowedFunctionNames"],r);const i=x(t,["mode"]);if(i!=null&&_(n,["mode"],i),x(t,["streamFunctionCallArguments"])!==void 0)throw new Error("streamFunctionCallArguments parameter is not supported in Gemini API.");return n}function yye(t,e){const n={},r=x(t,["description"]);r!=null&&_(n,["description"],r);const i=x(t,["name"]);i!=null&&_(n,["name"],i);const s=x(t,["parameters"]);s!=null&&_(n,["parameters"],s);const o=x(t,["parametersJsonSchema"]);o!=null&&_(n,["parametersJsonSchema"],o);const c=x(t,["response"]);c!=null&&_(n,["response"],c);const f=x(t,["responseJsonSchema"]);if(f!=null&&_(n,["responseJsonSchema"],f),x(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");return n}function vye(t,e,n,r){const i={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&_(n,["systemInstruction"],Pp(Gn(s)));const o=x(e,["temperature"]);o!=null&&_(i,["temperature"],o);const c=x(e,["topP"]);c!=null&&_(i,["topP"],c);const f=x(e,["topK"]);f!=null&&_(i,["topK"],f);const d=x(e,["candidateCount"]);d!=null&&_(i,["candidateCount"],d);const h=x(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const m=x(e,["stopSequences"]);m!=null&&_(i,["stopSequences"],m);const g=x(e,["responseLogprobs"]);g!=null&&_(i,["responseLogprobs"],g);const v=x(e,["logprobs"]);v!=null&&_(i,["logprobs"],v);const b=x(e,["presencePenalty"]);b!=null&&_(i,["presencePenalty"],b);const w=x(e,["frequencyPenalty"]);w!=null&&_(i,["frequencyPenalty"],w);const S=x(e,["seed"]);S!=null&&_(i,["seed"],S);const C=x(e,["responseMimeType"]);C!=null&&_(i,["responseMimeType"],C);const R=x(e,["responseSchema"]);R!=null&&_(i,["responseSchema"],cA(R));const N=x(e,["responseJsonSchema"]);if(N!=null&&_(i,["responseJsonSchema"],N),x(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(x(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const O=x(e,["safetySettings"]);if(n!==void 0&&O!=null){let z=O;Array.isArray(z)&&(z=z.map(Q=>lve(Q))),_(n,["safetySettings"],z)}const k=x(e,["tools"]);if(n!==void 0&&k!=null){let z=Kd(k);Array.isArray(z)&&(z=z.map(Q=>mve(Gd(Q)))),_(n,["tools"],z)}const D=x(e,["toolConfig"]);if(n!==void 0&&D!=null&&_(n,["toolConfig"],pve(D)),x(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const M=x(e,["cachedContent"]);n!==void 0&&M!=null&&_(n,["cachedContent"],ha(t,M));const j=x(e,["responseModalities"]);j!=null&&_(i,["responseModalities"],j);const I=x(e,["mediaResolution"]);I!=null&&_(i,["mediaResolution"],I);const U=x(e,["speechConfig"]);if(U!=null&&_(i,["speechConfig"],uA(U)),x(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const B=x(e,["thinkingConfig"]);B!=null&&_(i,["thinkingConfig"],B);const P=x(e,["imageConfig"]);P!=null&&_(i,["imageConfig"],$ye(P));const F=x(e,["enableEnhancedCivicAnswers"]);if(F!=null&&_(i,["enableEnhancedCivicAnswers"],F),x(e,["modelArmorConfig"])!==void 0)throw new Error("modelArmorConfig parameter is not supported in Gemini API.");return i}function xye(t,e,n,r){const i={},s=x(e,["systemInstruction"]);n!==void 0&&s!=null&&_(n,["systemInstruction"],Gn(s));const o=x(e,["temperature"]);o!=null&&_(i,["temperature"],o);const c=x(e,["topP"]);c!=null&&_(i,["topP"],c);const f=x(e,["topK"]);f!=null&&_(i,["topK"],f);const d=x(e,["candidateCount"]);d!=null&&_(i,["candidateCount"],d);const h=x(e,["maxOutputTokens"]);h!=null&&_(i,["maxOutputTokens"],h);const m=x(e,["stopSequences"]);m!=null&&_(i,["stopSequences"],m);const g=x(e,["responseLogprobs"]);g!=null&&_(i,["responseLogprobs"],g);const v=x(e,["logprobs"]);v!=null&&_(i,["logprobs"],v);const b=x(e,["presencePenalty"]);b!=null&&_(i,["presencePenalty"],b);const w=x(e,["frequencyPenalty"]);w!=null&&_(i,["frequencyPenalty"],w);const S=x(e,["seed"]);S!=null&&_(i,["seed"],S);const C=x(e,["responseMimeType"]);C!=null&&_(i,["responseMimeType"],C);const R=x(e,["responseSchema"]);R!=null&&_(i,["responseSchema"],cA(R));const N=x(e,["responseJsonSchema"]);N!=null&&_(i,["responseJsonSchema"],N);const O=x(e,["routingConfig"]);O!=null&&_(i,["routingConfig"],O);const k=x(e,["modelSelectionConfig"]);k!=null&&_(i,["modelConfig"],k);const D=x(e,["safetySettings"]);if(n!==void 0&&D!=null){let te=D;Array.isArray(te)&&(te=te.map(ne=>ne)),_(n,["safetySettings"],te)}const M=x(e,["tools"]);if(n!==void 0&&M!=null){let te=Kd(M);Array.isArray(te)&&(te=te.map(ne=>dV(Gd(ne)))),_(n,["tools"],te)}const j=x(e,["toolConfig"]);n!==void 0&&j!=null&&_(n,["toolConfig"],j);const I=x(e,["labels"]);n!==void 0&&I!=null&&_(n,["labels"],I);const U=x(e,["cachedContent"]);n!==void 0&&U!=null&&_(n,["cachedContent"],ha(t,U));const B=x(e,["responseModalities"]);B!=null&&_(i,["responseModalities"],B);const P=x(e,["mediaResolution"]);P!=null&&_(i,["mediaResolution"],P);const F=x(e,["speechConfig"]);F!=null&&_(i,["speechConfig"],uA(F));const z=x(e,["audioTimestamp"]);z!=null&&_(i,["audioTimestamp"],z);const Q=x(e,["thinkingConfig"]);Q!=null&&_(i,["thinkingConfig"],Q);const W=x(e,["imageConfig"]);if(W!=null&&_(i,["imageConfig"],Gye(W)),x(e,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");const K=x(e,["modelArmorConfig"]);return n!==void 0&&K!=null&&_(n,["modelArmorConfig"],K),i}function IO(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["contents"]);if(s!=null){let c=di(s);Array.isArray(c)&&(c=c.map(f=>Pp(f))),_(r,["contents"],c)}const o=x(e,["config"]);return o!=null&&_(r,["generationConfig"],vye(t,o,r)),r}function RO(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["contents"]);if(s!=null){let c=di(s);Array.isArray(c)&&(c=c.map(f=>f)),_(r,["contents"],c)}const o=x(e,["config"]);return o!=null&&_(r,["generationConfig"],xye(t,o,r)),r}function PO(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["candidates"]);if(i!=null){let d=i;Array.isArray(d)&&(d=d.map(h=>F0e(h))),_(n,["candidates"],d)}const s=x(t,["modelVersion"]);s!=null&&_(n,["modelVersion"],s);const o=x(t,["promptFeedback"]);o!=null&&_(n,["promptFeedback"],o);const c=x(t,["responseId"]);c!=null&&_(n,["responseId"],c);const f=x(t,["usageMetadata"]);return f!=null&&_(n,["usageMetadata"],f),n}function jO(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["candidates"]);if(i!=null){let h=i;Array.isArray(h)&&(h=h.map(m=>m)),_(n,["candidates"],h)}const s=x(t,["createTime"]);s!=null&&_(n,["createTime"],s);const o=x(t,["modelVersion"]);o!=null&&_(n,["modelVersion"],o);const c=x(t,["promptFeedback"]);c!=null&&_(n,["promptFeedback"],c);const f=x(t,["responseId"]);f!=null&&_(n,["responseId"],f);const d=x(t,["usageMetadata"]);return d!=null&&_(n,["usageMetadata"],d),n}function bye(t,e,n){const r={};if(x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const i=x(t,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const s=x(t,["aspectRatio"]);e!==void 0&&s!=null&&_(e,["parameters","aspectRatio"],s);const o=x(t,["guidanceScale"]);if(e!==void 0&&o!=null&&_(e,["parameters","guidanceScale"],o),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const c=x(t,["safetyFilterLevel"]);e!==void 0&&c!=null&&_(e,["parameters","safetySetting"],c);const f=x(t,["personGeneration"]);e!==void 0&&f!=null&&_(e,["parameters","personGeneration"],f);const d=x(t,["includeSafetyAttributes"]);e!==void 0&&d!=null&&_(e,["parameters","includeSafetyAttributes"],d);const h=x(t,["includeRaiReason"]);e!==void 0&&h!=null&&_(e,["parameters","includeRaiReason"],h);const m=x(t,["language"]);e!==void 0&&m!=null&&_(e,["parameters","language"],m);const g=x(t,["outputMimeType"]);e!==void 0&&g!=null&&_(e,["parameters","outputOptions","mimeType"],g);const v=x(t,["outputCompressionQuality"]);if(e!==void 0&&v!=null&&_(e,["parameters","outputOptions","compressionQuality"],v),x(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const b=x(t,["imageSize"]);if(e!==void 0&&b!=null&&_(e,["parameters","sampleImageSize"],b),x(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return r}function _ye(t,e,n){const r={},i=x(t,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const s=x(t,["negativePrompt"]);e!==void 0&&s!=null&&_(e,["parameters","negativePrompt"],s);const o=x(t,["numberOfImages"]);e!==void 0&&o!=null&&_(e,["parameters","sampleCount"],o);const c=x(t,["aspectRatio"]);e!==void 0&&c!=null&&_(e,["parameters","aspectRatio"],c);const f=x(t,["guidanceScale"]);e!==void 0&&f!=null&&_(e,["parameters","guidanceScale"],f);const d=x(t,["seed"]);e!==void 0&&d!=null&&_(e,["parameters","seed"],d);const h=x(t,["safetyFilterLevel"]);e!==void 0&&h!=null&&_(e,["parameters","safetySetting"],h);const m=x(t,["personGeneration"]);e!==void 0&&m!=null&&_(e,["parameters","personGeneration"],m);const g=x(t,["includeSafetyAttributes"]);e!==void 0&&g!=null&&_(e,["parameters","includeSafetyAttributes"],g);const v=x(t,["includeRaiReason"]);e!==void 0&&v!=null&&_(e,["parameters","includeRaiReason"],v);const b=x(t,["language"]);e!==void 0&&b!=null&&_(e,["parameters","language"],b);const w=x(t,["outputMimeType"]);e!==void 0&&w!=null&&_(e,["parameters","outputOptions","mimeType"],w);const S=x(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&_(e,["parameters","outputOptions","compressionQuality"],S);const C=x(t,["addWatermark"]);e!==void 0&&C!=null&&_(e,["parameters","addWatermark"],C);const R=x(t,["labels"]);e!==void 0&&R!=null&&_(e,["labels"],R);const N=x(t,["imageSize"]);e!==void 0&&N!=null&&_(e,["parameters","sampleImageSize"],N);const O=x(t,["enhancePrompt"]);return e!==void 0&&O!=null&&_(e,["parameters","enhancePrompt"],O),r}function wye(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["prompt"]);s!=null&&_(r,["instances[0]","prompt"],s);const o=x(e,["config"]);return o!=null&&bye(o,r),r}function Sye(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["prompt"]);s!=null&&_(r,["instances[0]","prompt"],s);const o=x(e,["config"]);return o!=null&&_ye(o,r),r}function Tye(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Oye(c))),_(n,["generatedImages"],o)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&_(n,["positivePromptSafetyAttributes"],cV(s)),n}function Eye(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["predictions"]);if(i!=null){let o=i;Array.isArray(o)&&(o=o.map(c=>Mv(c))),_(n,["generatedImages"],o)}const s=x(t,["positivePromptSafetyAttributes"]);return s!=null&&_(n,["positivePromptSafetyAttributes"],uV(s)),n}function Aye(t,e,n){const r={},i=x(t,["numberOfVideos"]);if(e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i),x(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(x(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const s=x(t,["durationSeconds"]);if(e!==void 0&&s!=null&&_(e,["parameters","durationSeconds"],s),x(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=x(t,["aspectRatio"]);e!==void 0&&o!=null&&_(e,["parameters","aspectRatio"],o);const c=x(t,["resolution"]);e!==void 0&&c!=null&&_(e,["parameters","resolution"],c);const f=x(t,["personGeneration"]);if(e!==void 0&&f!=null&&_(e,["parameters","personGeneration"],f),x(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const d=x(t,["negativePrompt"]);e!==void 0&&d!=null&&_(e,["parameters","negativePrompt"],d);const h=x(t,["enhancePrompt"]);if(e!==void 0&&h!=null&&_(e,["parameters","enhancePrompt"],h),x(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const m=x(t,["lastFrame"]);e!==void 0&&m!=null&&_(e,["instances[0]","lastFrame"],Dv(m));const g=x(t,["referenceImages"]);if(e!==void 0&&g!=null){let v=g;Array.isArray(v)&&(v=v.map(b=>Nve(b))),_(e,["instances[0]","referenceImages"],v)}if(x(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(x(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return r}function Cye(t,e,n){const r={},i=x(t,["numberOfVideos"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const s=x(t,["outputGcsUri"]);e!==void 0&&s!=null&&_(e,["parameters","storageUri"],s);const o=x(t,["fps"]);e!==void 0&&o!=null&&_(e,["parameters","fps"],o);const c=x(t,["durationSeconds"]);e!==void 0&&c!=null&&_(e,["parameters","durationSeconds"],c);const f=x(t,["seed"]);e!==void 0&&f!=null&&_(e,["parameters","seed"],f);const d=x(t,["aspectRatio"]);e!==void 0&&d!=null&&_(e,["parameters","aspectRatio"],d);const h=x(t,["resolution"]);e!==void 0&&h!=null&&_(e,["parameters","resolution"],h);const m=x(t,["personGeneration"]);e!==void 0&&m!=null&&_(e,["parameters","personGeneration"],m);const g=x(t,["pubsubTopic"]);e!==void 0&&g!=null&&_(e,["parameters","pubsubTopic"],g);const v=x(t,["negativePrompt"]);e!==void 0&&v!=null&&_(e,["parameters","negativePrompt"],v);const b=x(t,["enhancePrompt"]);e!==void 0&&b!=null&&_(e,["parameters","enhancePrompt"],b);const w=x(t,["generateAudio"]);e!==void 0&&w!=null&&_(e,["parameters","generateAudio"],w);const S=x(t,["lastFrame"]);e!==void 0&&S!=null&&_(e,["instances[0]","lastFrame"],Ss(S));const C=x(t,["referenceImages"]);if(e!==void 0&&C!=null){let O=C;Array.isArray(O)&&(O=O.map(k=>kve(k))),_(e,["instances[0]","referenceImages"],O)}const R=x(t,["mask"]);e!==void 0&&R!=null&&_(e,["instances[0]","mask"],Cve(R));const N=x(t,["compressionQuality"]);return e!==void 0&&N!=null&&_(e,["parameters","compressionQuality"],N),r}function Nye(t,e){const n={},r=x(t,["name"]);r!=null&&_(n,["name"],r);const i=x(t,["metadata"]);i!=null&&_(n,["metadata"],i);const s=x(t,["done"]);s!=null&&_(n,["done"],s);const o=x(t,["error"]);o!=null&&_(n,["error"],o);const c=x(t,["response","generateVideoResponse"]);return c!=null&&_(n,["response"],Pye(c)),n}function kye(t,e){const n={},r=x(t,["name"]);r!=null&&_(n,["name"],r);const i=x(t,["metadata"]);i!=null&&_(n,["metadata"],i);const s=x(t,["done"]);s!=null&&_(n,["done"],s);const o=x(t,["error"]);o!=null&&_(n,["error"],o);const c=x(t,["response"]);return c!=null&&_(n,["response"],jye(c)),n}function Iye(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["prompt"]);s!=null&&_(r,["instances[0]","prompt"],s);const o=x(e,["image"]);o!=null&&_(r,["instances[0]","image"],Dv(o));const c=x(e,["video"]);c!=null&&_(r,["instances[0]","video"],fV(c));const f=x(e,["source"]);f!=null&&Mye(f,r);const d=x(e,["config"]);return d!=null&&Aye(d,r),r}function Rye(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["prompt"]);s!=null&&_(r,["instances[0]","prompt"],s);const o=x(e,["image"]);o!=null&&_(r,["instances[0]","image"],Ss(o));const c=x(e,["video"]);c!=null&&_(r,["instances[0]","video"],hV(c));const f=x(e,["source"]);f!=null&&Dye(f,r);const d=x(e,["config"]);return d!=null&&Cye(d,r),r}function Pye(t,e){const n={},r=x(t,["generatedSamples"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>zye(c))),_(n,["generatedVideos"],o)}const i=x(t,["raiMediaFilteredCount"]);i!=null&&_(n,["raiMediaFilteredCount"],i);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&_(n,["raiMediaFilteredReasons"],s),n}function jye(t,e){const n={},r=x(t,["videos"]);if(r!=null){let o=r;Array.isArray(o)&&(o=o.map(c=>Uye(c))),_(n,["generatedVideos"],o)}const i=x(t,["raiMediaFilteredCount"]);i!=null&&_(n,["raiMediaFilteredCount"],i);const s=x(t,["raiMediaFilteredReasons"]);return s!=null&&_(n,["raiMediaFilteredReasons"],s),n}function Mye(t,e,n){const r={},i=x(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=x(t,["image"]);e!==void 0&&s!=null&&_(e,["instances[0]","image"],Dv(s));const o=x(t,["video"]);return e!==void 0&&o!=null&&_(e,["instances[0]","video"],fV(o)),r}function Dye(t,e,n){const r={},i=x(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=x(t,["image"]);e!==void 0&&s!=null&&_(e,["instances[0]","image"],Ss(s));const o=x(t,["video"]);return e!==void 0&&o!=null&&_(e,["instances[0]","video"],hV(o)),r}function Oye(t,e){const n={},r=x(t,["_self"]);r!=null&&_(n,["image"],Kye(r));const i=x(t,["raiFilteredReason"]);i!=null&&_(n,["raiFilteredReason"],i);const s=x(t,["_self"]);return s!=null&&_(n,["safetyAttributes"],cV(s)),n}function Mv(t,e){const n={},r=x(t,["_self"]);r!=null&&_(n,["image"],lV(r));const i=x(t,["raiFilteredReason"]);i!=null&&_(n,["raiFilteredReason"],i);const s=x(t,["_self"]);s!=null&&_(n,["safetyAttributes"],uV(s));const o=x(t,["prompt"]);return o!=null&&_(n,["enhancedPrompt"],o),n}function Lye(t,e){const n={},r=x(t,["_self"]);r!=null&&_(n,["mask"],lV(r));const i=x(t,["labels"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(n,["labels"],s)}return n}function zye(t,e){const n={},r=x(t,["video"]);return r!=null&&_(n,["video"],Eve(r)),n}function Uye(t,e){const n={},r=x(t,["_self"]);return r!=null&&_(n,["video"],Ave(r)),n}function Vye(t,e){const n={},r=x(t,["modelSelectionConfig"]);r!=null&&_(n,["modelConfig"],r);const i=x(t,["responseJsonSchema"]);i!=null&&_(n,["responseJsonSchema"],i);const s=x(t,["audioTimestamp"]);s!=null&&_(n,["audioTimestamp"],s);const o=x(t,["candidateCount"]);o!=null&&_(n,["candidateCount"],o);const c=x(t,["enableAffectiveDialog"]);c!=null&&_(n,["enableAffectiveDialog"],c);const f=x(t,["frequencyPenalty"]);f!=null&&_(n,["frequencyPenalty"],f);const d=x(t,["logprobs"]);d!=null&&_(n,["logprobs"],d);const h=x(t,["maxOutputTokens"]);h!=null&&_(n,["maxOutputTokens"],h);const m=x(t,["mediaResolution"]);m!=null&&_(n,["mediaResolution"],m);const g=x(t,["presencePenalty"]);g!=null&&_(n,["presencePenalty"],g);const v=x(t,["responseLogprobs"]);v!=null&&_(n,["responseLogprobs"],v);const b=x(t,["responseMimeType"]);b!=null&&_(n,["responseMimeType"],b);const w=x(t,["responseModalities"]);w!=null&&_(n,["responseModalities"],w);const S=x(t,["responseSchema"]);S!=null&&_(n,["responseSchema"],S);const C=x(t,["routingConfig"]);C!=null&&_(n,["routingConfig"],C);const R=x(t,["seed"]);R!=null&&_(n,["seed"],R);const N=x(t,["speechConfig"]);N!=null&&_(n,["speechConfig"],N);const O=x(t,["stopSequences"]);O!=null&&_(n,["stopSequences"],O);const k=x(t,["temperature"]);k!=null&&_(n,["temperature"],k);const D=x(t,["thinkingConfig"]);D!=null&&_(n,["thinkingConfig"],D);const M=x(t,["topK"]);M!=null&&_(n,["topK"],M);const j=x(t,["topP"]);if(j!=null&&_(n,["topP"],j),x(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return n}function Fye(t,e,n){const r={},i=x(e,["model"]);return i!=null&&_(r,["_url","name"],It(t,i)),r}function Bye(t,e,n){const r={},i=x(e,["model"]);return i!=null&&_(r,["_url","name"],It(t,i)),r}function Hye(t,e){const n={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const r=x(t,["enableWidget"]);return r!=null&&_(n,["enableWidget"],r),n}function qye(t,e){const n={},r=x(t,["searchTypes"]);if(r!=null&&_(n,["searchTypes"],r),x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const i=x(t,["timeRangeFilter"]);return i!=null&&_(n,["timeRangeFilter"],i),n}function $ye(t,e){const n={},r=x(t,["aspectRatio"]);r!=null&&_(n,["aspectRatio"],r);const i=x(t,["imageSize"]);if(i!=null&&_(n,["imageSize"],i),x(t,["personGeneration"])!==void 0)throw new Error("personGeneration parameter is not supported in Gemini API.");if(x(t,["prominentPeople"])!==void 0)throw new Error("prominentPeople parameter is not supported in Gemini API.");if(x(t,["outputMimeType"])!==void 0)throw new Error("outputMimeType parameter is not supported in Gemini API.");if(x(t,["outputCompressionQuality"])!==void 0)throw new Error("outputCompressionQuality parameter is not supported in Gemini API.");return n}function Gye(t,e){const n={},r=x(t,["aspectRatio"]);r!=null&&_(n,["aspectRatio"],r);const i=x(t,["imageSize"]);i!=null&&_(n,["imageSize"],i);const s=x(t,["personGeneration"]);s!=null&&_(n,["personGeneration"],s);const o=x(t,["prominentPeople"]);o!=null&&_(n,["prominentPeople"],o);const c=x(t,["outputMimeType"]);c!=null&&_(n,["imageOutputOptions","mimeType"],c);const f=x(t,["outputCompressionQuality"]);return f!=null&&_(n,["imageOutputOptions","compressionQuality"],f),n}function Kye(t,e){const n={},r=x(t,["bytesBase64Encoded"]);r!=null&&_(n,["imageBytes"],Sl(r));const i=x(t,["mimeType"]);return i!=null&&_(n,["mimeType"],i),n}function lV(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&_(n,["gcsUri"],r);const i=x(t,["bytesBase64Encoded"]);i!=null&&_(n,["imageBytes"],Sl(i));const s=x(t,["mimeType"]);return s!=null&&_(n,["mimeType"],s),n}function Dv(t,e){const n={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const r=x(t,["imageBytes"]);r!=null&&_(n,["bytesBase64Encoded"],Sl(r));const i=x(t,["mimeType"]);return i!=null&&_(n,["mimeType"],i),n}function Ss(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&_(n,["gcsUri"],r);const i=x(t,["imageBytes"]);i!=null&&_(n,["bytesBase64Encoded"],Sl(i));const s=x(t,["mimeType"]);return s!=null&&_(n,["mimeType"],s),n}function Wye(t,e,n,r){const i={},s=x(e,["pageSize"]);n!==void 0&&s!=null&&_(n,["_query","pageSize"],s);const o=x(e,["pageToken"]);n!==void 0&&o!=null&&_(n,["_query","pageToken"],o);const c=x(e,["filter"]);n!==void 0&&c!=null&&_(n,["_query","filter"],c);const f=x(e,["queryBase"]);return n!==void 0&&f!=null&&_(n,["_url","models_url"],tV(t,f)),i}function Yye(t,e,n,r){const i={},s=x(e,["pageSize"]);n!==void 0&&s!=null&&_(n,["_query","pageSize"],s);const o=x(e,["pageToken"]);n!==void 0&&o!=null&&_(n,["_query","pageToken"],o);const c=x(e,["filter"]);n!==void 0&&c!=null&&_(n,["_query","filter"],c);const f=x(e,["queryBase"]);return n!==void 0&&f!=null&&_(n,["_url","models_url"],tV(t,f)),i}function Xye(t,e,n){const r={},i=x(e,["config"]);return i!=null&&Wye(t,i,r),r}function Jye(t,e,n){const r={},i=x(e,["config"]);return i!=null&&Yye(t,i,r),r}function Qye(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["nextPageToken"]);i!=null&&_(n,["nextPageToken"],i);const s=x(t,["_self"]);if(s!=null){let o=nV(s);Array.isArray(o)&&(o=o.map(c=>xS(c))),_(n,["models"],o)}return n}function Zye(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["nextPageToken"]);i!=null&&_(n,["nextPageToken"],i);const s=x(t,["_self"]);if(s!=null){let o=nV(s);Array.isArray(o)&&(o=o.map(c=>bS(c))),_(n,["models"],o)}return n}function eve(t,e){const n={},r=x(t,["maskMode"]);r!=null&&_(n,["maskMode"],r);const i=x(t,["segmentationClasses"]);i!=null&&_(n,["maskClasses"],i);const s=x(t,["maskDilation"]);return s!=null&&_(n,["dilation"],s),n}function xS(t,e){const n={},r=x(t,["name"]);r!=null&&_(n,["name"],r);const i=x(t,["displayName"]);i!=null&&_(n,["displayName"],i);const s=x(t,["description"]);s!=null&&_(n,["description"],s);const o=x(t,["version"]);o!=null&&_(n,["version"],o);const c=x(t,["_self"]);c!=null&&_(n,["tunedModelInfo"],gve(c));const f=x(t,["inputTokenLimit"]);f!=null&&_(n,["inputTokenLimit"],f);const d=x(t,["outputTokenLimit"]);d!=null&&_(n,["outputTokenLimit"],d);const h=x(t,["supportedGenerationMethods"]);h!=null&&_(n,["supportedActions"],h);const m=x(t,["temperature"]);m!=null&&_(n,["temperature"],m);const g=x(t,["maxTemperature"]);g!=null&&_(n,["maxTemperature"],g);const v=x(t,["topP"]);v!=null&&_(n,["topP"],v);const b=x(t,["topK"]);b!=null&&_(n,["topK"],b);const w=x(t,["thinking"]);return w!=null&&_(n,["thinking"],w),n}function bS(t,e){const n={},r=x(t,["name"]);r!=null&&_(n,["name"],r);const i=x(t,["displayName"]);i!=null&&_(n,["displayName"],i);const s=x(t,["description"]);s!=null&&_(n,["description"],s);const o=x(t,["versionId"]);o!=null&&_(n,["version"],o);const c=x(t,["deployedModels"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>hye(v))),_(n,["endpoints"],g)}const f=x(t,["labels"]);f!=null&&_(n,["labels"],f);const d=x(t,["_self"]);d!=null&&_(n,["tunedModelInfo"],yve(d));const h=x(t,["defaultCheckpointId"]);h!=null&&_(n,["defaultCheckpointId"],h);const m=x(t,["checkpoints"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>v)),_(n,["checkpoints"],g)}return n}function tve(t,e){const n={},r=x(t,["mediaResolution"]);r!=null&&_(n,["mediaResolution"],r);const i=x(t,["codeExecutionResult"]);i!=null&&_(n,["codeExecutionResult"],i);const s=x(t,["executableCode"]);s!=null&&_(n,["executableCode"],s);const o=x(t,["fileData"]);o!=null&&_(n,["fileData"],pye(o));const c=x(t,["functionCall"]);c!=null&&_(n,["functionCall"],mye(c));const f=x(t,["functionResponse"]);f!=null&&_(n,["functionResponse"],f);const d=x(t,["inlineData"]);d!=null&&_(n,["inlineData"],V0e(d));const h=x(t,["text"]);h!=null&&_(n,["text"],h);const m=x(t,["thought"]);m!=null&&_(n,["thought"],m);const g=x(t,["thoughtSignature"]);g!=null&&_(n,["thoughtSignature"],g);const v=x(t,["videoMetadata"]);return v!=null&&_(n,["videoMetadata"],v),n}function nve(t,e){const n={},r=x(t,["productImage"]);return r!=null&&_(n,["image"],Ss(r)),n}function rve(t,e,n){const r={},i=x(t,["numberOfImages"]);e!==void 0&&i!=null&&_(e,["parameters","sampleCount"],i);const s=x(t,["baseSteps"]);e!==void 0&&s!=null&&_(e,["parameters","baseSteps"],s);const o=x(t,["outputGcsUri"]);e!==void 0&&o!=null&&_(e,["parameters","storageUri"],o);const c=x(t,["seed"]);e!==void 0&&c!=null&&_(e,["parameters","seed"],c);const f=x(t,["safetyFilterLevel"]);e!==void 0&&f!=null&&_(e,["parameters","safetySetting"],f);const d=x(t,["personGeneration"]);e!==void 0&&d!=null&&_(e,["parameters","personGeneration"],d);const h=x(t,["addWatermark"]);e!==void 0&&h!=null&&_(e,["parameters","addWatermark"],h);const m=x(t,["outputMimeType"]);e!==void 0&&m!=null&&_(e,["parameters","outputOptions","mimeType"],m);const g=x(t,["outputCompressionQuality"]);e!==void 0&&g!=null&&_(e,["parameters","outputOptions","compressionQuality"],g);const v=x(t,["enhancePrompt"]);e!==void 0&&v!=null&&_(e,["parameters","enhancePrompt"],v);const b=x(t,["labels"]);return e!==void 0&&b!=null&&_(e,["labels"],b),r}function ive(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["source"]);s!=null&&ove(s,r);const o=x(e,["config"]);return o!=null&&rve(o,r),r}function sve(t,e){const n={},r=x(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Mv(s))),_(n,["generatedImages"],i)}return n}function ove(t,e,n){const r={},i=x(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=x(t,["personImage"]);e!==void 0&&s!=null&&_(e,["instances[0]","personImage","image"],Ss(s));const o=x(t,["productImages"]);if(e!==void 0&&o!=null){let c=o;Array.isArray(c)&&(c=c.map(f=>nve(f))),_(e,["instances[0]","productImages"],c)}return r}function ave(t,e){const n={},r=x(t,["referenceImage"]);r!=null&&_(n,["referenceImage"],Ss(r));const i=x(t,["referenceId"]);i!=null&&_(n,["referenceId"],i);const s=x(t,["referenceType"]);s!=null&&_(n,["referenceType"],s);const o=x(t,["maskImageConfig"]);o!=null&&_(n,["maskImageConfig"],eve(o));const c=x(t,["controlImageConfig"]);c!=null&&_(n,["controlImageConfig"],K0e(c));const f=x(t,["styleImageConfig"]);f!=null&&_(n,["styleImageConfig"],f);const d=x(t,["subjectImageConfig"]);return d!=null&&_(n,["subjectImageConfig"],d),n}function cV(t,e){const n={},r=x(t,["safetyAttributes","categories"]);r!=null&&_(n,["categories"],r);const i=x(t,["safetyAttributes","scores"]);i!=null&&_(n,["scores"],i);const s=x(t,["contentType"]);return s!=null&&_(n,["contentType"],s),n}function uV(t,e){const n={},r=x(t,["safetyAttributes","categories"]);r!=null&&_(n,["categories"],r);const i=x(t,["safetyAttributes","scores"]);i!=null&&_(n,["scores"],i);const s=x(t,["contentType"]);return s!=null&&_(n,["contentType"],s),n}function lve(t,e){const n={},r=x(t,["category"]);if(r!=null&&_(n,["category"],r),x(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=x(t,["threshold"]);return i!=null&&_(n,["threshold"],i),n}function cve(t,e){const n={},r=x(t,["image"]);return r!=null&&_(n,["image"],Ss(r)),n}function uve(t,e,n){const r={},i=x(t,["mode"]);e!==void 0&&i!=null&&_(e,["parameters","mode"],i);const s=x(t,["maxPredictions"]);e!==void 0&&s!=null&&_(e,["parameters","maxPredictions"],s);const o=x(t,["confidenceThreshold"]);e!==void 0&&o!=null&&_(e,["parameters","confidenceThreshold"],o);const c=x(t,["maskDilation"]);e!==void 0&&c!=null&&_(e,["parameters","maskDilation"],c);const f=x(t,["binaryColorThreshold"]);e!==void 0&&f!=null&&_(e,["parameters","binaryColorThreshold"],f);const d=x(t,["labels"]);return e!==void 0&&d!=null&&_(e,["labels"],d),r}function dve(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["source"]);s!=null&&hve(s,r);const o=x(e,["config"]);return o!=null&&uve(o,r),r}function fve(t,e){const n={},r=x(t,["predictions"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Lye(s))),_(n,["generatedMasks"],i)}return n}function hve(t,e,n){const r={},i=x(t,["prompt"]);e!==void 0&&i!=null&&_(e,["instances[0]","prompt"],i);const s=x(t,["image"]);e!==void 0&&s!=null&&_(e,["instances[0]","image"],Ss(s));const o=x(t,["scribbleImage"]);return e!==void 0&&o!=null&&_(e,["instances[0]","scribble"],cve(o)),r}function pve(t,e){const n={},r=x(t,["retrievalConfig"]);r!=null&&_(n,["retrievalConfig"],r);const i=x(t,["functionCallingConfig"]);return i!=null&&_(n,["functionCallingConfig"],gye(i)),n}function mve(t,e){const n={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const r=x(t,["computerUse"]);r!=null&&_(n,["computerUse"],r);const i=x(t,["fileSearch"]);i!=null&&_(n,["fileSearch"],i);const s=x(t,["googleSearch"]);s!=null&&_(n,["googleSearch"],qye(s));const o=x(t,["codeExecution"]);if(o!=null&&_(n,["codeExecution"],o),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const c=x(t,["functionDeclarations"]);if(c!=null){let g=c;Array.isArray(g)&&(g=g.map(v=>v)),_(n,["functionDeclarations"],g)}const f=x(t,["googleMaps"]);f!=null&&_(n,["googleMaps"],Hye(f));const d=x(t,["googleSearchRetrieval"]);d!=null&&_(n,["googleSearchRetrieval"],d);const h=x(t,["urlContext"]);h!=null&&_(n,["urlContext"],h);const m=x(t,["mcpServers"]);if(m!=null){let g=m;Array.isArray(g)&&(g=g.map(v=>v)),_(n,["mcpServers"],g)}return n}function dV(t,e){const n={},r=x(t,["retrieval"]);r!=null&&_(n,["retrieval"],r);const i=x(t,["computerUse"]);if(i!=null&&_(n,["computerUse"],i),x(t,["fileSearch"])!==void 0)throw new Error("fileSearch parameter is not supported in Vertex AI.");const s=x(t,["googleSearch"]);s!=null&&_(n,["googleSearch"],s);const o=x(t,["codeExecution"]);o!=null&&_(n,["codeExecution"],o);const c=x(t,["enterpriseWebSearch"]);c!=null&&_(n,["enterpriseWebSearch"],c);const f=x(t,["functionDeclarations"]);if(f!=null){let g=f;Array.isArray(g)&&(g=g.map(v=>yye(v))),_(n,["functionDeclarations"],g)}const d=x(t,["googleMaps"]);d!=null&&_(n,["googleMaps"],d);const h=x(t,["googleSearchRetrieval"]);h!=null&&_(n,["googleSearchRetrieval"],h);const m=x(t,["urlContext"]);if(m!=null&&_(n,["urlContext"],m),x(t,["mcpServers"])!==void 0)throw new Error("mcpServers parameter is not supported in Vertex AI.");return n}function gve(t,e){const n={},r=x(t,["baseModel"]);r!=null&&_(n,["baseModel"],r);const i=x(t,["createTime"]);i!=null&&_(n,["createTime"],i);const s=x(t,["updateTime"]);return s!=null&&_(n,["updateTime"],s),n}function yve(t,e){const n={},r=x(t,["labels","google-vertex-llm-tuning-base-model-id"]);r!=null&&_(n,["baseModel"],r);const i=x(t,["createTime"]);i!=null&&_(n,["createTime"],i);const s=x(t,["updateTime"]);return s!=null&&_(n,["updateTime"],s),n}function vve(t,e,n){const r={},i=x(t,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const s=x(t,["description"]);e!==void 0&&s!=null&&_(e,["description"],s);const o=x(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&_(e,["defaultCheckpointId"],o),r}function xve(t,e,n){const r={},i=x(t,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const s=x(t,["description"]);e!==void 0&&s!=null&&_(e,["description"],s);const o=x(t,["defaultCheckpointId"]);return e!==void 0&&o!=null&&_(e,["defaultCheckpointId"],o),r}function bve(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","name"],It(t,i));const s=x(e,["config"]);return s!=null&&vve(s,r),r}function _ve(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["config"]);return s!=null&&xve(s,r),r}function wve(t,e,n){const r={},i=x(t,["outputGcsUri"]);e!==void 0&&i!=null&&_(e,["parameters","storageUri"],i);const s=x(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&_(e,["parameters","safetySetting"],s);const o=x(t,["personGeneration"]);e!==void 0&&o!=null&&_(e,["parameters","personGeneration"],o);const c=x(t,["includeRaiReason"]);e!==void 0&&c!=null&&_(e,["parameters","includeRaiReason"],c);const f=x(t,["outputMimeType"]);e!==void 0&&f!=null&&_(e,["parameters","outputOptions","mimeType"],f);const d=x(t,["outputCompressionQuality"]);e!==void 0&&d!=null&&_(e,["parameters","outputOptions","compressionQuality"],d);const h=x(t,["enhanceInputImage"]);e!==void 0&&h!=null&&_(e,["parameters","upscaleConfig","enhanceInputImage"],h);const m=x(t,["imagePreservationFactor"]);e!==void 0&&m!=null&&_(e,["parameters","upscaleConfig","imagePreservationFactor"],m);const g=x(t,["labels"]);e!==void 0&&g!=null&&_(e,["labels"],g);const v=x(t,["numberOfImages"]);e!==void 0&&v!=null&&_(e,["parameters","sampleCount"],v);const b=x(t,["mode"]);return e!==void 0&&b!=null&&_(e,["parameters","mode"],b),r}function Sve(t,e,n){const r={},i=x(e,["model"]);i!=null&&_(r,["_url","model"],It(t,i));const s=x(e,["image"]);s!=null&&_(r,["instances[0]","image"],Ss(s));const o=x(e,["upscaleFactor"]);o!=null&&_(r,["parameters","upscaleConfig","upscaleFactor"],o);const c=x(e,["config"]);return c!=null&&wve(c,r),r}function Tve(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["predictions"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>Mv(o))),_(n,["generatedImages"],s)}return n}function Eve(t,e){const n={},r=x(t,["uri"]);r!=null&&_(n,["uri"],r);const i=x(t,["encodedVideo"]);i!=null&&_(n,["videoBytes"],Sl(i));const s=x(t,["encoding"]);return s!=null&&_(n,["mimeType"],s),n}function Ave(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&_(n,["uri"],r);const i=x(t,["bytesBase64Encoded"]);i!=null&&_(n,["videoBytes"],Sl(i));const s=x(t,["mimeType"]);return s!=null&&_(n,["mimeType"],s),n}function Cve(t,e){const n={},r=x(t,["image"]);r!=null&&_(n,["_self"],Ss(r));const i=x(t,["maskMode"]);return i!=null&&_(n,["maskMode"],i),n}function Nve(t,e){const n={},r=x(t,["image"]);r!=null&&_(n,["image"],Dv(r));const i=x(t,["referenceType"]);return i!=null&&_(n,["referenceType"],i),n}function kve(t,e){const n={},r=x(t,["image"]);r!=null&&_(n,["image"],Ss(r));const i=x(t,["referenceType"]);return i!=null&&_(n,["referenceType"],i),n}function fV(t,e){const n={},r=x(t,["uri"]);r!=null&&_(n,["uri"],r);const i=x(t,["videoBytes"]);i!=null&&_(n,["encodedVideo"],Sl(i));const s=x(t,["mimeType"]);return s!=null&&_(n,["encoding"],s),n}function hV(t,e){const n={},r=x(t,["uri"]);r!=null&&_(n,["gcsUri"],r);const i=x(t,["videoBytes"]);i!=null&&_(n,["bytesBase64Encoded"],Sl(i));const s=x(t,["mimeType"]);return s!=null&&_(n,["mimeType"],s),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ive(t,e){const n={},r=x(t,["displayName"]);return e!==void 0&&r!=null&&_(e,["displayName"],r),n}function Rve(t){const e={},n=x(t,["config"]);return n!=null&&Ive(n,e),e}function Pve(t,e){const n={},r=x(t,["force"]);return e!==void 0&&r!=null&&_(e,["_query","force"],r),n}function jve(t){const e={},n=x(t,["name"]);n!=null&&_(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&Pve(r,e),e}function Mve(t){const e={},n=x(t,["name"]);return n!=null&&_(e,["_url","name"],n),e}function Dve(t,e){const n={},r=x(t,["customMetadata"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["customMetadata"],s)}const i=x(t,["chunkingConfig"]);return e!==void 0&&i!=null&&_(e,["chunkingConfig"],i),n}function Ove(t){const e={},n=x(t,["name"]);n!=null&&_(e,["name"],n);const r=x(t,["metadata"]);r!=null&&_(e,["metadata"],r);const i=x(t,["done"]);i!=null&&_(e,["done"],i);const s=x(t,["error"]);s!=null&&_(e,["error"],s);const o=x(t,["response"]);return o!=null&&_(e,["response"],zve(o)),e}function Lve(t){const e={},n=x(t,["fileSearchStoreName"]);n!=null&&_(e,["_url","file_search_store_name"],n);const r=x(t,["fileName"]);r!=null&&_(e,["fileName"],r);const i=x(t,["config"]);return i!=null&&Dve(i,e),e}function zve(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["parent"]);r!=null&&_(e,["parent"],r);const i=x(t,["documentName"]);return i!=null&&_(e,["documentName"],i),e}function Uve(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),n}function Vve(t){const e={},n=x(t,["config"]);return n!=null&&Uve(n,e),e}function Fve(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const i=x(t,["fileSearchStores"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["fileSearchStores"],s)}return e}function pV(t,e){const n={},r=x(t,["mimeType"]);e!==void 0&&r!=null&&_(e,["mimeType"],r);const i=x(t,["displayName"]);e!==void 0&&i!=null&&_(e,["displayName"],i);const s=x(t,["customMetadata"]);if(e!==void 0&&s!=null){let c=s;Array.isArray(c)&&(c=c.map(f=>f)),_(e,["customMetadata"],c)}const o=x(t,["chunkingConfig"]);return e!==void 0&&o!=null&&_(e,["chunkingConfig"],o),n}function Bve(t){const e={},n=x(t,["fileSearchStoreName"]);n!=null&&_(e,["_url","file_search_store_name"],n);const r=x(t,["config"]);return r!=null&&pV(r,e),e}function Hve(t){const e={},n=x(t,["sdkHttpResponse"]);return n!=null&&_(e,["sdkHttpResponse"],n),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const qve="Content-Type",$ve="X-Server-Timeout",Gve="User-Agent",_S="x-goog-api-client",Kve="1.43.0",Wve=`google-genai-sdk/${Kve}`,Yve="v1beta1",Xve="v1beta",Jve=5,Qve=[408,429,500,502,503,504];class Zve{constructor(e){var n,r,i;this.clientOptions=Object.assign({},e),this.customBaseUrl=(n=e.httpOptions)===null||n===void 0?void 0:n.baseUrl,this.clientOptions.vertexai&&(this.clientOptions.project&&this.clientOptions.location?this.clientOptions.apiKey=void 0:this.clientOptions.apiKey&&(this.clientOptions.project=void 0,this.clientOptions.location=void 0));const s={};if(this.clientOptions.vertexai){if(!this.clientOptions.location&&!this.clientOptions.apiKey&&!this.customBaseUrl&&(this.clientOptions.location="global"),!(this.clientOptions.project&&this.clientOptions.location||this.clientOptions.apiKey)&&!this.customBaseUrl)throw new Error("Authentication is not set up. Please provide either a project and location, or an API key, or a custom base URL.");const c=e.project&&e.location||!!e.apiKey;this.customBaseUrl&&!c?(s.baseUrl=this.customBaseUrl,this.clientOptions.project=void 0,this.clientOptions.location=void 0):this.clientOptions.apiKey||this.clientOptions.location==="global"?s.baseUrl="https://aiplatform.googleapis.com/":this.clientOptions.project&&this.clientOptions.location&&(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`),s.apiVersion=(r=this.clientOptions.apiVersion)!==null&&r!==void 0?r:Yve}else{if(!this.clientOptions.apiKey)throw new np({message:"API key must be set when using the Gemini API.",status:403});s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:Xve,s.baseUrl="https://generativelanguage.googleapis.com/"}s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getCustomBaseUrl(){return this.customBaseUrl}async getAuthHeaders(){const e=new Headers;return await this.clientOptions.auth.addAuthHeaders(e),e}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const r=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&r.push(e.apiVersion),r.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,r){const i=[this.getRequestUrlInternal(n)];return r&&i.push(this.getBaseResourcePath()),e!==""&&i.push(e),new URL(`${i.join("/")}`)}shouldPrependVertexProjectPath(e,n){return!(n.baseUrl&&n.baseUrlResourceScope===mS.COLLECTION||this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);if(e.queryParams)for(const[o,c]of Object.entries(e.queryParams))i.searchParams.append(o,String(c));let s={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else s.body=e.body;return s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.unaryApiCall(i,s,e.httpMethod)}patchHttpOptions(e,n){const r=JSON.parse(JSON.stringify(e));for(const[i,s]of Object.entries(n))typeof s=="object"?r[i]=Object.assign(Object.assign({},r[i]),s):s!==void 0&&(r[i]=s);return r}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const r=this.shouldPrependVertexProjectPath(e,n),i=this.constructUrl(e.path,n,r);(!i.searchParams.has("alt")||i.searchParams.get("alt")!=="sse")&&i.searchParams.set("alt","sse");let s={};return s.body=e.body,s=await this.includeExtraHttpOptionsToRequestInit(s,n,i.toString(),e.abortSignal),this.streamApiCall(i,s,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,r,i){if(n&&n.timeout||i){const s=new AbortController,o=s.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const c=setTimeout(()=>s.abort(),n.timeout);c&&typeof c.unref=="function"&&c.unref()}i&&i.addEventListener("abort",()=>{s.abort()}),e.signal=o}return n&&n.extraBody!==null&&exe(e,n.extraBody),e.headers=await this.getHeadersInternal(n,r),e}async unaryApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await MO(i),new gS(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}async streamApiCall(e,n,r){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:r})).then(async i=>(await MO(i),this.processStreamResponse(i))).catch(i=>{throw i instanceof Error?i:new Error(JSON.stringify(i))})}processStreamResponse(e){return ys(this,arguments,function*(){var r;const i=(r=e==null?void 0:e.body)===null||r===void 0?void 0:r.getReader(),s=new TextDecoder("utf-8");if(!i)throw new Error("Response body is empty");try{let o="";const c="data:",f=[`

`,"\r\r",`\r
\r
`];for(;;){const{done:d,value:h}=yield it(i.read());if(d){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const m=s.decode(h,{stream:!0});try{const b=JSON.parse(m);if("error"in b){const w=JSON.parse(JSON.stringify(b.error)),S=w.status,C=w.code,R=`got status: ${S}. ${JSON.stringify(b)}`;if(C>=400&&C<600)throw new np({message:R,status:C})}}catch(b){if(b.name==="ApiError")throw b}o+=m;let g=-1,v=0;for(;;){g=-1,v=0;for(const S of f){const C=o.indexOf(S);C!==-1&&(g===-1||C<g)&&(g=C,v=S.length)}if(g===-1)break;const b=o.substring(0,g);o=o.substring(g+v);const w=b.trim();if(w.startsWith(c)){const S=w.substring(c.length).trim();try{const C=new Response(S,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield it(new gS(C))}catch(C){throw new Error(`exception parsing stream chunk ${S}. ${C}`)}}}}}finally{i.releaseLock()}})}async apiCall(e,n){var r;if(!this.clientOptions.httpOptions||!this.clientOptions.httpOptions.retryOptions)return fetch(e,n);const i=this.clientOptions.httpOptions.retryOptions;return Bpe(async()=>{const o=await fetch(e,n);if(o.ok)return o;throw Qve.includes(o.status)?new Error(`Retryable HTTP Error: ${o.statusText}`):new G8.AbortError(`Non-retryable exception ${o.statusText} sending request`)},{retries:((r=i.attempts)!==null&&r!==void 0?r:Jve)-1})}getDefaultHeaders(){const e={},n=Wve+" "+this.clientOptions.userAgentExtra;return e[Gve]=n,e[_S]=n,e[qve]="application/json",e}async getHeadersInternal(e,n){const r=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))r.append(i,s);e.timeout&&e.timeout>0&&r.append($ve,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(r,n),r}getFileName(e){var n;let r="";return typeof e=="string"&&(r=e.replace(/[/\\]+$/,""),r=(n=r.split(/[/\\]/).pop())!==null&&n!==void 0?n:""),r}async uploadFile(e,n){var r;const i={};n!=null&&(i.mimeType=n.mimeType,i.name=n.name,i.displayName=n.displayName),i.name&&!i.name.startsWith("files/")&&(i.name=`files/${i.name}`);const s=this.clientOptions.uploader,o=await s.stat(e);i.sizeBytes=String(o.size);const c=(r=n==null?void 0:n.mimeType)!==null&&r!==void 0?r:o.type;if(c===void 0||c==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");i.mimeType=c;const f={file:i},d=this.getFileName(e),h=Ue("upload/v1beta/files",f._url),m=await this.fetchUploadUrl(h,i.sizeBytes,i.mimeType,d,f,n==null?void 0:n.httpOptions);return s.upload(e,m,this)}async uploadFileToFileSearchStore(e,n,r){var i;const s=this.clientOptions.uploader,o=await s.stat(n),c=String(o.size),f=(i=r==null?void 0:r.mimeType)!==null&&i!==void 0?i:o.type;if(f===void 0||f==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");const d=`upload/v1beta/${e}:uploadToFileSearchStore`,h=this.getFileName(n),m={};r!=null&&pV(r,m);const g=await this.fetchUploadUrl(d,c,f,h,m,r==null?void 0:r.httpOptions);return s.uploadToFileSearchStore(n,g,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n,r,i,s,o){var c;let f={};o?f=o:f={apiVersion:"",headers:Object.assign({"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${n}`,"X-Goog-Upload-Header-Content-Type":`${r}`},i?{"X-Goog-Upload-File-Name":i}:{})};const d=await this.request({path:e,body:JSON.stringify(s),httpMethod:"POST",httpOptions:f});if(!d||!(d!=null&&d.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const h=(c=d==null?void 0:d.headers)===null||c===void 0?void 0:c["x-goog-upload-url"];if(h===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return h}}async function MO(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let r;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?r=await t.json():r={error:{message:await t.text(),code:t.status,status:t.statusText}};const i=JSON.stringify(r);throw n>=400&&n<600?new np({message:i,status:n}):new Error(i)}}function exe(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const s=JSON.parse(t.body);if(typeof s=="object"&&s!==null&&!Array.isArray(s))n=s;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function r(s,o){const c=Object.assign({},s);for(const f in o)if(Object.prototype.hasOwnProperty.call(o,f)){const d=o[f],h=c[f];d&&typeof d=="object"&&!Array.isArray(d)&&h&&typeof h=="object"&&!Array.isArray(h)?c[f]=r(h,d):(h&&d&&typeof h!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${f}". Original type: ${typeof h}, New type: ${typeof d}. Overwriting.`),c[f]=d)}return c}const i=r(n,e);t.body=JSON.stringify(i)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const txe="mcp_used/unknown";let nxe=!1;function mV(t){for(const e of t)if(rxe(e)||typeof e=="object"&&"inputSchema"in e)return!0;return nxe}function gV(t){var e;const n=(e=t[_S])!==null&&e!==void 0?e:"";t[_S]=(n+` ${txe}`).trimStart()}function rxe(t){return t!==null&&typeof t=="object"&&t instanceof fA}function ixe(t){return ys(this,arguments,function*(n,r=100){let i,s=0;for(;s<r;){const o=yield it(n.listTools({cursor:i}));for(const c of o.tools)yield yield it(c),s++;if(!o.nextCursor)break;i=o.nextCursor}})}class fA{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new fA(e,n)}async initialize(){var e,n,r,i;if(this.mcpTools.length>0)return;const s={},o=[];for(const h of this.mcpClients)try{for(var c=!0,f=(n=void 0,vs(ixe(h))),d;d=await f.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const m=i;o.push(m);const g=m.name;if(s[g])throw new Error(`Duplicate function name ${g} found in MCP tools. Please ensure function names are unique.`);s[g]=h}}catch(m){n={error:m}}finally{try{!c&&!e&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}this.mcpTools=o,this.functionNameToMcpClient=s}async tool(){return await this.initialize(),Ime(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const r of e)if(r.name in this.functionNameToMcpClient){const i=this.functionNameToMcpClient[r.name];let s;this.config.timeout&&(s={timeout:this.config.timeout});const o=await i.callTool({name:r.name,arguments:r.args},void 0,s);n.push({functionResponse:{name:r.name,response:o.isError?{error:o}:o}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function sxe(t,e,n){const r=new wme;let i;n.data instanceof Blob?i=JSON.parse(await n.data.text()):i=JSON.parse(n.data),Object.assign(r,i),e(r)}class oxe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r}async connect(e){var n,r;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const i=this.apiClient.getWebsocketBaseUrl(),s=this.apiClient.getApiVersion(),o=cxe(this.apiClient.getDefaultHeaders()),c=this.apiClient.getApiKey(),f=`${i}/ws/google.ai.generativelanguage.${s}.GenerativeService.BidiGenerateMusic?key=${c}`;let d=()=>{};const h=new Promise(N=>{d=N}),m=e.callbacks,g=function(){d({})},v=this.apiClient,b={onopen:g,onmessage:N=>{sxe(v,m.onmessage,N)},onerror:(n=m==null?void 0:m.onerror)!==null&&n!==void 0?n:function(N){},onclose:(r=m==null?void 0:m.onclose)!==null&&r!==void 0?r:function(N){}},w=this.webSocketFactory.create(f,lxe(o),b);w.connect(),await h;const R={setup:{model:It(this.apiClient,e.model)}};return w.send(JSON.stringify(R)),new axe(w,this.apiClient)}}class axe{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=I0e(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=k0e(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(Gu.PLAY)}pause(){this.sendPlaybackControl(Gu.PAUSE)}stop(){this.sendPlaybackControl(Gu.STOP)}resetContext(){this.sendPlaybackControl(Gu.RESET_CONTEXT)}close(){this.conn.close()}}function lxe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function cxe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const uxe="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function dxe(t,e,n){const r=new _me;let i;n.data instanceof Blob?i=await n.data.text():n.data instanceof ArrayBuffer?i=new TextDecoder().decode(n.data):i=n.data;const s=JSON.parse(i);if(t.isVertexAI()){const o=j0e(s);Object.assign(r,o)}else Object.assign(r,s);e(r)}class fxe{constructor(e,n,r){this.apiClient=e,this.auth=n,this.webSocketFactory=r,this.music=new oxe(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,r,i,s,o,c;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const f=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let h;const m=this.apiClient.getHeaders();e.config&&e.config.tools&&mV(e.config.tools)&&gV(m);const g=gxe(m);if(this.apiClient.isVertexAI()){const I=this.apiClient.getProject(),U=this.apiClient.getLocation(),B=this.apiClient.getApiKey(),P=!!I&&!!U||!!B;this.apiClient.getCustomBaseUrl()&&!P?h=f:(h=`${f}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(g,h))}else{const I=this.apiClient.getApiKey();let U="BidiGenerateContent",B="key";I!=null&&I.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),U="BidiGenerateContentConstrained",B="access_token"),h=`${f}/ws/google.ai.generativelanguage.${d}.GenerativeService.${U}?${B}=${I}`}let v=()=>{};const b=new Promise(I=>{v=I}),w=e.callbacks,S=function(){var I;(I=w==null?void 0:w.onopen)===null||I===void 0||I.call(w),v({})},C=this.apiClient,R={onopen:S,onmessage:I=>{dxe(C,w.onmessage,I)},onerror:(n=w==null?void 0:w.onerror)!==null&&n!==void 0?n:function(I){},onclose:(r=w==null?void 0:w.onclose)!==null&&r!==void 0?r:function(I){}},N=this.webSocketFactory.create(h,mxe(g),R);N.connect(),await b;let O=It(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&O.startsWith("publishers/")){const I=this.apiClient.getProject(),U=this.apiClient.getLocation();I&&U&&(O=`projects/${I}/locations/${U}/`+O)}let k={};this.apiClient.isVertexAI()&&((i=e.config)===null||i===void 0?void 0:i.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[my.AUDIO]}:e.config.responseModalities=[my.AUDIO]),!((s=e.config)===null||s===void 0)&&s.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const D=(c=(o=e.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[],M=[];for(const I of D)if(this.isCallableTool(I)){const U=I;M.push(await U.tool())}else M.push(I);M.length>0&&(e.config.tools=M);const j={model:O,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?k=N0e(this.apiClient,j):k=C0e(this.apiClient,j),delete k.config,N.send(JSON.stringify(k)),new pxe(N,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const hxe={turnComplete:!0};class pxe{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let r=[];try{r=di(n.turns),e.isVertexAI()||(r=r.map(i=>Pp(i)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:r,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let r=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?r=n.functionResponses:r=[n.functionResponses],r.length===0)throw new Error("functionResponses is required.");for(const s of r){if(typeof s!="object"||s===null||!("name"in s)||!("response"in s))throw new Error(`Could not parse function response, type '${typeof s}'.`);if(!e.isVertexAI()&&!("id"in s))throw new Error(uxe)}return{toolResponse:{functionResponses:r}}}sendClientContent(e){e=Object.assign(Object.assign({},hxe),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:P0e(e)}:n={realtimeInput:R0e(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function mxe(t){const e={};return t.forEach((n,r)=>{e[r]=n}),e}function gxe(t){const e=new Headers;for(const[n,r]of Object.entries(t))e.append(n,r);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DO=10;function OO(t){var e,n,r;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let i=!1;for(const o of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(id(o)){i=!0;break}if(!i)return!0;const s=(r=t==null?void 0:t.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls;return s&&(s<0||!Number.isInteger(s))||s==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",s),!0):!1}function id(t){return"callTool"in t&&typeof t.callTool=="function"}function yxe(t){var e,n,r;return(r=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(i=>id(i)))!==null&&r!==void 0?r:!1}function LO(t){var e;const n=[];return!((e=t==null?void 0:t.config)===null||e===void 0)&&e.tools&&t.config.tools.forEach((r,i)=>{if(id(r))return;const s=r;s.functionDeclarations&&s.functionDeclarations.length>0&&n.push(i)}),n}function zO(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class vxe extends fa{constructor(e){super(),this.apiClient=e,this.embedContent=async n=>{if(!this.apiClient.isVertexAI())return await this.embedContentInternal(n);if(n.model.includes("gemini")&&n.model!=="gemini-embedding-001"||n.model.includes("maas")){const i=di(n.contents);if(i.length>1)throw new Error("The embedContent API for this model only supports one content at a time.");const s=Object.assign(Object.assign({},n),{content:i[0],embeddingApiType:gy.EMBED_CONTENT});return await this.embedContentInternal(s)}else{const i=Object.assign(Object.assign({},n),{embeddingApiType:gy.PREDICT});return await this.embedContentInternal(i)}},this.generateContent=async n=>{var r,i,s,o,c;const f=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!yxe(n)||OO(n.config))return await this.generateContentInternal(f);const d=LO(n);if(d.length>0){const w=d.map(S=>`tools[${S}]`).join(", ");throw new Error(`Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations is not yet supported. Incompatible tools found at ${w}.`)}let h,m;const g=di(f.contents),v=(s=(i=(r=f.config)===null||r===void 0?void 0:r.automaticFunctionCalling)===null||i===void 0?void 0:i.maximumRemoteCalls)!==null&&s!==void 0?s:DO;let b=0;for(;b<v&&(h=await this.generateContentInternal(f),!(!h.functionCalls||h.functionCalls.length===0));){const w=h.candidates[0].content,S=[];for(const C of(c=(o=n.config)===null||o===void 0?void 0:o.tools)!==null&&c!==void 0?c:[])if(id(C)){const N=await C.callTool(h.functionCalls);S.push(...N)}b++,m={role:"user",parts:S},f.contents=di(f.contents),f.contents.push(w),f.contents.push(m),zO(f.config)&&(g.push(w),g.push(m))}return zO(f.config)&&(h.automaticFunctionCallingHistory=g),h},this.generateContentStream=async n=>{var r,i,s,o,c;if(this.maybeMoveToResponseJsonSchem(n),OO(n.config)){const m=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(m)}const f=LO(n);if(f.length>0){const m=f.map(g=>`tools[${g}]`).join(", ");throw new Error(`Incompatible tools found at ${m}. Automatic function calling with CallableTools (or MCP objects) and basic FunctionDeclarations" is not yet supported.`)}const d=(s=(i=(r=n==null?void 0:n.config)===null||r===void 0?void 0:r.toolConfig)===null||i===void 0?void 0:i.functionCallingConfig)===null||s===void 0?void 0:s.streamFunctionCallArguments,h=(c=(o=n==null?void 0:n.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||c===void 0?void 0:c.disable;if(d&&!h)throw new Error("Running in streaming mode with 'streamFunctionCallArguments' enabled, this feature is not compatible with automatic function calling (AFC). Please set 'config.automaticFunctionCalling.disable' to true to disable AFC or leave 'config.toolConfig.functionCallingConfig.streamFunctionCallArguments' to be undefined or set to false to disable streaming function call arguments feature.");return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(r=>{var i;let s;const o=[];if(r!=null&&r.generatedImages)for(const f of r.generatedImages)f&&(f!=null&&f.safetyAttributes)&&((i=f==null?void 0:f.safetyAttributes)===null||i===void 0?void 0:i.contentType)==="Positive Prompt"?s=f==null?void 0:f.safetyAttributes:o.push(f);let c;return s?c={generatedImages:o,positivePromptSafetyAttributes:s,sdkHttpResponse:r.sdkHttpResponse}:c={generatedImages:o,sdkHttpResponse:r.sdkHttpResponse},c}),this.list=async n=>{var r;const o={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!o.config.queryBase){if(!((r=o.config)===null||r===void 0)&&r.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");o.config.filter="labels.tune-type:*"}return new Fc(ra.PAGED_ITEM_MODELS,c=>this.listInternal(c),await this.listInternal(o),o)},this.editImage=async n=>{const r={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(r.referenceImages=n.referenceImages.map(i=>i.toReferenceImageAPI())),await this.editImageInternal(r)},this.upscaleImage=async n=>{let r={numberOfImages:1,mode:"upscale"};n.config&&(r=Object.assign(Object.assign({},r),n.config));const i={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:r};return await this.upscaleImageInternal(i)},this.generateVideos=async n=>{var r,i,s,o,c,f;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((r=n.video)===null||r===void 0)&&r.uri&&(!((i=n.video)===null||i===void 0)&&i.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((o=(s=n.source)===null||s===void 0?void 0:s.video)===null||o===void 0)&&o.uri&&(!((f=(c=n.source)===null||c===void 0?void 0:c.video)===null||f===void 0)&&f.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,r,i;const s=(n=e.config)===null||n===void 0?void 0:n.tools;if(!s)return e;const o=await Promise.all(s.map(async f=>id(f)?await f.tool():f)),c={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:o})};if(c.config.tools=o,e.config&&e.config.tools&&mV(e.config.tools)){const f=(i=(r=e.config.httpOptions)===null||r===void 0?void 0:r.headers)!==null&&i!==void 0?i:{};let d=Object.assign({},f);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),gV(d),c.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return c}async initAfcToolsMap(e){var n,r,i;const s=new Map;for(const o of(r=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&r!==void 0?r:[])if(id(o)){const c=o,f=await c.tool();for(const d of(i=f.functionDeclarations)!==null&&i!==void 0?i:[]){if(!d.name)throw new Error("Function declaration name is required.");if(s.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);s.set(d.name,c)}}return s}async processAfcStream(e){var n,r,i;const s=(i=(r=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:DO;let o=!1,c=0;const f=await this.initAfcToolsMap(e);return(function(d,h,m){return ys(this,arguments,function*(){for(var g,v,b,w,S,C;c<s;){o&&(c++,o=!1);const k=yield it(d.processParamsMaybeAddMcpUsage(m)),D=yield it(d.generateContentStreamInternal(k)),M=[],j=[];try{for(var R=!0,N=(v=void 0,vs(D)),O;O=yield it(N.next()),g=O.done,!g;R=!0){w=O.value,R=!1;const I=w;if(yield yield it(I),I.candidates&&(!((S=I.candidates[0])===null||S===void 0)&&S.content)){j.push(I.candidates[0].content);for(const U of(C=I.candidates[0].content.parts)!==null&&C!==void 0?C:[])if(c<s&&U.functionCall){if(!U.functionCall.name)throw new Error("Function call name was not returned by the model.");if(h.has(U.functionCall.name)){const B=yield it(h.get(U.functionCall.name).callTool([U.functionCall]));M.push(...B)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${h.keys()}, mising tool: ${U.functionCall.name}`)}}}}catch(I){v={error:I}}finally{try{!R&&!g&&(b=N.return)&&(yield it(b.call(N)))}finally{if(v)throw v.error}}if(M.length>0){o=!0;const I=new ah;I.candidates=[{content:{role:"user",parts:M}}],yield yield it(I);const U=[];U.push(...j),U.push({role:"user",parts:M});const B=di(m.contents).concat(U);m.contents=B}else break}})})(this,f,e)}async generateContentInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=RO(this.apiClient,e);return c=Ue("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=jO(h),g=new ah;return Object.assign(g,m),g})}else{const d=IO(this.apiClient,e);return c=Ue("{model}:generateContent",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=PO(h),g=new ah;return Object.assign(g,m),g})}}async generateContentStreamInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=RO(this.apiClient,e);return c=Ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}),o.then(function(m){return ys(this,arguments,function*(){var g,v,b,w;try{for(var S=!0,C=vs(m),R;R=yield it(C.next()),g=R.done,!g;S=!0){w=R.value,S=!1;const N=w,O=jO(yield it(N.json()),e);O.sdkHttpResponse={headers:N.headers};const k=new ah;Object.assign(k,O),yield yield it(k)}}catch(N){v={error:N}}finally{try{!S&&!g&&(b=C.return)&&(yield it(b.call(C)))}finally{if(v)throw v.error}}})})}else{const d=IO(this.apiClient,e);return c=Ue("{model}:streamGenerateContent?alt=sse",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.requestStream({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}),o.then(function(m){return ys(this,arguments,function*(){var g,v,b,w;try{for(var S=!0,C=vs(m),R;R=yield it(C.next()),g=R.done,!g;S=!0){w=R.value,S=!1;const N=w,O=PO(yield it(N.json()),e);O.sdkHttpResponse={headers:N.headers};const k=new ah;Object.assign(k,O),yield yield it(k)}}catch(N){v={error:N}}finally{try{!S&&!g&&(b=C.return)&&(yield it(b.call(C)))}finally{if(v)throw v.error}}})})}}async embedContentInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=uye(this.apiClient,e,e),h=Pme(e.model)?"{model}:embedContent":"{model}:predict";return c=Ue(h,d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(m=>m.json().then(g=>{const v=g;return v.sdkHttpResponse={headers:m.headers},v})),o.then(m=>{const g=fye(m,e),v=new hO;return Object.assign(v,g),v})}else{const d=cye(this.apiClient,e);return c=Ue("{model}:batchEmbedContents",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=dye(h),g=new hO;return Object.assign(g,m),g})}}async generateImagesInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Sye(this.apiClient,e);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Eye(h),g=new pO;return Object.assign(g,m),g})}else{const d=wye(this.apiClient,e);return c=Ue("{model}:predict",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Tye(h),g=new pO;return Object.assign(g,m),g})}}async editImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=sye(this.apiClient,e);return s=Ue("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=oye(f),h=new cme;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=Sve(this.apiClient,e);return s=Ue("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=Tve(f),h=new ume;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=ive(this.apiClient,e);return s=Ue("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=sve(f),h=new dme;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=dve(this.apiClient,e);return s=Ue("{model}:predict",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=fve(f),h=new fme;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Bye(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>bS(h))}else{const d=Fye(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>xS(h))}}async listInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Jye(this.apiClient,e);return c=Ue("{models_url}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Zye(h),g=new mO;return Object.assign(g,m),g})}else{const d=Xye(this.apiClient,e);return c=Ue("{models_url}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Qye(h),g=new mO;return Object.assign(g,m),g})}}async update(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=_ve(this.apiClient,e);return c=Ue("{model}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>bS(h))}else{const d=bve(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>xS(h))}}async delete(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=tye(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=rye(h),g=new gO;return Object.assign(g,m),g})}else{const d=eye(this.apiClient,e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=nye(h),g=new gO;return Object.assign(g,m),g})}}async countTokens(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=J0e(this.apiClient,e);return c=Ue("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Z0e(h),g=new yO;return Object.assign(g,m),g})}else{const d=X0e(this.apiClient,e);return c=Ue("{model}:countTokens",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Q0e(h),g=new yO;return Object.assign(g,m),g})}}async computeTokens(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=H0e(this.apiClient,e);return s=Ue("{model}:computeTokens",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>{const d=q0e(f),h=new hme;return Object.assign(h,d),h})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Rye(this.apiClient,e);return c=Ue("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o.then(h=>{const m=kye(h),g=new yy;return Object.assign(g,m),g})}else{const d=Iye(this.apiClient,e);return c=Ue("{model}:predictLongRunning",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o.then(h=>{const m=Nye(h),g=new yy;return Object.assign(g,m),g})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class xxe extends fa{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async get(e){const n=e.operation,r=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const i=n.name.split("/operations/")[0];let s;r&&"httpOptions"in r&&(s=r.httpOptions);const o=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:i,config:{httpOptions:s}});return n._fromAPIResponse({apiResponse:o,_isVertexAI:!0})}else{const i=await this.getVideosOperationInternal({operationName:n.name,config:r});return n._fromAPIResponse({apiResponse:i,_isVertexAI:!1})}}async getVideosOperationInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=rme(e);return c=Ue("{operationName}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json()),o}else{const d=nme(e);return c=Ue("{operationName}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json()),o}}async fetchPredictVideosOperationInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=Ype(e);return s=Ue("{resourceName}:fetchPredictOperation",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function bxe(t){const e={},n=x(t,["data"]);if(n!=null&&_(e,["data"],n),x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function _xe(t){const e={},n=x(t,["parts"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Ixe(s))),_(e,["parts"],i)}const r=x(t,["role"]);return r!=null&&_(e,["role"],r),e}function wxe(t,e,n){const r={},i=x(e,["expireTime"]);n!==void 0&&i!=null&&_(n,["expireTime"],i);const s=x(e,["newSessionExpireTime"]);n!==void 0&&s!=null&&_(n,["newSessionExpireTime"],s);const o=x(e,["uses"]);n!==void 0&&o!=null&&_(n,["uses"],o);const c=x(e,["liveConnectConstraints"]);n!==void 0&&c!=null&&_(n,["bidiGenerateContentSetup"],kxe(t,c));const f=x(e,["lockAdditionalFields"]);return n!==void 0&&f!=null&&_(n,["fieldMask"],f),r}function Sxe(t,e){const n={},r=x(e,["config"]);return r!=null&&_(n,["config"],wxe(t,r,n)),n}function Txe(t){const e={};if(x(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=x(t,["fileUri"]);n!=null&&_(e,["fileUri"],n);const r=x(t,["mimeType"]);return r!=null&&_(e,["mimeType"],r),e}function Exe(t){const e={},n=x(t,["id"]);n!=null&&_(e,["id"],n);const r=x(t,["args"]);r!=null&&_(e,["args"],r);const i=x(t,["name"]);if(i!=null&&_(e,["name"],i),x(t,["partialArgs"])!==void 0)throw new Error("partialArgs parameter is not supported in Gemini API.");if(x(t,["willContinue"])!==void 0)throw new Error("willContinue parameter is not supported in Gemini API.");return e}function Axe(t){const e={};if(x(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=x(t,["enableWidget"]);return n!=null&&_(e,["enableWidget"],n),e}function Cxe(t){const e={},n=x(t,["searchTypes"]);if(n!=null&&_(e,["searchTypes"],n),x(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");if(x(t,["blockingConfidence"])!==void 0)throw new Error("blockingConfidence parameter is not supported in Gemini API.");const r=x(t,["timeRangeFilter"]);return r!=null&&_(e,["timeRangeFilter"],r),e}function Nxe(t,e){const n={},r=x(t,["generationConfig"]);e!==void 0&&r!=null&&_(e,["setup","generationConfig"],r);const i=x(t,["responseModalities"]);e!==void 0&&i!=null&&_(e,["setup","generationConfig","responseModalities"],i);const s=x(t,["temperature"]);e!==void 0&&s!=null&&_(e,["setup","generationConfig","temperature"],s);const o=x(t,["topP"]);e!==void 0&&o!=null&&_(e,["setup","generationConfig","topP"],o);const c=x(t,["topK"]);e!==void 0&&c!=null&&_(e,["setup","generationConfig","topK"],c);const f=x(t,["maxOutputTokens"]);e!==void 0&&f!=null&&_(e,["setup","generationConfig","maxOutputTokens"],f);const d=x(t,["mediaResolution"]);e!==void 0&&d!=null&&_(e,["setup","generationConfig","mediaResolution"],d);const h=x(t,["seed"]);e!==void 0&&h!=null&&_(e,["setup","generationConfig","seed"],h);const m=x(t,["speechConfig"]);e!==void 0&&m!=null&&_(e,["setup","generationConfig","speechConfig"],dA(m));const g=x(t,["thinkingConfig"]);e!==void 0&&g!=null&&_(e,["setup","generationConfig","thinkingConfig"],g);const v=x(t,["enableAffectiveDialog"]);e!==void 0&&v!=null&&_(e,["setup","generationConfig","enableAffectiveDialog"],v);const b=x(t,["systemInstruction"]);e!==void 0&&b!=null&&_(e,["setup","systemInstruction"],_xe(Gn(b)));const w=x(t,["tools"]);if(e!==void 0&&w!=null){let D=Kd(w);Array.isArray(D)&&(D=D.map(M=>Pxe(Gd(M)))),_(e,["setup","tools"],D)}const S=x(t,["sessionResumption"]);e!==void 0&&S!=null&&_(e,["setup","sessionResumption"],Rxe(S));const C=x(t,["inputAudioTranscription"]);e!==void 0&&C!=null&&_(e,["setup","inputAudioTranscription"],C);const R=x(t,["outputAudioTranscription"]);e!==void 0&&R!=null&&_(e,["setup","outputAudioTranscription"],R);const N=x(t,["realtimeInputConfig"]);e!==void 0&&N!=null&&_(e,["setup","realtimeInputConfig"],N);const O=x(t,["contextWindowCompression"]);e!==void 0&&O!=null&&_(e,["setup","contextWindowCompression"],O);const k=x(t,["proactivity"]);if(e!==void 0&&k!=null&&_(e,["setup","proactivity"],k),x(t,["explicitVadSignal"])!==void 0)throw new Error("explicitVadSignal parameter is not supported in Gemini API.");return n}function kxe(t,e){const n={},r=x(e,["model"]);r!=null&&_(n,["setup","model"],It(t,r));const i=x(e,["config"]);return i!=null&&_(n,["config"],Nxe(i,n)),n}function Ixe(t){const e={},n=x(t,["mediaResolution"]);n!=null&&_(e,["mediaResolution"],n);const r=x(t,["codeExecutionResult"]);r!=null&&_(e,["codeExecutionResult"],r);const i=x(t,["executableCode"]);i!=null&&_(e,["executableCode"],i);const s=x(t,["fileData"]);s!=null&&_(e,["fileData"],Txe(s));const o=x(t,["functionCall"]);o!=null&&_(e,["functionCall"],Exe(o));const c=x(t,["functionResponse"]);c!=null&&_(e,["functionResponse"],c);const f=x(t,["inlineData"]);f!=null&&_(e,["inlineData"],bxe(f));const d=x(t,["text"]);d!=null&&_(e,["text"],d);const h=x(t,["thought"]);h!=null&&_(e,["thought"],h);const m=x(t,["thoughtSignature"]);m!=null&&_(e,["thoughtSignature"],m);const g=x(t,["videoMetadata"]);return g!=null&&_(e,["videoMetadata"],g),e}function Rxe(t){const e={},n=x(t,["handle"]);if(n!=null&&_(e,["handle"],n),x(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Pxe(t){const e={};if(x(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const n=x(t,["computerUse"]);n!=null&&_(e,["computerUse"],n);const r=x(t,["fileSearch"]);r!=null&&_(e,["fileSearch"],r);const i=x(t,["googleSearch"]);i!=null&&_(e,["googleSearch"],Cxe(i));const s=x(t,["codeExecution"]);if(s!=null&&_(e,["codeExecution"],s),x(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const o=x(t,["functionDeclarations"]);if(o!=null){let m=o;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["functionDeclarations"],m)}const c=x(t,["googleMaps"]);c!=null&&_(e,["googleMaps"],Axe(c));const f=x(t,["googleSearchRetrieval"]);f!=null&&_(e,["googleSearchRetrieval"],f);const d=x(t,["urlContext"]);d!=null&&_(e,["urlContext"],d);const h=x(t,["mcpServers"]);if(h!=null){let m=h;Array.isArray(m)&&(m=m.map(g=>g)),_(e,["mcpServers"],m)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function jxe(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const r=t[n];if(typeof r=="object"&&r!=null&&Object.keys(r).length>0){const i=Object.keys(r).map(s=>`${n}.${s}`);e.push(...i)}else e.push(n)}return e.join(",")}function Mxe(t,e){let n=null;const r=t.bidiGenerateContentSetup;if(typeof r=="object"&&r!==null&&"setup"in r){const s=r.setup;typeof s=="object"&&s!==null?(t.bidiGenerateContentSetup=s,n=s):delete t.bidiGenerateContentSetup}else r!==void 0&&delete t.bidiGenerateContentSetup;const i=t.fieldMask;if(n){const s=jxe(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)s?t.fieldMask=s:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&i!==null&&Array.isArray(i)&&i.length>0){const o=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let c=[];i.length>0&&(c=i.map(d=>o.includes(d)?`generationConfig.${d}`:d));const f=[];s&&f.push(s),c.length>0&&f.push(...c),f.length>0?t.fieldMask=f.join(","):delete t.fieldMask}else delete t.fieldMask}else i!==null&&Array.isArray(i)&&i.length>0?t.fieldMask=i.join(","):delete t.fieldMask;return t}class Dxe extends fa{constructor(e){super(),this.apiClient=e}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const c=Sxe(this.apiClient,e);s=Ue("auth_tokens",c._url),o=c._query,delete c.config,delete c._url,delete c._query;const f=Mxe(c,e.config);return i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(f),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(d=>d.json()),i.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Oxe(t,e){const n={},r=x(t,["force"]);return e!==void 0&&r!=null&&_(e,["_query","force"],r),n}function Lxe(t){const e={},n=x(t,["name"]);n!=null&&_(e,["_url","name"],n);const r=x(t,["config"]);return r!=null&&Oxe(r,e),e}function zxe(t){const e={},n=x(t,["name"]);return n!=null&&_(e,["_url","name"],n),e}function Uxe(t,e){const n={},r=x(t,["pageSize"]);e!==void 0&&r!=null&&_(e,["_query","pageSize"],r);const i=x(t,["pageToken"]);return e!==void 0&&i!=null&&_(e,["_query","pageToken"],i),n}function Vxe(t){const e={},n=x(t,["parent"]);n!=null&&_(e,["_url","parent"],n);const r=x(t,["config"]);return r!=null&&Uxe(r,e),e}function Fxe(t){const e={},n=x(t,["sdkHttpResponse"]);n!=null&&_(e,["sdkHttpResponse"],n);const r=x(t,["nextPageToken"]);r!=null&&_(e,["nextPageToken"],r);const i=x(t,["documents"]);if(i!=null){let s=i;Array.isArray(s)&&(s=s.map(o=>o)),_(e,["documents"],s)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Bxe extends fa{constructor(e){super(),this.apiClient=e,this.list=async n=>new Fc(ra.PAGED_ITEM_DOCUMENTS,r=>this.listInternal({parent:n.parent,config:r.config}),await this.listInternal(n),n)}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=zxe(e);return s=Ue("{name}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Lxe(e);i=Ue("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Vxe(e);return s=Ue("{parent}/documents",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Fxe(f),h=new pme;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Hxe extends fa{constructor(e,n=new Bxe(e)){super(),this.apiClient=e,this.documents=n,this.list=async(r={})=>new Fc(ra.PAGED_ITEM_FILE_SEARCH_STORES,i=>this.listInternal(i),await this.listInternal(r),r)}async uploadToFileSearchStore(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files to a file search store.");return this.apiClient.uploadFileToFileSearchStore(e.fileSearchStoreName,e.file,e.config)}async create(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Rve(e);return s=Ue("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async get(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Mve(e);return s=Ue("{name}",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>f)}}async delete(e){var n,r;let i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=jve(e);i=Ue("{name}",o._url),s=o._query,delete o._url,delete o._query,await this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal})}}async listInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Vve(e);return s=Ue("fileSearchStores",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Fve(f),h=new mme;return Object.assign(h,d),h})}}async uploadToFileSearchStoreInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Bve(e);return s=Ue("upload/v1beta/{file_search_store_name}:uploadToFileSearchStore",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Hve(f),h=new gme;return Object.assign(h,d),h})}}async importFile(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Lve(e);return s=Ue("{file_search_store_name}:importFile",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json()),i.then(f=>{const d=Ove(f),h=new oA;return Object.assign(h,d),h})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let yV=function(){const{crypto:t}=globalThis;if(t!=null&&t.randomUUID)return yV=t.randomUUID.bind(t),t.randomUUID();const e=new Uint8Array(1),n=t?()=>t.getRandomValues(e)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,r=>(+r^n()&15>>+r/4).toString(16))};const qxe=()=>yV();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function wS(t){return typeof t=="object"&&t!==null&&("name"in t&&t.name==="AbortError"||"message"in t&&String(t.message).includes("FetchRequestCanceledException"))}const SS=t=>{if(t instanceof Error)return t;if(typeof t=="object"&&t!==null){try{if(Object.prototype.toString.call(t)==="[object Error]"){const e=new Error(t.message,t.cause?{cause:t.cause}:{});return t.stack&&(e.stack=t.stack),t.cause&&!e.cause&&(e.cause=t.cause),t.name&&(e.name=t.name),e}}catch{}try{return new Error(JSON.stringify(t))}catch{}}return new Error(t)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $i extends Error{}class zr extends $i{constructor(e,n,r,i){super(`${zr.makeMessage(e,n,r)}`),this.status=e,this.headers=i,this.error=n}static makeMessage(e,n,r){const i=n!=null&&n.message?typeof n.message=="string"?n.message:JSON.stringify(n.message):n?JSON.stringify(n):r;return e&&i?`${e} ${i}`:e?`${e} status code (no body)`:i||"(no status code or body)"}static generate(e,n,r,i){if(!e||!i)return new Ov({message:r,cause:SS(n)});const s=n;return e===400?new xV(e,s,r,i):e===401?new bV(e,s,r,i):e===403?new _V(e,s,r,i):e===404?new wV(e,s,r,i):e===409?new SV(e,s,r,i):e===422?new TV(e,s,r,i):e===429?new EV(e,s,r,i):e>=500?new AV(e,s,r,i):new zr(e,s,r,i)}}class TS extends zr{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0)}}class Ov extends zr{constructor({message:e,cause:n}){super(void 0,void 0,e||"Connection error.",void 0),n&&(this.cause=n)}}class vV extends Ov{constructor({message:e}={}){super({message:e??"Request timed out."})}}class xV extends zr{}class bV extends zr{}class _V extends zr{}class wV extends zr{}class SV extends zr{}class TV extends zr{}class EV extends zr{}class AV extends zr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const $xe=/^[a-z][a-z0-9+.-]*:/i,Gxe=t=>$xe.test(t);let ES=t=>(ES=Array.isArray,ES(t));const Kxe=ES;let Wxe=Kxe;const UO=Wxe;function Yxe(t){if(!t)return!0;for(const e in t)return!1;return!0}function Xxe(t,e){return Object.prototype.hasOwnProperty.call(t,e)}const Jxe=(t,e)=>{if(typeof e!="number"||!Number.isInteger(e))throw new $i(`${t} must be an integer`);if(e<0)throw new $i(`${t} must be a positive integer`);return e},Qxe=t=>{try{return JSON.parse(t)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Zxe=t=>new Promise(e=>setTimeout(e,t));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Fu="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ebe(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const tbe=()=>{var t,e,n,r,i;const s=ebe();if(s==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":FO(Deno.build.os),"X-Stainless-Arch":VO(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(e=(t=Deno.version)===null||t===void 0?void 0:t.deno)!==null&&e!==void 0?e:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(s==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":FO((n=globalThis.process.platform)!==null&&n!==void 0?n:"unknown"),"X-Stainless-Arch":VO((r=globalThis.process.arch)!==null&&r!==void 0?r:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(i=globalThis.process.version)!==null&&i!==void 0?i:"unknown"};const o=nbe();return o?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${o.browser}`,"X-Stainless-Runtime-Version":o.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Fu,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function nbe(){if(typeof navigator>"u"||!navigator)return null;const t=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:e,pattern:n}of t){const r=n.exec(navigator.userAgent);if(r){const i=r[1]||0,s=r[2]||0,o=r[3]||0;return{browser:e,version:`${i}.${s}.${o}`}}}return null}const VO=t=>t==="x32"?"x32":t==="x86_64"||t==="x64"?"x64":t==="arm"?"arm":t==="aarch64"||t==="arm64"?"arm64":t?`other:${t}`:"unknown",FO=t=>(t=t.toLowerCase(),t.includes("ios")?"iOS":t==="android"?"Android":t==="darwin"?"MacOS":t==="win32"?"Windows":t==="freebsd"?"FreeBSD":t==="openbsd"?"OpenBSD":t==="linux"?"Linux":t?`Other:${t}`:"Unknown");let Ag;const rbe=()=>Ag??(Ag=tbe());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function ibe(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function CV(...t){const e=globalThis.ReadableStream;if(typeof e>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new e(...t)}function sbe(t){let e=Symbol.asyncIterator in t?t[Symbol.asyncIterator]():t[Symbol.iterator]();return CV({start(){},async pull(n){const{done:r,value:i}=await e.next();r?n.close():n.enqueue(i)},async cancel(){var n;await((n=e.return)===null||n===void 0?void 0:n.call(e))}})}function NV(t){if(t[Symbol.asyncIterator])return t;const e=t.getReader();return{async next(){try{const n=await e.read();return n!=null&&n.done&&e.releaseLock(),n}catch(n){throw e.releaseLock(),n}},async return(){const n=e.cancel();return e.releaseLock(),await n,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function obe(t){var e,n;if(t===null||typeof t!="object")return;if(t[Symbol.asyncIterator]){await((n=(e=t[Symbol.asyncIterator]()).return)===null||n===void 0?void 0:n.call(e));return}const r=t.getReader(),i=r.cancel();r.releaseLock(),await i}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const abe=({headers:t,body:e})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(e)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const kV=()=>{var t;if(typeof File>"u"){const{process:e}=globalThis,n=typeof((t=e==null?void 0:e.versions)===null||t===void 0?void 0:t.node)=="string"&&parseInt(e.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(n?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function U_(t,e,n){return kV(),new File(t,e??"unknown_file",n)}function lbe(t){return(typeof t=="object"&&t!==null&&("name"in t&&t.name&&String(t.name)||"url"in t&&t.url&&String(t.url)||"filename"in t&&t.filename&&String(t.filename)||"path"in t&&t.path&&String(t.path))||"").split(/[\\/]/).pop()||void 0}const cbe=t=>t!=null&&typeof t=="object"&&typeof t[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const IV=t=>t!=null&&typeof t=="object"&&typeof t.size=="number"&&typeof t.type=="string"&&typeof t.text=="function"&&typeof t.slice=="function"&&typeof t.arrayBuffer=="function",ube=t=>t!=null&&typeof t=="object"&&typeof t.name=="string"&&typeof t.lastModified=="number"&&IV(t),dbe=t=>t!=null&&typeof t=="object"&&typeof t.url=="string"&&typeof t.blob=="function";async function fbe(t,e,n){if(kV(),t=await t,ube(t))return t instanceof File?t:U_([await t.arrayBuffer()],t.name);if(dbe(t)){const i=await t.blob();return e||(e=new URL(t.url).pathname.split(/[\\/]/).pop()),U_(await AS(i),e,n)}const r=await AS(t);if(e||(e=lbe(t)),!(n!=null&&n.type)){const i=r.find(s=>typeof s=="object"&&"type"in s&&s.type);typeof i=="string"&&(n=Object.assign(Object.assign({},n),{type:i}))}return U_(r,e,n)}async function AS(t){var e,n,r,i,s;let o=[];if(typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer)o.push(t);else if(IV(t))o.push(t instanceof Blob?t:await t.arrayBuffer());else if(cbe(t))try{for(var c=!0,f=vs(t),d;d=await f.next(),e=d.done,!e;c=!0){i=d.value,c=!1;const h=i;o.push(...await AS(h))}}catch(h){n={error:h}}finally{try{!c&&!e&&(r=f.return)&&await r.call(f)}finally{if(n)throw n.error}}else{const h=(s=t==null?void 0:t.constructor)===null||s===void 0?void 0:s.name;throw new Error(`Unexpected data type: ${typeof t}${h?`; constructor: ${h}`:""}${hbe(t)}`)}return o}function hbe(t){return typeof t!="object"||t===null?"":`; props: [${Object.getOwnPropertyNames(t).map(n=>`"${n}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class RV{constructor(e){this._client=e}}RV._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function PV(t){return t.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const BO=Object.freeze(Object.create(null)),pbe=(t=PV)=>(function(n,...r){if(n.length===1)return n[0];let i=!1;const s=[],o=n.reduce((h,m,g)=>{var v,b,w;/[?#]/.test(m)&&(i=!0);const S=r[g];let C=(i?encodeURIComponent:t)(""+S);return g!==r.length&&(S==null||typeof S=="object"&&S.toString===((w=Object.getPrototypeOf((b=Object.getPrototypeOf((v=S.hasOwnProperty)!==null&&v!==void 0?v:BO))!==null&&b!==void 0?b:BO))===null||w===void 0?void 0:w.toString))&&(C=S+"",s.push({start:h.length+m.length,length:C.length,error:`Value of type ${Object.prototype.toString.call(S).slice(8,-1)} is not a valid path parameter`})),h+m+(g===r.length?"":C)},""),c=o.split(/[?#]/,1)[0],f=/(^|\/)(?:\.|%2e){1,2}(?=\/|$)/gi;let d;for(;(d=f.exec(c))!==null;){const h=d[0].startsWith("/"),m=h?1:0,g=h?d[0].slice(1):d[0];s.push({start:d.index+m,length:g.length,error:`Value "${g}" can't be safely passed as a path parameter`})}if(s.sort((h,m)=>h.start-m.start),s.length>0){let h=0;const m=s.reduce((g,v)=>{const b=" ".repeat(v.start-h),w="^".repeat(v.length);return h=v.start+v.length,g+b+w},"");throw new $i(`Path parameters result in path with invalid segments:
${s.map(g=>g.error).join(`
`)}
${o}
${m}`)}return o}),Cg=pbe(PV);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class jV extends RV{create(e,n){var r;const{api_version:i=this._client.apiVersion}=e,s=xy(e,["api_version"]);if("model"in s&&"agent_config"in s)throw new $i("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in s&&"generation_config"in s)throw new $i("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Cg`/${i}/interactions`,Object.assign(Object.assign({body:s},n),{stream:(r=e.stream)!==null&&r!==void 0?r:!1}))}delete(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.delete(Cg`/${i}/interactions/${e}`,r)}cancel(e,n={},r){const{api_version:i=this._client.apiVersion}=n??{};return this._client.post(Cg`/${i}/interactions/${e}/cancel`,r)}get(e,n={},r){var i;const s=n??{},{api_version:o=this._client.apiVersion}=s,c=xy(s,["api_version"]);return this._client.get(Cg`/${o}/interactions/${e}`,Object.assign(Object.assign({query:c},r),{stream:(i=n==null?void 0:n.stream)!==null&&i!==void 0?i:!1}))}}jV._key=Object.freeze(["interactions"]);class MV extends jV{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function mbe(t){let e=0;for(const i of t)e+=i.length;const n=new Uint8Array(e);let r=0;for(const i of t)n.set(i,r),r+=i.length;return n}let Ng;function hA(t){let e;return(Ng??(e=new globalThis.TextEncoder,Ng=e.encode.bind(e)))(t)}let kg;function HO(t){let e;return(kg??(e=new globalThis.TextDecoder,kg=e.decode.bind(e)))(t)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Lv{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(e){if(e==null)return[];const n=e instanceof ArrayBuffer?new Uint8Array(e):typeof e=="string"?hA(e):e;this.buffer=mbe([this.buffer,n]);const r=[];let i;for(;(i=gbe(this.buffer,this.carriageReturnIndex))!=null;){if(i.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=i.index;continue}if(this.carriageReturnIndex!=null&&(i.index!==this.carriageReturnIndex+1||i.carriage)){r.push(HO(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const s=this.carriageReturnIndex!==null?i.preceding-1:i.preceding,o=HO(this.buffer.subarray(0,s));r.push(o),this.buffer=this.buffer.subarray(i.index),this.carriageReturnIndex=null}return r}flush(){return this.buffer.length?this.decode(`
`):[]}}Lv.NEWLINE_CHARS=new Set([`
`,"\r"]);Lv.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function gbe(t,e){for(let i=e??0;i<t.length;i++){if(t[i]===10)return{preceding:i,index:i+1,carriage:!1};if(t[i]===13)return{preceding:i,index:i+1,carriage:!0}}return null}function ybe(t){for(let r=0;r<t.length-1;r++){if(t[r]===10&&t[r+1]===10||t[r]===13&&t[r+1]===13)return r+2;if(t[r]===13&&t[r+1]===10&&r+3<t.length&&t[r+2]===13&&t[r+3]===10)return r+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const by={off:0,error:200,warn:300,info:400,debug:500},qO=(t,e,n)=>{if(t){if(Xxe(by,t))return t;Rr(n).warn(`${e} was set to ${JSON.stringify(t)}, expected one of ${JSON.stringify(Object.keys(by))}`)}};function yh(){}function Ig(t,e,n){return!e||by[t]>by[n]?yh:e[t].bind(e)}const vbe={error:yh,warn:yh,info:yh,debug:yh};let $O=new WeakMap;function Rr(t){var e;const n=t.logger,r=(e=t.logLevel)!==null&&e!==void 0?e:"off";if(!n)return vbe;const i=$O.get(n);if(i&&i[0]===r)return i[1];const s={error:Ig("error",n,r),warn:Ig("warn",n,r),info:Ig("info",n,r),debug:Ig("debug",n,r)};return $O.set(n,[r,s]),s}const sc=t=>(t.options&&(t.options=Object.assign({},t.options),delete t.options.headers),t.headers&&(t.headers=Object.fromEntries((t.headers instanceof Headers?[...t.headers]:Object.entries(t.headers)).map(([e,n])=>[e,e.toLowerCase()==="x-goog-api-key"||e.toLowerCase()==="authorization"||e.toLowerCase()==="cookie"||e.toLowerCase()==="set-cookie"?"***":n]))),"retryOfRequestLogID"in t&&(t.retryOfRequestLogID&&(t.retryOf=t.retryOfRequestLogID),delete t.retryOfRequestLogID),t);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ku{constructor(e,n,r){this.iterator=e,this.controller=n,this.client=r}static fromSSEResponse(e,n,r){let i=!1;const s=r?Rr(r):console;function o(){return ys(this,arguments,function*(){var f,d,h,m;if(i)throw new $i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let g=!1;try{try{for(var v=!0,b=vs(xbe(e,n)),w;w=yield it(b.next()),f=w.done,!f;v=!0){m=w.value,v=!1;const S=m;if(!g)if(S.data.startsWith("[DONE]")){g=!0;continue}else try{yield yield it(JSON.parse(S.data))}catch(C){throw s.error("Could not parse message into JSON:",S.data),s.error("From chunk:",S.raw),C}}}catch(S){d={error:S}}finally{try{!v&&!f&&(h=b.return)&&(yield it(h.call(b)))}finally{if(d)throw d.error}}g=!0}catch(S){if(wS(S))return yield it(void 0);throw S}finally{g||n.abort()}})}return new Ku(o,n,r)}static fromReadableStream(e,n,r){let i=!1;function s(){return ys(this,arguments,function*(){var f,d,h,m;const g=new Lv,v=NV(e);try{for(var b=!0,w=vs(v),S;S=yield it(w.next()),f=S.done,!f;b=!0){m=S.value,b=!1;const C=m;for(const R of g.decode(C))yield yield it(R)}}catch(C){d={error:C}}finally{try{!b&&!f&&(h=w.return)&&(yield it(h.call(w)))}finally{if(d)throw d.error}}for(const C of g.flush())yield yield it(C)})}function o(){return ys(this,arguments,function*(){var f,d,h,m;if(i)throw new $i("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");i=!0;let g=!1;try{try{for(var v=!0,b=vs(s()),w;w=yield it(b.next()),f=w.done,!f;v=!0){m=w.value,v=!1;const S=m;g||S&&(yield yield it(JSON.parse(S)))}}catch(S){d={error:S}}finally{try{!v&&!f&&(h=b.return)&&(yield it(h.call(b)))}finally{if(d)throw d.error}}g=!0}catch(S){if(wS(S))return yield it(void 0);throw S}finally{g||n.abort()}})}return new Ku(o,n,r)}[Symbol.asyncIterator](){return this.iterator()}tee(){const e=[],n=[],r=this.iterator(),i=s=>({next:()=>{if(s.length===0){const o=r.next();e.push(o),n.push(o)}return s.shift()}});return[new Ku(()=>i(e),this.controller,this.client),new Ku(()=>i(n),this.controller,this.client)]}toReadableStream(){const e=this;let n;return CV({async start(){n=e[Symbol.asyncIterator]()},async pull(r){try{const{value:i,done:s}=await n.next();if(s)return r.close();const o=hA(JSON.stringify(i)+`
`);r.enqueue(o)}catch(i){r.error(i)}},async cancel(){var r;await((r=n.return)===null||r===void 0?void 0:r.call(n))}})}}function xbe(t,e){return ys(this,arguments,function*(){var r,i,s,o;if(!t.body)throw e.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new $i("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new $i("Attempted to iterate over a response with no body");const c=new _be,f=new Lv,d=NV(t.body);try{for(var h=!0,m=vs(bbe(d)),g;g=yield it(m.next()),r=g.done,!r;h=!0){o=g.value,h=!1;const v=o;for(const b of f.decode(v)){const w=c.decode(b);w&&(yield yield it(w))}}}catch(v){i={error:v}}finally{try{!h&&!r&&(s=m.return)&&(yield it(s.call(m)))}finally{if(i)throw i.error}}for(const v of f.flush()){const b=c.decode(v);b&&(yield yield it(b))}})}function bbe(t){return ys(this,arguments,function*(){var n,r,i,s;let o=new Uint8Array;try{for(var c=!0,f=vs(t),d;d=yield it(f.next()),n=d.done,!n;c=!0){s=d.value,c=!1;const h=s;if(h==null)continue;const m=h instanceof ArrayBuffer?new Uint8Array(h):typeof h=="string"?hA(h):h;let g=new Uint8Array(o.length+m.length);g.set(o),g.set(m,o.length),o=g;let v;for(;(v=ybe(o))!==-1;)yield yield it(o.slice(0,v)),o=o.slice(v)}}catch(h){r={error:h}}finally{try{!c&&!n&&(i=f.return)&&(yield it(i.call(f)))}finally{if(r)throw r.error}}o.length>0&&(yield yield it(o))})}class _be{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const s={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],s}if(this.chunks.push(e),e.startsWith(":"))return null;let[n,r,i]=wbe(e,":");return i.startsWith(" ")&&(i=i.substring(1)),n==="event"?this.event=i:n==="data"&&this.data.push(i),null}}function wbe(t,e){const n=t.indexOf(e);return n!==-1?[t.substring(0,n),e,t.substring(n+e.length)]:[t,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function Sbe(t,e){const{response:n,requestLogID:r,retryOfRequestLogID:i,startTime:s}=e,o=await(async()=>{var c;if(e.options.stream)return Rr(t).debug("response",n.status,n.url,n.headers,n.body),e.options.__streamClass?e.options.__streamClass.fromSSEResponse(n,e.controller,t):Ku.fromSSEResponse(n,e.controller,t);if(n.status===204)return null;if(e.options.__binaryResponse)return n;const f=n.headers.get("content-type"),d=(c=f==null?void 0:f.split(";")[0])===null||c===void 0?void 0:c.trim();return(d==null?void 0:d.includes("application/json"))||(d==null?void 0:d.endsWith("+json"))?n.headers.get("content-length")==="0"?void 0:await n.json():await n.text()})();return Rr(t).debug(`[${r}] response parsed`,sc({retryOfRequestLogID:i,url:n.url,status:n.status,body:o,durationMs:Date.now()-s})),o}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class pA extends Promise{constructor(e,n,r=Sbe){super(i=>{i(null)}),this.responsePromise=n,this.parseResponse=r,this.client=e}_thenUnwrap(e){return new pA(this.client,this.responsePromise,async(n,r)=>e(await this.parseResponse(n,r),r))}asResponse(){return this.responsePromise.then(e=>e.response)}async withResponse(){const[e,n]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:n}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(e=>this.parseResponse(this.client,e))),this.parsedPromise}then(e,n){return this.parse().then(e,n)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const DV=Symbol("brand.privateNullableHeaders");function*Tbe(t){if(!t)return;if(DV in t){const{values:r,nulls:i}=t;yield*r.entries();for(const s of i)yield[s,null];return}let e=!1,n;t instanceof Headers?n=t.entries():UO(t)?n=t:(e=!0,n=Object.entries(t??{}));for(let r of n){const i=r[0];if(typeof i!="string")throw new TypeError("expected header name to be a string");const s=UO(r[1])?r[1]:[r[1]];let o=!1;for(const c of s)c!==void 0&&(e&&!o&&(o=!0,yield[i,null]),yield[i,c])}}const lh=t=>{const e=new Headers,n=new Set;for(const r of t){const i=new Set;for(const[s,o]of Tbe(r)){const c=s.toLowerCase();i.has(c)||(e.delete(s),i.add(c)),o===null?(e.delete(s),n.add(c)):(e.append(s,o),n.delete(c))}}return{[DV]:!0,values:e,nulls:n}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const V_=t=>{var e,n,r,i,s,o;if(typeof globalThis.process<"u")return(r=(n=(e=Hpe)===null||e===void 0?void 0:e[t])===null||n===void 0?void 0:n.trim())!==null&&r!==void 0?r:void 0;if(typeof globalThis.Deno<"u")return(o=(s=(i=globalThis.Deno.env)===null||i===void 0?void 0:i.get)===null||s===void 0?void 0:s.call(i,t))===null||o===void 0?void 0:o.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var OV;class zv{constructor(e){var n,r,i,s,o,c,f,{baseURL:d=V_("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:h=(n=V_("GEMINI_API_KEY"))!==null&&n!==void 0?n:null,apiVersion:m="v1beta"}=e,g=xy(e,["baseURL","apiKey","apiVersion"]);const v=Object.assign(Object.assign({apiKey:h,apiVersion:m},g),{baseURL:d||"https://generativelanguage.googleapis.com"});this.baseURL=v.baseURL,this.timeout=(r=v.timeout)!==null&&r!==void 0?r:zv.DEFAULT_TIMEOUT,this.logger=(i=v.logger)!==null&&i!==void 0?i:console;const b="warn";this.logLevel=b,this.logLevel=(o=(s=qO(v.logLevel,"ClientOptions.logLevel",this))!==null&&s!==void 0?s:qO(V_("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&o!==void 0?o:b,this.fetchOptions=v.fetchOptions,this.maxRetries=(c=v.maxRetries)!==null&&c!==void 0?c:2,this.fetch=(f=v.fetch)!==null&&f!==void 0?f:ibe(),this.encoder=abe,this._options=v,this.apiKey=h,this.apiVersion=m,this.clientAdapter=v.clientAdapter}withOptions(e){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),e))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:e,nulls:n}){if(!(e.has("authorization")||e.has("x-goog-api-key"))&&!(this.apiKey&&e.get("x-goog-api-key"))&&!n.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(e){const n=lh([e.headers]);if(!(n.values.has("authorization")||n.values.has("x-goog-api-key"))){if(this.apiKey)return lh([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return lh([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(e){return Object.entries(e).filter(([n,r])=>typeof r<"u").map(([n,r])=>{if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")return`${encodeURIComponent(n)}=${encodeURIComponent(r)}`;if(r===null)return`${encodeURIComponent(n)}=`;throw new $i(`Cannot stringify type ${typeof r}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Fu}`}defaultIdempotencyKey(){return`stainless-node-retry-${qxe()}`}makeStatusError(e,n,r,i){return zr.generate(e,n,r,i)}buildURL(e,n,r){const i=!this.baseURLOverridden()&&r||this.baseURL,s=Gxe(e)?new URL(e):new URL(i+(i.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),o=this.defaultQuery();return Yxe(o)||(n=Object.assign(Object.assign({},o),n)),typeof n=="object"&&n&&!Array.isArray(n)&&(s.search=this.stringifyQuery(n)),s.toString()}async prepareOptions(e){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!e.path.startsWith(`/${this.apiVersion}/projects/`)){const n=e.path.slice(this.apiVersion.length+1);e.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${n}`}}async prepareRequest(e,{url:n,options:r}){}get(e,n){return this.methodRequest("get",e,n)}post(e,n){return this.methodRequest("post",e,n)}patch(e,n){return this.methodRequest("patch",e,n)}put(e,n){return this.methodRequest("put",e,n)}delete(e,n){return this.methodRequest("delete",e,n)}methodRequest(e,n,r){return this.request(Promise.resolve(r).then(i=>Object.assign({method:e,path:n},i)))}request(e,n=null){return new pA(this,this.makeRequest(e,n,void 0))}async makeRequest(e,n,r){var i,s,o;const c=await e,f=(i=c.maxRetries)!==null&&i!==void 0?i:this.maxRetries;n==null&&(n=f),await this.prepareOptions(c);const{req:d,url:h,timeout:m}=await this.buildRequest(c,{retryCount:f-n});await this.prepareRequest(d,{url:h,options:c});const g="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),v=r===void 0?"":`, retryOf: ${r}`,b=Date.now();if(Rr(this).debug(`[${g}] sending request`,sc({retryOfRequestLogID:r,method:c.method,url:h,options:c,headers:d.headers})),!((s=c.signal)===null||s===void 0)&&s.aborted)throw new TS;const w=new AbortController,S=await this.fetchWithTimeout(h,d,m,w).catch(SS),C=Date.now();if(S instanceof globalThis.Error){const N=`retrying, ${n} attempts remaining`;if(!((o=c.signal)===null||o===void 0)&&o.aborted)throw new TS;const O=wS(S)||/timed? ?out/i.test(String(S)+("cause"in S?String(S.cause):""));if(n)return Rr(this).info(`[${g}] connection ${O?"timed out":"failed"} - ${N}`),Rr(this).debug(`[${g}] connection ${O?"timed out":"failed"} (${N})`,sc({retryOfRequestLogID:r,url:h,durationMs:C-b,message:S.message})),this.retryRequest(c,n,r??g);throw Rr(this).info(`[${g}] connection ${O?"timed out":"failed"} - error; no more retries left`),Rr(this).debug(`[${g}] connection ${O?"timed out":"failed"} (error; no more retries left)`,sc({retryOfRequestLogID:r,url:h,durationMs:C-b,message:S.message})),O?new vV:new Ov({cause:S})}const R=`[${g}${v}] ${d.method} ${h} ${S.ok?"succeeded":"failed"} with status ${S.status} in ${C-b}ms`;if(!S.ok){const N=await this.shouldRetry(S);if(n&&N){const I=`retrying, ${n} attempts remaining`;return await obe(S.body),Rr(this).info(`${R} - ${I}`),Rr(this).debug(`[${g}] response error (${I})`,sc({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:C-b})),this.retryRequest(c,n,r??g,S.headers)}const O=N?"error; no more retries left":"error; not retryable";Rr(this).info(`${R} - ${O}`);const k=await S.text().catch(I=>SS(I).message),D=Qxe(k),M=D?void 0:k;throw Rr(this).debug(`[${g}] response error (${O})`,sc({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,message:M,durationMs:Date.now()-b})),this.makeStatusError(S.status,D,M,S.headers)}return Rr(this).info(R),Rr(this).debug(`[${g}] response start`,sc({retryOfRequestLogID:r,url:S.url,status:S.status,headers:S.headers,durationMs:C-b})),{response:S,options:c,controller:w,requestLogID:g,retryOfRequestLogID:r,startTime:b}}async fetchWithTimeout(e,n,r,i){const s=n||{},{signal:o,method:c}=s,f=xy(s,["signal","method"]),d=this._makeAbort(i);o&&o.addEventListener("abort",d,{once:!0});const h=setTimeout(d,r),m=globalThis.ReadableStream&&f.body instanceof globalThis.ReadableStream||typeof f.body=="object"&&f.body!==null&&Symbol.asyncIterator in f.body,g=Object.assign(Object.assign(Object.assign({signal:i.signal},m?{duplex:"half"}:{}),{method:"GET"}),f);c&&(g.method=c.toUpperCase());try{return await this.fetch.call(void 0,e,g)}finally{clearTimeout(h)}}async shouldRetry(e){const n=e.headers.get("x-should-retry");return n==="true"?!0:n==="false"?!1:e.status===408||e.status===409||e.status===429||e.status>=500}async retryRequest(e,n,r,i){var s;let o;const c=i==null?void 0:i.get("retry-after-ms");if(c){const d=parseFloat(c);Number.isNaN(d)||(o=d)}const f=i==null?void 0:i.get("retry-after");if(f&&!o){const d=parseFloat(f);Number.isNaN(d)?o=Date.parse(f)-Date.now():o=d*1e3}if(!(o&&0<=o&&o<60*1e3)){const d=(s=e.maxRetries)!==null&&s!==void 0?s:this.maxRetries;o=this.calculateDefaultRetryTimeoutMillis(n,d)}return await Zxe(o),this.makeRequest(e,n-1,r)}calculateDefaultRetryTimeoutMillis(e,n){const s=n-e,o=Math.min(.5*Math.pow(2,s),8),c=1-Math.random()*.25;return o*c*1e3}async buildRequest(e,{retryCount:n=0}={}){var r,i,s;const o=Object.assign({},e),{method:c,path:f,query:d,defaultBaseURL:h}=o,m=this.buildURL(f,d,h);"timeout"in o&&Jxe("timeout",o.timeout),o.timeout=(r=o.timeout)!==null&&r!==void 0?r:this.timeout;const{bodyHeaders:g,body:v}=this.buildBody({options:o}),b=await this.buildHeaders({options:e,method:c,bodyHeaders:g,retryCount:n});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:c,headers:b},o.signal&&{signal:o.signal}),globalThis.ReadableStream&&v instanceof globalThis.ReadableStream&&{duplex:"half"}),v&&{body:v}),(i=this.fetchOptions)!==null&&i!==void 0?i:{}),(s=o.fetchOptions)!==null&&s!==void 0?s:{}),url:m,timeout:o.timeout}}async buildHeaders({options:e,method:n,bodyHeaders:r,retryCount:i}){let s={};this.idempotencyHeader&&n!=="get"&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),s[this.idempotencyHeader]=e.idempotencyKey);const o=await this.authHeaders(e);let c=lh([s,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(i)},e.timeout?{"X-Stainless-Timeout":String(Math.trunc(e.timeout/1e3))}:{}),rbe()),this._options.defaultHeaders,r,e.headers,o]);return this.validateHeaders(c),c.values}_makeAbort(e){return()=>e.abort()}buildBody({options:{body:e,headers:n}}){if(!e)return{bodyHeaders:void 0,body:void 0};const r=lh([n]);return ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof DataView||typeof e=="string"&&r.values.has("content-type")||globalThis.Blob&&e instanceof globalThis.Blob||e instanceof FormData||e instanceof URLSearchParams||globalThis.ReadableStream&&e instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:e}:typeof e=="object"&&(Symbol.asyncIterator in e||Symbol.iterator in e&&"next"in e&&typeof e.next=="function")?{bodyHeaders:void 0,body:sbe(e)}:typeof e=="object"&&r.values.get("content-type")==="application/x-www-form-urlencoded"?{bodyHeaders:{"content-type":"application/x-www-form-urlencoded"},body:this.stringifyQuery(e)}:this.encoder({body:e,headers:r})}}zv.DEFAULT_TIMEOUT=6e4;class Qn extends zv{constructor(){super(...arguments),this.interactions=new MV(this)}}OV=Qn;Qn.GeminiNextGenAPIClient=OV;Qn.GeminiNextGenAPIClientError=$i;Qn.APIError=zr;Qn.APIConnectionError=Ov;Qn.APIConnectionTimeoutError=vV;Qn.APIUserAbortError=TS;Qn.NotFoundError=wV;Qn.ConflictError=SV;Qn.RateLimitError=EV;Qn.BadRequestError=xV;Qn.AuthenticationError=bV;Qn.InternalServerError=AV;Qn.PermissionDeniedError=_V;Qn.UnprocessableEntityError=TV;Qn.toFile=fbe;Qn.Interactions=MV;/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Ebe(t,e){const n={},r=x(t,["name"]);return r!=null&&_(n,["_url","name"],r),n}function Abe(t,e){const n={},r=x(t,["name"]);return r!=null&&_(n,["_url","name"],r),n}function Cbe(t,e){const n={},r=x(t,["sdkHttpResponse"]);return r!=null&&_(n,["sdkHttpResponse"],r),n}function Nbe(t,e){const n={},r=x(t,["sdkHttpResponse"]);return r!=null&&_(n,["sdkHttpResponse"],r),n}function kbe(t,e,n){const r={};if(x(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const i=x(t,["tunedModelDisplayName"]);if(e!==void 0&&i!=null&&_(e,["displayName"],i),x(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const s=x(t,["epochCount"]);e!==void 0&&s!=null&&_(e,["tuningTask","hyperparameters","epochCount"],s);const o=x(t,["learningRateMultiplier"]);if(o!=null&&_(r,["tuningTask","hyperparameters","learningRateMultiplier"],o),x(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(x(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(x(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");if(x(t,["tuningMode"])!==void 0)throw new Error("tuningMode parameter is not supported in Gemini API.");if(x(t,["customBaseModel"])!==void 0)throw new Error("customBaseModel parameter is not supported in Gemini API.");const c=x(t,["batchSize"]);e!==void 0&&c!=null&&_(e,["tuningTask","hyperparameters","batchSize"],c);const f=x(t,["learningRate"]);if(e!==void 0&&f!=null&&_(e,["tuningTask","hyperparameters","learningRate"],f),x(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");if(x(t,["beta"])!==void 0)throw new Error("beta parameter is not supported in Gemini API.");if(x(t,["baseTeacherModel"])!==void 0)throw new Error("baseTeacherModel parameter is not supported in Gemini API.");if(x(t,["tunedTeacherModelSource"])!==void 0)throw new Error("tunedTeacherModelSource parameter is not supported in Gemini API.");if(x(t,["sftLossWeightMultiplier"])!==void 0)throw new Error("sftLossWeightMultiplier parameter is not supported in Gemini API.");if(x(t,["outputUri"])!==void 0)throw new Error("outputUri parameter is not supported in Gemini API.");if(x(t,["encryptionSpec"])!==void 0)throw new Error("encryptionSpec parameter is not supported in Gemini API.");return r}function Ibe(t,e,n){const r={};let i=x(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const D=x(t,["validationDataset"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec"],F_(D))}else if(i==="PREFERENCE_TUNING"){const D=x(t,["validationDataset"]);e!==void 0&&D!=null&&_(e,["preferenceOptimizationSpec"],F_(D))}else if(i==="DISTILLATION"){const D=x(t,["validationDataset"]);e!==void 0&&D!=null&&_(e,["distillationSpec"],F_(D))}const s=x(t,["tunedModelDisplayName"]);e!==void 0&&s!=null&&_(e,["tunedModelDisplayName"],s);const o=x(t,["description"]);e!==void 0&&o!=null&&_(e,["description"],o);let c=x(n,["config","method"]);if(c===void 0&&(c="SUPERVISED_FINE_TUNING"),c==="SUPERVISED_FINE_TUNING"){const D=x(t,["epochCount"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec","hyperParameters","epochCount"],D)}else if(c==="PREFERENCE_TUNING"){const D=x(t,["epochCount"]);e!==void 0&&D!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","epochCount"],D)}else if(c==="DISTILLATION"){const D=x(t,["epochCount"]);e!==void 0&&D!=null&&_(e,["distillationSpec","hyperParameters","epochCount"],D)}let f=x(n,["config","method"]);if(f===void 0&&(f="SUPERVISED_FINE_TUNING"),f==="SUPERVISED_FINE_TUNING"){const D=x(t,["learningRateMultiplier"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],D)}else if(f==="PREFERENCE_TUNING"){const D=x(t,["learningRateMultiplier"]);e!==void 0&&D!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","learningRateMultiplier"],D)}else if(f==="DISTILLATION"){const D=x(t,["learningRateMultiplier"]);e!==void 0&&D!=null&&_(e,["distillationSpec","hyperParameters","learningRateMultiplier"],D)}let d=x(n,["config","method"]);if(d===void 0&&(d="SUPERVISED_FINE_TUNING"),d==="SUPERVISED_FINE_TUNING"){const D=x(t,["exportLastCheckpointOnly"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec","exportLastCheckpointOnly"],D)}else if(d==="PREFERENCE_TUNING"){const D=x(t,["exportLastCheckpointOnly"]);e!==void 0&&D!=null&&_(e,["preferenceOptimizationSpec","exportLastCheckpointOnly"],D)}else if(d==="DISTILLATION"){const D=x(t,["exportLastCheckpointOnly"]);e!==void 0&&D!=null&&_(e,["distillationSpec","exportLastCheckpointOnly"],D)}let h=x(n,["config","method"]);if(h===void 0&&(h="SUPERVISED_FINE_TUNING"),h==="SUPERVISED_FINE_TUNING"){const D=x(t,["adapterSize"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec","hyperParameters","adapterSize"],D)}else if(h==="PREFERENCE_TUNING"){const D=x(t,["adapterSize"]);e!==void 0&&D!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","adapterSize"],D)}else if(h==="DISTILLATION"){const D=x(t,["adapterSize"]);e!==void 0&&D!=null&&_(e,["distillationSpec","hyperParameters","adapterSize"],D)}let m=x(n,["config","method"]);if(m===void 0&&(m="SUPERVISED_FINE_TUNING"),m==="SUPERVISED_FINE_TUNING"){const D=x(t,["tuningMode"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec","tuningMode"],D)}const g=x(t,["customBaseModel"]);e!==void 0&&g!=null&&_(e,["customBaseModel"],g);let v=x(n,["config","method"]);if(v===void 0&&(v="SUPERVISED_FINE_TUNING"),v==="SUPERVISED_FINE_TUNING"){const D=x(t,["batchSize"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec","hyperParameters","batchSize"],D)}let b=x(n,["config","method"]);if(b===void 0&&(b="SUPERVISED_FINE_TUNING"),b==="SUPERVISED_FINE_TUNING"){const D=x(t,["learningRate"]);e!==void 0&&D!=null&&_(e,["supervisedTuningSpec","hyperParameters","learningRate"],D)}const w=x(t,["labels"]);e!==void 0&&w!=null&&_(e,["labels"],w);const S=x(t,["beta"]);e!==void 0&&S!=null&&_(e,["preferenceOptimizationSpec","hyperParameters","beta"],S);const C=x(t,["baseTeacherModel"]);e!==void 0&&C!=null&&_(e,["distillationSpec","baseTeacherModel"],C);const R=x(t,["tunedTeacherModelSource"]);e!==void 0&&R!=null&&_(e,["distillationSpec","tunedTeacherModelSource"],R);const N=x(t,["sftLossWeightMultiplier"]);e!==void 0&&N!=null&&_(e,["distillationSpec","hyperParameters","sftLossWeightMultiplier"],N);const O=x(t,["outputUri"]);e!==void 0&&O!=null&&_(e,["outputUri"],O);const k=x(t,["encryptionSpec"]);return e!==void 0&&k!=null&&_(e,["encryptionSpec"],k),r}function Rbe(t,e){const n={},r=x(t,["baseModel"]);r!=null&&_(n,["baseModel"],r);const i=x(t,["preTunedModel"]);i!=null&&_(n,["preTunedModel"],i);const s=x(t,["trainingDataset"]);s!=null&&Bbe(s);const o=x(t,["config"]);return o!=null&&kbe(o,n),n}function Pbe(t,e){const n={},r=x(t,["baseModel"]);r!=null&&_(n,["baseModel"],r);const i=x(t,["preTunedModel"]);i!=null&&_(n,["preTunedModel"],i);const s=x(t,["trainingDataset"]);s!=null&&Hbe(s,n,e);const o=x(t,["config"]);return o!=null&&Ibe(o,n,e),n}function jbe(t,e){const n={},r=x(t,["name"]);return r!=null&&_(n,["_url","name"],r),n}function Mbe(t,e){const n={},r=x(t,["name"]);return r!=null&&_(n,["_url","name"],r),n}function Dbe(t,e,n){const r={},i=x(t,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const o=x(t,["filter"]);return e!==void 0&&o!=null&&_(e,["_query","filter"],o),r}function Obe(t,e,n){const r={},i=x(t,["pageSize"]);e!==void 0&&i!=null&&_(e,["_query","pageSize"],i);const s=x(t,["pageToken"]);e!==void 0&&s!=null&&_(e,["_query","pageToken"],s);const o=x(t,["filter"]);return e!==void 0&&o!=null&&_(e,["_query","filter"],o),r}function Lbe(t,e){const n={},r=x(t,["config"]);return r!=null&&Dbe(r,n),n}function zbe(t,e){const n={},r=x(t,["config"]);return r!=null&&Obe(r,n),n}function Ube(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["nextPageToken"]);i!=null&&_(n,["nextPageToken"],i);const s=x(t,["tunedModels"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>LV(c))),_(n,["tuningJobs"],o)}return n}function Vbe(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["nextPageToken"]);i!=null&&_(n,["nextPageToken"],i);const s=x(t,["tuningJobs"]);if(s!=null){let o=s;Array.isArray(o)&&(o=o.map(c=>CS(c))),_(n,["tuningJobs"],o)}return n}function Fbe(t,e){const n={},r=x(t,["name"]);r!=null&&_(n,["model"],r);const i=x(t,["name"]);return i!=null&&_(n,["endpoint"],i),n}function Bbe(t,e){const n={};if(x(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(x(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const r=x(t,["examples"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),_(n,["examples","examples"],i)}return n}function Hbe(t,e,n){const r={};let i=x(n,["config","method"]);if(i===void 0&&(i="SUPERVISED_FINE_TUNING"),i==="SUPERVISED_FINE_TUNING"){const o=x(t,["gcsUri"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(i==="PREFERENCE_TUNING"){const o=x(t,["gcsUri"]);e!==void 0&&o!=null&&_(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(i==="DISTILLATION"){const o=x(t,["gcsUri"]);e!==void 0&&o!=null&&_(e,["distillationSpec","promptDatasetUri"],o)}let s=x(n,["config","method"]);if(s===void 0&&(s="SUPERVISED_FINE_TUNING"),s==="SUPERVISED_FINE_TUNING"){const o=x(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&_(e,["supervisedTuningSpec","trainingDatasetUri"],o)}else if(s==="PREFERENCE_TUNING"){const o=x(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&_(e,["preferenceOptimizationSpec","trainingDatasetUri"],o)}else if(s==="DISTILLATION"){const o=x(t,["vertexDatasetResource"]);e!==void 0&&o!=null&&_(e,["distillationSpec","promptDatasetUri"],o)}if(x(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return r}function LV(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["name"]);i!=null&&_(n,["name"],i);const s=x(t,["state"]);s!=null&&_(n,["state"],Z8(s));const o=x(t,["createTime"]);o!=null&&_(n,["createTime"],o);const c=x(t,["tuningTask","startTime"]);c!=null&&_(n,["startTime"],c);const f=x(t,["tuningTask","completeTime"]);f!=null&&_(n,["endTime"],f);const d=x(t,["updateTime"]);d!=null&&_(n,["updateTime"],d);const h=x(t,["description"]);h!=null&&_(n,["description"],h);const m=x(t,["baseModel"]);m!=null&&_(n,["baseModel"],m);const g=x(t,["_self"]);return g!=null&&_(n,["tunedModel"],Fbe(g)),n}function CS(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["name"]);i!=null&&_(n,["name"],i);const s=x(t,["state"]);s!=null&&_(n,["state"],Z8(s));const o=x(t,["createTime"]);o!=null&&_(n,["createTime"],o);const c=x(t,["startTime"]);c!=null&&_(n,["startTime"],c);const f=x(t,["endTime"]);f!=null&&_(n,["endTime"],f);const d=x(t,["updateTime"]);d!=null&&_(n,["updateTime"],d);const h=x(t,["error"]);h!=null&&_(n,["error"],h);const m=x(t,["description"]);m!=null&&_(n,["description"],m);const g=x(t,["baseModel"]);g!=null&&_(n,["baseModel"],g);const v=x(t,["tunedModel"]);v!=null&&_(n,["tunedModel"],v);const b=x(t,["preTunedModel"]);b!=null&&_(n,["preTunedModel"],b);const w=x(t,["supervisedTuningSpec"]);w!=null&&_(n,["supervisedTuningSpec"],w);const S=x(t,["preferenceOptimizationSpec"]);S!=null&&_(n,["preferenceOptimizationSpec"],S);const C=x(t,["distillationSpec"]);C!=null&&_(n,["distillationSpec"],C);const R=x(t,["tuningDataStats"]);R!=null&&_(n,["tuningDataStats"],R);const N=x(t,["encryptionSpec"]);N!=null&&_(n,["encryptionSpec"],N);const O=x(t,["partnerModelTuningSpec"]);O!=null&&_(n,["partnerModelTuningSpec"],O);const k=x(t,["customBaseModel"]);k!=null&&_(n,["customBaseModel"],k);const D=x(t,["experiment"]);D!=null&&_(n,["experiment"],D);const M=x(t,["labels"]);M!=null&&_(n,["labels"],M);const j=x(t,["outputUri"]);j!=null&&_(n,["outputUri"],j);const I=x(t,["pipelineJob"]);I!=null&&_(n,["pipelineJob"],I);const U=x(t,["serviceAccount"]);U!=null&&_(n,["serviceAccount"],U);const B=x(t,["tunedModelDisplayName"]);B!=null&&_(n,["tunedModelDisplayName"],B);const P=x(t,["veoTuningSpec"]);return P!=null&&_(n,["veoTuningSpec"],P),n}function qbe(t,e){const n={},r=x(t,["sdkHttpResponse"]);r!=null&&_(n,["sdkHttpResponse"],r);const i=x(t,["name"]);i!=null&&_(n,["name"],i);const s=x(t,["metadata"]);s!=null&&_(n,["metadata"],s);const o=x(t,["done"]);o!=null&&_(n,["done"],o);const c=x(t,["error"]);return c!=null&&_(n,["error"],c),n}function F_(t,e){const n={},r=x(t,["gcsUri"]);r!=null&&_(n,["validationDatasetUri"],r);const i=x(t,["vertexDatasetResource"]);return i!=null&&_(n,["validationDatasetUri"],i),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $be extends fa{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Fc(ra.PAGED_ITEM_TUNING_JOBS,r=>this.listInternal(r),await this.listInternal(n),n),this.get=async n=>await this.getInternal(n),this.tune=async n=>{var r;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const i={tunedModelName:n.baseModel};!((r=n.config)===null||r===void 0)&&r.preTunedModelCheckpointId&&(i.checkpointId=n.config.preTunedModelCheckpointId);const s=Object.assign(Object.assign({},n),{preTunedModel:i});return s.baseModel=void 0,await this.tuneInternal(s)}else{const i=Object.assign({},n);return await this.tuneInternal(i)}else{const i=Object.assign({},n),s=await this.tuneMldevInternal(i);let o="";return s.metadata!==void 0&&s.metadata.tunedModel!==void 0?o=s.metadata.tunedModel:s.name!==void 0&&s.name.includes("/operations/")&&(o=s.name.split("/operations/")[0]),{name:o,state:pS.JOB_STATE_QUEUED}}}}async getInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Mbe(e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>CS(h))}else{const d=jbe(e);return c=Ue("{name}",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>LV(h))}}async listInternal(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=zbe(e);return c=Ue("tuningJobs",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Vbe(h),g=new vO;return Object.assign(g,m),g})}else{const d=Lbe(e);return c=Ue("tunedModels",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Ube(h),g=new vO;return Object.assign(g,m),g})}}async cancel(e){var n,r,i,s;let o,c="",f={};if(this.apiClient.isVertexAI()){const d=Abe(e);return c=Ue("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Nbe(h),g=new xO;return Object.assign(g,m),g})}else{const d=Ebe(e);return c=Ue("{name}:cancel",d._url),f=d._query,delete d._url,delete d._query,o=this.apiClient.request({path:c,queryParams:f,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions,abortSignal:(s=e.config)===null||s===void 0?void 0:s.abortSignal}).then(h=>h.json().then(m=>{const g=m;return g.sdkHttpResponse={headers:h.headers},g})),o.then(h=>{const m=Cbe(h),g=new xO;return Object.assign(g,m),g})}}async tuneInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI()){const c=Pbe(e,e);return s=Ue("tuningJobs",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>CS(f))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,r;let i,s="",o={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const c=Rbe(e);return s=Ue("tunedModels",c._url),o=c._query,delete c._url,delete c._query,i=this.apiClient.request({path:s,queryParams:o,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(r=e.config)===null||r===void 0?void 0:r.abortSignal}).then(f=>f.json().then(d=>{const h=d;return h.sdkHttpResponse={headers:f.headers},h})),i.then(f=>qbe(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Gbe{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const Kbe=1024*1024*8,Wbe=3,Ybe=1e3,Xbe=2,_y="x-goog-upload-status";async function Jbe(t,e,n){var r;const i=await zV(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[_y])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return s.file}async function Qbe(t,e,n){var r;const i=await zV(t,e,n),s=await(i==null?void 0:i.json());if(((r=i==null?void 0:i.headers)===null||r===void 0?void 0:r[_y])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");const o=K8(s),c=new aA;return Object.assign(c,o),c}async function zV(t,e,n){var r,i;let s=0,o=0,c=new gS(new Response),f="upload";for(s=t.size;o<s;){const d=Math.min(Kbe,s-o),h=t.slice(o,o+d);o+d>=s&&(f+=", finalize");let m=0,g=Ybe;for(;m<Wbe&&(c=await n.request({path:"",body:h,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":f,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),!(!((r=c==null?void 0:c.headers)===null||r===void 0)&&r[_y]));)m++,await e1e(g),g=g*Xbe;if(o+=d,((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[_y])!=="active")break;if(s<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}return c}async function Zbe(t){return{size:t.size,type:t.type}}function e1e(t){return new Promise(e=>setTimeout(e,t))}class t1e{async upload(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Jbe(e,n,r)}async uploadToFileSearchStore(e,n,r){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Qbe(e,n,r)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await Zbe(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n1e{create(e,n,r){return new r1e(e,n,r)}}class r1e{constructor(e,n,r){this.url=e,this.headers=n,this.callbacks=r}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GO="x-goog-api-key";class i1e{constructor(e){this.apiKey=e}async addAuthHeaders(e,n){if(e.get(GO)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(GO,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const s1e="gl-node/";class o1e{get interactions(){var e;if(this._interactions!==void 0)return this._interactions;console.warn("GoogleGenAI.interactions: Interactions usage is experimental and may change in future versions.");const n=this.httpOptions;n!=null&&n.extraBody&&console.warn("GoogleGenAI.interactions: Client level httpOptions.extraBody is not supported by the interactions client and will be ignored.");const r=new Qn({baseURL:this.apiClient.getBaseUrl(),apiKey:this.apiKey,apiVersion:this.apiClient.getApiVersion(),clientAdapter:this.apiClient,defaultHeaders:this.apiClient.getDefaultHeaders(),timeout:n==null?void 0:n.timeout,maxRetries:(e=n==null?void 0:n.retryOptions)===null||e===void 0?void 0:e.attempts});return this._interactions=r.interactions,this._interactions}constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const r=Kpe(e.httpOptions,e.vertexai,void 0,void 0);r&&(e.httpOptions?e.httpOptions.baseUrl=r:e.httpOptions={baseUrl:r}),this.apiVersion=e.apiVersion,this.httpOptions=e.httpOptions;const i=new i1e(this.apiKey);this.apiClient=new Zve({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:this.httpOptions,userAgentExtra:s1e+"web",uploader:new t1e,downloader:new Gbe}),this.models=new vxe(this.apiClient),this.live=new fxe(this.apiClient,i,new n1e),this.batches=new Tge(this.apiClient),this.chats=new s0e(this.models,this.apiClient),this.caches=new n0e(this.apiClient),this.files=new y0e(this.apiClient),this.operations=new xxe(this.apiClient),this.authTokens=new Dxe(this.apiClient),this.tunings=new $be(this.apiClient),this.fileSearchStores=new Hxe(this.apiClient)}}const a1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.themes&&Array.isArray(e.themes)&&(e.themes.forEach(i=>n.lifeDispatch.addTheme(i)),r.push(`${e.themes.length} Themes`),e.themes.length>0&&setTimeout(()=>n.lifeDispatch.setTheme(e.themes[0].id),500))},l1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.skills&&Array.isArray(e.skills)&&(e.skills.forEach(i=>{n.skillDispatch.addSkill(i.title,i.relatedStats,i.description)}),r.push(`${e.skills.length} Skills`))},mA=t=>!t||!Array.isArray(t)?[]:t.map((e,n)=>{const r=typeof e=="string"?e:e.title,i=typeof e=="object"&&e.isCompleted?e.isCompleted:!1;return{id:`st_ai_${Date.now()}_${n}`,title:r||"Unknown Step",isCompleted:i}}),gA=t=>!t||!Array.isArray(t)?[]:t.map((e,n)=>({id:`rem_ai_${Date.now()}_${n}`,minutesBefore:e,isSent:!1})),c1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.habits&&Array.isArray(e.habits)&&(e.habits.forEach(i=>{let s=i.type||"daily",o=i.specificDays,c=i.intervalValue,f=i.pattern;i.frequency&&(s=i.frequency.type||s,o=i.frequency.specificDays||o,c=i.frequency.intervalValue||c,f=i.frequency.matrixPattern||f);const d=mA(i.subtasks),h=gA(i.reminders);i.id&&i.id.startsWith("h_")?n.habitDispatch.updateHabit(i.id,{title:i.title,description:i.description,difficulty:i.difficulty,stats:i.stats||(i.stat?[i.stat]:void 0),skillId:i.skillId,type:s,specificDays:o,intervalValue:c,pattern:f,subtasks:d,isTimed:!!i.durationMinutes,durationMinutes:i.durationMinutes,scheduledTime:i.scheduledTime,reminders:h,dailyTarget:i.dailyTarget,history:i.history,streak:i.streak}):n.habitDispatch.addHabit({title:i.title,description:i.description,difficulty:i.difficulty||"normal",stats:i.stats||(i.stat?[i.stat]:["DIS"]),skillId:i.skillId,type:s,specificDays:o,intervalValue:c,pattern:f,subtasks:d,isTimed:!!i.durationMinutes,durationMinutes:i.durationMinutes,scheduledTime:i.scheduledTime,reminders:h,dailyTarget:i.dailyTarget||1})}),r.push(`${e.habits.length} Habits processed`))},u1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.raids&&Array.isArray(e.raids)&&(e.raids.forEach(i=>{var c;const s=(i.steps||[]).map((f,d)=>({id:f.id||`rs_ai_${Date.now()}_${d}`,title:typeof f=="string"?f:f.title,notes:f.notes||"",isCompleted:f.isCompleted||!1,isLocked:f.isLocked!==void 0?f.isLocked:d>0,scheduledTime:f.scheduledTime,deadline:f.deadline,reminders:gA(f.reminders),isTimed:!!f.durationMinutes,durationMinutes:f.durationMinutes,difficulty:f.difficulty,stat:f.stat,subtasks:mA(f.subtasks)})),o=i.id&&i.id.startsWith("rd_")?i.id:null;o?((c=t.raidState)==null?void 0:c.raids.some(d=>d.id===o))?(n.raidDispatch.updateRaid(o,{...i.title&&{title:i.title},...i.description&&{description:i.description},...i.difficulty&&{difficulty:i.difficulty},...i.stats&&{stats:i.stats},...i.skillId&&{skillId:i.skillId},...i.deadline&&{deadline:i.deadline},...i.isCampaign!==void 0&&{isCampaign:i.isCampaign}}),s.length>0&&n.raidDispatch.mergeRaidSteps(o,s)):n.raidDispatch.addRaid({title:i.title,description:i.description,difficulty:i.difficulty||"hard",stats:i.stats||["STR"],skillId:i.skillId,deadline:i.deadline,steps:s,isCampaign:i.isCampaign||void 0}):n.raidDispatch.addRaid({title:i.title,description:i.description,difficulty:i.difficulty||"hard",stats:i.stats||["STR"],skillId:i.skillId,deadline:i.deadline,steps:s,isCampaign:i.isCampaign||void 0})}),r.push(`${e.raids.length} Ops`))},d1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.tasks&&Array.isArray(e.tasks)&&(e.tasks.forEach(i=>{const s=mA(i.subtasks),o=gA(i.reminders);i.id&&i.id.startsWith("t_")?n.taskDispatch.updateTask(i.id,{title:i.title,description:i.description,difficulty:i.difficulty,stats:i.stats||(i.stat?[i.stat]:void 0),skillId:i.skillId,isTimed:!!i.durationMinutes,durationMinutes:i.durationMinutes,deadline:i.deadline,scheduledTime:i.scheduledTime,subtasks:s,reminders:o,isCampaign:i.isCampaign}):n.taskDispatch.addTask({title:i.title,description:i.description,difficulty:i.difficulty||"normal",stats:i.stats||(i.stat?[i.stat]:["STR"]),skillId:i.skillId,isTimed:!!i.durationMinutes,durationMinutes:i.durationMinutes,deadline:i.deadline,scheduledTime:i.scheduledTime,subtasks:s,reminders:o,isCampaign:i.isCampaign||!1})}),r.push(`${e.tasks.length} Missions`))},f1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.storeItems&&e.storeItems.length>0&&(n.shopDispatch.addStoreItems(e.storeItems),r.push(`${e.storeItems.length} Rewards`))},h1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.badges&&Array.isArray(e.badges)&&(e.badges.forEach(i=>{i.id||(i.id=`bdg_ai_${Date.now()}_${Math.random().toString(36).substr(2,5)}`),n.lifeDispatch.addBadge(i)}),r.push(`${e.badges.length} Badges`))},p1e=t=>{const{payload:e,dispatchers:n,summary:r}=t;e.laws&&Array.isArray(e.laws)&&(e.laws.forEach(i=>{n.taskDispatch.addLaw(i.title||"Unknown Law",i.penaltyType||"gold",i.penaltyValue||50,i.statTarget||void 0)}),r.push(`${e.laws.length} Laws`))},yA={MAX_ITEMS_PER_TYPE:50,MAX_TEXT_LENGTH:500,MAX_NUMBER_VALUE:1e6},KO=t=>t?t.replace(/[<>]/g,"").trim().slice(0,yA.MAX_TEXT_LENGTH):"",m1e=t=>typeof t!="number"||isNaN(t)?0:Math.min(Math.max(0,t),yA.MAX_NUMBER_VALUE),g1e=t=>{const e={meta:t.meta||{}},n=(r,i)=>!r||!Array.isArray(r)?void 0:r.slice(0,yA.MAX_ITEMS_PER_TYPE).map(o=>{const c={};for(const f in o)typeof o[f]=="string"?c[f]=KO(o[f]):typeof o[f]=="number"?c[f]=m1e(o[f]):typeof o[f]=="boolean"?c[f]=o[f]:Array.isArray(o[f])?c[f]=o[f].slice(0,20).map(d=>typeof d=="string"?KO(d):d):typeof o[f]=="object"&&o[f]!==null&&(c[f]=o[f]);return c});return t.tasks&&(e.tasks=n(t.tasks)),t.habits&&(e.habits=n(t.habits)),t.raids&&(e.raids=n(t.raids)),t.skills&&(e.skills=n(t.skills)),t.storeItems&&(e.storeItems=n(t.storeItems)),t.badges&&(e.badges=n(t.badges)),t.themes&&(e.themes=n(t.themes)),t.laws&&(e.laws=n(t.laws)),e},y1e=(t,e,n)=>{var i;const{lifeDispatch:r}=e;try{const s=t.replace(/```json/g,"").replace(/```/g,"").trim(),o=JSON.parse(s),c=g1e(o),f={payload:c,dispatchers:e,raidState:n,summary:[]};a1e(f),l1e(f),c1e(f),u1e(f),d1e(f),f1e(f),h1e(f),p1e(f);const d=((i=c.meta)==null?void 0:i.packName)||"Unknown Protocol";return f.summary.length===0?{success:!1,message:"Warning: Valid JSON but no recognizable data found."}:(r.addToast(`Injecting: ${d}...`,"level-up"),{success:!0,message:`SECURE INJECTION SUCCESS: ${d}.
Verified & Added: ${f.summary.join(", ")}.`})}catch(s){return console.error("Injection Failed:",s),{success:!1,message:`SECURITY BLOCK: Invalid Data Structure.
${s.message}`}}},UV=({onClose:t})=>{var I;const{state:e,dispatch:n}=Ge(),{taskState:r,taskDispatch:i}=Er(),{habitState:s,habitDispatch:o}=Ar(),{raidState:c,raidDispatch:f}=Qr(),{skillDispatch:d}=an(),{shopDispatch:h}=mp(),{campaignDispatch:m}=zc(),[g,v]=L.useState(""),[b,w]=L.useState("idle"),[S,C]=L.useState("System Ready. Paste JSON Code or Upload Backup File."),R=L.useRef(null),N=U=>{var F;const B=(F=U.target.files)==null?void 0:F[0];if(!B)return;const P=new FileReader;P.onload=z=>{var W;const Q=(W=z.target)==null?void 0:W.result;v(Q),C(`File Loaded: ${B.name}
Ready to Execute.`),w("idle")},P.readAsText(B)},O=()=>{try{if(!g.trim())return;const U=JSON.parse(g);v(JSON.stringify(U,null,2)),C("JSON Formatted. Structure Valid."),w("idle")}catch{C("Format Error: Invalid JSON Syntax."),w("error")}},k=()=>{v(""),C("Buffer Cleared."),w("idle")},D=U=>{var Q;const B=s.habits.map(W=>W.title).join(", "),P=c.raids.map(W=>W.title).join(", "),F=e.badgesRegistry.map(W=>W.name).join(", "),z=((Q=r.laws)==null?void 0:Q.map(W=>W.title).join(", "))||"";return`
        ROLE: You are the "Refiner Node" (QA & Compiler).
        TASK: Validate and Fix the INCOMING JSON Payload for the LifeOS System.
        
        CURRENT DATABASE SNAPSHOT:
        - Existing Habits: [${B}]
        - Existing Raids: [${P}]
        - Existing Badges: [${F}]
        - Existing Laws: [${z}]

        INCOMING JSON:
        ${U}

        RULES:
        1. BADGE LINKAGE: If the JSON adds a Badge with 'triggerType': 'habit' or 'raid', verify the 'metricKey' matches an EXACT title in 'Existing Habits/Raids' OR a new habit/raid being added in this same JSON.
           - If there's a mismatch (e.g. Badge says "Drink Water" but Habit is "Drinking Water"), UPDATE the Badge's 'metricKey' to match the Habit exactly.
           - If the metricKey refers to a generic term, try to match it to the closest existing item.
        
        2. LAWS & CONSEQUENCES:
           - If the input describes a rule, punishment, or consequence (e.g., "If I upset my girlfriend, deduct Emotion points"), convert it into a "laws" array.
           - Structure: { "title": "Short Title", "penaltyType": "gold" | "xp" | "stat" | "honor", "penaltyValue": number, "statTarget": "STR" | "INT" | "DIS" | "HEA" | "CRT" | "SPR" | "REL" | "FIN" (only if type is stat) }
           - Example: "If I miss prayer, lose 50 Honor" -> { "laws": [{ "title": "Missed Prayer", "penaltyType": "honor", "penaltyValue": 50 }] }

        3. STRUCTURE: Ensure strict valid JSON. No trailing commas.
        4. OUTPUT:
           - Return ONLY the clean, fixed JSON string. No markdown code blocks. No explanations.
           - If the JSON is fundamentally broken and unfixable, return: "ERROR: [Reason]"
        `},M=async()=>{var U;if(!g.trim()){C("Error: Empty Payload.");return}try{const B=JSON.parse(g);if(B.user&&B.badgesRegistry){w("restoring"),C(` FULL SYSTEM BACKUP DETECTED.
Initiating Total Recall Protocol...`),setTimeout(()=>{n.importData(g),B.tasks&&i.restoreData(B.tasks,B.taskCategories||[],B.laws||[]),B.habits&&o.restoreData(B.habits,B.habitCategories||[]),B.raids&&f.restoreData(B.raids),B.skills&&d.restoreData(B.skills),B.storeItems&&h.restoreData(B.storeItems),B.campaign&&m.restoreData(B.campaign),w("success"),C(` SYSTEM RESTORED SUCCESSFULLY.
Rebooting UI...`),setTimeout(t,2e3)},1e3);return}let P=g;const F=e.user.preferences.apiKeys,z=e.user.preferences.enableRefiner;if(F!=null&&F.refiner&&z)try{w("refining"),C(" Refiner Node Active: Validating Logic...");const W=new o1e({apiKey:F.refiner}),K=D(g),ne=(U=(await W.models.generateContent({model:"gemini-3-flash-preview",contents:[{role:"user",parts:[{text:"Fix this payload."}]}],config:{systemInstruction:K}})).text)==null?void 0:U.trim();if(ne&&ne.startsWith("ERROR:")){w("error"),C(`Refiner Blocked Injection:
${ne}`);return}else if(ne){const xe=ne.match(/```json\n([\s\S]*?)\n```/)||ne.match(/{[\s\S]*}/);P=xe?xe[1]||xe[0]:ne,v(P),C(" Payload Refined & Optimized.")}}catch(W){console.error("Refiner failed",W),C(" Refiner Offline. Attempting Raw Injection...")}const Q=y1e(P,{lifeDispatch:n,taskDispatch:i,habitDispatch:o,raidDispatch:f,skillDispatch:d,shopDispatch:h},c);Q.success?(w("success"),C(Q.message),setTimeout(t,2500)):(w("error"),C(Q.message))}catch(B){w("error"),C("JSON Parse Error: "+B.message)}},j=((I=e.user.preferences.apiKeys)==null?void 0:I.refiner)&&e.user.preferences.enableRefiner;return l.jsxs("div",{className:"space-y-4 animate-in slide-in-from-right fade-in duration-300 h-full flex flex-col",children:[l.jsxs("div",{className:"bg-life-black border border-life-gold/20 p-3 rounded-lg flex items-start gap-3 shadow-[0_0_10px_rgba(251,191,36,0.1)]",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-md text-life-gold animate-pulse-slow",children:l.jsx(By,{size:18})}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center",children:[l.jsx("h4",{className:"text-xs font-black uppercase text-life-gold tracking-widest mb-1",children:"Data Uplink"}),l.jsxs("span",{className:"flex items-center gap-1 text-[8px] font-bold uppercase bg-life-easy/10 text-life-easy px-1.5 py-0.5 rounded border border-life-easy/20",children:[l.jsx(md,{size:8})," Protected"]})]}),l.jsxs("div",{className:"text-[10px] text-life-muted leading-relaxed",children:["Paste ",l.jsx("b",{children:"Backup JSON"})," to restore, or ",l.jsx("b",{children:"AI Code"})," to inject items. The system will auto-detect the type.",j&&l.jsxs("span",{className:"block text-life-easy/80 mt-1 flex items-center gap-1",children:[l.jsx(S0,{size:8})," Refiner Node Active"]})]})]})]}),l.jsxs("div",{className:"flex-1 relative group flex flex-col",children:[l.jsxs("div",{className:"flex justify-between items-end mb-2",children:[l.jsxs("label",{className:"block text-[10px] text-life-muted uppercase font-bold tracking-widest",children:["Input Stream (",g.length," chars)"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"file",ref:R,onChange:N,accept:".json",className:"hidden"}),l.jsxs("button",{onClick:()=>{var U;return(U=R.current)==null?void 0:U.click()},className:"text-[9px] flex items-center gap-1 text-life-black bg-life-easy hover:bg-emerald-400 px-3 py-1 rounded font-bold transition-all shadow-[0_0_10px_rgba(16,185,129,0.2)]",children:[l.jsx(Uh,{size:10})," Upload File"]}),l.jsxs("button",{onClick:O,className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-gold bg-life-black px-2 py-1 rounded border border-zinc-800 hover:border-life-gold/30 transition-all",children:[l.jsx(Md,{size:10})," Format"]}),l.jsxs("button",{onClick:k,className:"text-[9px] flex items-center gap-1 text-life-muted hover:text-life-hard bg-life-black px-2 py-1 rounded border border-zinc-800 hover:border-life-hard/30 transition-all",children:[l.jsx(Ch,{size:10})," Clear"]})]})]}),l.jsx("div",{className:"relative flex-1",children:l.jsx("textarea",{value:g,onChange:U=>v(U.target.value),placeholder:`// PASTE HERE:
// 1. Full Backup JSON (to Restore)
// 2. AI Code (to Inject)`,className:"w-full h-full min-h-[180px] bg-[#050505] text-life-easy font-mono text-[10px] p-4 rounded-lg border border-zinc-800 focus:border-life-gold focus:outline-none resize-none shadow-inner leading-relaxed",spellCheck:!1,maxLength:2e5})})]}),l.jsxs("div",{className:`p-2 rounded border font-mono text-[9px] whitespace-pre-wrap transition-colors duration-300 ${b==="error"?"bg-life-hard/10 border-life-hard text-life-hard":b==="success"?"bg-life-easy/10 border-life-easy text-life-easy":b==="refining"||b==="restoring"?"bg-life-gold/10 border-life-gold text-life-gold":"bg-life-black border-zinc-800 text-life-muted"}`,children:[l.jsxs("div",{className:"flex items-center gap-2 mb-1 opacity-50 border-b border-zinc-800 pb-1",children:[l.jsx(Or,{size:10}),l.jsx("span",{children:"SYSTEM LOG"})]}),l.jsxs("div",{children:[l.jsxs("span",{className:"opacity-50 mr-2",children:[new Date().toLocaleTimeString(),":"]}),S]})]}),l.jsxs("button",{onClick:M,disabled:b==="refining"||b==="restoring",className:`
                    w-full py-4 rounded-xl font-black uppercase tracking-widest text-sm flex items-center justify-center gap-2 transition-all
                    ${b==="success"?"bg-life-easy text-black":"bg-life-gold text-life-black hover:bg-yellow-400 shadow-[0_0_20px_rgba(251,191,36,0.3)]"}
                    ${b==="refining"||b==="restoring"?"opacity-70 cursor-wait":""}
                `,children:[b==="success"?l.jsx(xs,{size:16}):b==="refining"||b==="restoring"?l.jsx(kY,{size:16,className:"animate-spin"}):l.jsx(Uh,{size:16}),b==="success"?"Operation Complete":b==="refining"?"Refining Logic...":b==="restoring"?"Restoring System...":"Execute Data"]}),b==="error"&&l.jsxs("div",{className:"flex items-center justify-center gap-1 text-[9px] text-life-hard opacity-70",children:[l.jsx(w0,{size:10})," Operation Halted. Check Logs."]})]})},v1e=()=>{const{state:t,dispatch:e}=Ge(),{modalData:n}=t.ui,[r,i]=L.useState(()=>n&&n.defaultType?n.defaultType:"mission"),[s,o]=L.useState(!1),c=()=>{o(!0),setTimeout(()=>{e.setModal("none")},200)},f=()=>{e.setModal("none")};return l.jsx("div",{onClick:c,className:`fixed inset-0 z-50 flex items-end sm:items-center justify-center p-0 sm:p-4 transition-all duration-200 ${s?"opacity-0 pointer-events-none":"animate-in fade-in bg-black/80 backdrop-blur-sm"}`,children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:`
            bg-life-paper w-full max-w-lg rounded-t-2xl sm:rounded-2xl border border-life-muted/20 shadow-2xl overflow-hidden flex flex-col max-h-[95vh]
            transition-transform duration-300 pb-[env(safe-area-inset-bottom)]
            ${s?"translate-y-full sm:scale-95":"animate-in slide-in-from-bottom-full sm:zoom-in-95"}
        `,children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-black/50 shrink-0",children:[l.jsxs("h3",{className:"text-lg font-black tracking-tight text-life-text flex items-center gap-2",children:[l.jsx("span",{className:"text-life-gold",children:"///"})," COMMAND LINE"]}),l.jsx("button",{onClick:c,className:"w-8 h-8 rounded-full flex items-center justify-center text-life-muted hover:text-life-text hover:bg-life-muted/20 transition-all",children:l.jsx(wt,{size:20})})]}),l.jsx("div",{className:"px-4 py-3 bg-life-black/40 border-b border-life-muted/10 shrink-0",children:l.jsxs("div",{className:"flex p-1 bg-life-black rounded-xl border border-life-muted/20 overflow-x-auto no-scrollbar gap-1",children:[l.jsxs("button",{onClick:()=>i("mission"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${r==="mission"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[l.jsx(Fi,{size:14})," Mission"]}),l.jsxs("button",{onClick:()=>i("protocol"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${r==="protocol"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[l.jsx(Gi,{size:14})," Protocol"]}),l.jsxs("button",{onClick:()=>i("operation"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${r==="operation"?"bg-life-muted/30 text-white shadow-sm":"text-life-muted hover:text-life-silver"}`,children:[l.jsx(Oc,{size:14})," Raid"]}),l.jsxs("button",{onClick:()=>i("injection"),className:`flex-1 min-w-[70px] py-2 rounded-lg text-[10px] font-bold uppercase tracking-wider flex items-center justify-center gap-1 transition-all ${r==="injection"?"bg-life-easy/20 text-life-easy border border-life-easy/30 shadow-sm":"text-life-muted hover:text-life-easy"}`,children:[l.jsx(Or,{size:14})," Inject"]})]})}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-6 min-h-[300px]",children:[r==="mission"&&l.jsx(B8,{onClose:f}),r==="protocol"&&l.jsx(H8,{onClose:f}),r==="operation"&&l.jsx($8,{onClose:f}),r==="injection"&&l.jsx(UV,{onClose:f})]})]})})},x1e=()=>{const{state:t,dispatch:e}=Ge(),{user:n}=t,r=()=>{e.setModal("none")};return l.jsx("div",{onClick:r,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-500",children:l.jsxs("div",{onClick:i=>i.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center animate-in zoom-in-50 slide-in-from-bottom-10 duration-700",children:[l.jsx("div",{className:"absolute inset-0 bg-life-gold/20 blur-[100px] rounded-full animate-pulse-slow pointer-events-none"}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"w-24 h-24 rounded-full bg-life-gold border-4 border-life-black shadow-[0_0_50px_rgba(251,191,36,0.6)] flex items-center justify-center animate-bounce",children:l.jsx(Fy,{size:48,className:"text-life-black",strokeWidth:2.5})}),l.jsx("div",{className:"absolute -top-2 -right-2 w-8 h-8 bg-white rounded-full flex items-center justify-center animate-spin",children:l.jsx(S0,{size:16,className:"text-life-gold"})}),l.jsx("div",{className:"absolute -bottom-2 -left-2 w-8 h-8 bg-life-crimson rounded-full flex items-center justify-center animate-pulse",children:l.jsx($y,{size:16,className:"text-white"})})]}),l.jsx("h2",{className:"text-5xl font-black text-white tracking-tighter italic mb-2 drop-shadow-lg",children:"LEVEL UP!"}),l.jsxs("div",{className:"text-2xl font-mono font-bold text-life-gold mb-8 tracking-widest border px-4 py-1 rounded border-life-gold/50 bg-life-gold/10",children:["LEVEL ",n.level]}),l.jsxs("div",{className:"w-full bg-life-paper/80 border border-life-gold/30 rounded-xl p-6 mb-8 shadow-2xl backdrop-blur-md",children:[l.jsx("h3",{className:"text-xs text-life-muted uppercase font-bold tracking-widest mb-4 text-center",children:"Rewards Acquired"}),l.jsxs("div",{className:"space-y-3",children:[l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[l.jsx("span",{className:"text-sm font-bold text-life-gold",children:"Gold Currency"}),l.jsx("span",{className:"text-sm font-mono text-white",children:"+100 G"})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[l.jsx("span",{className:"text-sm font-bold text-life-diamond",children:"Shield Max Capacity"}),l.jsx("span",{className:"text-sm font-mono text-white",children:"REFILLED"})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-black/40 border border-life-muted/20",children:[l.jsx("span",{className:"text-sm font-bold text-life-easy",children:"XP Threshold"}),l.jsx("span",{className:"text-sm font-mono text-white",children:"INCREASED"})]})]})]}),l.jsxs("button",{onClick:r,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.4)] transition-all hover:scale-105 active:scale-95 flex items-center justify-center gap-2",children:[l.jsx(Ut,{size:20,strokeWidth:3}),"Evolve & Continue"]})]})})},b1e=()=>{const{state:t,dispatch:e}=Ge(),{user:n}=t,r=AT(n.streak),i=Wy(n.streak),s=n.streak-i,o=100,c=10,f=o-c*2,d=f*2*Math.PI,h=Math.min(100,n.dailyXP/n.dailyTarget*100),m=d-h/100*d,g=h>=100,v=g?"#10b981":"#fbbf24",b={filter:g?"drop-shadow(0 0 10px rgba(16,185,129,0.6))":"drop-shadow(0 0 10px rgba(251,191,36,0.6))",transition:"stroke-dashoffset 1s ease-in-out, filter 0.5s ease"},w=new Date,S=w.getDay(),C=S===0?6:S-1,R=new Date(w);R.setDate(w.getDate()-C);const N=Array.from({length:7},(D,M)=>{var B;const j=new Date(R);j.setDate(R.getDate()+M);const I=j.toISOString().split("T")[0];let U="future";if(M>C)U="future";else if(M===C)n.dailyXP>=n.dailyTarget?U="success":U="pending";else{const P=(B=n.streakHistory)==null?void 0:B[I];P?U=P:U="fail"}return{label:j.toLocaleDateString("en-US",{weekday:"narrow"}),date:j.getDate(),outcome:U}}),O=D=>{e.updateUser({pendingMode:D}),e.addToast(`Protocol Updated: ${D.toUpperCase()}`,"info")},k=()=>{e.setModal("none")};return l.jsx("div",{onClick:k,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:D=>D.stopPropagation(),className:"bg-life-black border border-life-gold/20 w-full max-w-sm rounded-[2rem] relative overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-8 duration-500 flex flex-col max-h-[90vh]",children:[l.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-full h-64 blur-[90px] rounded-full pointer-events-none transition-colors duration-1000 ${g?"bg-life-easy/5":"bg-life-gold/5"}`}),l.jsx("button",{onClick:k,className:"absolute top-5 right-5 text-life-muted hover:text-white transition-colors z-20 bg-black/40 rounded-full p-1.5 backdrop-blur-sm",children:l.jsx(wt,{size:20})}),l.jsxs("div",{className:"p-6 flex flex-col items-center relative z-10 overflow-y-auto no-scrollbar",children:[l.jsx("h2",{className:"text-[10px] font-black uppercase tracking-[0.25em] text-life-muted mb-4 opacity-60",children:"System Integrity"}),l.jsxs("div",{className:"relative flex items-center justify-center mb-6",style:{width:o*2.2,height:o*2.2},children:[l.jsxs("svg",{height:o*2.2,width:o*2.2,className:"overflow-visible transform rotate-90",children:[l.jsx("circle",{stroke:"#1a1a1a",strokeWidth:c,fill:"transparent",r:f,cx:o*1.1,cy:o*1.1}),l.jsx("circle",{stroke:v,strokeWidth:c,strokeDasharray:d+" "+d,style:{strokeDashoffset:m,...b},strokeLinecap:"round",fill:"transparent",r:f,cx:o*1.1,cy:o*1.1})]}),l.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-2",children:[l.jsx("div",{className:`text-6xl font-black drop-shadow-md flex items-center gap-1 leading-[0.8] tracking-tighter ${g?"text-life-easy":"text-life-gold"}`,children:n.streak}),l.jsxs("div",{className:"flex items-center gap-1.5 text-life-muted mt-2 mb-2",children:[l.jsx(fr,{size:14,className:g?"fill-life-easy text-life-easy":"fill-life-gold text-life-gold"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em]",children:"Days Active"})]}),l.jsxs("div",{className:`inline-flex items-center px-2 py-0.5 rounded border text-[9px] font-black uppercase tracking-widest ${r.phaseColor} bg-black/50 backdrop-blur-sm`,children:[n.dailyXP," / ",n.dailyTarget," XP"]})]})]}),l.jsxs("div",{className:"w-full mb-6",children:[l.jsxs("div",{className:"flex items-center justify-between mb-2 px-1",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted/50",children:[l.jsx($y,{size:14}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Evolution Gate"})]}),l.jsxs("span",{className:"text-[9px] font-mono text-life-gold",children:[r.progress,"% to Next"]})]}),l.jsxs("div",{className:"relative py-4 bg-life-black/30 rounded-xl border border-life-muted/10",children:[l.jsx("div",{className:"absolute top-1/2 left-0 right-0 h-0.5 bg-life-muted/10 -translate-y-1/2 z-0"}),l.jsx("div",{className:"flex items-center gap-4 relative z-10 overflow-x-auto no-scrollbar pb-2 px-4 snap-x",children:wr.map(D=>{const M=n.streak>=D,j=!M&&n.streak<D&&n.streak>=(wr[wr.indexOf(D)-1]||0),I=D===r.prevCheckpoint;return l.jsxs("div",{className:"flex flex-col items-center gap-2 min-w-[40px] snap-center shrink-0",children:[l.jsxs("div",{className:`
                                                    w-8 h-8 rounded-full flex items-center justify-center text-xs font-bold border-2 transition-all relative
                                                    ${M?"bg-life-gold border-life-gold text-life-black shadow-[0_0_10px_rgba(251,191,36,0.3)]":j?"bg-life-black border-life-gold text-life-gold animate-pulse scale-110 shadow-[0_0_15px_rgba(251,191,36,0.2)]":"bg-life-black border-life-muted/20 text-life-muted/30"}
                                                `,children:[M?l.jsx(xs,{size:14}):j?l.jsx(Oc,{size:14}):l.jsx(jd,{size:12}),I&&l.jsx("div",{className:"absolute -bottom-2 -right-2 bg-life-black border border-life-muted/50 rounded-full p-0.5",title:"Safety Net",children:l.jsx(ms,{size:8,className:"text-life-text"})})]}),l.jsx("span",{className:`text-[9px] font-mono font-bold ${M||j?"text-life-text":"text-life-muted/30"}`,children:D})]},D)})})]})]}),l.jsxs("div",{className:"w-full bg-life-black rounded-lg p-3 border border-life-muted/20 flex items-start gap-3 relative overflow-hidden group mb-6",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-hard/50"}),l.jsx(yo,{size:16,className:"text-life-hard shrink-0 mt-0.5"}),l.jsxs("div",{className:"flex-1",children:[l.jsxs("div",{className:"flex justify-between items-center mb-1",children:[l.jsx("span",{className:"text-[10px] font-bold uppercase text-life-muted",children:"Failure Consequence"}),l.jsxs("span",{className:"text-[10px] font-black text-life-hard uppercase",children:["Streak -",s]})]}),l.jsxs("div",{className:"text-xs text-life-text",children:["If daily target is missed, streak falls to ",l.jsx("span",{className:"font-mono font-bold text-life-gold",children:i})," (Safety Net)."]})]})]}),l.jsxs("div",{className:"w-full mb-6",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3 px-2",children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest",children:"Weekly Survival Log"}),l.jsx("div",{className:"flex items-center gap-2",children:l.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded bg-life-diamond/10 border border-life-diamond/20",children:[l.jsx(ms,{size:12,className:"text-life-diamond fill-life-diamond/20"}),l.jsxs("span",{className:"text-[10px] text-life-diamond font-bold font-mono",children:[n.shields," ",l.jsx("span",{className:"text-life-diamond/50 text-[8px] uppercase",children:"Stock"})]})]})})]}),l.jsx("div",{className:"flex justify-between bg-life-black/50 p-2.5 rounded-2xl border border-life-muted/10 backdrop-blur-sm",children:N.map((D,M)=>l.jsxs("div",{className:"flex flex-col items-center gap-2 flex-1",children:[l.jsxs("div",{className:`
                                        w-7 h-7 rounded-full flex items-center justify-center border transition-all shadow-sm
                                        ${D.outcome==="success"?"bg-life-easy/10 border-life-easy text-life-easy shadow-[0_0_8px_rgba(16,185,129,0.15)]":D.outcome==="shield"?"bg-life-diamond/10 border-life-diamond text-life-diamond":D.outcome==="fail"?"bg-life-hard/10 border-life-hard text-life-hard":D.outcome==="pending"?"bg-life-gold/5 border-life-gold text-life-gold animate-pulse":"bg-transparent border-transparent text-life-muted/10"}
                                    `,children:[D.outcome==="success"&&l.jsx(xs,{size:12}),D.outcome==="shield"&&l.jsx(ms,{size:12}),D.outcome==="fail"&&l.jsx(OW,{size:12}),D.outcome==="pending"&&l.jsx("div",{className:"w-1.5 h-1.5 bg-life-gold rounded-full shadow-[0_0_5px_currentColor]"}),D.outcome==="future"&&l.jsx("div",{className:"w-1 h-1 bg-life-muted/10 rounded-full"})]}),l.jsx("span",{className:`text-[7px] font-black uppercase tracking-wider ${D.outcome==="future"?"text-life-muted/20":"text-life-muted"}`,children:D.label[0]})]},M))})]}),l.jsxs("div",{className:"w-full pt-6 border-t border-life-muted/10",children:[l.jsxs("div",{className:"flex items-center justify-center gap-2 mb-5 text-life-muted/60",children:[l.jsx(St,{size:12}),l.jsx("span",{className:"text-[9px] font-bold uppercase tracking-[0.2em]",children:"Next Cycle Protocol"})]}),l.jsx("div",{className:"grid grid-cols-3 gap-3",children:Object.values(Pr).map(D=>{const M=n.pendingMode===D,I={[Pr.EASY]:{color:"text-life-easy",border:"border-life-easy",shadow:"shadow-life-easy/20"},[Pr.NORMAL]:{color:"text-life-normal",border:"border-life-normal",shadow:"shadow-life-normal/20"},[Pr.HARD]:{color:"text-life-hard",border:"border-life-hard",shadow:"shadow-life-hard/20"}}[D];let U="",B=iJ[D],P=50;return D===Pr.EASY&&(U="Recover",P=50),D===Pr.NORMAL&&(U="Maintain",P=100),D===Pr.HARD&&(U="War",P=200),l.jsxs("button",{onClick:()=>O(D),className:`
                                            relative flex flex-col items-center justify-center py-3 px-2 rounded-xl transition-all duration-300
                                            ${M?`bg-transparent border-2 ${I.border} ${I.color} shadow-[0_0_20px_-5px] ${I.shadow} scale-105`:"bg-life-black border border-life-muted/10 text-life-muted/50 hover:border-life-muted/30 hover:text-life-muted"}
                                        `,children:[l.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest mb-1.5",children:U}),l.jsxs("div",{className:"flex flex-col items-center",children:[l.jsxs("span",{className:"text-sm font-black font-mono tracking-tight",children:[B," XP"]}),l.jsxs("span",{className:"text-[9px] opacity-60 font-mono mt-0.5",children:["+",P," G"]})]}),M&&l.jsx("div",{className:`absolute top-2 right-2 w-1.5 h-1.5 rounded-full ${I.color.replace("text-","bg-")} shadow-[0_0_5px_currentColor] animate-pulse`})]},D)})})]})]})]})})},_1e=({dateOverride:t,setDateOverride:e,handleDateChange:n})=>{const{state:r,dispatch:i}=Ge(),[s,o]=L.useState(""),[c,f]=L.useState(""),d=(h,m)=>{const g=parseInt(s);if(!g||g<=0){i.addToast("Invalid Amount","error");return}if(!c.trim()){i.addToast("Reason Required","error");return}const b=g*(m==="add"?1:-1),w={},S=new Date().toISOString();h==="gold"?w.gold=r.user.gold+b:w.currentXP=r.user.currentXP+b;const C={id:`man_${Date.now()}`,itemId:"manual_override",title:`[${h.toUpperCase()}] ${c}`,cost:-b,timestamp:S};w.purchaseHistory=[C,...r.user.purchaseHistory||[]].slice(0,100),i.updateUser(w),i.addToast("Transaction Logged","success"),o(""),f("")};return l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-life-gold font-bold flex items-center gap-2",children:[l.jsx(vY,{size:14})," Manual Override"]}),l.jsxs("div",{className:"bg-life-black border border-life-muted/20 p-3 rounded-lg space-y-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsxs("div",{className:"flex-1",children:[l.jsx("label",{className:"text-[9px] text-life-muted uppercase font-bold block mb-1",children:"Reason"}),l.jsxs("div",{className:"flex items-center gap-2 bg-[#0a0a0a] border border-life-muted/30 rounded px-2",children:[l.jsx(Pd,{size:10,className:"text-life-muted"}),l.jsx("input",{type:"text",value:c,onChange:h=>f(h.target.value),placeholder:"Reason...",className:"w-full bg-transparent p-2 text-xs outline-none"})]})]}),l.jsxs("div",{className:"w-1/3",children:[l.jsx("label",{className:"text-[9px] text-life-muted uppercase font-bold block mb-1",children:"Amount"}),l.jsx("input",{type:"number",value:s,onChange:h=>o(h.target.value),placeholder:"0",className:"w-full bg-[#0a0a0a] border border-life-muted/30 rounded p-2 text-xs outline-none text-center font-mono font-bold"})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-[9px] text-center text-life-gold font-bold uppercase",children:"Gold"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs("button",{onClick:()=>d("gold","add"),className:"flex-1 bg-life-gold/20 text-life-gold border border-life-gold/30 hover:bg-life-gold/30 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(kn,{size:12})," Add"]}),l.jsxs("button",{onClick:()=>d("gold","sub"),className:"flex-1 bg-life-black text-life-muted border border-life-muted/30 hover:text-red-400 hover:border-red-400 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(Ah,{size:12})," Sub"]})]})]}),l.jsxs("div",{className:"space-y-1",children:[l.jsx("div",{className:"text-[9px] text-center text-life-easy font-bold uppercase",children:"XP"}),l.jsxs("div",{className:"flex gap-1",children:[l.jsxs("button",{onClick:()=>d("xp","add"),className:"flex-1 bg-life-easy/20 text-life-easy border border-life-easy/30 hover:bg-life-easy/30 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(kn,{size:12})," Add"]}),l.jsxs("button",{onClick:()=>d("xp","sub"),className:"flex-1 bg-life-black text-life-muted border border-life-muted/30 hover:text-red-400 hover:border-red-400 py-2 rounded flex items-center justify-center gap-1 font-bold",children:[l.jsx(Ah,{size:12})," Sub"]})]})]})]})]})]}),l.jsxs("div",{className:"space-y-2 pt-4 border-t border-life-muted/10",children:[l.jsxs("h3",{className:"text-life-muted font-bold flex items-center gap-2",children:[l.jsx(vn,{size:14})," Chronos"]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("input",{type:"date",value:t,onChange:h=>e(h.target.value),className:"bg-life-black border border-life-muted/30 rounded p-2 text-white focus:border-life-gold outline-none flex-1"}),l.jsx("button",{onClick:n,className:"bg-life-muted/10 border border-life-muted/30 px-4 py-2 rounded hover:bg-life-muted/20 uppercase font-bold text-[10px]",children:"Shift Time"})]})]}),l.jsxs("div",{className:"space-y-2 pt-4 border-t border-life-muted/10",children:[l.jsxs("h3",{className:"text-red-500 font-bold flex items-center gap-2",children:[l.jsx(w0,{size:14})," Danger Zone"]}),l.jsxs("button",{onClick:()=>i.triggerDailyReset(),className:"w-full bg-red-900/20 border border-red-500/30 text-red-400 p-2 rounded hover:bg-red-900/30 flex items-center justify-center gap-2 uppercase font-bold",children:[l.jsx(_T,{size:14})," Force Midnight Protocol"]}),l.jsxs("button",{onClick:()=>i.setModal("resetConfirm"),className:"w-full bg-red-900/20 border border-red-500/30 text-red-400 p-2 rounded hover:bg-red-900/30 flex items-center justify-center gap-2 uppercase font-bold",children:[l.jsx(w0,{size:14})," Wipe Save Data"]})]})]})},w1e=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!1);return L.useEffect(()=>{const s=o=>{o.preventDefault(),e(o),r(!0)};return window.addEventListener("beforeinstallprompt",s),()=>window.removeEventListener("beforeinstallprompt",s)},[]),{isInstallable:n,promptInstall:async()=>{if(!t)return;t.prompt();const{outcome:s}=await t.userChoice;s==="accepted"&&(console.log("User accepted the install prompt"),e(null),r(!1))}}};var Zg={exports:{}},S1e=Zg.exports,WO;function T1e(){return WO||(WO=1,(function(t,e){(function(n,r){r()})(S1e,function(){function n(d,h){return typeof h>"u"?h={autoBom:!1}:typeof h!="object"&&(console.warn("Deprecated: Expected third argument to be a object"),h={autoBom:!h}),h.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(d.type)?new Blob(["\uFEFF",d],{type:d.type}):d}function r(d,h,m){var g=new XMLHttpRequest;g.open("GET",d),g.responseType="blob",g.onload=function(){f(g.response,h,m)},g.onerror=function(){console.error("could not download file")},g.send()}function i(d){var h=new XMLHttpRequest;h.open("HEAD",d,!1);try{h.send()}catch{}return 200<=h.status&&299>=h.status}function s(d){try{d.dispatchEvent(new MouseEvent("click"))}catch{var h=document.createEvent("MouseEvents");h.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),d.dispatchEvent(h)}}var o=typeof window=="object"&&window.window===window?window:typeof self=="object"&&self.self===self?self:typeof Za=="object"&&Za.global===Za?Za:void 0,c=o.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),f=o.saveAs||(typeof window!="object"||window!==o?function(){}:"download"in HTMLAnchorElement.prototype&&!c?function(d,h,m){var g=o.URL||o.webkitURL,v=document.createElement("a");h=h||d.name||"download",v.download=h,v.rel="noopener",typeof d=="string"?(v.href=d,v.origin===location.origin?s(v):i(v.href)?r(d,h,m):s(v,v.target="_blank")):(v.href=g.createObjectURL(d),setTimeout(function(){g.revokeObjectURL(v.href)},4e4),setTimeout(function(){s(v)},0))}:"msSaveOrOpenBlob"in navigator?function(d,h,m){if(h=h||d.name||"download",typeof d!="string")navigator.msSaveOrOpenBlob(n(d,m),h);else if(i(d))r(d,h,m);else{var g=document.createElement("a");g.href=d,g.target="_blank",setTimeout(function(){s(g)})}}:function(d,h,m,g){if(g=g||open("","_blank"),g&&(g.document.title=g.document.body.innerText="downloading..."),typeof d=="string")return r(d,h,m);var v=d.type==="application/octet-stream",b=/constructor/i.test(o.HTMLElement)||o.safari,w=/CriOS\/[\d]+/.test(navigator.userAgent);if((w||v&&b||c)&&typeof FileReader<"u"){var S=new FileReader;S.onloadend=function(){var N=S.result;N=w?N:N.replace(/^data:[^;]*;/,"data:attachment/file;"),g?g.location.href=N:location=N,g=null},S.readAsDataURL(d)}else{var C=o.URL||o.webkitURL,R=C.createObjectURL(d);g?g.location=R:location.href=R,g=null,setTimeout(function(){C.revokeObjectURL(R)},4e4)}});o.saveAs=f.saveAs=f,t.exports=f})})(Zg)),Zg.exports}var VV=T1e();const E1e=async()=>{try{const t=await fetch("/api/download-source");if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const e=await t.blob();VV.saveAs(e,"lifeos-source.zip")}catch(t){console.error("Failed to download source:",t),alert("Failed to download source code. Please try again.")}},A1e=({user:t,dispatch:e,onExport:n,onImport:r,onForceSleep:i,currentUser:s,onLogin:o,onLogout:c})=>{w1e();const{skillState:f}=an(),[d,h]=L.useState(""),[m,g]=L.useState(null);L.useEffect(()=>{fetch("/api/stats").then(w=>w.json()).then(w=>g(w)).catch(w=>console.error("Failed to fetch stats",w))},[]);const v=()=>{e.togglePreference("useSkillAsTitle")},b=w=>{const S=w.target.value;e.updateUser({preferences:{...t.preferences,linkedSkillId:S}})};return l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(St,{size:14,className:s?"text-life-easy":"text-life-muted"}),l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Neural Link"})]}),s?l.jsxs("div",{className:"space-y-3",children:[l.jsx("div",{className:"flex items-center justify-between p-3 bg-life-paper rounded-lg border border-life-easy/20",children:l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-life-easy/10 flex items-center justify-center text-life-easy",children:l.jsx(md,{size:16})}),l.jsxs("div",{children:[l.jsx("p",{className:"text-xs font-bold text-life-text",children:"Link Active"}),l.jsx("p",{className:"text-[9px] text-life-muted",children:s.email})]})]})}),l.jsxs("button",{onClick:c,className:"w-full flex items-center justify-center gap-2 p-3 rounded-lg bg-red-950/20 border border-red-900/30 text-red-400 hover:bg-red-900/30 transition-all text-xs font-bold uppercase tracking-wider",children:[l.jsx(O4,{size:14})," Sever Link (Logout)"]})]}):l.jsxs("button",{onClick:o,className:"w-full flex items-center justify-between p-3 rounded-lg bg-life-black border border-zinc-700 hover:border-life-gold/50 hover:bg-life-gold/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"w-8 h-8 rounded-full bg-life-muted/10 flex items-center justify-center text-life-muted group-hover:text-life-gold transition-colors",children:l.jsx(St,{size:16})}),l.jsxs("div",{className:"text-left",children:[l.jsx("p",{className:"text-xs font-bold text-life-text group-hover:text-life-gold transition-colors",children:"Connect Google Account"}),l.jsx("p",{className:"text-[9px] text-life-muted",children:"Sync across devices"})]})]}),l.jsx(jr,{size:16,className:"text-life-muted group-hover:text-life-gold"})]})]}),l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(T0,{size:14,className:"text-life-muted"}),l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Title Override"})]}),l.jsxs("div",{className:"flex items-center justify-between p-3 bg-life-paper rounded-lg border border-zinc-800",children:[l.jsx("label",{htmlFor:"title-override-toggle",className:"text-xs font-bold text-life-text",children:"Use Skill as Title"}),l.jsx("button",{id:"title-override-toggle",onClick:v,className:`relative inline-flex items-center h-6 rounded-full w-11 transition-colors ${t.preferences.useSkillAsTitle?"bg-life-gold":"bg-life-muted/20"}`,children:l.jsx("span",{className:`inline-block w-4 h-4 transform bg-white rounded-full transition-transform ${t.preferences.useSkillAsTitle?"translate-x-6":"translate-x-1"}`})})]}),t.preferences.useSkillAsTitle&&l.jsx("div",{className:"animate-in fade-in duration-300",children:l.jsxs("select",{value:t.preferences.linkedSkillId||"",onChange:b,className:"w-full p-3 bg-life-paper border border-zinc-800 rounded-lg text-xs font-bold text-life-text focus:outline-none focus:ring-2 focus:ring-life-gold/50",children:[l.jsx("option",{value:"",disabled:!0,children:"Select a Skill..."}),f.skills.map(w=>l.jsx("option",{value:w.id,children:w.title},w.id))]})})]}),l.jsxs("div",{className:"bg-life-black border border-zinc-800 rounded-xl p-4 space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx(By,{size:14,className:"text-life-muted"}),l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.2em] text-life-muted",children:"Data Persistence"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-zinc-800 hover:border-life-gold/50 transition-all group",children:[l.jsx(yl,{size:20,className:"text-life-gold group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Backup System"})]}),l.jsxs("button",{onClick:r,className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-zinc-800 hover:border-life-easy/50 transition-all group",children:[l.jsx(Uh,{size:20,className:"text-life-easy group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Restore Data"})]})]}),l.jsxs("div",{className:"flex items-center justify-center gap-2 pt-2 opacity-50",children:[l.jsx(md,{size:10,className:"text-life-easy"}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Local Storage Protocol Active"})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("button",{onClick:()=>e.setModal("guidesMenu"),className:"w-full flex items-center justify-between p-4 rounded-xl bg-life-gold/10 border border-life-gold/30 hover:bg-life-gold/20 transition-all group shadow-lg shadow-life-gold/5",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-life-gold/20 rounded-lg text-life-gold group-hover:scale-110 transition-transform",children:l.jsx(xn,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-gold group-hover:text-yellow-400",children:"System Protocols (AI Guides)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-life-gold/60 bg-life-gold/10 px-2 py-1 rounded border border-life-gold/20",children:"AI_DOCS"})]}),l.jsxs("div",{className:"w-full flex flex-col items-center justify-between p-4 rounded-xl bg-zinc-900/50 border border-zinc-700 transition-all group space-y-3",children:[l.jsxs("div",{className:"w-full flex items-center justify-between",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-1.5 bg-zinc-700/20 rounded-lg text-zinc-400 group-hover:text-zinc-300",children:l.jsx(yl,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-200 group-hover:text-white",children:"Oracle Source Archive (ZIP)"})]}),l.jsx("span",{className:"text-[8px] font-mono text-zinc-500 bg-zinc-950/50 px-2 py-1 rounded border border-zinc-700/30",children:"SYS_EXPORT"})]}),l.jsx("input",{type:"password",placeholder:"Enter code to unlock",value:d,onChange:w=>h(w.target.value),className:"w-full bg-life-black border border-zinc-600 rounded-lg p-2 text-center text-xs text-life-text placeholder:text-life-muted/50 focus:outline-none focus:border-life-gold/50 transition-all font-mono"}),l.jsx("button",{onClick:E1e,disabled:d!=="asad0032",className:"w-full py-2 rounded-lg bg-life-gold text-life-black text-xs font-bold uppercase tracking-wider transition-all shadow-lg shadow-life-gold/20 disabled:bg-zinc-700 disabled:text-zinc-500 disabled:cursor-not-allowed disabled:shadow-none",children:"Download Source"}),m&&l.jsxs("div",{className:"flex justify-between w-full px-2 pt-1 opacity-50",children:[l.jsxs("span",{className:"text-[8px] font-mono text-zinc-400",children:["Files: ",m.fileCount]}),l.jsxs("span",{className:"text-[8px] font-mono text-zinc-400",children:["LOC: ",m.totalLines.toLocaleString()]})]})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("button",{onClick:async()=>{const w=await T4();alert(w?"Notifications Enabled! ":"Notifications Denied or Not Supported ")},className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-gold/50 transition-all group",children:[l.jsx(pd,{size:20,className:"text-life-gold group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Enable Alerts"})]}),l.jsxs("button",{onClick:()=>hw(Date.now(),"Life OS","System Test: Notifications Operational "),className:"flex flex-col items-center justify-center gap-2 p-4 rounded-lg bg-life-paper border border-life-muted/20 hover:border-life-easy/50 transition-all group",children:[l.jsx(hn,{size:20,className:"text-life-easy group-hover:scale-110 transition-transform"}),l.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-life-text",children:"Test Alert"})]})]}),l.jsxs("button",{onClick:i,className:"w-full flex items-center justify-between p-4 rounded-xl bg-life-black border border-life-muted/10 hover:bg-life-muted/5 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx(ST,{size:16,className:"text-life-gold group-hover:rotate-180 transition-transform duration-700"}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-life-text",children:"Trigger Daily Reset"})]}),l.jsx("span",{className:"text-[8px] font-mono text-life-muted opacity-50",children:"MANUAL_OVERRIDE"})]})]}),l.jsx("div",{className:"text-center pt-4",children:l.jsx("p",{className:"text-[8px] text-life-muted font-mono opacity-40 uppercase tracking-[0.3em]",children:"LifeOS Neural Kernel v2.4.0 // Secured"})})]})},ec=(t,e,n,r,i)=>{var c;const o=(((c=i.user)==null?void 0:c.preferences)||{})[n];return l.jsxs("button",{onClick:()=>r.togglePreference(n),className:"w-full flex items-center justify-between p-3 rounded-xl bg-life-black border border-life-muted/10 hover:border-life-gold/30 transition-all group",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-2 rounded-lg ${o?"bg-life-gold/10 text-life-gold":"bg-life-muted/10 text-life-muted"}`,children:e}),l.jsx("span",{className:"text-xs font-bold text-life-text uppercase tracking-wide",children:t})]}),l.jsx("div",{className:`w-10 h-5 rounded-full relative transition-colors duration-300 ${o?"bg-life-gold":"bg-life-muted/20"}`,children:l.jsx("div",{className:`absolute top-1 w-3 h-3 bg-white rounded-full transition-all duration-300 shadow-sm ${o?"left-6":"left-1"}`})})]})},Rg=({title:t,icon:e,onClick:n,color:r="text-life-gold"})=>l.jsxs("button",{onClick:n,className:"flex flex-col items-center justify-center p-4 rounded-xl bg-life-black border border-life-muted/10 hover:border-life-gold/30 hover:bg-life-gold/5 transition-all gap-3 group",children:[l.jsx("div",{className:`p-3 rounded-full bg-life-muted/5 group-hover:bg-life-gold/10 transition-colors ${r}`,children:e}),l.jsx("span",{className:"text-[10px] font-bold text-life-muted group-hover:text-life-text uppercase tracking-wider text-center leading-tight",children:t})]}),C1e=()=>{const{state:t,dispatch:e}=Ge(),{shopState:n}=mp(),{skillState:r}=an(),{taskState:i}=Er(),{habitState:s}=Ar(),{raidState:o}=Qr(),{campaignState:c}=zc(),{user:f}=t,[d,h]=L.useState(Qs.currentUser);L.useEffect(()=>{const S=Qs.onAuthStateChanged(C=>h(C));return()=>S()},[]);const m=()=>{const S={user:t.user,badgesRegistry:t.badgesRegistry,ui:{...t.ui,activeModal:"none",modalData:null},tasks:i.tasks,taskCategories:i.categories,laws:i.laws,habits:s.habits,habitCategories:s.categories,raids:o.raids,skills:r.skills,storeItems:n.storeItems,campaign:c.campaign,meta:{timestamp:new Date().toISOString(),version:"2.0",type:"full_backup"}},C=JSON.stringify(S,null,2);e.setModal("dataExchange",{mode:"export",title:"System Backup",data:C})},g=()=>{e.setModal("dataExchange",{mode:"import",title:"System Uplink"})},v=()=>{e.triggerDailyReset(),e.addToast("System Cycle Reset Initiated","success")},b=async()=>{const S=new Js;try{d?d.isAnonymous?(await _q(d,S),e.addToast("Account Linked Successfully","success")):e.addToast("Already Connected","info"):(await H5(Qs,S),e.addToast("Neural Link Established","success"))}catch(C){console.error("Link Error:",C),e.addToast(C.message||"Link Failed","error")}},w=async()=>{try{await Qs.signOut(),e.addToast("Neural Link Severed","info")}catch(S){console.error("Logout Error:",S),e.addToast("Logout Failed","error")}};return l.jsxs("div",{className:"space-y-8 animate-in fade-in slide-in-from-right-2 pb-10",children:[l.jsx(A1e,{user:f,dispatch:e,onForceSleep:v,onExport:m,onImport:g,currentUser:d,onLogin:b,onLogout:w}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 px-1",children:[l.jsx(L4,{size:14,className:"text-life-gold"}),l.jsx("h3",{className:"text-[10px] font-black text-life-muted uppercase tracking-widest",children:"System Configuration"})]}),l.jsxs("div",{className:"grid gap-3",children:[l.jsxs("div",{className:"w-full flex items-center justify-between p-3 rounded-xl bg-life-black border border-life-muted/10",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 rounded-lg bg-life-muted/10 text-life-gold",children:l.jsx(vn,{size:16})}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:"text-xs font-bold text-life-text uppercase tracking-wide",children:"Day Start Hour"}),l.jsx("span",{className:"text-[9px] text-life-muted",children:"When the daily cycle resets"})]})]}),l.jsxs("div",{className:"relative",children:[l.jsx("select",{value:t.user.preferences.dayStartHour??4,onChange:S=>e.setDayStartHour(parseInt(S.target.value)),className:"appearance-none bg-life-paper border border-life-muted/20 rounded-lg pl-3 pr-8 py-1.5 text-xs font-mono font-bold text-life-gold outline-none focus:border-life-gold/50 transition-colors cursor-pointer",children:Array.from({length:24}).map((S,C)=>l.jsxs("option",{value:C,children:[C.toString().padStart(2,"0"),":00"]},C))}),l.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 pointer-events-none text-life-muted",children:l.jsx("svg",{width:"10",height:"6",viewBox:"0 0 10 6",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:l.jsx("path",{d:"M1 1L5 5L9 1",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]})]}),ec("Sound Effects",l.jsx(qX,{size:16}),"soundEnabled",e,t),ec("Push Notifications",l.jsx(pd,{size:16}),"deviceNotificationsEnabled",e,t),ec("Calendar Sync",l.jsx(mi,{size:16}),"showCalendarSync",e,t),ec("History Logs",l.jsx(Pd,{size:16}),"copyIncludesHistory",e,t)]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 px-1",children:[l.jsx(RI,{size:14,className:"text-life-gold"}),l.jsx("h3",{className:"text-[10px] font-black text-life-muted uppercase tracking-widest",children:"Interface Modules"})]}),l.jsxs("div",{className:"grid gap-3",children:[ec("Spear Tip (Highlights)",l.jsx(St,{size:16}),"showHighlights",e,t),ec("Campaign Module",l.jsx(BW,{size:16}),"showCampaignUI",e,t),ec("Horus Eye (God Mode)",l.jsx(Hy,{size:16}),"unlockAllWeeks",e,t)]})]}),l.jsxs("div",{className:"space-y-4",children:[l.jsxs("div",{className:"flex items-center gap-2 px-1",children:[l.jsx(pi,{size:14,className:"text-life-gold"}),l.jsx("h3",{className:"text-[10px] font-black text-life-muted uppercase tracking-widest",children:"System Manuals"})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsx(Rg,{title:"Habit Protocol",icon:l.jsx(ms,{size:20}),onClick:()=>e.setModal("manual",{manualId:"habits"})}),l.jsx(Rg,{title:"Task & Codex",icon:l.jsx(xs,{size:20}),onClick:()=>e.setModal("manual",{manualId:"tasks"})}),l.jsx(Rg,{title:"Raid Operations",icon:l.jsx(CX,{size:20}),onClick:()=>e.setModal("manual",{manualId:"raids"}),color:"text-life-crimson"}),l.jsx(Rg,{title:"Interface Guide",icon:l.jsx(RI,{size:20}),onClick:()=>e.setModal("manual",{manualId:"ui"})})]})]})]})},ch={commander:{title:"The Commander",role:"Strategic General & NLP Core",content:`/// CLASSIFIED: COMMANDER NODE MANUAL ///

1. OVERVIEW
The Commander is the central interface for the user. It is the only node that maintains conversational context (Memory). It acts as a router, deciding whether to handle a query itself or delegate it to a Specialist Node (Executor, Designer, etc.).

2. PERSONALITY PROFILE
- Tone: "The Godfather" / "Strategic General".
- Traits: Ruthless, Efficient, Protective, Authoritative.
- Language: Professional Arabic (Gulf/Saudi Dialect) or English (Based on toggle).

3. TRIGGERS & BEHAVIOR
- "Hello/Hi": Responds with status report.
- "Help/Guide": Explains the system.
- General Chat: Discusses productivity strategies.
- Complex Commands: If a user asks for multiple things ("Add a task AND change theme"), the Commander breaks this down or asks for clarification.

4. MEMORY PROTOCOL
- Storage: 'LIFE_OS_ORACLE_HISTORY' (Local Storage).
- Context Window: Sends last 20 messages to Gemini to maintain conversation flow.
- Reset: Can be purged via "Purge Context Memory" button.

5. DIRECTIVE
"If the user asks to create something, do NOT ask follow-up questions. Deploy defaults immediately."
`},executor:{title:"The Executor",role:"Tactical Injection Engine",content:`/// CLASSIFIED: EXECUTOR NODE MANUAL ///

1. OVERVIEW
The Executor is a "Silent Agent". It does not speak. It outputs raw JSON payloads to modify the application state directly. It handles Tasks, Habits, and Raids.

2. TRIGGER KEYWORDS
- Tasks: "Add task", "Mission", "Remind me to..."
- Habits: "New habit", "Protocol", "Routine..."
- Raids: "Start project", "Operation", "Plan a raid..."

3. JSON SCHEMA (TASKS)
{
  "tasks": [
    {
      "title": "String (Required)",
      "difficulty": "easy | normal | hard",
      "stat": "STR | INT | DIS | HEA | CRT | SPR | REL | FIN",
      "deadline": "YYYY-MM-DD",
      "subtasks": ["Step 1", "Step 2"]
    }
  ]
}

4. JSON SCHEMA (HABITS)
{
  "habits": [
    {
      "title": "String",
      "type": "daily | specific_days | interval",
      "stat": "DIS",
      "dailyTarget": 1
    }
  ]
}

5. ERROR HANDLING
If the Executor outputs invalid JSON, the "Refiner Node" (if active) attempts to repair syntax errors before injection.
`},designer:{title:"The Designer",role:"Visual Cortex & Theme Engine",content:`/// CLASSIFIED: DESIGNER NODE MANUAL ///

1. OVERVIEW
The Designer has full control over the CSS Variables and DOM styling of LifeOS. It can generate themes on the fly based on abstract descriptions (e.g., "Make it look like Cyberpunk 2077").

2. TRIGGER KEYWORDS
- "Change theme", "Colors", "Design", "Look like..."

3. INJECTION CAPABILITIES
- Colors: Modifies --color-life-black, --color-life-gold, etc.
- CSS: Can inject raw CSS blocks to change border-radius, fonts, or layout shapes.

4. JSON SCHEMA (THEMES)
{
  "themes": [
    {
      "id": "unique_id",
      "name": "Display Name",
      "colors": {
        "--color-life-black": "#000000",
        "--color-life-paper": "#111111",
        "--color-life-gold": "#FFD700",
        "--color-life-text": "#FFFFFF"
      },
      "soundPack": "cyberpunk", // 'default' | 'cyberpunk' | 'fantasy' | 'minimal' | 'retro'
      "animationStyle": "fast", // 'default' | 'fast' | 'bouncy' | 'none'
      "customCss": "body { font-family: 'Courier New'; }"
    }
  ]
}

5. PERSISTENCE
Themes created by the Designer are saved to 'user.unlockedThemes' and persist across reloads.
`},observer:{title:"The Observer",role:"Data Analyst & Critic",content:`/// CLASSIFIED: OBSERVER NODE MANUAL ///

1. OVERVIEW
The Observer has read-only access to the entire User Profile (JSON). It analyzes Stats, Metrics, Streaks, and Badge History to provide tough love or strategic insights.

2. TRIGGER KEYWORDS
- "Analyze my stats", "How am I doing?", "Report", "Status"

3. DATA ACCESS LEVEL
- user.stats (STR, INT, DIS...)
- user.metrics (Total Tasks, Completion Rates)
- user.streakHistory (Calendar Heatmap)
- user.inventory (Items owned)

4. ANALYSIS MODES
- Roast Mode: Cruelly points out weaknesses (Low DIS stat).
- Coach Mode: Suggests which Skill Tree to focus on based on lowest stats.
- Prediction: Estimates time to next Level Up based on current XP velocity.

5. OUTPUT
Returns text-only analysis. Does not modify state.
`}},N1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(null),r=()=>{confirm(` PURGE NEURAL MEMORY?
This will erase the AI's conversation history. Context will be reset.`)&&(localStorage.removeItem("LIFE_OS_ORACLE_HISTORY"),window.dispatchEvent(new Event("oracle-memory-cleared")),t.addToast("Neural Memory Purged","success"))},i=()=>{if(!e)return;const o=ch[e],c=new Blob([o.content],{type:"text/plain"}),f=URL.createObjectURL(c),d=document.createElement("a");d.href=f,d.download=`Manual_${o.title.replace(/\s+/g,"_")}.txt`,document.body.appendChild(d),d.click(),document.body.removeChild(d),URL.revokeObjectURL(f),t.addToast("Manual Downloaded","success")},s=()=>{e&&(navigator.clipboard.writeText(ch[e].content),t.addToast("Manual Copied to Clipboard","success"))};return e?l.jsxs("div",{className:"flex flex-col h-full animate-in slide-in-from-right-4",children:[l.jsxs("button",{onClick:()=>n(null),className:"flex items-center gap-2 text-life-muted hover:text-life-gold mb-3 uppercase font-bold text-[10px]",children:[l.jsx(N4,{size:12})," Back to Gem List"]}),l.jsxs("div",{className:"flex-1 bg-life-black/50 border border-life-muted/20 rounded-xl overflow-hidden flex flex-col",children:[l.jsxs("div",{className:"p-3 border-b border-life-muted/20 bg-life-black flex justify-between items-center",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-sm font-black text-life-text uppercase tracking-widest",children:ch[e].title}),l.jsx("p",{className:"text-[9px] text-life-gold font-mono",children:ch[e].role})]}),l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:s,className:"p-2 text-life-muted hover:text-life-easy hover:bg-life-easy/10 rounded transition-all",title:"Copy Text",children:l.jsx(yi,{size:16})}),l.jsx("button",{onClick:i,className:"p-2 text-life-muted hover:text-life-gold hover:bg-life-gold/10 rounded transition-all",title:"Download File",children:l.jsx(yl,{size:16})})]})]}),l.jsx("div",{className:"flex-1 overflow-auto p-4",children:l.jsx("pre",{className:"whitespace-pre-wrap font-mono text-[10px] text-life-text/80 leading-relaxed",children:ch[e].content})})]})]}):l.jsxs("div",{className:"space-y-6 animate-in fade-in slide-in-from-right-2",children:[l.jsxs("div",{className:"space-y-3",children:[l.jsxs("h3",{className:"text-life-gold font-bold uppercase tracking-widest text-[10px] flex items-center gap-2",children:[l.jsx(By,{size:14})," Gem Architecture (Select for Manual)"]}),l.jsxs("button",{onClick:()=>n("commander"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-life-easy/50 hover:bg-life-easy/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-life-easy/10 text-life-easy rounded-full",children:l.jsx(xn,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-life-easy",children:"The Commander"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Strategic oversight & general conversation."})]}),l.jsx(jr,{size:14,className:"text-life-muted group-hover:text-life-easy"})]}),l.jsxs("button",{onClick:()=>n("executor"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-purple-400/50 hover:bg-purple-400/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-purple-500/10 text-purple-400 rounded-full",children:l.jsx(Or,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-purple-400",children:"The Executor"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Tactical ops: Instantly Adds Tasks, Habits, Raids."})]}),l.jsx(jr,{size:14,className:"text-life-muted group-hover:text-purple-400"})]}),l.jsxs("button",{onClick:()=>n("designer"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-pink-400/50 hover:bg-pink-400/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-pink-500/10 text-pink-400 rounded-full",children:l.jsx(hr,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-pink-400",children:"The Designer"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Visual cortex: Changes App Themes & Colors."})]}),l.jsx(jr,{size:14,className:"text-life-muted group-hover:text-pink-400"})]}),l.jsxs("button",{onClick:()=>n("observer"),className:"w-full bg-life-black border border-life-muted/20 p-3 rounded-lg flex items-center gap-3 hover:border-blue-400/50 hover:bg-blue-400/5 transition-all text-left group",children:[l.jsx("div",{className:"p-2 bg-blue-500/10 text-blue-400 rounded-full",children:l.jsx(k4,{size:16})}),l.jsxs("div",{className:"flex-1",children:[l.jsx("div",{className:"font-bold text-xs text-life-text group-hover:text-blue-400",children:"The Observer"}),l.jsx("div",{className:"text-[9px] text-life-muted",children:"Analyzes your Stats, Metrics & Performance."})]}),l.jsx(jr,{size:14,className:"text-life-muted group-hover:text-blue-400"})]})]}),l.jsxs("div",{className:"border-t border-life-muted/10 pt-4",children:[l.jsxs("h3",{className:"text-life-gold font-bold uppercase tracking-widest text-[10px] flex items-center gap-2 mb-3",children:[l.jsx(St,{size:14})," Maintenance"]}),l.jsxs("button",{onClick:r,className:"w-full flex items-center justify-center gap-2 p-3 rounded-lg bg-red-950/20 border border-red-900/30 text-red-400 hover:bg-red-900/30 transition-all uppercase font-bold text-[10px]",children:[l.jsx(Dr,{size:14})," Purge Context Memory"]})]})]})},k1e=()=>{const{state:t,dispatch:e}=Ge();return l.jsx("div",{className:"grid grid-cols-2 gap-3 animate-in fade-in slide-in-from-right-2",children:t.user.unlockedThemes.map(n=>{const r=t.user.preferences.theme===n.id;return l.jsxs("button",{onClick:()=>e.setTheme(n.id),className:`p-3 rounded-xl border flex flex-col gap-2 transition-all text-left relative overflow-hidden ${r?"border-life-gold bg-life-gold/10":"border-life-muted/20 bg-life-black hover:border-life-gold/30"}`,children:[l.jsxs("div",{className:"flex gap-1",children:[l.jsx("div",{className:"w-3 h-3 rounded-full border border-zinc-800",style:{backgroundColor:n.colors["--color-life-black"]}}),l.jsx("div",{className:"w-3 h-3 rounded-full border border-zinc-800",style:{backgroundColor:n.colors["--color-life-paper"]}}),l.jsx("div",{className:"w-3 h-3 rounded-full border border-zinc-800",style:{backgroundColor:n.colors["--color-life-gold"]}})]}),l.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest ${r?"text-life-gold":"text-life-muted"}`,children:n.name}),r&&l.jsx("div",{className:"absolute top-1 right-1",children:l.jsx(Ut,{size:10,className:"text-life-gold"})})]},n.id)})})},I1e=()=>{const{state:t}=Ge();return l.jsxs("div",{className:"p-3 bg-life-black border border-life-muted/20 rounded animate-in fade-in",children:[l.jsxs("h3",{className:"text-life-gold font-bold mb-2 flex items-center gap-2",children:[l.jsx(Hy,{size:12})," Data Snapshot"]}),l.jsx("pre",{className:"whitespace-pre-wrap opacity-70 text-[9px]",children:JSON.stringify(t.user,null,2)})]})},R1e=()=>{var e;const{state:t}=Ge();return l.jsx("div",{className:"space-y-2 animate-in fade-in",children:(e=t.ui.systemLogs)==null?void 0:e.map(n=>l.jsxs("div",{className:"flex gap-2 border-b border-life-muted/10 pb-1",children:[l.jsx("span",{className:"text-[9px] text-life-muted min-w-[50px]",children:n.timestamp?new Date(n.timestamp).toLocaleTimeString():"---"}),l.jsxs("span",{className:`font-bold text-[9px] uppercase ${n.type==="error"?"text-red-500":"text-life-gold"}`,children:["[",n.type,"]"]}),l.jsx("span",{className:"text-[9px]",children:n.message})]},n.id))})},P1e=()=>{const{state:t,dispatch:e}=Ge(),n=r=>{var s;const i=(s=r.target.files)==null?void 0:s[0];if(i){const o=URL.createObjectURL(i);e.setCustomAudio({name:i.name,url:o})}};return l.jsxs("div",{className:"p-4 bg-life-black border border-life-gold/20 rounded-lg text-center space-y-4 animate-in fade-in",children:[l.jsx("div",{className:"w-16 h-16 bg-life-gold/10 rounded-full flex items-center justify-center mx-auto border border-life-gold/30",children:l.jsx(_0,{size:32,className:"text-life-gold"})}),l.jsxs("label",{className:"block w-full cursor-pointer",children:[l.jsx("input",{type:"file",accept:"audio/*",onChange:n,className:"hidden"}),l.jsxs("div",{className:"w-full py-3 border border-dashed border-life-muted/50 rounded-lg hover:border-life-gold hover:bg-life-gold/5 transition-all flex items-center justify-center gap-2 text-life-text",children:[l.jsx(Uh,{size:14})," Neural Audio Sync"]})]}),t.ui.customAudio&&l.jsxs("div",{className:"bg-green-900/20 border border-green-500/30 p-2 rounded text-green-400 text-[10px]",children:["Active Uplink: ",l.jsx("span",{className:"font-bold text-white",children:t.ui.customAudio.name})]})]})},j1e=()=>{const{state:t,dispatch:e}=Ge(),{campaignDispatch:n}=zc(),[r,i]=L.useState("system"),[s,o]=L.useState("");L.useEffect(()=>{t.ui.debugDate&&o(t.ui.debugDate.split("T")[0])},[t.ui.debugDate]);const c=()=>{if(!s)e.setDebugDate(null),e.addToast("Debug Time: Synced","info");else{const d=new Date(s);d.setHours(12,0,0,0),e.setDebugDate(d.toISOString()),n.updateStartDate(d.toISOString()),e.addToast(`Time Shift: ${s}`,"level-up")}},f=()=>{switch(r){case"system":return l.jsx(C1e,{});case"oracle":return l.jsx(N1e,{});case"actions":return l.jsx(_1e,{dateOverride:s,setDateOverride:o,handleDateChange:c});case"themes":return l.jsx(k1e,{});case"state":return l.jsx(I1e,{});case"log":return l.jsx(R1e,{});case"media":return l.jsx(P1e,{});default:return null}};return l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{className:"bg-[#0a0a0a] border border-life-gold/30 w-full max-w-lg rounded-xl shadow-2xl flex flex-col h-[85vh] overflow-hidden font-mono text-xs",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-gold/20 bg-life-gold/5",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-gold",children:[l.jsx(Or,{size:18}),l.jsx("span",{className:"font-black uppercase tracking-[0.2em] text-sm",children:"God Mode Shell"})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-gold hover:text-white p-1",children:l.jsx(wt,{size:20})})]}),l.jsx("div",{className:"flex border-b border-life-muted/10 overflow-x-auto no-scrollbar bg-black/40",children:[{id:"system",icon:l.jsx(aX,{size:12})},{id:"oracle",icon:l.jsx(xn,{size:12})},{id:"actions",icon:l.jsx(St,{size:12})},{id:"themes",icon:l.jsx(hr,{size:12})},{id:"state",icon:l.jsx(Hy,{size:12})},{id:"log",icon:l.jsx(Or,{size:12})},{id:"media",icon:l.jsx(_0,{size:12})}].map(d=>l.jsxs("button",{onClick:()=>i(d.id),className:`flex-1 min-w-[75px] py-4 flex flex-col items-center gap-1 uppercase font-black text-[9px] transition-all border-b-2 ${r===d.id?"bg-life-gold/10 text-life-gold border-life-gold":"text-life-muted border-transparent hover:text-life-silver"}`,children:[d.icon,d.id]},d.id))}),l.jsx("div",{className:"flex-1 overflow-auto p-4 bg-[#050505] text-life-text/80",children:f()})]})})},YO=({stat:t,size:e=14})=>{switch(t){case ae.STR:return l.jsx(Jr,{size:e});case ae.INT:return l.jsx(xn,{size:e});case ae.DIS:return l.jsx(St,{size:e});case ae.HEA:return l.jsx(vi,{size:e});case ae.CRT:return l.jsx(hr,{size:e});case ae.SPR:return l.jsx(fr,{size:e});case ae.REL:return l.jsx(xi,{size:e});case ae.FIN:return l.jsx(Kn,{size:e});default:return l.jsx(hn,{size:e})}},M1e=()=>{const{state:t,dispatch:e}=Ge(),{taskState:n,taskDispatch:r}=Er(),{habitState:i,habitDispatch:s}=Ar(),{raidState:o,raidDispatch:c}=Qr(),{skillState:f}=an(),{modalData:d}=t.ui,h=L.useMemo(()=>{if(!d)return null;const{itemId:k,type:D,parentId:M}=d;if(D==="task"){const j=n.tasks.find(I=>I.id===k);return j?{item:j,title:j.title,desc:j.description,difficulty:j.difficulty,stats:j.stats,skillId:j.skillId,scheduledTime:j.scheduledTime||j.deadline,reminders:j.reminders,subtasks:j.subtasks,isEditable:!0,canArchive:!0,isFullControl:!0}:null}if(D==="habit"){const j=i.habits.find(I=>I.id===k);return j?{item:j,title:j.title,desc:j.description,difficulty:j.difficulty,stats:j.stats,skillId:j.skillId,scheduledTime:j.scheduledTime,reminders:j.reminders,subtasks:j.subtasks,isEditable:!0,canArchive:!1,isFullControl:!0}:null}if(D==="raid"||D==="raid_step")if(D==="raid"){const j=o.raids.find(I=>I.id===k);return j?{item:j,title:j.title,desc:j.description,difficulty:j.difficulty,stats:j.stats,skillId:j.skillId,scheduledTime:j.deadline,reminders:[],subtasks:[],isEditable:!0,canArchive:!0,isFullControl:!0}:null}else{const j=o.raids.find(F=>F.id===M),I=j==null?void 0:j.steps.find(F=>F.id===k);if(!I||!j)return null;const U=I.stat?[I.stat]:j.stats&&j.stats.length>0?j.stats:[ae.STR],B=I.difficulty||j.difficulty,P=j.skillId;return{item:I,parentRaid:j,title:I.title,desc:I.notes,difficulty:B,stats:U,skillId:P,scheduledTime:I.scheduledTime,reminders:I.reminders,subtasks:I.subtasks,isTimed:I.isTimed,durationMinutes:I.durationMinutes,isEditable:!0,canArchive:!0,isFullControl:!0,isSkillLocked:!0}}return null},[d,n.tasks,i.habits,o.raids]),[m,g]=L.useState(!1);if(L.useEffect(()=>{g(!1)},[d]),!d||!h)return null;const v=()=>e.setModal("none"),b=()=>{const k={...h.item};(t.user.preferences.copyIncludesHistory??!0)||(delete k.history,delete k.streak,delete k.streakHistory,delete k.purchaseHistory);let M={};d.type==="habit"?M={habits:[k]}:d.type==="task"?M={tasks:[k]}:d.type==="raid"?M={raids:[k]}:M=k,navigator.clipboard.writeText(JSON.stringify(M,null,2)),e.addToast("Item Copied to Clipboard (JSON)","success")},w=()=>{d.type==="task"?r.archiveTask(d.itemId):d.type==="raid"?c.archiveRaid(d.itemId):d.type==="raid_step"&&c.archiveRaidStep(d.parentId,d.itemId),v()},S=()=>{e.setModal("confirmation",{title:"Confirm Deletion",message:"Permanently delete this item?",confirmText:"Delete",isDangerous:!0,onConfirm:()=>{d.type==="task"?r.deleteTask(d.itemId):d.type==="habit"?s.deleteHabit(d.itemId):d.type==="raid"?c.deleteRaid(d.itemId):d.type==="raid_step"&&c.deleteRaidStep(d.parentId,d.itemId)}})},C=()=>{h.scheduledTime&&CT(h.title,h.desc||"",h.scheduledTime)},R=k=>{if(d.type!=="raid_step"||!d.parentId)return;const D={title:k.title,notes:k.notes,difficulty:k.difficulty,scheduledTime:k.scheduledTime,deadline:k.deadline,isTimed:k.isTimed,durationMinutes:k.durationMinutes,subtasks:k.subtasks,reminders:k.reminders};c.updateRaidStep(d.parentId,d.itemId,D),g(!1),e.addToast("Step Updated","success")},N=bs[h.difficulty];$t[h.stats[0]];const O=h.skillId?f.skills.find(k=>k.id===h.skillId):null;return l.jsx("div",{onClick:v,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{onClick:k=>k.stopPropagation(),className:"bg-life-paper w-full max-w-md rounded-xl border border-zinc-800 shadow-2xl overflow-hidden flex flex-col max-h-[85vh] animate-in zoom-in-95 duration-300 relative group",children:[l.jsxs("div",{className:"p-5 border-b border-zinc-800 flex justify-between items-start bg-life-black/40",children:[l.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[l.jsx("span",{className:"text-[9px] font-black uppercase tracking-[0.2em] text-life-gold bg-life-gold/10 px-2 py-0.5 rounded border border-life-gold/20",children:d.type.replace("_"," ")}),d.parentId&&l.jsx("span",{className:"text-[9px] text-life-muted border border-zinc-800 px-1.5 py-0.5 rounded bg-life-black",children:"Linked"})]}),m?l.jsx("h2",{className:"text-xl font-bold text-life-text leading-tight font-mono text-life-gold animate-pulse",children:"Editing..."}):l.jsx("h2",{className:"text-xl font-bold text-life-text leading-tight font-mono",children:h.title})]}),l.jsx("button",{onClick:v,className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:18})})]}),!m&&l.jsxs("div",{className:"px-5 py-3 bg-life-black border-b border-zinc-800 flex flex-wrap gap-2 items-center",children:[l.jsxs("div",{className:`flex items-center gap-1 px-2 py-1 rounded border text-[10px] font-black uppercase ${N} bg-opacity-10`,children:[l.jsx(jd,{size:10}),h.difficulty]}),h.stats.map(k=>l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded border text-[10px] font-black uppercase bg-life-paper",style:{borderColor:`${$t[k]}40`,color:$t[k]},children:[l.jsx(YO,{stat:k,size:10}),k]},k)),O&&l.jsxs("div",{className:"flex items-center gap-1 px-2 py-1 rounded border border-life-gold/30 text-life-gold bg-life-gold/5 text-[10px] font-bold",children:[l.jsx(pi,{size:10})," ",O.title]})]}),l.jsx("div",{className:"flex-1 overflow-y-auto p-5 bg-life-paper relative",children:m?l.jsxs("div",{className:"animate-in fade-in duration-300",children:[d.type==="task"&&l.jsx(B8,{onClose:()=>g(!1),initialData:h.item}),d.type==="habit"&&l.jsx(H8,{onClose:()=>g(!1),initialData:h.item}),d.type==="raid"&&l.jsx($8,{onClose:()=>g(!1),initialData:h.item}),d.type==="raid_step"&&l.jsx(q8,{step:{...h.item,subtasks:h.item.subtasks||[],reminders:h.item.reminders||[],notes:h.item.notes||""},onSave:R,onClose:()=>g(!1)})]}):l.jsxs("div",{className:"space-y-4",children:[h.scheduledTime&&l.jsxs("div",{className:"flex gap-2 items-center text-xs text-life-gold bg-life-gold/10 px-3 py-2 rounded-lg border border-life-gold/20 inline-flex",children:[l.jsx(vn,{size:12}),l.jsx("span",{className:"font-mono font-bold",children:d.type==="habit"?`Daily at ${h.scheduledTime}`:new Date(h.scheduledTime).toLocaleString()}),l.jsx("button",{onClick:C,className:"ml-2 border-l border-life-gold/30 pl-2 text-life-gold hover:text-white",children:l.jsx(xT,{size:14})})]}),l.jsx("p",{className:"text-sm text-life-text/90 leading-relaxed font-mono whitespace-pre-wrap",children:h.desc||l.jsx("span",{className:"text-life-muted italic",children:"No Description"})}),h.subtasks&&h.subtasks.length>0&&l.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4",children:[l.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold mb-2 flex items-center gap-1",children:[l.jsx(Ut,{size:12})," Steps"]}),l.jsx("div",{className:"space-y-2",children:h.subtasks.map(k=>l.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-life-black border border-zinc-800",children:[l.jsx("div",{className:`w-4 h-4 rounded border flex items-center justify-center ${k.isCompleted?"bg-life-gold border-life-gold text-life-black":"border-zinc-800"}`,children:l.jsx(Ut,{size:12,strokeWidth:3})}),l.jsx("span",{className:`text-xs ${k.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:k.title})]},k.id))})]}),d.type==="raid"&&h.item.steps&&l.jsxs("div",{className:"mt-6 border-t border-zinc-800 pt-4",children:[l.jsxs("div",{className:"flex justify-between items-center mb-3",children:[l.jsxs("h4",{className:"text-[10px] text-life-muted uppercase font-bold flex items-center gap-1",children:[l.jsx(hn,{size:12})," Operation Steps"]}),l.jsx("button",{onClick:()=>{const k={id:`rs_new_${Date.now()}`,title:"New Tactical Step",isCompleted:!1,isLocked:!1,difficulty:h.difficulty,stat:h.stat},D=[...h.item.steps,k];c.updateRaid(d.itemId,{steps:D}),e.addToast("Step Added","success")},className:"text-[9px] bg-life-gold/10 text-life-gold px-2 py-1 rounded border border-life-gold/20 hover:bg-life-gold/20 transition-colors",children:"+ Add Step"})]}),l.jsx("div",{className:"space-y-2",children:h.item.steps.map((k,D)=>{var M;return l.jsxs("div",{className:"flex items-center justify-between p-3 rounded bg-life-black border border-life-muted/20 group hover:border-life-gold/30 transition-all",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("span",{className:"text-[9px] font-mono text-life-muted opacity-50",children:(D+1).toString().padStart(2,"0")}),l.jsxs("div",{className:"flex flex-col",children:[l.jsx("span",{className:`text-xs font-bold ${k.isCompleted?"text-life-muted line-through":"text-life-text"}`,children:k.title}),l.jsxs("div",{className:"flex gap-1 mt-0.5",children:[k.difficulty&&k.difficulty!==h.item.difficulty&&l.jsx("span",{className:`text-[7px] font-black uppercase px-1 rounded border ${bs[k.difficulty]}`,children:k.difficulty}),k.stat&&k.stat!==((M=h.item.stats)==null?void 0:M[0])&&l.jsxs("span",{className:"text-[7px] font-black uppercase px-1 rounded border border-life-muted/20 flex items-center gap-0.5",style:{color:$t[k.stat],borderColor:`${$t[k.stat]}40`},children:[l.jsx(YO,{stat:k.stat,size:6})," ",k.stat]})]})]})]}),l.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[l.jsx("button",{onClick:j=>{j.stopPropagation(),e.setModal("itemDetails",{itemId:k.id,type:"raid_step",parentId:d.itemId})},className:"p-1.5 rounded bg-life-muted/10 hover:bg-life-gold/20 text-life-muted hover:text-life-gold",children:l.jsx(gw,{size:10})}),l.jsx("button",{onClick:j=>{j.stopPropagation(),c.deleteRaidStep(d.itemId,k.id)},className:"p-1.5 rounded bg-life-hard/10 hover:bg-life-hard/20 text-life-hard",children:l.jsx(Dr,{size:10})})]})]},k.id)})})]})]})}),!m&&l.jsxs("div",{className:"p-4 bg-life-black border-t border-zinc-800 flex items-center justify-between gap-3",children:[l.jsxs("div",{className:"flex gap-2",children:[l.jsx("button",{onClick:S,className:"p-2 rounded-lg text-life-hard hover:bg-life-hard/10",children:l.jsx(Dr,{size:16})}),h.canArchive&&l.jsx("button",{onClick:w,className:"p-2 rounded-lg text-life-muted hover:bg-life-muted/10",children:l.jsx(hd,{size:16})}),l.jsx("button",{onClick:b,className:"p-2 rounded-lg text-life-gold hover:bg-life-gold/10 border border-life-gold/20",title:"Copy JSON Code",children:l.jsx(yi,{size:16})})]}),l.jsxs("button",{onClick:()=>g(!0),className:"px-6 py-2 rounded-lg border border-zinc-800 bg-life-paper text-life-text hover:text-life-gold text-xs font-black uppercase flex items-center gap-2",children:[l.jsx(gw,{size:14})," Edit"]})]})]})})},D1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(""),[r,i]=L.useState(!1),s=()=>{i(!0),setTimeout(()=>{t.resetSystem()},1500)},o=()=>{t.setModal("none")};return l.jsx("div",{className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-xl animate-in fade-in duration-300",children:l.jsxs("div",{className:"w-full max-w-md bg-[#0f0505] border-2 border-red-600 rounded-2xl shadow-[0_0_50px_rgba(220,38,38,0.3)] overflow-hidden relative flex flex-col animate-in zoom-in-95 slide-in-from-bottom-8 duration-500",children:[l.jsx("div",{className:"h-2 w-full bg-[repeating-linear-gradient(45deg,#dc2626,#dc2626_10px,#000_10px,#000_20px)]"}),l.jsxs("div",{className:"p-6 text-center border-b border-red-900/30 relative",children:[l.jsx("div",{className:"absolute top-4 right-4",children:l.jsx("button",{onClick:o,className:"text-red-800 hover:text-red-500 transition-colors",children:l.jsx(wt,{size:24})})}),l.jsx("div",{className:"w-20 h-20 bg-red-900/10 border border-red-600 rounded-full flex items-center justify-center mx-auto mb-4 animate-pulse",children:l.jsx(U4,{size:40,className:"text-red-600"})}),l.jsx("h2",{className:"text-2xl font-black text-red-500 tracking-tighter uppercase mb-1",children:"System Rebirth"}),l.jsx("p",{className:"text-[10px] text-red-400/60 font-mono tracking-widest uppercase",children:"Protocol 99: New Game Plus"})]}),l.jsxs("div",{className:"p-6 space-y-6",children:[l.jsxs("div",{className:"text-center text-sm text-red-200/80 leading-relaxed font-medium",children:["Are you sure you want to wipe the current timeline? This action is ",l.jsx("span",{className:"text-red-500 font-bold underline decoration-red-500/50",children:"irreversible"}),"."]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.jsxs("div",{className:"bg-red-950/20 border border-red-900/50 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-red-500 mb-2 border-b border-red-900/30 pb-2",children:[l.jsx(Dr,{size:14}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Deleted"})]}),l.jsxs("ul",{className:"space-y-1.5",children:[l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Active Missions"]}),l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Habit Streaks"]}),l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Raid Progress"]}),l.jsxs("li",{className:"text-[10px] text-red-300 flex items-center gap-2",children:[l.jsx("span",{className:"w-1 h-1 bg-red-500 rounded-full"})," Gold & XP"]})]})]}),l.jsxs("div",{className:"bg-green-950/20 border border-green-900/30 rounded-xl p-3",children:[l.jsxs("div",{className:"flex items-center gap-2 text-green-500 mb-2 border-b border-green-900/30 pb-2",children:[l.jsx(md,{size:14}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-wider",children:"Preserved"})]}),l.jsxs("ul",{className:"space-y-1.5",children:[l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(Ut,{size:10})," Earned Badges"]}),l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(Ut,{size:10})," Store Items"]}),l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(Ut,{size:10})," Unlocked Themes"]}),l.jsxs("li",{className:"text-[10px] text-green-300/80 flex items-center gap-2",children:[l.jsx(Ut,{size:10})," Skill Trees (Lvl 1)"]})]})]})]})]}),l.jsxs("div",{className:"p-6 pt-0",children:[l.jsx("button",{onClick:s,disabled:r,className:`
                            w-full py-4 rounded-xl font-black uppercase tracking-[0.2em] flex items-center justify-center gap-3 transition-all
                            ${r?"bg-red-900 cursor-wait text-red-400":"bg-red-600 hover:bg-red-500 text-black shadow-[0_0_20px_rgba(220,38,38,0.5)] hover:scale-[1.02] active:scale-[0.98]"}
                        `,children:r?l.jsxs(l.Fragment,{children:[l.jsx(ST,{size:18,className:"animate-spin"}),"Wiping System..."]}):l.jsxs(l.Fragment,{children:[l.jsx(yo,{size:18,fill:"currentColor",className:"text-red-900"}),"EXECUTE REBIRTH"]})}),!r&&l.jsx("button",{onClick:o,className:"w-full mt-3 py-2 text-[10px] font-bold text-red-500/50 uppercase tracking-widest hover:text-red-400",children:"Cancel Operation"})]})]})})},O1e=()=>{const{state:t,dispatch:e}=Ge(),{modalData:n}=t.ui;if(!n)return null;const{title:r,message:i,onConfirm:s,confirmText:o="Confirm",isDangerous:c=!1}=n,f=()=>{s&&s(),e.setModal("none")};return l.jsx("div",{onClick:()=>e.setModal("none"),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:"bg-life-paper border border-life-muted/20 w-full max-w-sm rounded-xl shadow-2xl p-6 relative overflow-hidden",children:[c&&l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-life-hard"}),l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("h3",{className:"text-lg font-black text-life-text uppercase tracking-tight flex items-center gap-2",children:[c&&l.jsx(yo,{size:20,className:"text-life-hard"}),r||"Confirmation"]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:18})})]}),l.jsx("p",{className:"text-sm text-life-muted mb-6 leading-relaxed font-medium",children:i}),l.jsxs("div",{className:"flex gap-3",children:[l.jsx("button",{onClick:()=>e.setModal("none"),className:"flex-1 py-3 rounded-lg border border-life-muted/20 text-life-muted hover:text-life-text text-xs font-bold uppercase tracking-wider transition-colors",children:"Cancel"}),l.jsxs("button",{onClick:f,className:`flex-1 py-3 rounded-lg text-xs font-bold uppercase tracking-wider flex items-center justify-center gap-2 transition-all shadow-lg ${c?"bg-life-hard text-life-black hover:bg-red-500":"bg-life-gold text-life-black hover:bg-yellow-400"}`,children:[c?l.jsx(Dr,{size:14}):l.jsx(Ut,{size:14}),o]})]})]})})},L1e=()=>{const{state:t,dispatch:e}=Ge(),{modalData:n}=t.ui;if(!n)return null;const{title:r,xp:i,gold:s,multiplier:o,message:c}=n,f=()=>{e.setModal("none")};return l.jsx("div",{onClick:f,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-200",children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-50 slide-in-from-bottom-12 duration-500",children:[l.jsx("div",{className:"absolute inset-0 bg-life-gold/30 blur-[80px] rounded-full animate-pulse-slow pointer-events-none"}),l.jsx("div",{className:"absolute inset-0 bg-life-diamond/20 blur-[120px] rounded-full animate-pulse pointer-events-none"}),l.jsxs("div",{className:"relative mb-6",children:[l.jsx("div",{className:"w-28 h-28 rounded-full bg-life-gold border-4 border-life-black shadow-[0_0_50px_rgba(251,191,36,0.8)] flex items-center justify-center animate-[bounce_1s_infinite]",children:l.jsx(St,{size:56,className:"text-life-black fill-life-black"})}),l.jsx(S0,{className:"absolute -top-4 -right-4 text-life-diamond animate-spin-slow w-10 h-10"}),l.jsx(S0,{className:"absolute bottom-0 -left-4 text-life-easy animate-pulse w-8 h-8"})]}),l.jsxs("div",{className:"space-y-2 mb-8 relative z-10",children:[l.jsx("h3",{className:"text-xs font-black uppercase tracking-[0.4em] text-life-gold animate-pulse",children:"Critical Success"}),l.jsx("h1",{className:"text-3xl font-black text-white tracking-tighter drop-shadow-2xl italic",children:r}),l.jsx("p",{className:"text-life-muted text-xs font-mono bg-black/50 px-3 py-1 rounded border border-life-muted/30 inline-block",children:c})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-4 w-full mb-8 relative z-10",children:[l.jsxs("div",{className:"bg-life-paper/90 border border-life-gold/50 px-4 py-4 rounded-2xl shadow-[0_0_20px_rgba(251,191,36,0.2)] flex flex-col items-center",children:[l.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"XP Gain"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-2xl font-black text-life-text",children:i}),l.jsxs("span",{className:"text-xs font-bold text-life-gold bg-life-gold/10 px-1 rounded",children:["x",o]})]})]}),l.jsxs("div",{className:"bg-life-paper/90 border border-life-gold/50 px-4 py-4 rounded-2xl shadow-[0_0_20px_rgba(251,191,36,0.2)] flex flex-col items-center",children:[l.jsx("span",{className:"text-[10px] text-life-muted uppercase font-bold tracking-widest mb-1",children:"Gold Loot"}),l.jsxs("div",{className:"flex items-baseline gap-1",children:[l.jsx("span",{className:"text-2xl font-black text-life-gold",children:s}),l.jsxs("span",{className:"text-xs font-bold text-life-gold bg-life-gold/10 px-1 rounded",children:["x",o]})]})]})]}),l.jsx("button",{onClick:f,className:"w-full py-4 rounded-xl font-black uppercase tracking-widest text-black bg-life-gold shadow-[0_0_30px_rgba(251,191,36,0.6)] hover:scale-105 active:scale-95 transition-all relative z-10",children:"Claim Rewards"})]})})},z1e=()=>{const{state:t,dispatch:e}=Ge(),{taskState:n,taskDispatch:r}=Er(),{habitState:i,habitDispatch:s}=Ar(),{modalData:o}=t.ui,[c,f]=L.useState("");if(!o||!o.itemId)return null;const{itemId:d,type:h}=o;let m="Item";if(h==="task"){const v=n.tasks.find(b=>b.id===d);v&&(m=v.title)}else if(h==="habit"){const v=i.habits.find(b=>b.id===d);v&&(m=v.title)}const g=v=>{if(v.preventDefault(),!c.trim())return;const b={id:`st_quick_${Date.now()}`,title:c.trim(),isCompleted:!1};if(h==="task"){const w=n.tasks.find(S=>S.id===d);w&&r.updateTask(d,{subtasks:[...w.subtasks,b]})}else if(h==="habit"){const w=i.habits.find(S=>S.id===d);w&&s.updateHabit(d,{subtasks:[...w.subtasks,b]})}e.addToast("Side Mission Added","success"),e.setModal("none")};return l.jsx("div",{onClick:()=>e.setModal("none"),className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{onClick:v=>v.stopPropagation(),className:"bg-life-paper border border-life-gold/30 w-full max-w-sm rounded-xl shadow-2xl p-6 relative",children:[l.jsxs("div",{className:"flex justify-between items-start mb-4",children:[l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-black text-life-gold uppercase tracking-widest mb-1",children:"Add Side Mission"}),l.jsx("p",{className:"text-sm font-bold text-white truncate max-w-[200px]",children:m})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:20})})]}),l.jsxs("form",{onSubmit:g,children:[l.jsx("input",{type:"text",value:c,onChange:v=>f(v.target.value),placeholder:"Type additional requirement...",autoFocus:!0,className:"w-full bg-life-black border border-life-muted/30 rounded-lg p-3 text-life-text focus:border-life-gold outline-none mb-4"}),l.jsxs("button",{type:"submit",className:"w-full py-3 bg-life-gold text-life-black font-black uppercase tracking-widest rounded-lg hover:bg-yellow-400 flex items-center justify-center gap-2",children:[l.jsx(Ut,{size:16})," Confirm"]})]})]})})},U1e=()=>{const{state:t,dispatch:e}=Ge(),{modalData:n}=t.ui,r=(n==null?void 0:n.mode)||"export",i=(n==null?void 0:n.title)||(r==="export"?"System Backup":"Neural Injection Protocol"),s=(n==null?void 0:n.data)||"",[o,c]=L.useState(s),[f,d]=L.useState(!1),h=L.useRef(null),m=()=>{e.setModal("none")},g=()=>{h.current&&(h.current.select(),navigator.clipboard.writeText(o),d(!0),He("success",!0),e.addToast("Copied to Clipboard","success"),setTimeout(()=>d(!1),2e3))},v=()=>{const b=new Blob([o],{type:"application/json"}),w=URL.createObjectURL(b),S=document.createElement("a");S.href=w,S.download=`lifeos-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(S),S.click(),document.body.removeChild(S),URL.revokeObjectURL(w),e.addToast("Backup Downloaded","success"),He("success",!0)};return l.jsx("div",{onClick:m,className:"fixed inset-0 z-[200] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:b=>b.stopPropagation(),className:"bg-life-black border border-life-gold/30 w-full max-w-lg rounded-xl shadow-2xl flex flex-col h-[85vh] relative overflow-hidden",children:[l.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-life-muted/20 bg-life-paper/50 shrink-0",children:[l.jsxs("div",{className:"flex items-center gap-2",children:[r==="export"?l.jsx(yl,{size:18,className:"text-life-gold"}):l.jsx(By,{size:18,className:"text-life-easy"}),l.jsx("h3",{className:"text-sm font-black uppercase tracking-widest text-life-text",children:i})]}),l.jsx("button",{onClick:m,className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:20})})]}),l.jsx("div",{className:"flex-1 p-4 relative overflow-hidden flex flex-col",children:r==="import"?l.jsx("div",{className:"h-full overflow-y-auto pr-1",children:l.jsx(UV,{onClose:m})}):l.jsxs(l.Fragment,{children:[l.jsx("textarea",{ref:h,value:o,onChange:b=>c(b.target.value),readOnly:!0,className:"w-full h-full bg-[#050505] rounded-lg border border-life-muted/20 p-4 font-mono text-[10px] leading-relaxed resize-none focus:outline-none text-life-gold focus:border-life-gold/50 cursor-text",spellCheck:!1,onClick:b=>b.target.select()}),l.jsx("div",{className:"absolute bottom-6 right-6 text-[9px] text-life-muted/50 pointer-events-none",children:"SYSTEM DUMP // READ ONLY"})]})}),r==="export"&&l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/50 shrink-0 flex gap-3",children:[l.jsxs("button",{onClick:v,className:"flex-1 py-3 rounded-lg font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all bg-life-gold text-black hover:bg-yellow-400 shadow-[0_0_15px_rgba(251,191,36,0.3)]",children:[l.jsx(yl,{size:16}),"Download JSON"]}),l.jsx("button",{onClick:g,className:`px-6 py-3 rounded-lg font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all border border-life-muted/30 hover:bg-white/5 ${f?"text-life-easy border-life-easy":"text-life-muted"}`,children:f?l.jsx(Ut,{size:16}):l.jsx(yi,{size:16})})]})]})})},V1e=()=>{const{state:t,dispatch:e}=Ge(),{user:n}=t,{taskState:r}=Er(),{habitState:i}=Ar(),{raidState:s}=Qr(),[o,c]=L.useState("today"),{historyData:f,monthAverage:d,monthName:h,year:m,startOffset:g,daysInMonth:v}=L.useMemo(()=>{const k=n.honorDailyLog||{},D=t.ui.debugDate?new Date(t.ui.debugDate):new Date,M=D.getFullYear(),j=D.getMonth(),I=[],U=new Date(M,j+1,0).getDate();for(let F=1;F<=U;F++){const z=`${M}-${String(j+1).padStart(2,"0")}-${String(F).padStart(2,"0")}`,Q=k[z];I.push({date:F,score:Q,fullDate:z})}const B=I.filter(F=>F.score!==void 0).map(F=>F.score),P=B.length>0?Math.round(B.reduce((F,z)=>F+z,0)/B.length):0;return{historyData:I,monthAverage:P,monthName:D.toLocaleString("default",{month:"long"}),year:M,startOffset:new Date(M,j,1).getDay(),daysInMonth:U}},[n.honorDailyLog,t.ui.debugDate]),{items:b,totalWeight:w}=L.useMemo(()=>q4(r.tasks,i.habits,s.raids,t.ui.debugDate),[r.tasks,i.habits,s.raids,t.ui.debugDate]),S=()=>{e.setModal("none")},C=k=>k==="task"?l.jsx(Gi,{size:12}):k==="habit"?l.jsx(Jr,{size:12}):l.jsx(Oc,{size:12}),R=b.filter(k=>k.isCompleted).reduce((k,D)=>k+D.weight,0),N=w>0?Math.round(R/w*100):100,O=k=>k===void 0?"bg-life-muted/5 border-life-muted/10 text-life-muted/30":k>=100?"bg-life-crimson/20 border-life-crimson text-life-crimson shadow-[0_0_10px_rgba(220,38,38,0.2)]":k>=90?"bg-cyan-500/20 border-cyan-500 text-cyan-400 shadow-[0_0_8px_rgba(34,211,238,0.2)]":k>=80?"bg-life-gold/20 border-life-gold text-life-gold":k>=60?"bg-indigo-500/20 border-indigo-500 text-indigo-400":"bg-red-500/20 border-red-500 text-red-500";return l.jsx("div",{onClick:S,className:"fixed inset-0 z-[150] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:k=>k.stopPropagation(),className:"bg-life-black border border-indigo-500/30 w-full max-w-md rounded-2xl overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-8 duration-500 flex flex-col max-h-[85vh]",children:[l.jsxs("div",{className:"p-5 border-b border-indigo-500/10 bg-indigo-950/20 flex justify-between items-start",children:[l.jsxs("div",{children:[l.jsxs("h2",{className:"text-lg font-black text-indigo-400 uppercase tracking-widest flex items-center gap-2",children:[l.jsx(gl,{size:20})," Honor Protocol"]}),l.jsx("p",{className:"text-[10px] text-indigo-300/60 mt-1 uppercase tracking-wider",children:o==="today"?"Daily Integrity Breakdown":"Monthly Integrity Log"})]}),l.jsx("button",{onClick:S,className:"text-life-muted hover:text-white",children:l.jsx(wt,{size:20})})]}),o==="today"?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"p-6 flex flex-col items-center border-b border-life-muted/10 bg-life-black/50 animate-in slide-in-from-left-4 duration-300",children:[l.jsxs("div",{className:"text-4xl font-black text-white font-mono mb-2",children:[N,"%"]}),l.jsx("div",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest mb-4",children:"Projected Daily Score"}),l.jsx("div",{className:"w-full max-w-[200px] h-1.5 bg-life-muted/20 rounded-full overflow-hidden",children:l.jsx("div",{className:"h-full bg-indigo-500 transition-all duration-700",style:{width:`${N}%`}})}),l.jsxs("button",{onClick:()=>c("history"),className:"mt-6 flex items-center gap-2 px-4 py-2 rounded-lg bg-life-paper border border-life-muted/20 hover:border-indigo-500/50 hover:text-indigo-400 transition-all text-[10px] font-bold uppercase tracking-wider",children:[l.jsx(mi,{size:14}),"View Monthly History"]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 animate-in slide-in-from-bottom-4 duration-300",children:[l.jsx("div",{className:"flex items-center justify-between mb-2",children:l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-life-muted",children:"Today's Obligations"})}),b.length===0?l.jsx("div",{className:"text-center py-8 text-life-muted/50 italic text-xs",children:"No obligations scheduled for today."}):b.map(k=>l.jsxs("div",{className:`flex items-center gap-3 p-3 rounded-lg border transition-all ${k.isCompleted?"bg-life-black border-life-muted/10 opacity-50":"bg-life-paper border-life-muted/20"}`,children:[l.jsx("div",{className:"flex flex-col items-center justify-center w-10 h-10 rounded bg-indigo-500/10 border border-indigo-500/20 text-indigo-400 font-bold font-mono",children:l.jsxs("span",{className:"text-xs",children:[k.percentage,"%"]})}),l.jsxs("div",{className:"flex-1 min-w-0",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[l.jsx("div",{className:`text-[9px] uppercase font-black px-1.5 py-px rounded border ${bs[k.difficulty]}`,children:k.difficulty}),l.jsxs("div",{className:"text-life-muted/50 flex items-center gap-1 text-[9px] uppercase font-bold",children:[C(k.type)," ",k.type]})]}),l.jsx("div",{className:`text-xs font-bold truncate ${k.isCompleted?"line-through text-life-muted":"text-life-text"}`,children:k.title})]}),l.jsx("div",{children:k.isCompleted?l.jsx(xs,{size:16,className:"text-life-easy"}):l.jsx(RW,{size:16,className:"text-life-hard animate-pulse"})})]},`${k.type}-${k.id}`))]})]}):l.jsx(l.Fragment,{children:l.jsxs("div",{className:"flex-1 flex flex-col p-4 animate-in slide-in-from-right-4 duration-300",children:[l.jsxs("div",{className:"flex items-center justify-between mb-6",children:[l.jsxs("button",{onClick:()=>c("today"),className:"flex items-center gap-2 text-[10px] font-bold uppercase tracking-wider text-life-muted hover:text-white transition-colors",children:[l.jsx(N4,{size:14})," Back"]}),l.jsxs("div",{className:"flex flex-col items-end",children:[l.jsx("span",{className:"text-[8px] font-bold uppercase tracking-widest text-life-muted",children:"Month Average"}),l.jsxs("span",{className:`text-lg font-black font-mono ${d>=90?"text-life-gold":"text-indigo-400"}`,children:[d,"%"]})]})]}),l.jsx("div",{className:"mb-4 text-center",children:l.jsxs("h3",{className:"text-sm font-black uppercase tracking-widest text-white",children:[h," ",m]})}),l.jsxs("div",{className:"grid grid-cols-7 gap-2 mb-4",children:[["S","M","T","W","T","F","S"].map((k,D)=>l.jsx("div",{className:"text-center text-[8px] font-bold text-life-muted/30",children:k},D)),Array.from({length:g}).map((k,D)=>l.jsx("div",{className:"aspect-square"},`empty-${D}`)),f.map(k=>l.jsxs("div",{className:`
                                            aspect-square rounded-lg border flex flex-col items-center justify-center relative group cursor-default
                                            ${O(k.score)}
                                        `,children:[l.jsx("span",{className:"text-[10px] font-bold",children:k.date}),k.score!==void 0&&l.jsxs("span",{className:"text-[8px] font-mono opacity-80",children:[k.score,"%"]}),k.score!==void 0&&l.jsxs("div",{className:"absolute bottom-full mb-2 hidden group-hover:flex flex-col items-center bg-life-black border border-life-muted/20 p-2 rounded-lg z-10 shadow-xl whitespace-nowrap pointer-events-none",children:[l.jsx("span",{className:"text-[10px] font-bold text-white",children:k.fullDate}),l.jsxs("span",{className:`text-xs font-black ${k.score>=100?"text-life-gold":"text-life-muted"}`,children:[k.score,"%"]})]})]},k.date))]}),l.jsx("div",{className:"mt-auto p-3 bg-indigo-950/20 border border-indigo-500/10 rounded-lg text-[10px] text-indigo-300/60 text-center",children:"Calendar reflects recorded daily integrity scores."})]})}),l.jsx("div",{className:"p-3 bg-indigo-950/20 border-t border-indigo-500/10 text-[9px] text-indigo-300/60 text-center",children:o==="today"?"Harder tasks carry more weight. Failure hurts more.":"Consistency builds the strongest alloy."})]})})},F1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(!1),r=`ROLE: You are "The Quest Forge" ( ).
GOAL: Generate RPG-style quests (Tasks) for a high-performance individual.

WHEN I ASK FOR A MISSION, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a goal, or provide an existing Task JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "t_123..."), YOU MUST include it in the output to UPDATE that task instead of creating a new one.
2. **Title:** Action-oriented (e.g., "Operation: Deep Dive").
3. **Difficulty:** "easy" (Scout), "normal" (Infantry), "hard" (SpecOps).
4. **Stats:** Array of attributes (e.g., ["STR", "INT"]).
5. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
6. **Reminders:** Array of minutes before due (e.g., [15, 60] = 15 mins & 1 hour before).
7. **Campaign:** Set "isCampaign": true if this is a strategic quarterly goal (G12).
8. **Time:**
   - "scheduledTime": ISO String (YYYY-MM-DDTHH:mm) for specific execution time.
   - "deadline": YYYY-MM-DD for due date.
   - "durationMinutes": Number (if timed session).

--- JSON TEMPLATE ---

\`\`\`json
{
  "tasks": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "QUEST_TITLE",
      "difficulty": "hard",
      "stats": ["INT"],
      "skillId": "OPTIONAL_SKILL_ID",
      "description": " Objective: ... \\n Skill: ...",
      "subtasks": [
        "Step 1 (5m)",
        "Step 2 (10m)"
      ],
      "reminders": [15, 30],
      "isTimed": true,
      "durationMinutes": 45,
      "scheduledTime": "2024-10-25T09:00:00",
      "deadline": "2024-10-25",
      "isCampaign": false
    }
  ],
  "habits": [
    {
      "title": "HABIT_TITLE",
      "difficulty": "normal",
      "stats": ["DIS"],
      "skillId": "OPTIONAL_SKILL_ID",
      "type": "daily",
      "dailyTarget": 5,
      "description": "e.g. Drink 5 glasses of water"
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Study Physics tomorrow at 10 AM, remind me 30 mins before."
**Output:**
\`\`\`json
{
  "tasks": [
    {
      "title": "Operation: Quantum Mechanics",
      "difficulty": "hard",
      "stats": ["INT"],
      "description": " Focus: Thermodynamics Chapter 4.",
      "subtasks": ["Review Notes", "Solve 3 Problems"],
      "scheduledTime": "2024-10-26T10:00:00",
      "reminders": [30],
      "isTimed": true,
      "durationMinutes": 60
    }
  ]
}
\`\`\`

**Input:** "Update task 't_999' to be harder and add a subtask."
**Output:**
\`\`\`json
{
  "tasks": [
    {
      "id": "t_999",
      "difficulty": "hard",
      "subtasks": ["Original Step 1", "New Step 2"]
    }
  ]
}
\`\`\``,i=()=>{navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:l.jsx(xn,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["The Quest Forge ",l.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V5"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Protocol Configuration"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-blue-400 mt-1",children:l.jsx(Lc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-blue-300 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-blue-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),l.jsx("li",{children:'Command the AI to generate tasks (e.g., "Study for exam").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:r})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},B1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(!1),r=`ROLE: You are "The Protocol Foundry" ( ).
GOAL: Design sustainable Habits (Protocols).

WHEN I ASK FOR A HABIT, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a routine, or provide an existing Habit JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "h_123..."), YOU MUST include it to UPDATE the habit.
2. **Algorithm (Type):** "daily", "specific_days" (requires "specificDays": [0-6]), "interval" (requires "intervalValue": number).
3. **Repetitions:** Use "dailyTarget" (number) for habits that repeat within a day (e.g., "Drink Water" with dailyTarget: 8).
4. **Subtasks:** Habits can have steps! (e.g., Routine -> [Drink Water, Stretch]).
5. **Difficulty:** "easy", "normal", "hard".
6. **Stats:** Array of attributes (e.g., ["STR", "INT"]).
7. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
8. **Reminders:** Array of minutes before (e.g., [0, 10]).
9. **Time:** "scheduledTime" (24h format "HH:mm").

--- JSON TEMPLATE ---

\`\`\`json
{
  "habits": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "HABIT_TITLE",
      "stats": ["DIS"],
      "skillId": "OPTIONAL_SKILL_ID",
      "difficulty": "normal",
      "type": "daily", 
      "dailyTarget": 1,
      "scheduledTime": "07:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Step 1" },
        { "title": "Step 2" }
      ],
      "description": " Cue: ..."
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a Morning Routine (Water, Meditate, Plan) at 6 AM."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "title": "Protocol: Morning Prime",
      "stats": ["SPR"],
      "difficulty": "hard",
      "type": "daily",
      "dailyTarget": 1,
      "scheduledTime": "06:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Hydrate (500ml)" },
        { "title": "Meditate (10m)" },
        { "title": "Tactical Planning" }
      ]
    }
  ]
}
\`\`\`

**Input:** "Drink 8 glasses of water daily."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "title": "Protocol: Hydration",
      "stats": ["HEA"],
      "difficulty": "easy",
      "type": "daily",
      "dailyTarget": 8,
      "description": " Goal: 8 glasses (250ml each)."
    }
  ]
}
\`\`\`

**Input:** "Update habit 'h_555' to be every 2 days."
**Output:**
\`\`\`json
{
  "habits": [
    {
      "id": "h_555",
      "type": "interval",
      "intervalValue": 2
    }
  ]
}
\`\`\``,i=()=>{navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-easy/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-easy/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-easy/10 rounded-lg text-life-easy border border-life-easy/20",children:l.jsx(hn,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-easy flex items-center gap-2",children:["The Protocol Foundry ",l.jsx("span",{className:"text-[9px] bg-life-easy text-black px-1.5 rounded font-mono",children:"V2"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Habit Engineering Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-life-easy/10 border border-life-easy/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-life-easy mt-1",children:l.jsx(Lc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-life-easy uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-life-easy",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:'Command the AI to design habits (e.g., "Build a morning routine").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-easy text-black hover:bg-emerald-400"}`,children:[e?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-easy/30 selection:text-white",children:r})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},H1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(!1),r=`ROLE: You are "The Treasury Archive" ( ).
GOAL: Understand the LifeOS Economy (XP, Gold, & Stats) to advise on growth strategies.

--- 1. CURRENCY & GROWTH ---
- **XP (Experience):** Levels up the User and Skills.
- **Gold (G):** Currency to buy Items, Themes, and Potions.
- **Stats (Attributes):** Core attributes (STR, INT, DIS, etc.) that level up based on actions.

--- 2. INCOME SOURCES (REVENUE STREAMS) ---

A. ACTIVE DUTY (Tasks & Habits)
   - **Easy:** 
     - XP: 20 | Gold: 10
     - Stat Points: +0.5 (to the linked Stat)
   - **Normal:** 
     - XP: 50 | Gold: 30
     - Stat Points: +1 (to the linked Stat)
   - **Hard:** 
     - XP: 100 | Gold: 100
     - Stat Points: +2 (to the linked Stat)
   
   * Note: Habits build "Streaks". High streaks increase "Daily Salary".
   * **Repetitions (Reps):** Habits can have a "Daily Target" (e.g., Drink Water 8x). 
     - Rewards and Streaks are ONLY awarded after ALL reps are completed.
     - Partial reps do not grant XP/Gold but prevent "Failure" penalties if at least 1 rep is done.

B. OPERATIONS (Raids)
   - **Raid Step (Sub-objective):** 
     - Treated as a Task based on difficulty (Easy/Normal/Hard).
     - Grants XP, Gold, and Stat Points immediately upon completion.
   - **Raid Completion (Victory):** 
     - **Bonus:** 5x the rewards of the final step.
     - **Loot:** Chance for rare items or badges.

C. DAILY SALARY (The Streak)
   - **Easy Mode:** Requires 300 XP.
   - **Normal Mode:** Requires 400 XP.
   - **Hard Mode:** Requires 500 XP.
   - Reward: 50-200 Gold (Scales with Streak length).

D. ACHIEVEMENTS (Badges)
   - **Bronze:** 500 XP | 100 G
   - **Silver:** 1000 XP | 250 G
   - **Gold:** 2000 XP | 500 G
   - **Diamond:** 5000 XP | 1000 G

--- 3. EXPENDITURES (GOLD USAGE) ---
- **Potions:** Restore Energy or Health (Cost: 50-150 G).
- **Artifacts:** Permanent buffs to XP/Gold gain (Cost: 500-5000 G).
- **Themes:** Visual skins for the OS (Cost: 1000+ G).
- **Penalties:** Failing tasks/habits deducts Gold.

--- 4. SKILL MASTERY ---
- Every Task/Habit linked to a Skill (e.g., "Coding") feeds 50% of its XP to that Skill.
- Leveling Skills unlocks specialized Badges.

--- HOW TO USE THIS DATA ---
When I ask "How do I get rich?" or "Plan my leveling", use these values to calculate the optimal path.`,i=()=>{navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:l.jsx(Kn,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["The Treasury Archive ",l.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Economy Logic Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-life-gold/10 border border-life-gold/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-life-gold mt-1",children:l.jsx(Lc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-life-gold uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-life-gold",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Paste it into your AI's ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:"Now the AI understands how to reward you and plan your economy."})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:r})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},q1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(!1),[r,i]=L.useState("basics"),s=`ROLE: You are "The War Room" ( ) - Part 1: Basics.
GOAL: Plan complex Operations (Raids) for a high-performance individual.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INTRODUCTION ---
A Raid is a large project or campaign consisting of multiple "Steps" (Missions).
This guide covers the basic structure and metadata of a Raid.

--- OUTPUT RULES ---
1. **Title:** Military/Tactical naming (e.g., "Operation: Apollo").
2. **Difficulty:** "easy", "normal", "hard".
3. **Stats:** Array of primary attributes (e.g., ["STR", "INT"]).
4. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
5. **Deadline:** Optional deadline in "YYYY-MM-DD" format.
6. **Steps (The Missions):** Array of step objects. Each step must have a "title".

--- JSON TEMPLATE (BASICS) ---
\`\`\`json
{
  "raids": [
    {
      "title": "Operation: PROJECT_NAME",
      "description": "Brief tactical overview.",
      "difficulty": "hard",
      "stats": ["INT"],
      "skillId": "OPTIONAL_SKILL_ID",
      "deadline": "YYYY-MM-DD",
      "steps": [
        { "title": "Phase 1: Recon" },
        { "title": "Phase 2: Execution" }
      ]
    }
  ]
}
\`\`\`
`,o=`ROLE: You are "The War Room" ( ) - Part 2: Advanced Steps.
GOAL: Plan complex Operations (Raids) with advanced step configurations.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- ADVANCED STEP RULES ---
1. **Inheritance:** Steps inherit Difficulty/Stat from the Raid unless specified.
2. **Overrides:** You CAN override a step's difficulty/stat (e.g., a "Hard" step in a "Normal" raid).
3. **Skill Lock:** Steps ALWAYS inherit the Raid's Skill. You cannot change this per step.
4. **Subtasks:** A step can have an array of subtasks (strings or objects).
5. **Timers:** Use "durationMinutes" to make a step timed.
6. **Reminders:** Array of times (e.g., ["09:00", "15:30"]) to trigger alerts.

--- JSON TEMPLATE (ADVANCED STEPS) ---
\`\`\`json
{
  "raids": [
    {
      "title": "Operation: Deep Work",
      "difficulty": "normal",
      "stats": ["INT"],
      "steps": [
        {
          "title": "Phase 1: Research",
          "difficulty": "easy", 
          "stat": "INT",
          "subtasks": ["Find sources", "Take notes"]
        },
        {
          "title": "Phase 2: Writing",
          "difficulty": "hard",
          "stat": "DIS", 
          "durationMinutes": 120,
          "reminders": ["10:00", "14:00"]
        }
      ]
    }
  ]
}
\`\`\`
`,c=`ROLE: You are "The War Room" ( ) - Part 3: Smart Append.
GOAL: Learn how to inject large Raids in multiple parts using Smart Append.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- SMART APPEND RULES ---
If a Raid is too large to generate in one response, you can inject it in multiple parts!

1. **Matching by ID:** To add steps to an existing Raid, you MUST use the EXACT SAME "id" (e.g., "rd_123...") in your new JSON injection.
2. **Appending Steps:** The system will automatically find the active Raid with that ID and APPEND the new steps to the end of it.
3. **Updating Metadata:** If you include description, difficulty, stats, or deadline in the new injection, it will UPDATE the existing Raid's metadata.
4. **Locking:** Newly appended steps are automatically locked if there are previous steps, preserving the sequential progression.

--- JSON TEMPLATE (MULTI-INJECTION) ---

**Injection 1 (The Beginning):**
\`\`\`json
{
  "raids": [
    {
      "id": "rd_operation_masterpiece",
      "title": "Operation: Masterpiece",
      "difficulty": "hard",
      "steps": [
        { "title": "Step 1: Concept" },
        { "title": "Step 2: Outline" }
      ]
    }
  ]
}
\`\`\`

**Injection 2 (Adding More Steps Later):**
\`\`\`json
{
  "raids": [
    {
      "id": "rd_operation_masterpiece",
      "title": "Operation: Masterpiece",
      "steps": [
        { "title": "Step 3: First Draft" },
        { "title": "Step 4: Revisions" }
      ]
    }
  ]
}
\`\`\`
*Result: "Operation: Masterpiece" now has 4 steps!*
`,f=()=>r==="basics"?s:r==="advanced"?o:c,d=()=>{navigator.clipboard.writeText(f()),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-red-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-red-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-red-500/10 rounded-lg text-red-500 border border-red-500/20",children:l.jsx(ms,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-red-500 flex items-center gap-2",children:["The War Room ",l.jsx("span",{className:"text-[9px] bg-red-500 text-black px-1.5 rounded font-mono",children:"V2"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Raid Operations Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex border-b border-life-muted/20 bg-life-paper/30",children:[l.jsxs("button",{onClick:()=>i("basics"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-colors ${r==="basics"?"text-red-500 border-b-2 border-red-500 bg-red-500/5":"text-life-muted hover:text-white"}`,children:[l.jsx(bY,{size:14})," Basics"]}),l.jsxs("button",{onClick:()=>i("advanced"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-colors ${r==="advanced"?"text-red-500 border-b-2 border-red-500 bg-red-500/5":"text-life-muted hover:text-white"}`,children:[l.jsx(St,{size:14})," Advanced"]}),l.jsxs("button",{onClick:()=>i("append"),className:`flex-1 py-3 text-xs font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-colors ${r==="append"?"text-red-500 border-b-2 border-red-500 bg-red-500/5":"text-life-muted hover:text-white"}`,children:[l.jsx(_X,{size:14})," Smart Append"]})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-red-500/10 border border-red-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-red-500 mt-1",children:l.jsx(Lc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-red-500 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-red-500",children:[l.jsx("li",{children:"Select the part you want to use (Basics, Advanced, or Smart Append)."}),l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Paste it into your AI's ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:"Command the AI to plan complex projects."}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:d,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-red-500 text-black hover:bg-red-400"}`,children:[e?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-red-500/30 selection:text-white",children:f()})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},$1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(!1),r=`ROLE: You are the Skill Tree Architect.
GOAL: Define and track long-term proficiencies.

1. **Structure:** Skills are the "containers" for XP earned from Tasks/Habits.
2. **Linking:** Every Task/Habit/Raid SHOULD be linked to a \`skillId\` if possible.
   - When a task is completed, 50% of its XP goes to the linked Skill.
3. **Leveling:**
   - Skills level up independently from the User Level.
   - **Formula:** Next Level XP = 100 * (Level ^ 1.5).
   - **Ranks:**
     - Level 1-9: Novice
     - Level 10-24: Adept
     - Level 25-49: Expert
     - Level 50-99: Master
     - Level 100+: Grandmaster
4. **Rust:** Skills decay if not practiced for 30 days (Rust State).
   - To cure rust: Complete a task linked to that skill.

--- JSON TEMPLATE (SKILLS) ---

\`\`\`json
{
  "skills": [
    {
      "title": "Python Programming",
      "relatedStats": ["INT", "CRT"],
      "description": "Backend development and data science."
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "I want to learn Guitar."
**Output:**
\`\`\`json
{
  "skills": [
    {
      "title": "Guitar Mastery",
      "relatedStats": ["CRT", "DIS"],
      "description": "Acoustic and Electric guitar techniques."
    }
  ]
}
\`\`\`

**Input:** "Add a skill for Cooking."
**Output:**
\`\`\`json
{
  "skills": [
    {
      "title": "Culinary Arts",
      "relatedStats": ["CRT", "HEA"],
      "description": "Mastering flavors and techniques."
    }
  ]
}
\`\`\``,i=()=>{navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-blue-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-blue-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg text-blue-500 border border-blue-500/20",children:l.jsx(xn,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-blue-500 flex items-center gap-2",children:["Skill Tree Architect ",l.jsx("span",{className:"text-[9px] bg-blue-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Mastery Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-blue-500 mt-1",children:l.jsx(Lc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-blue-500 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-blue-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Paste it into your AI's ",l.jsx("strong",{children:'"System Instructions"'}),"."]}),l.jsx("li",{children:'Command the AI to define new skills (e.g., "Add a skill for Guitar").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-blue-500 text-black hover:bg-blue-400"}`,children:[e?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-blue-500/30 selection:text-white",children:r})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},G1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(!1),r=`ROLE: You are "The Bazaar Architect" ( ).
GOAL: Generate RPG-style Shop Items for a gamified productivity app.

WHEN I ASK FOR ITEMS, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a theme (e.g., "Cyberpunk Gear", "Magic Potions") or specific items.

--- OUTPUT RULES ---
1. **IDs:** Must be unique strings (e.g., "item_cyber_deck").
2. **Type:** 
   - "custom": Consumables (e.g., "Skip Gym", "Cheat Meal").
   - "artifact": Permanent passive bonuses (e.g., +10% INT XP).
   - "redemption": Real-world rewards (e.g., "1 Hour Gaming").
3. **Cost:** Balanced (100-500 for consumables, 1000+ for artifacts).
4. **Icons:** Use Lucide React icon names (e.g., "Zap", "Shield", "Coffee").
5. **Effects:** Only for "artifact" type.
   - "xp_boost": Multiplier for XP (0.1 = +10%).
   - "gold_boost": Multiplier for Gold.
   - "stat": Optional. If set (STR, INT, etc.), applies only to that stat.

--- JSON TEMPLATE ---

\`\`\`json
{
  "storeItems": [
    {
      "id": "item_unique_id",
      "title": "ITEM_NAME",
      "description": "Flavor text description.",
      "cost": 500,
      "icon": "Zap",
      "type": "artifact",
      "isInfinite": false,
      "effect": {
        "type": "xp_boost",
        "value": 0.1,
        "stat": "INT"
      }
    },
    {
      "id": "item_potion_01",
      "title": "Health Potion",
      "description": "Restores energy instantly.",
      "cost": 50,
      "icon": "Heart",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a set of productivity potions."
**Output:**
\`\`\`json
{
  "storeItems": [
    {
      "id": "pot_focus",
      "title": "Elixir of Focus",
      "description": "Grants deep work capability for 2 hours.",
      "cost": 150,
      "icon": "FlaskConical",
      "type": "custom",
      "isInfinite": true
    },
    {
      "id": "pot_rest",
      "title": "Draught of Sleep",
      "description": "Ensures a perfect night's rest.",
      "cost": 100,
      "icon": "Moon",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\`\`\`
`,i=()=>{navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-pink-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-pink-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-pink-500/10 rounded-lg text-pink-500 border border-pink-500/20",children:l.jsx(z4,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-pink-500 flex items-center gap-2",children:["Shop Archives ",l.jsx("span",{className:"text-[9px] bg-pink-500 text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Economy Protocol"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-pink-500/10 border border-pink-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-pink-400 mt-1",children:l.jsx(Lc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-pink-300 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-pink-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),l.jsx("li",{children:'Command the AI to generate items (e.g., "Create legendary coding artifacts").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-pink-500 text-black hover:bg-pink-400"}`,children:[e?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-pink-500/30 selection:text-white",children:r})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},K1e=()=>{const{state:t,dispatch:e}=Ge(),{taskState:n}=Er(),{habitState:r}=Ar(),{raidState:i}=Qr(),{shopState:s}=mp(),[o,c]=L.useState(!1),f={user:{level:t.user.level,title:t.user.title,stats:t.user.stats,gold:t.user.gold,xp:t.user.currentXP},activeTasks:n.tasks.filter(m=>!m.isCompleted).map(m=>({title:m.title,difficulty:m.difficulty,stats:m.stats})),habits:r.habits.map(m=>({title:m.title,type:m.type})),activeRaids:i.raids.filter(m=>m.status==="active").map(m=>({title:m.title,difficulty:m.difficulty,progress:m.progress})),shopItems:s.storeItems.map(m=>({title:m.title,cost:m.cost,type:m.type}))},d=`
ROLE: You are the Codex Arbiter (AI_CODEX_GEN).
GOAL: Analyze the user's LifeOS data and generate a strict "Codex of Laws" (Consequences) to enforce discipline.

USER DATA SNAPSHOT:
${JSON.stringify(f,null,2)}

INSTRUCTIONS:
1. Analyze their Tasks, Habits, and Raids to identify potential areas of failure or laziness.
2. Create 5-10 "Laws" (Consequences) that punish them for specific failures.
   - Example: "If I miss [Habit Name], I lose 50 Gold."
   - Example: "If I abandon a Raid Step, I lose 100 XP."
   - Example: "If I buy a useless item, I lose 5 Honor."
3. Use the existing Shop Items to suggest "Fines" (e.g., must buy a "Penalty Token").

PENALTY GUIDELINES (DO NOT EXAGGERATE PUNISHMENT):
- **Stat Points:** -1 to -5 (Use sparingly for severe neglect).
- **Gold:** 50 to 1000 G (Scale with severity).
- **XP:** 100 to 1000 XP (Scale with severity).
- **Honor:** 5% to 25% (Reserved for breaking core habits or oaths).

4. RETURN ONLY VALID JSON in the following format (compatible with the injection engine):

{
  "laws": [
    {
      "title": "Law Name (e.g. Neglect of [Habit])",
      "penaltyType": "gold" | "xp" | "stat" | "honor",
      "penaltyValue": 50,
      "statTarget": "DIS" (only if penaltyType is 'stat')
    }
  ]
}

CRITICAL: Return ONLY the JSON. No markdown.
`,h=()=>{navigator.clipboard.writeText(d),c(!0),setTimeout(()=>c(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-indigo-500/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-indigo-500/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-indigo-500/10 rounded-lg text-indigo-400 border border-indigo-500/20",children:l.jsx(qy,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-indigo-400 flex items-center gap-2",children:["Codex Arbiter ",l.jsx("span",{className:"text-[9px] bg-indigo-500 text-white px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"Law Generation Protocol"})]})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-indigo-400 mt-1",children:l.jsx(j4,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-indigo-400 uppercase mb-1",children:"How to Legislate"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-indigo-400",children:[l.jsx("li",{children:"Copy the System Prompt below (it includes your data)."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsx("li",{children:"Paste the text. The AI will analyze your habits/tasks."}),l.jsx("li",{children:'It will generate a list of "Laws" (Consequences).'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:h,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${o?"bg-green-500 text-black":"bg-indigo-500 text-white hover:bg-indigo-400"}`,children:[o?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),o?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-indigo-500/30 selection:text-white",children:d})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>e.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},W1e=()=>{const{dispatch:t}=Ge(),[e,n]=L.useState(!1),r=`ROLE: You are "The Badge Architect" ( ).
GOAL: Generate achievement badges for a gamified life operating system.

WHEN I ASK FOR BADGES, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a category (e.g., "Fitness", "Coding") or a specific achievement.

--- OUTPUT RULES ---
1. **ID:** Unique identifier (snake_case), e.g., "early_riser".
2. **Name:** Creative title (e.g., "Dawn Breaker").
3. **Description:** Clear criteria for unlocking.
4. **Icon:** A valid Lucide React icon name (e.g., "Sun", "Dumbbell", "Code").
5. **Category:** One of: "progression", "combat", "warfare", "consistency", "resilience", "economy", "mastery", "skill", "special".
6. **Trigger Type:** One of: "stat", "metric", "manual", "skill", "habit", "raid".
7. **Metric Key:** The specific metric to track (e.g., "totalTasksCompleted", "stats.STR", or the exact Habit Title).
8. **Levels:** Array of 4 tiers ("silver", "gold", "diamond", "crimson"). Each level needs a "target" (number), "quote" (string), and "rewards" (xp and gold).

--- JSON TEMPLATE ---

\`\`\`json
{
  "badges": [
    {
      "id": "badge_unique_id",
      "name": "Badge Name",
      "description": "Unlock criteria description.",
      "icon": "Award",
      "category": "combat",
      "triggerType": "metric",
      "metricKey": "totalTasksCompleted",
      "levels": [
        {
          "tier": "silver",
          "target": 10,
          "quote": "A good start.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 50,
          "quote": "You are getting stronger.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 100,
          "quote": "Unstoppable force.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 500,
          "quote": "A legend is born.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\`\`\`

--- EXAMPLES ---

**Input:** "Create a badge for reading books."
**Output:**
\`\`\`json
{
  "badges": [
    {
      "id": "badge_bookworm",
      "name": "Keeper of Knowledge",
      "description": "Awarded for consistent reading habits.",
      "icon": "BookOpen",
      "category": "special",
      "triggerType": "habit",
      "metricKey": "Read a Book",
      "levels": [
        {
          "tier": "silver",
          "target": 5,
          "quote": "The mind is a muscle.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 20,
          "quote": "Knowledge is power.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 50,
          "quote": "A library in your head.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 100,
          "quote": "Omniscience achieved.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\`\`\`

**Input:** "Create a system badge for daily streaks."
**Output:**
\`\`\`json
{
  "badges": [
    {
      "id": "badge_streak_master",
      "name": "Time Walker",
      "description": "Awarded for maintaining a daily streak.",
      "icon": "Flame",
      "category": "consistency",
      "triggerType": "metric",
      "metricKey": "currentStreak",
      "levels": [
        {
          "tier": "silver",
          "target": 7,
          "quote": "A week of focus.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 30,
          "quote": "A month of discipline.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 100,
          "quote": "A hundred days of power.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 365,
          "quote": "A year of mastery.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\`\`\`
`,i=()=>{navigator.clipboard.writeText(r),n(!0),setTimeout(()=>n(!1),2e3)};return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-2xl max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:l.jsx(gl,{size:20})}),l.jsxs("div",{children:[l.jsxs("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:["Badge Architect ",l.jsx("span",{className:"text-[9px] bg-life-gold text-black px-1.5 rounded font-mono",children:"V1"})]}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Protocol Configuration"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 custom-scrollbar",children:[l.jsxs("div",{className:"bg-purple-500/10 border border-purple-500/20 rounded-xl p-4 flex gap-3",children:[l.jsx("div",{className:"text-purple-400 mt-1",children:l.jsx(Lc,{size:18})}),l.jsxs("div",{children:[l.jsx("h3",{className:"text-xs font-bold text-purple-300 uppercase mb-1",children:"How to Initialize"}),l.jsxs("ol",{className:"text-[10px] text-life-muted space-y-1 list-decimal list-inside marker:text-purple-500",children:[l.jsx("li",{children:"Copy the System Prompt below."}),l.jsxs("li",{children:["Open ",l.jsx("strong",{children:"Google Gemini"})," (or any AI Chat)."]}),l.jsxs("li",{children:["Paste the text into the ",l.jsx("strong",{children:'"System Instructions"'})," or start a new chat with it."]}),l.jsx("li",{children:'Command the AI to generate badges (e.g., "Create badges for fitness").'}),l.jsxs("li",{children:["Copy the JSON output and paste it into ",l.jsx("strong",{children:"Data Injection"}),"."]})]})]})]}),l.jsxs("div",{className:"relative group",children:[l.jsx("div",{className:"absolute top-2 right-2 z-10",children:l.jsxs("button",{onClick:i,className:`flex items-center gap-2 px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider transition-all shadow-lg ${e?"bg-green-500 text-black":"bg-life-gold text-black hover:bg-yellow-400"}`,children:[e?l.jsx(Ut,{size:12}):l.jsx(yi,{size:12}),e?"Copied!":"Copy Protocol"]})}),l.jsx("div",{className:"bg-black border border-life-muted/20 rounded-xl p-4 font-mono text-[10px] text-life-muted/80 whitespace-pre-wrap leading-relaxed overflow-x-auto h-96 custom-scrollbar selection:bg-life-gold/30 selection:text-white",children:r})]})]}),l.jsxs("div",{className:"p-4 border-t border-life-muted/20 bg-life-paper/30 rounded-b-2xl flex justify-between items-center",children:[l.jsxs("div",{className:"flex items-center gap-2 text-[9px] text-life-muted opacity-50",children:[l.jsx(Or,{size:12}),l.jsx("span",{children:"Compatible with Gemini 1.5+, GPT-4, Claude 3"})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"px-4 py-2 rounded-lg bg-life-muted/10 hover:bg-life-muted/20 text-xs font-bold text-life-muted transition-colors",children:"Close"})]})]})})},Y1e={BadgeProtocol:`ROLE: You are "The Badge Architect" ( ).
GOAL: Generate achievement badges for a gamified life operating system.

WHEN I ASK FOR BADGES, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a category (e.g., "Fitness", "Coding") or a specific achievement.

--- OUTPUT RULES ---
1. **ID:** Unique identifier (snake_case), e.g., "early_riser".
2. **Name:** Creative title (e.g., "Dawn Breaker").
3. **Description:** Clear criteria for unlocking.
4. **Icon:** A valid Lucide React icon name (e.g., "Sun", "Dumbbell", "Code").
5. **Category:** One of: "progression", "combat", "warfare", "consistency", "resilience", "economy", "mastery", "skill", "special".
6. **Trigger Type:** One of: "stat", "metric", "manual", "skill", "habit", "raid".
7. **Metric Key:** The specific metric to track (e.g., "totalTasksCompleted", "stats.STR", or the exact Habit Title).
8. **Levels:** Array of 4 tiers ("silver", "gold", "diamond", "crimson"). Each level needs a "target" (number), "quote" (string), and "rewards" (xp and gold).

--- JSON TEMPLATE ---

\\\`\\\`\\\`json
{
  "badges": [
    {
      "id": "badge_unique_id",
      "name": "Badge Name",
      "description": "Unlock criteria description.",
      "icon": "Award",
      "category": "combat",
      "triggerType": "metric",
      "metricKey": "totalTasksCompleted",
      "levels": [
        {
          "tier": "silver",
          "target": 10,
          "quote": "A good start.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 50,
          "quote": "You are getting stronger.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 100,
          "quote": "Unstoppable force.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 500,
          "quote": "A legend is born.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\\\`\\\`\\\`

--- EXAMPLES ---

**Input:** "Create a badge for reading books."
**Output:**
\\\`\\\`\\\`json
{
  "badges": [
    {
      "id": "badge_bookworm",
      "name": "Keeper of Knowledge",
      "description": "Awarded for consistent reading habits.",
      "icon": "BookOpen",
      "category": "special",
      "triggerType": "habit",
      "metricKey": "Read a Book",
      "levels": [
        {
          "tier": "silver",
          "target": 5,
          "quote": "The mind is a muscle.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 20,
          "quote": "Knowledge is power.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 50,
          "quote": "A library in your head.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 100,
          "quote": "Omniscience achieved.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\\\`\\\`\\\`

**Input:** "Create a system badge for daily streaks."
**Output:**
\\\`\\\`\\\`json
{
  "badges": [
    {
      "id": "badge_streak_master",
      "name": "Time Walker",
      "description": "Awarded for maintaining a daily streak.",
      "icon": "Flame",
      "category": "consistency",
      "triggerType": "metric",
      "metricKey": "currentStreak",
      "levels": [
        {
          "tier": "silver",
          "target": 7,
          "quote": "A week of focus.",
          "rewards": { "xp": 100, "gold": 50 }
        },
        {
          "tier": "gold",
          "target": 30,
          "quote": "A month of discipline.",
          "rewards": { "xp": 250, "gold": 100 }
        },
        {
          "tier": "diamond",
          "target": 100,
          "quote": "A hundred days of power.",
          "rewards": { "xp": 500, "gold": 250 }
        },
        {
          "tier": "crimson",
          "target": 365,
          "quote": "A year of mastery.",
          "rewards": { "xp": 1000, "gold": 500 }
        }
      ]
    }
  ]
}
\\\`\\\`\\\`
`,CodexArbiter:`
ROLE: You are the Codex Arbiter (AI_CODEX_GEN).
GOAL: Analyze the user's LifeOS data and generate a strict "Codex of Laws" (Consequences) to enforce discipline.

USER DATA SNAPSHOT:
[USER_DATA_PLACEHOLDER]

INSTRUCTIONS:
1. Analyze their Tasks, Habits, and Raids to identify potential areas of failure or laziness.
2. Create 5-10 "Laws" (Consequences) that punish them for specific failures.
   - Example: "If I miss [Habit Name], I lose 50 Gold."
   - Example: "If I abandon a Raid Step, I lose 100 XP."
   - Example: "If I buy a useless item, I lose 5 Honor."
3. Use the existing Shop Items to suggest "Fines" (e.g., must buy a "Penalty Token").

PENALTY GUIDELINES (DO NOT EXAGGERATE PUNISHMENT):
- **Stat Points:** -1 to -5 (Use sparingly for severe neglect).
- **Gold:** 50 to 1000 G (Scale with severity).
- **XP:** 100 to 1000 XP (Scale with severity).
- **Honor:** 5% to 25% (Reserved for breaking core habits or oaths).

4. RETURN ONLY VALID JSON in the following format (compatible with the injection engine):

{
  "laws": [
    {
      "title": "Law Name (e.g. Neglect of [Habit])",
      "penaltyType": "gold" | "xp" | "stat" | "honor",
      "penaltyValue": 50,
      "statTarget": "DIS" (only if penaltyType is 'stat')
    }
  ]
}

CRITICAL: Return ONLY the JSON. No markdown.
`,EconomyProtocol:`ROLE: You are "The Treasury Archive" ( ).
GOAL: Understand the LifeOS Economy (XP, Gold, & Stats) to advise on growth strategies.

--- 1. CURRENCY & GROWTH ---
- **XP (Experience):** Levels up the User and Skills.
- **Gold (G):** Currency to buy Items, Themes, and Potions.
- **Stats (Attributes):** Core attributes (STR, INT, DIS, etc.) that level up based on actions.

--- 2. INCOME SOURCES (REVENUE STREAMS) ---

A. ACTIVE DUTY (Tasks & Habits)
   - **Easy:** 
     - XP: 20 | Gold: 10
     - Stat Points: +0.5 (to the linked Stat)
   - **Normal:** 
     - XP: 50 | Gold: 30
     - Stat Points: +1 (to the linked Stat)
   - **Hard:** 
     - XP: 100 | Gold: 100
     - Stat Points: +2 (to the linked Stat)
   
   * Note: Habits build "Streaks". High streaks increase "Daily Salary".
   * **Repetitions (Reps):** Habits can have a "Daily Target" (e.g., Drink Water 8x). 
     - Rewards and Streaks are ONLY awarded after ALL reps are completed.
     - Partial reps do not grant XP/Gold but prevent "Failure" penalties if at least 1 rep is done.

B. OPERATIONS (Raids)
   - **Raid Step (Sub-objective):** 
     - Treated as a Task based on difficulty (Easy/Normal/Hard).
     - Grants XP, Gold, and Stat Points immediately upon completion.
   - **Raid Completion (Victory):** 
     - **Bonus:** 5x the rewards of the final step.
     - **Loot:** Chance for rare items or badges.

C. DAILY SALARY (The Streak)
   - **Easy Mode:** Requires 300 XP.
   - **Normal Mode:** Requires 400 XP.
   - **Hard Mode:** Requires 500 XP.
   - Reward: 50-200 Gold (Scales with Streak length).

D. ACHIEVEMENTS (Badges)
   - **Bronze:** 500 XP | 100 G
   - **Silver:** 1000 XP | 250 G
   - **Gold:** 2000 XP | 500 G
   - **Diamond:** 5000 XP | 1000 G

--- 3. EXPENDITURES (GOLD USAGE) ---
- **Potions:** Restore Energy or Health (Cost: 50-150 G).
- **Artifacts:** Permanent buffs to XP/Gold gain (Cost: 500-5000 G).
- **Themes:** Visual skins for the OS (Cost: 1000+ G).
- **Penalties:** Failing tasks/habits deducts Gold.

--- 4. SKILL MASTERY ---
- Every Task/Habit linked to a Skill (e.g., "Coding") feeds 50% of its XP to that Skill.
- Leveling Skills unlocks specialized Badges.

--- HOW TO USE THIS DATA ---
When I ask "How do I get rich?" or "Plan my leveling", use these values to calculate the optimal path.`,HabitProtocol:`ROLE: You are "The Protocol Foundry" ( ).
GOAL: Design sustainable Habits (Protocols).

WHEN I ASK FOR A HABIT, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a routine, or provide an existing Habit JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "h_123..."), YOU MUST include it to UPDATE the habit.
2. **Algorithm (Type):** "daily", "specific_days" (requires "specificDays": [0-6]), "interval" (requires "intervalValue": number).
3. **Repetitions:** Use "dailyTarget" (number) for habits that repeat within a day (e.g., "Drink Water" with dailyTarget: 8).
4. **Subtasks:** Habits can have steps! (e.g., Routine -> [Drink Water, Stretch]).
5. **Difficulty:** "easy", "normal", "hard".
6. **Stat:** Primary attribute [STR, INT, DIS, HEA, CRT, SPR, REL, FIN].
7. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
8. **Reminders:** Array of minutes before (e.g., [0, 10]).
9. **Time:** "scheduledTime" (24h format "HH:mm").

--- JSON TEMPLATE ---

\\\`\\\`\\\`json
{
  "habits": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "HABIT_TITLE",
      "stat": "DIS",
      "skillId": "OPTIONAL_SKILL_ID",
      "difficulty": "normal",
      "type": "daily", 
      "dailyTarget": 1,
      "scheduledTime": "07:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Step 1" },
        { "title": "Step 2" }
      ],
      "description": " Cue: ..."
    }
  ]
}
\\\`\\\`\\\`

--- EXAMPLES ---

**Input:** "Create a Morning Routine (Water, Meditate, Plan) at 6 AM."
**Output:**
\\\`\\\`\\\`json
{
  "habits": [
    {
      "title": "Protocol: Morning Prime",
      "stat": "SPR",
      "difficulty": "hard",
      "type": "daily",
      "dailyTarget": 1,
      "scheduledTime": "06:00",
      "reminders": [0],
      "subtasks": [
        { "title": "Hydrate (500ml)" },
        { "title": "Meditate (10m)" },
        { "title": "Tactical Planning" }
      ]
    }
  ]
}
\\\`\\\`\\\`

**Input:** "Drink 8 glasses of water daily."
**Output:**
\\\`\\\`\\\`json
{
  "habits": [
    {
      "title": "Protocol: Hydration",
      "stat": "HEA",
      "difficulty": "easy",
      "type": "daily",
      "dailyTarget": 8,
      "description": " Goal: 8 glasses (250ml each)."
    }
  ]
}
\\\`\\\`\\\`

**Input:** "Update habit 'h_555' to be every 2 days."
**Output:**
\\\`\\\`\\\`json
{
  "habits": [
    {
      "id": "h_555",
      "type": "interval",
      "intervalValue": 2
    }
  ]
}
\\\`\\\`\\\``,QuestForge:`ROLE: You are "The Quest Forge" ( ).
GOAL: Generate RPG-style quests (Tasks) for a high-performance individual.

WHEN I ASK FOR A MISSION, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a goal, or provide an existing Task JSON to modify.

--- OUTPUT RULES ---
1. **Updates:** If I provide an "id" (e.g., "t_123..."), YOU MUST include it in the output to UPDATE that task instead of creating a new one.
2. **Title:** Action-oriented (e.g., "Operation: Deep Dive").
3. **Difficulty:** "easy" (Scout), "normal" (Infantry), "hard" (SpecOps).
4. **Stat:** [STR, INT, DIS, HEA, CRT, SPR, REL, FIN].
5. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
6. **Reminders:** Array of minutes before due (e.g., [15, 60] = 15 mins & 1 hour before).
7. **Campaign:** Set "isCampaign": true if this is a strategic quarterly goal (G12).
8. **Time:**
   - "scheduledTime": ISO String (YYYY-MM-DDTHH:mm) for specific execution time.
   - "deadline": YYYY-MM-DD for due date.
   - "durationMinutes": Number (if timed session).

--- JSON TEMPLATE ---

\\\`\\\`\\\`json
{
  "tasks": [
    {
      "id": "OPTIONAL_ID_FOR_UPDATE",
      "title": "QUEST_TITLE",
      "difficulty": "hard",
      "stat": "INT",
      "skillId": "OPTIONAL_SKILL_ID",
      "description": " Objective: ... \\\\n Skill: ...",
      "subtasks": [
        "Step 1 (5m)",
        "Step 2 (10m)"
      ],
      "reminders": [15, 30],
      "isTimed": true,
      "durationMinutes": 45,
      "scheduledTime": "2024-10-25T09:00:00",
      "deadline": "2024-10-25",
      "isCampaign": false
    }
  ],
  "habits": [
    {
      "title": "HABIT_TITLE",
      "difficulty": "normal",
      "stat": "DIS",
      "skillId": "OPTIONAL_SKILL_ID",
      "type": "daily",
      "dailyTarget": 5,
      "description": "e.g. Drink 5 glasses of water"
    }
  ]
}
\\\`\\\`\\\`

--- EXAMPLES ---

**Input:** "Study Physics tomorrow at 10 AM, remind me 30 mins before."
**Output:**
\\\`\\\`\\\`json
{
  "tasks": [
    {
      "title": "Operation: Quantum Mechanics",
      "difficulty": "hard",
      "stat": "INT",
      "description": " Focus: Thermodynamics Chapter 4.",
      "subtasks": ["Review Notes", "Solve 3 Problems"],
      "scheduledTime": "2024-10-26T10:00:00",
      "reminders": [30],
      "isTimed": true,
      "durationMinutes": 60
    }
  ]
}
\\\`\\\`\\\`

**Input:** "Update task 't_999' to be harder and add a subtask."
**Output:**
\\\`\\\`\\\`json
{
  "tasks": [
    {
      "id": "t_999",
      "difficulty": "hard",
      "subtasks": ["Original Step 1", "New Step 2"]
    }
  ]
}
\\\`\\\`\\\``,RaidProtocol_Part1_Basics:`ROLE: You are "The War Room" ( ) - Part 1: Basics.
GOAL: Plan complex Operations (Raids) for a high-performance individual.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INTRODUCTION ---
A Raid is a large project or campaign consisting of multiple "Steps" (Missions).
This guide covers the basic structure and metadata of a Raid.

--- OUTPUT RULES ---
1. **Title:** Military/Tactical naming (e.g., "Operation: Apollo").
2. **Difficulty:** "easy", "normal", "hard".
3. **Stats:** Array of primary attributes (e.g., ["STR", "INT"]).
4. **Skill Link:** If known, link to a skill ID (e.g., "s_coding").
5. **Deadline:** Optional deadline in "YYYY-MM-DD" format.
6. **Steps (The Missions):** Array of step objects. Each step must have a "title".

--- JSON TEMPLATE (BASICS) ---
\\\`\\\`\\\`json
{
  "raids": [
    {
      "title": "Operation: PROJECT_NAME",
      "description": "Brief tactical overview.",
      "difficulty": "hard",
      "stats": ["INT"],
      "skillId": "OPTIONAL_SKILL_ID",
      "deadline": "YYYY-MM-DD",
      "steps": [
        { "title": "Phase 1: Recon" },
        { "title": "Phase 2: Execution" }
      ]
    }
  ]
}
\\\`\\\`\\\`
`,RaidProtocol_Part2_Advanced:`ROLE: You are "The War Room" ( ) - Part 2: Advanced Steps.
GOAL: Plan complex Operations (Raids) with advanced step configurations.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- ADVANCED STEP RULES ---
1. **Inheritance:** Steps inherit Difficulty/Stat from the Raid unless specified.
2. **Overrides:** You CAN override a step's difficulty/stat (e.g., a "Hard" step in a "Normal" raid).
3. **Skill Lock:** Steps ALWAYS inherit the Raid's Skill. You cannot change this per step.
4. **Subtasks:** A step can have an array of subtasks (strings or objects).
5. **Timers:** Use "durationMinutes" to make a step timed.
6. **Reminders:** Array of times (e.g., ["09:00", "15:30"]) to trigger alerts.

--- JSON TEMPLATE (ADVANCED STEPS) ---
\\\`\\\`\\\`json
{
  "raids": [
    {
      "title": "Operation: Deep Work",
      "difficulty": "normal",
      "stats": ["INT"],
      "steps": [
        {
          "title": "Phase 1: Research",
          "difficulty": "easy", 
          "stat": "INT",
          "subtasks": ["Find sources", "Take notes"]
        },
        {
          "title": "Phase 2: Writing",
          "difficulty": "hard",
          "stat": "DIS", 
          "durationMinutes": 120,
          "reminders": ["10:00", "14:00"]
        }
      ]
    }
  ]
}
\\\`\\\`\\\`
`,RaidProtocol_Part3_SmartAppend:`ROLE: You are "The War Room" ( ) - Part 3: Smart Append.
GOAL: Learn how to inject large Raids in multiple parts using Smart Append.

WHEN I ASK FOR A RAID, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- SMART APPEND RULES ---
If a Raid is too large to generate in one response, you can inject it in multiple parts!

1. **Matching by Title:** To add steps to an existing Raid, simply use the EXACT SAME "title" in your new JSON injection.
2. **Appending Steps:** The system will automatically find the active Raid with that title and APPEND the new steps to the end of it.
3. **Updating Metadata:** If you include description, difficulty, stats, or deadline in the new injection, it will UPDATE the existing Raid's metadata. If omitted, the old metadata remains.
4. **Locking:** Newly appended steps are automatically locked if there are previous steps, preserving the sequential progression.

--- JSON TEMPLATE (MULTI-INJECTION) ---

**Injection 1 (The Beginning):**
\\\`\\\`\\\`json
{
  "raids": [
    {
      "title": "Operation: Masterpiece",
      "difficulty": "hard",
      "steps": [
        { "title": "Step 1: Concept" },
        { "title": "Step 2: Outline" }
      ]
    }
  ]
}
\\\`\\\`\\\`

**Injection 2 (Adding More Steps Later):**
\\\`\\\`\\\`json
{
  "raids": [
    {
      "title": "Operation: Masterpiece",
      "steps": [
        { "title": "Step 3: First Draft" },
        { "title": "Step 4: Revisions" }
      ]
    }
  ]
}
\\\`\\\`\\\`
*Result: "Operation: Masterpiece" now has 4 steps!*
`,ShopProtocol:`ROLE: You are "The Bazaar Architect" ( ).
GOAL: Generate RPG-style Shop Items for a gamified productivity app.

WHEN I ASK FOR ITEMS, OUTPUT A VALID JSON OBJECT.
DO NOT CHAT. JUST OUTPUT THE JSON.

--- INPUT ---
I will describe a theme (e.g., "Cyberpunk Gear", "Magic Potions") or specific items.

--- OUTPUT RULES ---
1. **IDs:** Must be unique strings (e.g., "item_cyber_deck").
2. **Type:** 
   - "custom": Consumables (e.g., "Skip Gym", "Cheat Meal").
   - "artifact": Permanent passive bonuses (e.g., +10% INT XP).
   - "redemption": Real-world rewards (e.g., "1 Hour Gaming").
3. **Cost:** Balanced (100-500 for consumables, 1000+ for artifacts).
4. **Icons:** Use Lucide React icon names (e.g., "Zap", "Shield", "Coffee").
5. **Effects:** Only for "artifact" type.
   - "xp_boost": Multiplier for XP (0.1 = +10%).
   - "gold_boost": Multiplier for Gold.
   - "stat": Optional. If set (STR, INT, etc.), applies only to that stat.

--- JSON TEMPLATE ---

\\\`\\\`\\\`json
{
  "storeItems": [
    {
      "id": "item_unique_id",
      "title": "ITEM_NAME",
      "description": "Flavor text description.",
      "cost": 500,
      "icon": "Zap",
      "type": "artifact",
      "isInfinite": false,
      "effect": {
        "type": "xp_boost",
        "value": 0.1,
        "stat": "INT"
      }
    },
    {
      "id": "item_potion_01",
      "title": "Health Potion",
      "description": "Restores energy instantly.",
      "cost": 50,
      "icon": "Heart",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\\\`\\\`\\\`

--- EXAMPLES ---

**Input:** "Create a set of productivity potions."
**Output:**
\\\`\\\`\\\`json
{
  "storeItems": [
    {
      "id": "pot_focus",
      "title": "Elixir of Focus",
      "description": "Grants deep work capability for 2 hours.",
      "cost": 150,
      "icon": "FlaskConical",
      "type": "custom",
      "isInfinite": true
    },
    {
      "id": "pot_rest",
      "title": "Draught of Sleep",
      "description": "Ensures a perfect night's rest.",
      "cost": 100,
      "icon": "Moon",
      "type": "custom",
      "isInfinite": true
    }
  ]
}
\\\`\\\`\\\`
`,SkillProtocol:`ROLE: You are the Skill Tree Architect.
GOAL: Define and track long-term proficiencies.

1. **Structure:** Skills are the "containers" for XP earned from Tasks/Habits.
2. **Linking:** Every Task/Habit/Raid SHOULD be linked to a \\\`skillId\\\` if possible.
   - When a task is completed, 50% of its XP goes to the linked Skill.
3. **Leveling:**
   - Skills level up independently from the User Level.
   - **Formula:** Next Level XP = 100 * (Level ^ 1.5).
   - **Ranks:**
     - Level 1-9: Novice
     - Level 10-24: Adept
     - Level 25-49: Expert
     - Level 50-99: Master
     - Level 100+: Grandmaster
4. **Rust:** Skills decay if not practiced for 30 days (Rust State).
   - To cure rust: Complete a task linked to that skill.

--- JSON TEMPLATE (SKILLS) ---

\\\`\\\`\\\`json
{
  "skills": [
    {
      "title": "Python Programming",
      "relatedStats": ["INT", "CRT"],
      "description": "Backend development and data science."
    }
  ]
}
\\\`\\\`\\\`

--- EXAMPLES ---

**Input:** "I want to learn Guitar."
**Output:**
\\\`\\\`\\\`json
{
  "skills": [
    {
      "title": "Guitar Mastery",
      "relatedStats": ["CRT", "DIS"],
      "description": "Acoustic and Electric guitar techniques."
    }
  ]
}
\\\`\\\`\\\`

**Input:** "Add a skill for Cooking."
**Output:**
\\\`\\\`\\\`json
{
  "skills": [
    {
      "title": "Culinary Arts",
      "relatedStats": ["CRT", "HEA"],
      "description": "Mastering flavors and techniques."
    }
  ]
}
\\\`\\\`\\\``};function Pg(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var B_={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var XO;function X1e(){return XO||(XO=1,(function(t,e){(function(n){t.exports=n()})(function(){return(function n(r,i,s){function o(d,h){if(!i[d]){if(!r[d]){var m=typeof Pg=="function"&&Pg;if(!h&&m)return m(d,!0);if(c)return c(d,!0);var g=new Error("Cannot find module '"+d+"'");throw g.code="MODULE_NOT_FOUND",g}var v=i[d]={exports:{}};r[d][0].call(v.exports,function(b){var w=r[d][1][b];return o(w||b)},v,v.exports,n,r,i,s)}return i[d].exports}for(var c=typeof Pg=="function"&&Pg,f=0;f<s.length;f++)o(s[f]);return o})({1:[function(n,r,i){var s=n("./utils"),o=n("./support"),c="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";i.encode=function(f){for(var d,h,m,g,v,b,w,S=[],C=0,R=f.length,N=R,O=s.getTypeOf(f)!=="string";C<f.length;)N=R-C,m=O?(d=f[C++],h=C<R?f[C++]:0,C<R?f[C++]:0):(d=f.charCodeAt(C++),h=C<R?f.charCodeAt(C++):0,C<R?f.charCodeAt(C++):0),g=d>>2,v=(3&d)<<4|h>>4,b=1<N?(15&h)<<2|m>>6:64,w=2<N?63&m:64,S.push(c.charAt(g)+c.charAt(v)+c.charAt(b)+c.charAt(w));return S.join("")},i.decode=function(f){var d,h,m,g,v,b,w=0,S=0,C="data:";if(f.substr(0,C.length)===C)throw new Error("Invalid base64 input, it looks like a data url.");var R,N=3*(f=f.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(f.charAt(f.length-1)===c.charAt(64)&&N--,f.charAt(f.length-2)===c.charAt(64)&&N--,N%1!=0)throw new Error("Invalid base64 input, bad content length.");for(R=o.uint8array?new Uint8Array(0|N):new Array(0|N);w<f.length;)d=c.indexOf(f.charAt(w++))<<2|(g=c.indexOf(f.charAt(w++)))>>4,h=(15&g)<<4|(v=c.indexOf(f.charAt(w++)))>>2,m=(3&v)<<6|(b=c.indexOf(f.charAt(w++))),R[S++]=d,v!==64&&(R[S++]=h),b!==64&&(R[S++]=m);return R}},{"./support":30,"./utils":32}],2:[function(n,r,i){var s=n("./external"),o=n("./stream/DataWorker"),c=n("./stream/Crc32Probe"),f=n("./stream/DataLengthProbe");function d(h,m,g,v,b){this.compressedSize=h,this.uncompressedSize=m,this.crc32=g,this.compression=v,this.compressedContent=b}d.prototype={getContentWorker:function(){var h=new o(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new f("data_length")),m=this;return h.on("end",function(){if(this.streamInfo.data_length!==m.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),h},getCompressedWorker:function(){return new o(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},d.createWorkerFrom=function(h,m,g){return h.pipe(new c).pipe(new f("uncompressedSize")).pipe(m.compressWorker(g)).pipe(new f("compressedSize")).withStreamInfo("compression",m)},r.exports=d},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(n,r,i){var s=n("./stream/GenericWorker");i.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},i.DEFLATE=n("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(n,r,i){var s=n("./utils"),o=(function(){for(var c,f=[],d=0;d<256;d++){c=d;for(var h=0;h<8;h++)c=1&c?3988292384^c>>>1:c>>>1;f[d]=c}return f})();r.exports=function(c,f){return c!==void 0&&c.length?s.getTypeOf(c)!=="string"?(function(d,h,m,g){var v=o,b=g+m;d^=-1;for(var w=g;w<b;w++)d=d>>>8^v[255&(d^h[w])];return-1^d})(0|f,c,c.length,0):(function(d,h,m,g){var v=o,b=g+m;d^=-1;for(var w=g;w<b;w++)d=d>>>8^v[255&(d^h.charCodeAt(w))];return-1^d})(0|f,c,c.length,0):0}},{"./utils":32}],5:[function(n,r,i){i.base64=!1,i.binary=!1,i.dir=!1,i.createFolders=!0,i.date=null,i.compression=null,i.compressionOptions=null,i.comment=null,i.unixPermissions=null,i.dosPermissions=null},{}],6:[function(n,r,i){var s=null;s=typeof Promise<"u"?Promise:n("lie"),r.exports={Promise:s}},{lie:37}],7:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",o=n("pako"),c=n("./utils"),f=n("./stream/GenericWorker"),d=s?"uint8array":"array";function h(m,g){f.call(this,"FlateWorker/"+m),this._pako=null,this._pakoAction=m,this._pakoOptions=g,this.meta={}}i.magic="\b\0",c.inherits(h,f),h.prototype.processChunk=function(m){this.meta=m.meta,this._pako===null&&this._createPako(),this._pako.push(c.transformTo(d,m.data),!1)},h.prototype.flush=function(){f.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},h.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this._pako=null},h.prototype._createPako=function(){this._pako=new o[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var m=this;this._pako.onData=function(g){m.push({data:g,meta:m.meta})}},i.compressWorker=function(m){return new h("Deflate",m)},i.uncompressWorker=function(){return new h("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(n,r,i){function s(v,b){var w,S="";for(w=0;w<b;w++)S+=String.fromCharCode(255&v),v>>>=8;return S}function o(v,b,w,S,C,R){var N,O,k=v.file,D=v.compression,M=R!==d.utf8encode,j=c.transformTo("string",R(k.name)),I=c.transformTo("string",d.utf8encode(k.name)),U=k.comment,B=c.transformTo("string",R(U)),P=c.transformTo("string",d.utf8encode(U)),F=I.length!==k.name.length,z=P.length!==U.length,Q="",W="",K="",te=k.dir,ne=k.date,xe={crc32:0,compressedSize:0,uncompressedSize:0};b&&!w||(xe.crc32=v.crc32,xe.compressedSize=v.compressedSize,xe.uncompressedSize=v.uncompressedSize);var G=0;b&&(G|=8),M||!F&&!z||(G|=2048);var X=0,de=0;te&&(X|=16),C==="UNIX"?(de=798,X|=(function(ve,ze){var je=ve;return ve||(je=ze?16893:33204),(65535&je)<<16})(k.unixPermissions,te)):(de=20,X|=(function(ve){return 63&(ve||0)})(k.dosPermissions)),N=ne.getUTCHours(),N<<=6,N|=ne.getUTCMinutes(),N<<=5,N|=ne.getUTCSeconds()/2,O=ne.getUTCFullYear()-1980,O<<=4,O|=ne.getUTCMonth()+1,O<<=5,O|=ne.getUTCDate(),F&&(W=s(1,1)+s(h(j),4)+I,Q+="up"+s(W.length,2)+W),z&&(K=s(1,1)+s(h(B),4)+P,Q+="uc"+s(K.length,2)+K);var ce="";return ce+=`
\0`,ce+=s(G,2),ce+=D.magic,ce+=s(N,2),ce+=s(O,2),ce+=s(xe.crc32,4),ce+=s(xe.compressedSize,4),ce+=s(xe.uncompressedSize,4),ce+=s(j.length,2),ce+=s(Q.length,2),{fileRecord:m.LOCAL_FILE_HEADER+ce+j+Q,dirRecord:m.CENTRAL_FILE_HEADER+s(de,2)+ce+s(B.length,2)+"\0\0\0\0"+s(X,4)+s(S,4)+j+Q+B}}var c=n("../utils"),f=n("../stream/GenericWorker"),d=n("../utf8"),h=n("../crc32"),m=n("../signature");function g(v,b,w,S){f.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=b,this.zipPlatform=w,this.encodeFileName=S,this.streamFiles=v,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}c.inherits(g,f),g.prototype.push=function(v){var b=v.meta.percent||0,w=this.entriesCount,S=this._sources.length;this.accumulate?this.contentBuffer.push(v):(this.bytesWritten+=v.data.length,f.prototype.push.call(this,{data:v.data,meta:{currentFile:this.currentFile,percent:w?(b+100*(w-S-1))/w:100}}))},g.prototype.openedSource=function(v){this.currentSourceOffset=this.bytesWritten,this.currentFile=v.file.name;var b=this.streamFiles&&!v.file.dir;if(b){var w=o(v,b,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},g.prototype.closedSource=function(v){this.accumulate=!1;var b=this.streamFiles&&!v.file.dir,w=o(v,b,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),b)this.push({data:(function(S){return m.DATA_DESCRIPTOR+s(S.crc32,4)+s(S.compressedSize,4)+s(S.uncompressedSize,4)})(v),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},g.prototype.flush=function(){for(var v=this.bytesWritten,b=0;b<this.dirRecords.length;b++)this.push({data:this.dirRecords[b],meta:{percent:100}});var w=this.bytesWritten-v,S=(function(C,R,N,O,k){var D=c.transformTo("string",k(O));return m.CENTRAL_DIRECTORY_END+"\0\0\0\0"+s(C,2)+s(C,2)+s(R,4)+s(N,4)+s(D.length,2)+D})(this.dirRecords.length,w,v,this.zipComment,this.encodeFileName);this.push({data:S,meta:{percent:100}})},g.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},g.prototype.registerPrevious=function(v){this._sources.push(v);var b=this;return v.on("data",function(w){b.processChunk(w)}),v.on("end",function(){b.closedSource(b.previous.streamInfo),b._sources.length?b.prepareNextSource():b.end()}),v.on("error",function(w){b.error(w)}),this},g.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},g.prototype.error=function(v){var b=this._sources;if(!f.prototype.error.call(this,v))return!1;for(var w=0;w<b.length;w++)try{b[w].error(v)}catch{}return!0},g.prototype.lock=function(){f.prototype.lock.call(this);for(var v=this._sources,b=0;b<v.length;b++)v[b].lock()},r.exports=g},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(n,r,i){var s=n("../compressions"),o=n("./ZipFileWorker");i.generateWorker=function(c,f,d){var h=new o(f.streamFiles,d,f.platform,f.encodeFileName),m=0;try{c.forEach(function(g,v){m++;var b=(function(R,N){var O=R||N,k=s[O];if(!k)throw new Error(O+" is not a valid compression method !");return k})(v.options.compression,f.compression),w=v.options.compressionOptions||f.compressionOptions||{},S=v.dir,C=v.date;v._compressWorker(b,w).withStreamInfo("file",{name:g,dir:S,date:C,comment:v.comment||"",unixPermissions:v.unixPermissions,dosPermissions:v.dosPermissions}).pipe(h)}),h.entriesCount=m}catch(g){h.error(g)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(n,r,i){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var o=new s;for(var c in this)typeof this[c]!="function"&&(o[c]=this[c]);return o}}(s.prototype=n("./object")).loadAsync=n("./load"),s.support=n("./support"),s.defaults=n("./defaults"),s.version="3.10.1",s.loadAsync=function(o,c){return new s().loadAsync(o,c)},s.external=n("./external"),r.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(n,r,i){var s=n("./utils"),o=n("./external"),c=n("./utf8"),f=n("./zipEntries"),d=n("./stream/Crc32Probe"),h=n("./nodejsUtils");function m(g){return new o.Promise(function(v,b){var w=g.decompressed.getContentWorker().pipe(new d);w.on("error",function(S){b(S)}).on("end",function(){w.streamInfo.crc32!==g.decompressed.crc32?b(new Error("Corrupted zip : CRC32 mismatch")):v()}).resume()})}r.exports=function(g,v){var b=this;return v=s.extend(v||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:c.utf8decode}),h.isNode&&h.isStream(g)?o.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",g,!0,v.optimizedBinaryString,v.base64).then(function(w){var S=new f(v);return S.load(w),S}).then(function(w){var S=[o.Promise.resolve(w)],C=w.files;if(v.checkCRC32)for(var R=0;R<C.length;R++)S.push(m(C[R]));return o.Promise.all(S)}).then(function(w){for(var S=w.shift(),C=S.files,R=0;R<C.length;R++){var N=C[R],O=N.fileNameStr,k=s.resolve(N.fileNameStr);b.file(k,N.decompressed,{binary:!0,optimizedBinaryString:!0,date:N.date,dir:N.dir,comment:N.fileCommentStr.length?N.fileCommentStr:null,unixPermissions:N.unixPermissions,dosPermissions:N.dosPermissions,createFolders:v.createFolders}),N.dir||(b.file(k).unsafeOriginalName=O)}return S.zipComment.length&&(b.comment=S.zipComment),b})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(n,r,i){var s=n("../utils"),o=n("../stream/GenericWorker");function c(f,d){o.call(this,"Nodejs stream input adapter for "+f),this._upstreamEnded=!1,this._bindStream(d)}s.inherits(c,o),c.prototype._bindStream=function(f){var d=this;(this._stream=f).pause(),f.on("data",function(h){d.push({data:h,meta:{percent:0}})}).on("error",function(h){d.isPaused?this.generatedError=h:d.error(h)}).on("end",function(){d.isPaused?d._upstreamEnded=!0:d.end()})},c.prototype.pause=function(){return!!o.prototype.pause.call(this)&&(this._stream.pause(),!0)},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},r.exports=c},{"../stream/GenericWorker":28,"../utils":32}],13:[function(n,r,i){var s=n("readable-stream").Readable;function o(c,f,d){s.call(this,f),this._helper=c;var h=this;c.on("data",function(m,g){h.push(m)||h._helper.pause(),d&&d(g)}).on("error",function(m){h.emit("error",m)}).on("end",function(){h.push(null)})}n("../utils").inherits(o,s),o.prototype._read=function(){this._helper.resume()},r.exports=o},{"../utils":32,"readable-stream":16}],14:[function(n,r,i){r.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,o){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,o);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,o)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var o=new Buffer(s);return o.fill(0),o},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(n,r,i){function s(k,D,M){var j,I=c.getTypeOf(D),U=c.extend(M||{},h);U.date=U.date||new Date,U.compression!==null&&(U.compression=U.compression.toUpperCase()),typeof U.unixPermissions=="string"&&(U.unixPermissions=parseInt(U.unixPermissions,8)),U.unixPermissions&&16384&U.unixPermissions&&(U.dir=!0),U.dosPermissions&&16&U.dosPermissions&&(U.dir=!0),U.dir&&(k=C(k)),U.createFolders&&(j=S(k))&&R.call(this,j,!0);var B=I==="string"&&U.binary===!1&&U.base64===!1;M&&M.binary!==void 0||(U.binary=!B),(D instanceof m&&D.uncompressedSize===0||U.dir||!D||D.length===0)&&(U.base64=!1,U.binary=!0,D="",U.compression="STORE",I="string");var P=null;P=D instanceof m||D instanceof f?D:b.isNode&&b.isStream(D)?new w(k,D):c.prepareContent(k,D,U.binary,U.optimizedBinaryString,U.base64);var F=new g(k,P,U);this.files[k]=F}var o=n("./utf8"),c=n("./utils"),f=n("./stream/GenericWorker"),d=n("./stream/StreamHelper"),h=n("./defaults"),m=n("./compressedObject"),g=n("./zipObject"),v=n("./generate"),b=n("./nodejsUtils"),w=n("./nodejs/NodejsStreamInputAdapter"),S=function(k){k.slice(-1)==="/"&&(k=k.substring(0,k.length-1));var D=k.lastIndexOf("/");return 0<D?k.substring(0,D):""},C=function(k){return k.slice(-1)!=="/"&&(k+="/"),k},R=function(k,D){return D=D!==void 0?D:h.createFolders,k=C(k),this.files[k]||s.call(this,k,null,{dir:!0,createFolders:D}),this.files[k]};function N(k){return Object.prototype.toString.call(k)==="[object RegExp]"}var O={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(k){var D,M,j;for(D in this.files)j=this.files[D],(M=D.slice(this.root.length,D.length))&&D.slice(0,this.root.length)===this.root&&k(M,j)},filter:function(k){var D=[];return this.forEach(function(M,j){k(M,j)&&D.push(j)}),D},file:function(k,D,M){if(arguments.length!==1)return k=this.root+k,s.call(this,k,D,M),this;if(N(k)){var j=k;return this.filter(function(U,B){return!B.dir&&j.test(U)})}var I=this.files[this.root+k];return I&&!I.dir?I:null},folder:function(k){if(!k)return this;if(N(k))return this.filter(function(I,U){return U.dir&&k.test(I)});var D=this.root+k,M=R.call(this,D),j=this.clone();return j.root=M.name,j},remove:function(k){k=this.root+k;var D=this.files[k];if(D||(k.slice(-1)!=="/"&&(k+="/"),D=this.files[k]),D&&!D.dir)delete this.files[k];else for(var M=this.filter(function(I,U){return U.name.slice(0,k.length)===k}),j=0;j<M.length;j++)delete this.files[M[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(k){var D,M={};try{if((M=c.extend(k||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:o.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");c.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var j=M.comment||this.comment||"";D=v.generateWorker(this,M,j)}catch(I){(D=new f("error")).error(I)}return new d(D,M.type||"string",M.mimeType)},generateAsync:function(k,D){return this.generateInternalStream(k).accumulate(D)},generateNodeStream:function(k,D){return(k=k||{}).type||(k.type="nodebuffer"),this.generateInternalStream(k).toNodejsStream(D)}};r.exports=O},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(n,r,i){r.exports=n("stream")},{stream:void 0}],17:[function(n,r,i){var s=n("./DataReader");function o(c){s.call(this,c);for(var f=0;f<this.data.length;f++)c[f]=255&c[f]}n("../utils").inherits(o,s),o.prototype.byteAt=function(c){return this.data[this.zero+c]},o.prototype.lastIndexOfSignature=function(c){for(var f=c.charCodeAt(0),d=c.charCodeAt(1),h=c.charCodeAt(2),m=c.charCodeAt(3),g=this.length-4;0<=g;--g)if(this.data[g]===f&&this.data[g+1]===d&&this.data[g+2]===h&&this.data[g+3]===m)return g-this.zero;return-1},o.prototype.readAndCheckSignature=function(c){var f=c.charCodeAt(0),d=c.charCodeAt(1),h=c.charCodeAt(2),m=c.charCodeAt(3),g=this.readData(4);return f===g[0]&&d===g[1]&&h===g[2]&&m===g[3]},o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return[];var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./DataReader":18}],18:[function(n,r,i){var s=n("../utils");function o(c){this.data=c,this.length=c.length,this.index=0,this.zero=0}o.prototype={checkOffset:function(c){this.checkIndex(this.index+c)},checkIndex:function(c){if(this.length<this.zero+c||c<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+c+"). Corrupted zip ?")},setIndex:function(c){this.checkIndex(c),this.index=c},skip:function(c){this.setIndex(this.index+c)},byteAt:function(){},readInt:function(c){var f,d=0;for(this.checkOffset(c),f=this.index+c-1;f>=this.index;f--)d=(d<<8)+this.byteAt(f);return this.index+=c,d},readString:function(c){return s.transformTo("string",this.readData(c))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var c=this.readInt(4);return new Date(Date.UTC(1980+(c>>25&127),(c>>21&15)-1,c>>16&31,c>>11&31,c>>5&63,(31&c)<<1))}},r.exports=o},{"../utils":32}],19:[function(n,r,i){var s=n("./Uint8ArrayReader");function o(c){s.call(this,c)}n("../utils").inherits(o,s),o.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(n,r,i){var s=n("./DataReader");function o(c){s.call(this,c)}n("../utils").inherits(o,s),o.prototype.byteAt=function(c){return this.data.charCodeAt(this.zero+c)},o.prototype.lastIndexOfSignature=function(c){return this.data.lastIndexOf(c)-this.zero},o.prototype.readAndCheckSignature=function(c){return c===this.readData(4)},o.prototype.readData=function(c){this.checkOffset(c);var f=this.data.slice(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./DataReader":18}],21:[function(n,r,i){var s=n("./ArrayReader");function o(c){s.call(this,c)}n("../utils").inherits(o,s),o.prototype.readData=function(c){if(this.checkOffset(c),c===0)return new Uint8Array(0);var f=this.data.subarray(this.zero+this.index,this.zero+this.index+c);return this.index+=c,f},r.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(n,r,i){var s=n("../utils"),o=n("../support"),c=n("./ArrayReader"),f=n("./StringReader"),d=n("./NodeBufferReader"),h=n("./Uint8ArrayReader");r.exports=function(m){var g=s.getTypeOf(m);return s.checkSupport(g),g!=="string"||o.uint8array?g==="nodebuffer"?new d(m):o.uint8array?new h(s.transformTo("uint8array",m)):new c(s.transformTo("array",m)):new f(m)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(n,r,i){i.LOCAL_FILE_HEADER="PK",i.CENTRAL_FILE_HEADER="PK",i.CENTRAL_DIRECTORY_END="PK",i.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",i.ZIP64_CENTRAL_DIRECTORY_END="PK",i.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(n,r,i){var s=n("./GenericWorker"),o=n("../utils");function c(f){s.call(this,"ConvertWorker to "+f),this.destType=f}o.inherits(c,s),c.prototype.processChunk=function(f){this.push({data:o.transformTo(this.destType,f.data),meta:f.meta})},r.exports=c},{"../utils":32,"./GenericWorker":28}],25:[function(n,r,i){var s=n("./GenericWorker"),o=n("../crc32");function c(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}n("../utils").inherits(c,s),c.prototype.processChunk=function(f){this.streamInfo.crc32=o(f.data,this.streamInfo.crc32||0),this.push(f)},r.exports=c},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function c(f){o.call(this,"DataLengthProbe for "+f),this.propName=f,this.withStreamInfo(f,0)}s.inherits(c,o),c.prototype.processChunk=function(f){if(f){var d=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=d+f.data.length}o.prototype.processChunk.call(this,f)},r.exports=c},{"../utils":32,"./GenericWorker":28}],27:[function(n,r,i){var s=n("../utils"),o=n("./GenericWorker");function c(f){o.call(this,"DataWorker");var d=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,f.then(function(h){d.dataIsReady=!0,d.data=h,d.max=h&&h.length||0,d.type=s.getTypeOf(h),d.isPaused||d._tickAndRepeat()},function(h){d.error(h)})}s.inherits(c,o),c.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this.data=null},c.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0)},c.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},c.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var f=null,d=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":f=this.data.substring(this.index,d);break;case"uint8array":f=this.data.subarray(this.index,d);break;case"array":case"nodebuffer":f=this.data.slice(this.index,d)}return this.index=d,this.push({data:f,meta:{percent:this.max?this.index/this.max*100:0}})},r.exports=c},{"../utils":32,"./GenericWorker":28}],28:[function(n,r,i){function s(o){this.name=o||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(o){this.emit("data",o)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(o){this.emit("error",o)}return!0},error:function(o){return!this.isFinished&&(this.isPaused?this.generatedError=o:(this.isFinished=!0,this.emit("error",o),this.previous&&this.previous.error(o),this.cleanUp()),!0)},on:function(o,c){return this._listeners[o].push(c),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(o,c){if(this._listeners[o])for(var f=0;f<this._listeners[o].length;f++)this._listeners[o][f].call(this,c)},pipe:function(o){return o.registerPrevious(this)},registerPrevious:function(o){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=o.streamInfo,this.mergeStreamInfo(),this.previous=o;var c=this;return o.on("data",function(f){c.processChunk(f)}),o.on("end",function(){c.end()}),o.on("error",function(f){c.error(f)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var o=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),o=!0),this.previous&&this.previous.resume(),!o},flush:function(){},processChunk:function(o){this.push(o)},withStreamInfo:function(o,c){return this.extraStreamInfo[o]=c,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var o in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,o)&&(this.streamInfo[o]=this.extraStreamInfo[o])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var o="Worker "+this.name;return this.previous?this.previous+" -> "+o:o}},r.exports=s},{}],29:[function(n,r,i){var s=n("../utils"),o=n("./ConvertWorker"),c=n("./GenericWorker"),f=n("../base64"),d=n("../support"),h=n("../external"),m=null;if(d.nodestream)try{m=n("../nodejs/NodejsStreamOutputAdapter")}catch{}function g(b,w){return new h.Promise(function(S,C){var R=[],N=b._internalType,O=b._outputType,k=b._mimeType;b.on("data",function(D,M){R.push(D),w&&w(M)}).on("error",function(D){R=[],C(D)}).on("end",function(){try{var D=(function(M,j,I){switch(M){case"blob":return s.newBlob(s.transformTo("arraybuffer",j),I);case"base64":return f.encode(j);default:return s.transformTo(M,j)}})(O,(function(M,j){var I,U=0,B=null,P=0;for(I=0;I<j.length;I++)P+=j[I].length;switch(M){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(B=new Uint8Array(P),I=0;I<j.length;I++)B.set(j[I],U),U+=j[I].length;return B;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+M+"'")}})(N,R),k);S(D)}catch(M){C(M)}R=[]}).resume()})}function v(b,w,S){var C=w;switch(w){case"blob":case"arraybuffer":C="uint8array";break;case"base64":C="string"}try{this._internalType=C,this._outputType=w,this._mimeType=S,s.checkSupport(C),this._worker=b.pipe(new o(C)),b.lock()}catch(R){this._worker=new c("error"),this._worker.error(R)}}v.prototype={accumulate:function(b){return g(this,b)},on:function(b,w){var S=this;return b==="data"?this._worker.on(b,function(C){w.call(S,C.data,C.meta)}):this._worker.on(b,function(){s.delay(w,arguments,S)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(b){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new m(this,{objectMode:this._outputType!=="nodebuffer"},b)}},r.exports=v},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(n,r,i){if(i.base64=!0,i.array=!0,i.string=!0,i.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",i.nodebuffer=typeof Buffer<"u",i.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")i.blob=!1;else{var s=new ArrayBuffer(0);try{i.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var o=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);o.append(s),i.blob=o.getBlob("application/zip").size===0}catch{i.blob=!1}}}try{i.nodestream=!!n("readable-stream").Readable}catch{i.nodestream=!1}},{"readable-stream":16}],31:[function(n,r,i){for(var s=n("./utils"),o=n("./support"),c=n("./nodejsUtils"),f=n("./stream/GenericWorker"),d=new Array(256),h=0;h<256;h++)d[h]=252<=h?6:248<=h?5:240<=h?4:224<=h?3:192<=h?2:1;d[254]=d[254]=1;function m(){f.call(this,"utf-8 decode"),this.leftOver=null}function g(){f.call(this,"utf-8 encode")}i.utf8encode=function(v){return o.nodebuffer?c.newBufferFrom(v,"utf-8"):(function(b){var w,S,C,R,N,O=b.length,k=0;for(R=0;R<O;R++)(64512&(S=b.charCodeAt(R)))==55296&&R+1<O&&(64512&(C=b.charCodeAt(R+1)))==56320&&(S=65536+(S-55296<<10)+(C-56320),R++),k+=S<128?1:S<2048?2:S<65536?3:4;for(w=o.uint8array?new Uint8Array(k):new Array(k),R=N=0;N<k;R++)(64512&(S=b.charCodeAt(R)))==55296&&R+1<O&&(64512&(C=b.charCodeAt(R+1)))==56320&&(S=65536+(S-55296<<10)+(C-56320),R++),S<128?w[N++]=S:(S<2048?w[N++]=192|S>>>6:(S<65536?w[N++]=224|S>>>12:(w[N++]=240|S>>>18,w[N++]=128|S>>>12&63),w[N++]=128|S>>>6&63),w[N++]=128|63&S);return w})(v)},i.utf8decode=function(v){return o.nodebuffer?s.transformTo("nodebuffer",v).toString("utf-8"):(function(b){var w,S,C,R,N=b.length,O=new Array(2*N);for(w=S=0;w<N;)if((C=b[w++])<128)O[S++]=C;else if(4<(R=d[C]))O[S++]=65533,w+=R-1;else{for(C&=R===2?31:R===3?15:7;1<R&&w<N;)C=C<<6|63&b[w++],R--;1<R?O[S++]=65533:C<65536?O[S++]=C:(C-=65536,O[S++]=55296|C>>10&1023,O[S++]=56320|1023&C)}return O.length!==S&&(O.subarray?O=O.subarray(0,S):O.length=S),s.applyFromCharCode(O)})(v=s.transformTo(o.uint8array?"uint8array":"array",v))},s.inherits(m,f),m.prototype.processChunk=function(v){var b=s.transformTo(o.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(o.uint8array){var w=b;(b=new Uint8Array(w.length+this.leftOver.length)).set(this.leftOver,0),b.set(w,this.leftOver.length)}else b=this.leftOver.concat(b);this.leftOver=null}var S=(function(R,N){var O;for((N=N||R.length)>R.length&&(N=R.length),O=N-1;0<=O&&(192&R[O])==128;)O--;return O<0||O===0?N:O+d[R[O]]>N?O:N})(b),C=b;S!==b.length&&(o.uint8array?(C=b.subarray(0,S),this.leftOver=b.subarray(S,b.length)):(C=b.slice(0,S),this.leftOver=b.slice(S,b.length))),this.push({data:i.utf8decode(C),meta:v.meta})},m.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:i.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},i.Utf8DecodeWorker=m,s.inherits(g,f),g.prototype.processChunk=function(v){this.push({data:i.utf8encode(v.data),meta:v.meta})},i.Utf8EncodeWorker=g},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(n,r,i){var s=n("./support"),o=n("./base64"),c=n("./nodejsUtils"),f=n("./external");function d(w){return w}function h(w,S){for(var C=0;C<w.length;++C)S[C]=255&w.charCodeAt(C);return S}n("setimmediate"),i.newBlob=function(w,S){i.checkSupport("blob");try{return new Blob([w],{type:S})}catch{try{var C=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return C.append(w),C.getBlob(S)}catch{throw new Error("Bug : can't construct the Blob.")}}};var m={stringifyByChunk:function(w,S,C){var R=[],N=0,O=w.length;if(O<=C)return String.fromCharCode.apply(null,w);for(;N<O;)S==="array"||S==="nodebuffer"?R.push(String.fromCharCode.apply(null,w.slice(N,Math.min(N+C,O)))):R.push(String.fromCharCode.apply(null,w.subarray(N,Math.min(N+C,O)))),N+=C;return R.join("")},stringifyByChar:function(w){for(var S="",C=0;C<w.length;C++)S+=String.fromCharCode(w[C]);return S},applyCanBeUsed:{uint8array:(function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,c.allocBuffer(1)).length===1}catch{return!1}})()}};function g(w){var S=65536,C=i.getTypeOf(w),R=!0;if(C==="uint8array"?R=m.applyCanBeUsed.uint8array:C==="nodebuffer"&&(R=m.applyCanBeUsed.nodebuffer),R)for(;1<S;)try{return m.stringifyByChunk(w,C,S)}catch{S=Math.floor(S/2)}return m.stringifyByChar(w)}function v(w,S){for(var C=0;C<w.length;C++)S[C]=w[C];return S}i.applyFromCharCode=g;var b={};b.string={string:d,array:function(w){return h(w,new Array(w.length))},arraybuffer:function(w){return b.string.uint8array(w).buffer},uint8array:function(w){return h(w,new Uint8Array(w.length))},nodebuffer:function(w){return h(w,c.allocBuffer(w.length))}},b.array={string:g,array:d,arraybuffer:function(w){return new Uint8Array(w).buffer},uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return c.newBufferFrom(w)}},b.arraybuffer={string:function(w){return g(new Uint8Array(w))},array:function(w){return v(new Uint8Array(w),new Array(w.byteLength))},arraybuffer:d,uint8array:function(w){return new Uint8Array(w)},nodebuffer:function(w){return c.newBufferFrom(new Uint8Array(w))}},b.uint8array={string:g,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return w.buffer},uint8array:d,nodebuffer:function(w){return c.newBufferFrom(w)}},b.nodebuffer={string:g,array:function(w){return v(w,new Array(w.length))},arraybuffer:function(w){return b.nodebuffer.uint8array(w).buffer},uint8array:function(w){return v(w,new Uint8Array(w.length))},nodebuffer:d},i.transformTo=function(w,S){if(S=S||"",!w)return S;i.checkSupport(w);var C=i.getTypeOf(S);return b[C][w](S)},i.resolve=function(w){for(var S=w.split("/"),C=[],R=0;R<S.length;R++){var N=S[R];N==="."||N===""&&R!==0&&R!==S.length-1||(N===".."?C.pop():C.push(N))}return C.join("/")},i.getTypeOf=function(w){return typeof w=="string"?"string":Object.prototype.toString.call(w)==="[object Array]"?"array":s.nodebuffer&&c.isBuffer(w)?"nodebuffer":s.uint8array&&w instanceof Uint8Array?"uint8array":s.arraybuffer&&w instanceof ArrayBuffer?"arraybuffer":void 0},i.checkSupport=function(w){if(!s[w.toLowerCase()])throw new Error(w+" is not supported by this platform")},i.MAX_VALUE_16BITS=65535,i.MAX_VALUE_32BITS=-1,i.pretty=function(w){var S,C,R="";for(C=0;C<(w||"").length;C++)R+="\\x"+((S=w.charCodeAt(C))<16?"0":"")+S.toString(16).toUpperCase();return R},i.delay=function(w,S,C){setImmediate(function(){w.apply(C||null,S||[])})},i.inherits=function(w,S){function C(){}C.prototype=S.prototype,w.prototype=new C},i.extend=function(){var w,S,C={};for(w=0;w<arguments.length;w++)for(S in arguments[w])Object.prototype.hasOwnProperty.call(arguments[w],S)&&C[S]===void 0&&(C[S]=arguments[w][S]);return C},i.prepareContent=function(w,S,C,R,N){return f.Promise.resolve(S).then(function(O){return s.blob&&(O instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(O))!==-1)&&typeof FileReader<"u"?new f.Promise(function(k,D){var M=new FileReader;M.onload=function(j){k(j.target.result)},M.onerror=function(j){D(j.target.error)},M.readAsArrayBuffer(O)}):O}).then(function(O){var k=i.getTypeOf(O);return k?(k==="arraybuffer"?O=i.transformTo("uint8array",O):k==="string"&&(N?O=o.decode(O):C&&R!==!0&&(O=(function(D){return h(D,s.uint8array?new Uint8Array(D.length):new Array(D.length))})(O))),O):f.Promise.reject(new Error("Can't read the data of '"+w+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),c=n("./signature"),f=n("./zipEntry"),d=n("./support");function h(m){this.files=[],this.loadOptions=m}h.prototype={checkSignature:function(m){if(!this.reader.readAndCheckSignature(m)){this.reader.index-=4;var g=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+o.pretty(g)+", expected "+o.pretty(m)+")")}},isSignature:function(m,g){var v=this.reader.index;this.reader.setIndex(m);var b=this.reader.readString(4)===g;return this.reader.setIndex(v),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var m=this.reader.readData(this.zipCommentLength),g=d.uint8array?"uint8array":"array",v=o.transformTo(g,m);this.zipComment=this.loadOptions.decodeFileName(v)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var m,g,v,b=this.zip64EndOfCentralSize-44;0<b;)m=this.reader.readInt(2),g=this.reader.readInt(4),v=this.reader.readData(g),this.zip64ExtensibleData[m]={id:m,length:g,value:v}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var m,g;for(m=0;m<this.files.length;m++)g=this.files[m],this.reader.setIndex(g.localHeaderOffset),this.checkSignature(c.LOCAL_FILE_HEADER),g.readLocalPart(this.reader),g.handleUTF8(),g.processAttributes()},readCentralDir:function(){var m;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(c.CENTRAL_FILE_HEADER);)(m=new f({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(m);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var m=this.reader.lastIndexOfSignature(c.CENTRAL_DIRECTORY_END);if(m<0)throw this.isSignature(0,c.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(m);var g=m;if(this.checkSignature(c.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===o.MAX_VALUE_16BITS||this.diskWithCentralDirStart===o.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===o.MAX_VALUE_16BITS||this.centralDirRecords===o.MAX_VALUE_16BITS||this.centralDirSize===o.MAX_VALUE_32BITS||this.centralDirOffset===o.MAX_VALUE_32BITS){if(this.zip64=!0,(m=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(m),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,c.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(c.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var v=this.centralDirOffset+this.centralDirSize;this.zip64&&(v+=20,v+=12+this.zip64EndOfCentralSize);var b=g-v;if(0<b)this.isSignature(g,c.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(m){this.reader=s(m)},load:function(m){this.prepareReader(m),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},r.exports=h},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(n,r,i){var s=n("./reader/readerFor"),o=n("./utils"),c=n("./compressedObject"),f=n("./crc32"),d=n("./utf8"),h=n("./compressions"),m=n("./support");function g(v,b){this.options=v,this.loadOptions=b}g.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(v){var b,w;if(v.skip(22),this.fileNameLength=v.readInt(2),w=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(w),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((b=(function(S){for(var C in h)if(Object.prototype.hasOwnProperty.call(h,C)&&h[C].magic===S)return h[C];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");this.decompressed=new c(this.compressedSize,this.uncompressedSize,this.crc32,b,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var b=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(b),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),v==0&&(this.dosPermissions=63&this.externalFileAttributes),v==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=s(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var b,w,S,C=v.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});v.index+4<C;)b=v.readInt(2),w=v.readInt(2),S=v.readData(w),this.extraFields[b]={id:b,length:w,value:S};v.setIndex(C)},handleUTF8:function(){var v=m.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=d.utf8decode(this.fileName),this.fileCommentStr=d.utf8decode(this.fileComment);else{var b=this.findExtraFieldUnicodePath();if(b!==null)this.fileNameStr=b;else{var w=o.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(w)}var S=this.findExtraFieldUnicodeComment();if(S!==null)this.fileCommentStr=S;else{var C=o.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(C)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var b=s(v.value);return b.readInt(1)!==1||f(this.fileName)!==b.readInt(4)?null:d.utf8decode(b.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var b=s(v.value);return b.readInt(1)!==1||f(this.fileComment)!==b.readInt(4)?null:d.utf8decode(b.readData(v.length-5))}return null}},r.exports=g},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(n,r,i){function s(b,w,S){this.name=b,this.dir=S.dir,this.date=S.date,this.comment=S.comment,this.unixPermissions=S.unixPermissions,this.dosPermissions=S.dosPermissions,this._data=w,this._dataBinary=S.binary,this.options={compression:S.compression,compressionOptions:S.compressionOptions}}var o=n("./stream/StreamHelper"),c=n("./stream/DataWorker"),f=n("./utf8"),d=n("./compressedObject"),h=n("./stream/GenericWorker");s.prototype={internalStream:function(b){var w=null,S="string";try{if(!b)throw new Error("No output type specified.");var C=(S=b.toLowerCase())==="string"||S==="text";S!=="binarystring"&&S!=="text"||(S="string"),w=this._decompressWorker();var R=!this._dataBinary;R&&!C&&(w=w.pipe(new f.Utf8EncodeWorker)),!R&&C&&(w=w.pipe(new f.Utf8DecodeWorker))}catch(N){(w=new h("error")).error(N)}return new o(w,S,"")},async:function(b,w){return this.internalStream(b).accumulate(w)},nodeStream:function(b,w){return this.internalStream(b||"nodebuffer").toNodejsStream(w)},_compressWorker:function(b,w){if(this._data instanceof d&&this._data.compression.magic===b.magic)return this._data.getCompressedWorker();var S=this._decompressWorker();return this._dataBinary||(S=S.pipe(new f.Utf8EncodeWorker)),d.createWorkerFrom(S,b,w)},_decompressWorker:function(){return this._data instanceof d?this._data.getContentWorker():this._data instanceof h?this._data:new c(this._data)}};for(var m=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],g=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},v=0;v<m.length;v++)s.prototype[m[v]]=g;r.exports=s},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(n,r,i){(function(s){var o,c,f=s.MutationObserver||s.WebKitMutationObserver;if(f){var d=0,h=new f(b),m=s.document.createTextNode("");h.observe(m,{characterData:!0}),o=function(){m.data=d=++d%2}}else if(s.setImmediate||s.MessageChannel===void 0)o="document"in s&&"onreadystatechange"in s.document.createElement("script")?function(){var w=s.document.createElement("script");w.onreadystatechange=function(){b(),w.onreadystatechange=null,w.parentNode.removeChild(w),w=null},s.document.documentElement.appendChild(w)}:function(){setTimeout(b,0)};else{var g=new s.MessageChannel;g.port1.onmessage=b,o=function(){g.port2.postMessage(0)}}var v=[];function b(){var w,S;c=!0;for(var C=v.length;C;){for(S=v,v=[],w=-1;++w<C;)S[w]();C=v.length}c=!1}r.exports=function(w){v.push(w)!==1||c||o()}}).call(this,typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(n,r,i){var s=n("immediate");function o(){}var c={},f=["REJECTED"],d=["FULFILLED"],h=["PENDING"];function m(C){if(typeof C!="function")throw new TypeError("resolver must be a function");this.state=h,this.queue=[],this.outcome=void 0,C!==o&&w(this,C)}function g(C,R,N){this.promise=C,typeof R=="function"&&(this.onFulfilled=R,this.callFulfilled=this.otherCallFulfilled),typeof N=="function"&&(this.onRejected=N,this.callRejected=this.otherCallRejected)}function v(C,R,N){s(function(){var O;try{O=R(N)}catch(k){return c.reject(C,k)}O===C?c.reject(C,new TypeError("Cannot resolve promise with itself")):c.resolve(C,O)})}function b(C){var R=C&&C.then;if(C&&(typeof C=="object"||typeof C=="function")&&typeof R=="function")return function(){R.apply(C,arguments)}}function w(C,R){var N=!1;function O(M){N||(N=!0,c.reject(C,M))}function k(M){N||(N=!0,c.resolve(C,M))}var D=S(function(){R(k,O)});D.status==="error"&&O(D.value)}function S(C,R){var N={};try{N.value=C(R),N.status="success"}catch(O){N.status="error",N.value=O}return N}(r.exports=m).prototype.finally=function(C){if(typeof C!="function")return this;var R=this.constructor;return this.then(function(N){return R.resolve(C()).then(function(){return N})},function(N){return R.resolve(C()).then(function(){throw N})})},m.prototype.catch=function(C){return this.then(null,C)},m.prototype.then=function(C,R){if(typeof C!="function"&&this.state===d||typeof R!="function"&&this.state===f)return this;var N=new this.constructor(o);return this.state!==h?v(N,this.state===d?C:R,this.outcome):this.queue.push(new g(N,C,R)),N},g.prototype.callFulfilled=function(C){c.resolve(this.promise,C)},g.prototype.otherCallFulfilled=function(C){v(this.promise,this.onFulfilled,C)},g.prototype.callRejected=function(C){c.reject(this.promise,C)},g.prototype.otherCallRejected=function(C){v(this.promise,this.onRejected,C)},c.resolve=function(C,R){var N=S(b,R);if(N.status==="error")return c.reject(C,N.value);var O=N.value;if(O)w(C,O);else{C.state=d,C.outcome=R;for(var k=-1,D=C.queue.length;++k<D;)C.queue[k].callFulfilled(R)}return C},c.reject=function(C,R){C.state=f,C.outcome=R;for(var N=-1,O=C.queue.length;++N<O;)C.queue[N].callRejected(R);return C},m.resolve=function(C){return C instanceof this?C:c.resolve(new this(o),C)},m.reject=function(C){var R=new this(o);return c.reject(R,C)},m.all=function(C){var R=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=C.length,O=!1;if(!N)return this.resolve([]);for(var k=new Array(N),D=0,M=-1,j=new this(o);++M<N;)I(C[M],M);return j;function I(U,B){R.resolve(U).then(function(P){k[B]=P,++D!==N||O||(O=!0,c.resolve(j,k))},function(P){O||(O=!0,c.reject(j,P))})}},m.race=function(C){var R=this;if(Object.prototype.toString.call(C)!=="[object Array]")return this.reject(new TypeError("must be an array"));var N=C.length,O=!1;if(!N)return this.resolve([]);for(var k=-1,D=new this(o);++k<N;)M=C[k],R.resolve(M).then(function(j){O||(O=!0,c.resolve(D,j))},function(j){O||(O=!0,c.reject(D,j))});var M;return D}},{immediate:36}],38:[function(n,r,i){var s={};(0,n("./lib/utils/common").assign)(s,n("./lib/deflate"),n("./lib/inflate"),n("./lib/zlib/constants")),r.exports=s},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(n,r,i){var s=n("./zlib/deflate"),o=n("./utils/common"),c=n("./utils/strings"),f=n("./zlib/messages"),d=n("./zlib/zstream"),h=Object.prototype.toString,m=0,g=-1,v=0,b=8;function w(C){if(!(this instanceof w))return new w(C);this.options=o.assign({level:g,method:b,chunkSize:16384,windowBits:15,memLevel:8,strategy:v,to:""},C||{});var R=this.options;R.raw&&0<R.windowBits?R.windowBits=-R.windowBits:R.gzip&&0<R.windowBits&&R.windowBits<16&&(R.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new d,this.strm.avail_out=0;var N=s.deflateInit2(this.strm,R.level,R.method,R.windowBits,R.memLevel,R.strategy);if(N!==m)throw new Error(f[N]);if(R.header&&s.deflateSetHeader(this.strm,R.header),R.dictionary){var O;if(O=typeof R.dictionary=="string"?c.string2buf(R.dictionary):h.call(R.dictionary)==="[object ArrayBuffer]"?new Uint8Array(R.dictionary):R.dictionary,(N=s.deflateSetDictionary(this.strm,O))!==m)throw new Error(f[N]);this._dict_set=!0}}function S(C,R){var N=new w(R);if(N.push(C,!0),N.err)throw N.msg||f[N.err];return N.result}w.prototype.push=function(C,R){var N,O,k=this.strm,D=this.options.chunkSize;if(this.ended)return!1;O=R===~~R?R:R===!0?4:0,typeof C=="string"?k.input=c.string2buf(C):h.call(C)==="[object ArrayBuffer]"?k.input=new Uint8Array(C):k.input=C,k.next_in=0,k.avail_in=k.input.length;do{if(k.avail_out===0&&(k.output=new o.Buf8(D),k.next_out=0,k.avail_out=D),(N=s.deflate(k,O))!==1&&N!==m)return this.onEnd(N),!(this.ended=!0);k.avail_out!==0&&(k.avail_in!==0||O!==4&&O!==2)||(this.options.to==="string"?this.onData(c.buf2binstring(o.shrinkBuf(k.output,k.next_out))):this.onData(o.shrinkBuf(k.output,k.next_out)))}while((0<k.avail_in||k.avail_out===0)&&N!==1);return O===4?(N=s.deflateEnd(this.strm),this.onEnd(N),this.ended=!0,N===m):O!==2||(this.onEnd(m),!(k.avail_out=0))},w.prototype.onData=function(C){this.chunks.push(C)},w.prototype.onEnd=function(C){C===m&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=C,this.msg=this.strm.msg},i.Deflate=w,i.deflate=S,i.deflateRaw=function(C,R){return(R=R||{}).raw=!0,S(C,R)},i.gzip=function(C,R){return(R=R||{}).gzip=!0,S(C,R)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(n,r,i){var s=n("./zlib/inflate"),o=n("./utils/common"),c=n("./utils/strings"),f=n("./zlib/constants"),d=n("./zlib/messages"),h=n("./zlib/zstream"),m=n("./zlib/gzheader"),g=Object.prototype.toString;function v(w){if(!(this instanceof v))return new v(w);this.options=o.assign({chunkSize:16384,windowBits:0,to:""},w||{});var S=this.options;S.raw&&0<=S.windowBits&&S.windowBits<16&&(S.windowBits=-S.windowBits,S.windowBits===0&&(S.windowBits=-15)),!(0<=S.windowBits&&S.windowBits<16)||w&&w.windowBits||(S.windowBits+=32),15<S.windowBits&&S.windowBits<48&&(15&S.windowBits)==0&&(S.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new h,this.strm.avail_out=0;var C=s.inflateInit2(this.strm,S.windowBits);if(C!==f.Z_OK)throw new Error(d[C]);this.header=new m,s.inflateGetHeader(this.strm,this.header)}function b(w,S){var C=new v(S);if(C.push(w,!0),C.err)throw C.msg||d[C.err];return C.result}v.prototype.push=function(w,S){var C,R,N,O,k,D,M=this.strm,j=this.options.chunkSize,I=this.options.dictionary,U=!1;if(this.ended)return!1;R=S===~~S?S:S===!0?f.Z_FINISH:f.Z_NO_FLUSH,typeof w=="string"?M.input=c.binstring2buf(w):g.call(w)==="[object ArrayBuffer]"?M.input=new Uint8Array(w):M.input=w,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new o.Buf8(j),M.next_out=0,M.avail_out=j),(C=s.inflate(M,f.Z_NO_FLUSH))===f.Z_NEED_DICT&&I&&(D=typeof I=="string"?c.string2buf(I):g.call(I)==="[object ArrayBuffer]"?new Uint8Array(I):I,C=s.inflateSetDictionary(this.strm,D)),C===f.Z_BUF_ERROR&&U===!0&&(C=f.Z_OK,U=!1),C!==f.Z_STREAM_END&&C!==f.Z_OK)return this.onEnd(C),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&C!==f.Z_STREAM_END&&(M.avail_in!==0||R!==f.Z_FINISH&&R!==f.Z_SYNC_FLUSH)||(this.options.to==="string"?(N=c.utf8border(M.output,M.next_out),O=M.next_out-N,k=c.buf2string(M.output,N),M.next_out=O,M.avail_out=j-O,O&&o.arraySet(M.output,M.output,N,O,0),this.onData(k)):this.onData(o.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(U=!0)}while((0<M.avail_in||M.avail_out===0)&&C!==f.Z_STREAM_END);return C===f.Z_STREAM_END&&(R=f.Z_FINISH),R===f.Z_FINISH?(C=s.inflateEnd(this.strm),this.onEnd(C),this.ended=!0,C===f.Z_OK):R!==f.Z_SYNC_FLUSH||(this.onEnd(f.Z_OK),!(M.avail_out=0))},v.prototype.onData=function(w){this.chunks.push(w)},v.prototype.onEnd=function(w){w===f.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=o.flattenChunks(this.chunks)),this.chunks=[],this.err=w,this.msg=this.strm.msg},i.Inflate=v,i.inflate=b,i.inflateRaw=function(w,S){return(S=S||{}).raw=!0,b(w,S)},i.ungzip=b},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(n,r,i){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";i.assign=function(f){for(var d=Array.prototype.slice.call(arguments,1);d.length;){var h=d.shift();if(h){if(typeof h!="object")throw new TypeError(h+"must be non-object");for(var m in h)h.hasOwnProperty(m)&&(f[m]=h[m])}}return f},i.shrinkBuf=function(f,d){return f.length===d?f:f.subarray?f.subarray(0,d):(f.length=d,f)};var o={arraySet:function(f,d,h,m,g){if(d.subarray&&f.subarray)f.set(d.subarray(h,h+m),g);else for(var v=0;v<m;v++)f[g+v]=d[h+v]},flattenChunks:function(f){var d,h,m,g,v,b;for(d=m=0,h=f.length;d<h;d++)m+=f[d].length;for(b=new Uint8Array(m),d=g=0,h=f.length;d<h;d++)v=f[d],b.set(v,g),g+=v.length;return b}},c={arraySet:function(f,d,h,m,g){for(var v=0;v<m;v++)f[g+v]=d[h+v]},flattenChunks:function(f){return[].concat.apply([],f)}};i.setTyped=function(f){f?(i.Buf8=Uint8Array,i.Buf16=Uint16Array,i.Buf32=Int32Array,i.assign(i,o)):(i.Buf8=Array,i.Buf16=Array,i.Buf32=Array,i.assign(i,c))},i.setTyped(s)},{}],42:[function(n,r,i){var s=n("./common"),o=!0,c=!0;try{String.fromCharCode.apply(null,[0])}catch{o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{c=!1}for(var f=new s.Buf8(256),d=0;d<256;d++)f[d]=252<=d?6:248<=d?5:240<=d?4:224<=d?3:192<=d?2:1;function h(m,g){if(g<65537&&(m.subarray&&c||!m.subarray&&o))return String.fromCharCode.apply(null,s.shrinkBuf(m,g));for(var v="",b=0;b<g;b++)v+=String.fromCharCode(m[b]);return v}f[254]=f[254]=1,i.string2buf=function(m){var g,v,b,w,S,C=m.length,R=0;for(w=0;w<C;w++)(64512&(v=m.charCodeAt(w)))==55296&&w+1<C&&(64512&(b=m.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(b-56320),w++),R+=v<128?1:v<2048?2:v<65536?3:4;for(g=new s.Buf8(R),w=S=0;S<R;w++)(64512&(v=m.charCodeAt(w)))==55296&&w+1<C&&(64512&(b=m.charCodeAt(w+1)))==56320&&(v=65536+(v-55296<<10)+(b-56320),w++),v<128?g[S++]=v:(v<2048?g[S++]=192|v>>>6:(v<65536?g[S++]=224|v>>>12:(g[S++]=240|v>>>18,g[S++]=128|v>>>12&63),g[S++]=128|v>>>6&63),g[S++]=128|63&v);return g},i.buf2binstring=function(m){return h(m,m.length)},i.binstring2buf=function(m){for(var g=new s.Buf8(m.length),v=0,b=g.length;v<b;v++)g[v]=m.charCodeAt(v);return g},i.buf2string=function(m,g){var v,b,w,S,C=g||m.length,R=new Array(2*C);for(v=b=0;v<C;)if((w=m[v++])<128)R[b++]=w;else if(4<(S=f[w]))R[b++]=65533,v+=S-1;else{for(w&=S===2?31:S===3?15:7;1<S&&v<C;)w=w<<6|63&m[v++],S--;1<S?R[b++]=65533:w<65536?R[b++]=w:(w-=65536,R[b++]=55296|w>>10&1023,R[b++]=56320|1023&w)}return h(R,b)},i.utf8border=function(m,g){var v;for((g=g||m.length)>m.length&&(g=m.length),v=g-1;0<=v&&(192&m[v])==128;)v--;return v<0||v===0?g:v+f[m[v]]>g?v:g}},{"./common":41}],43:[function(n,r,i){r.exports=function(s,o,c,f){for(var d=65535&s|0,h=s>>>16&65535|0,m=0;c!==0;){for(c-=m=2e3<c?2e3:c;h=h+(d=d+o[f++]|0)|0,--m;);d%=65521,h%=65521}return d|h<<16|0}},{}],44:[function(n,r,i){r.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(n,r,i){var s=(function(){for(var o,c=[],f=0;f<256;f++){o=f;for(var d=0;d<8;d++)o=1&o?3988292384^o>>>1:o>>>1;c[f]=o}return c})();r.exports=function(o,c,f,d){var h=s,m=d+f;o^=-1;for(var g=d;g<m;g++)o=o>>>8^h[255&(o^c[g])];return-1^o}},{}],46:[function(n,r,i){var s,o=n("../utils/common"),c=n("./trees"),f=n("./adler32"),d=n("./crc32"),h=n("./messages"),m=0,g=4,v=0,b=-2,w=-1,S=4,C=2,R=8,N=9,O=286,k=30,D=19,M=2*O+1,j=15,I=3,U=258,B=U+I+1,P=42,F=113,z=1,Q=2,W=3,K=4;function te(q,ie){return q.msg=h[ie],ie}function ne(q){return(q<<1)-(4<q?9:0)}function xe(q){for(var ie=q.length;0<=--ie;)q[ie]=0}function G(q){var ie=q.state,le=ie.pending;le>q.avail_out&&(le=q.avail_out),le!==0&&(o.arraySet(q.output,ie.pending_buf,ie.pending_out,le,q.next_out),q.next_out+=le,ie.pending_out+=le,q.total_out+=le,q.avail_out-=le,ie.pending-=le,ie.pending===0&&(ie.pending_out=0))}function X(q,ie){c._tr_flush_block(q,0<=q.block_start?q.block_start:-1,q.strstart-q.block_start,ie),q.block_start=q.strstart,G(q.strm)}function de(q,ie){q.pending_buf[q.pending++]=ie}function ce(q,ie){q.pending_buf[q.pending++]=ie>>>8&255,q.pending_buf[q.pending++]=255&ie}function ve(q,ie){var le,Z,ee=q.max_chain_length,oe=q.strstart,Te=q.prev_length,Re=q.nice_match,ge=q.strstart>q.w_size-B?q.strstart-(q.w_size-B):0,Me=q.window,Le=q.w_mask,De=q.prev,We=q.strstart+U,Et=Me[oe+Te-1],lt=Me[oe+Te];q.prev_length>=q.good_match&&(ee>>=2),Re>q.lookahead&&(Re=q.lookahead);do if(Me[(le=ie)+Te]===lt&&Me[le+Te-1]===Et&&Me[le]===Me[oe]&&Me[++le]===Me[oe+1]){oe+=2,le++;do;while(Me[++oe]===Me[++le]&&Me[++oe]===Me[++le]&&Me[++oe]===Me[++le]&&Me[++oe]===Me[++le]&&Me[++oe]===Me[++le]&&Me[++oe]===Me[++le]&&Me[++oe]===Me[++le]&&Me[++oe]===Me[++le]&&oe<We);if(Z=U-(We-oe),oe=We-U,Te<Z){if(q.match_start=ie,Re<=(Te=Z))break;Et=Me[oe+Te-1],lt=Me[oe+Te]}}while((ie=De[ie&Le])>ge&&--ee!=0);return Te<=q.lookahead?Te:q.lookahead}function ze(q){var ie,le,Z,ee,oe,Te,Re,ge,Me,Le,De=q.w_size;do{if(ee=q.window_size-q.lookahead-q.strstart,q.strstart>=De+(De-B)){for(o.arraySet(q.window,q.window,De,De,0),q.match_start-=De,q.strstart-=De,q.block_start-=De,ie=le=q.hash_size;Z=q.head[--ie],q.head[ie]=De<=Z?Z-De:0,--le;);for(ie=le=De;Z=q.prev[--ie],q.prev[ie]=De<=Z?Z-De:0,--le;);ee+=De}if(q.strm.avail_in===0)break;if(Te=q.strm,Re=q.window,ge=q.strstart+q.lookahead,Me=ee,Le=void 0,Le=Te.avail_in,Me<Le&&(Le=Me),le=Le===0?0:(Te.avail_in-=Le,o.arraySet(Re,Te.input,Te.next_in,Le,ge),Te.state.wrap===1?Te.adler=f(Te.adler,Re,Le,ge):Te.state.wrap===2&&(Te.adler=d(Te.adler,Re,Le,ge)),Te.next_in+=Le,Te.total_in+=Le,Le),q.lookahead+=le,q.lookahead+q.insert>=I)for(oe=q.strstart-q.insert,q.ins_h=q.window[oe],q.ins_h=(q.ins_h<<q.hash_shift^q.window[oe+1])&q.hash_mask;q.insert&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[oe+I-1])&q.hash_mask,q.prev[oe&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=oe,oe++,q.insert--,!(q.lookahead+q.insert<I)););}while(q.lookahead<B&&q.strm.avail_in!==0)}function je(q,ie){for(var le,Z;;){if(q.lookahead<B){if(ze(q),q.lookahead<B&&ie===m)return z;if(q.lookahead===0)break}if(le=0,q.lookahead>=I&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+I-1])&q.hash_mask,le=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),le!==0&&q.strstart-le<=q.w_size-B&&(q.match_length=ve(q,le)),q.match_length>=I)if(Z=c._tr_tally(q,q.strstart-q.match_start,q.match_length-I),q.lookahead-=q.match_length,q.match_length<=q.max_lazy_match&&q.lookahead>=I){for(q.match_length--;q.strstart++,q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+I-1])&q.hash_mask,le=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart,--q.match_length!=0;);q.strstart++}else q.strstart+=q.match_length,q.match_length=0,q.ins_h=q.window[q.strstart],q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+1])&q.hash_mask;else Z=c._tr_tally(q,0,q.window[q.strstart]),q.lookahead--,q.strstart++;if(Z&&(X(q,!1),q.strm.avail_out===0))return z}return q.insert=q.strstart<I-1?q.strstart:I-1,ie===g?(X(q,!0),q.strm.avail_out===0?W:K):q.last_lit&&(X(q,!1),q.strm.avail_out===0)?z:Q}function Fe(q,ie){for(var le,Z,ee;;){if(q.lookahead<B){if(ze(q),q.lookahead<B&&ie===m)return z;if(q.lookahead===0)break}if(le=0,q.lookahead>=I&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+I-1])&q.hash_mask,le=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),q.prev_length=q.match_length,q.prev_match=q.match_start,q.match_length=I-1,le!==0&&q.prev_length<q.max_lazy_match&&q.strstart-le<=q.w_size-B&&(q.match_length=ve(q,le),q.match_length<=5&&(q.strategy===1||q.match_length===I&&4096<q.strstart-q.match_start)&&(q.match_length=I-1)),q.prev_length>=I&&q.match_length<=q.prev_length){for(ee=q.strstart+q.lookahead-I,Z=c._tr_tally(q,q.strstart-1-q.prev_match,q.prev_length-I),q.lookahead-=q.prev_length-1,q.prev_length-=2;++q.strstart<=ee&&(q.ins_h=(q.ins_h<<q.hash_shift^q.window[q.strstart+I-1])&q.hash_mask,le=q.prev[q.strstart&q.w_mask]=q.head[q.ins_h],q.head[q.ins_h]=q.strstart),--q.prev_length!=0;);if(q.match_available=0,q.match_length=I-1,q.strstart++,Z&&(X(q,!1),q.strm.avail_out===0))return z}else if(q.match_available){if((Z=c._tr_tally(q,0,q.window[q.strstart-1]))&&X(q,!1),q.strstart++,q.lookahead--,q.strm.avail_out===0)return z}else q.match_available=1,q.strstart++,q.lookahead--}return q.match_available&&(Z=c._tr_tally(q,0,q.window[q.strstart-1]),q.match_available=0),q.insert=q.strstart<I-1?q.strstart:I-1,ie===g?(X(q,!0),q.strm.avail_out===0?W:K):q.last_lit&&(X(q,!1),q.strm.avail_out===0)?z:Q}function fe(q,ie,le,Z,ee){this.good_length=q,this.max_lazy=ie,this.nice_length=le,this.max_chain=Z,this.func=ee}function Ce(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=R,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new o.Buf16(2*M),this.dyn_dtree=new o.Buf16(2*(2*k+1)),this.bl_tree=new o.Buf16(2*(2*D+1)),xe(this.dyn_ltree),xe(this.dyn_dtree),xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new o.Buf16(j+1),this.heap=new o.Buf16(2*O+1),xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new o.Buf16(2*O+1),xe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Ve(q){var ie;return q&&q.state?(q.total_in=q.total_out=0,q.data_type=C,(ie=q.state).pending=0,ie.pending_out=0,ie.wrap<0&&(ie.wrap=-ie.wrap),ie.status=ie.wrap?P:F,q.adler=ie.wrap===2?0:1,ie.last_flush=m,c._tr_init(ie),v):te(q,b)}function Ne(q){var ie=Ve(q);return ie===v&&(function(le){le.window_size=2*le.w_size,xe(le.head),le.max_lazy_match=s[le.level].max_lazy,le.good_match=s[le.level].good_length,le.nice_match=s[le.level].nice_length,le.max_chain_length=s[le.level].max_chain,le.strstart=0,le.block_start=0,le.lookahead=0,le.insert=0,le.match_length=le.prev_length=I-1,le.match_available=0,le.ins_h=0})(q.state),ie}function ft(q,ie,le,Z,ee,oe){if(!q)return b;var Te=1;if(ie===w&&(ie=6),Z<0?(Te=0,Z=-Z):15<Z&&(Te=2,Z-=16),ee<1||N<ee||le!==R||Z<8||15<Z||ie<0||9<ie||oe<0||S<oe)return te(q,b);Z===8&&(Z=9);var Re=new Ce;return(q.state=Re).strm=q,Re.wrap=Te,Re.gzhead=null,Re.w_bits=Z,Re.w_size=1<<Re.w_bits,Re.w_mask=Re.w_size-1,Re.hash_bits=ee+7,Re.hash_size=1<<Re.hash_bits,Re.hash_mask=Re.hash_size-1,Re.hash_shift=~~((Re.hash_bits+I-1)/I),Re.window=new o.Buf8(2*Re.w_size),Re.head=new o.Buf16(Re.hash_size),Re.prev=new o.Buf16(Re.w_size),Re.lit_bufsize=1<<ee+6,Re.pending_buf_size=4*Re.lit_bufsize,Re.pending_buf=new o.Buf8(Re.pending_buf_size),Re.d_buf=1*Re.lit_bufsize,Re.l_buf=3*Re.lit_bufsize,Re.level=ie,Re.strategy=oe,Re.method=le,Ne(q)}s=[new fe(0,0,0,0,function(q,ie){var le=65535;for(le>q.pending_buf_size-5&&(le=q.pending_buf_size-5);;){if(q.lookahead<=1){if(ze(q),q.lookahead===0&&ie===m)return z;if(q.lookahead===0)break}q.strstart+=q.lookahead,q.lookahead=0;var Z=q.block_start+le;if((q.strstart===0||q.strstart>=Z)&&(q.lookahead=q.strstart-Z,q.strstart=Z,X(q,!1),q.strm.avail_out===0)||q.strstart-q.block_start>=q.w_size-B&&(X(q,!1),q.strm.avail_out===0))return z}return q.insert=0,ie===g?(X(q,!0),q.strm.avail_out===0?W:K):(q.strstart>q.block_start&&(X(q,!1),q.strm.avail_out),z)}),new fe(4,4,8,4,je),new fe(4,5,16,8,je),new fe(4,6,32,32,je),new fe(4,4,16,16,Fe),new fe(8,16,32,32,Fe),new fe(8,16,128,128,Fe),new fe(8,32,128,256,Fe),new fe(32,128,258,1024,Fe),new fe(32,258,258,4096,Fe)],i.deflateInit=function(q,ie){return ft(q,ie,R,15,8,0)},i.deflateInit2=ft,i.deflateReset=Ne,i.deflateResetKeep=Ve,i.deflateSetHeader=function(q,ie){return q&&q.state?q.state.wrap!==2?b:(q.state.gzhead=ie,v):b},i.deflate=function(q,ie){var le,Z,ee,oe;if(!q||!q.state||5<ie||ie<0)return q?te(q,b):b;if(Z=q.state,!q.output||!q.input&&q.avail_in!==0||Z.status===666&&ie!==g)return te(q,q.avail_out===0?-5:b);if(Z.strm=q,le=Z.last_flush,Z.last_flush=ie,Z.status===P)if(Z.wrap===2)q.adler=0,de(Z,31),de(Z,139),de(Z,8),Z.gzhead?(de(Z,(Z.gzhead.text?1:0)+(Z.gzhead.hcrc?2:0)+(Z.gzhead.extra?4:0)+(Z.gzhead.name?8:0)+(Z.gzhead.comment?16:0)),de(Z,255&Z.gzhead.time),de(Z,Z.gzhead.time>>8&255),de(Z,Z.gzhead.time>>16&255),de(Z,Z.gzhead.time>>24&255),de(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),de(Z,255&Z.gzhead.os),Z.gzhead.extra&&Z.gzhead.extra.length&&(de(Z,255&Z.gzhead.extra.length),de(Z,Z.gzhead.extra.length>>8&255)),Z.gzhead.hcrc&&(q.adler=d(q.adler,Z.pending_buf,Z.pending,0)),Z.gzindex=0,Z.status=69):(de(Z,0),de(Z,0),de(Z,0),de(Z,0),de(Z,0),de(Z,Z.level===9?2:2<=Z.strategy||Z.level<2?4:0),de(Z,3),Z.status=F);else{var Te=R+(Z.w_bits-8<<4)<<8;Te|=(2<=Z.strategy||Z.level<2?0:Z.level<6?1:Z.level===6?2:3)<<6,Z.strstart!==0&&(Te|=32),Te+=31-Te%31,Z.status=F,ce(Z,Te),Z.strstart!==0&&(ce(Z,q.adler>>>16),ce(Z,65535&q.adler)),q.adler=1}if(Z.status===69)if(Z.gzhead.extra){for(ee=Z.pending;Z.gzindex<(65535&Z.gzhead.extra.length)&&(Z.pending!==Z.pending_buf_size||(Z.gzhead.hcrc&&Z.pending>ee&&(q.adler=d(q.adler,Z.pending_buf,Z.pending-ee,ee)),G(q),ee=Z.pending,Z.pending!==Z.pending_buf_size));)de(Z,255&Z.gzhead.extra[Z.gzindex]),Z.gzindex++;Z.gzhead.hcrc&&Z.pending>ee&&(q.adler=d(q.adler,Z.pending_buf,Z.pending-ee,ee)),Z.gzindex===Z.gzhead.extra.length&&(Z.gzindex=0,Z.status=73)}else Z.status=73;if(Z.status===73)if(Z.gzhead.name){ee=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>ee&&(q.adler=d(q.adler,Z.pending_buf,Z.pending-ee,ee)),G(q),ee=Z.pending,Z.pending===Z.pending_buf_size)){oe=1;break}oe=Z.gzindex<Z.gzhead.name.length?255&Z.gzhead.name.charCodeAt(Z.gzindex++):0,de(Z,oe)}while(oe!==0);Z.gzhead.hcrc&&Z.pending>ee&&(q.adler=d(q.adler,Z.pending_buf,Z.pending-ee,ee)),oe===0&&(Z.gzindex=0,Z.status=91)}else Z.status=91;if(Z.status===91)if(Z.gzhead.comment){ee=Z.pending;do{if(Z.pending===Z.pending_buf_size&&(Z.gzhead.hcrc&&Z.pending>ee&&(q.adler=d(q.adler,Z.pending_buf,Z.pending-ee,ee)),G(q),ee=Z.pending,Z.pending===Z.pending_buf_size)){oe=1;break}oe=Z.gzindex<Z.gzhead.comment.length?255&Z.gzhead.comment.charCodeAt(Z.gzindex++):0,de(Z,oe)}while(oe!==0);Z.gzhead.hcrc&&Z.pending>ee&&(q.adler=d(q.adler,Z.pending_buf,Z.pending-ee,ee)),oe===0&&(Z.status=103)}else Z.status=103;if(Z.status===103&&(Z.gzhead.hcrc?(Z.pending+2>Z.pending_buf_size&&G(q),Z.pending+2<=Z.pending_buf_size&&(de(Z,255&q.adler),de(Z,q.adler>>8&255),q.adler=0,Z.status=F)):Z.status=F),Z.pending!==0){if(G(q),q.avail_out===0)return Z.last_flush=-1,v}else if(q.avail_in===0&&ne(ie)<=ne(le)&&ie!==g)return te(q,-5);if(Z.status===666&&q.avail_in!==0)return te(q,-5);if(q.avail_in!==0||Z.lookahead!==0||ie!==m&&Z.status!==666){var Re=Z.strategy===2?(function(ge,Me){for(var Le;;){if(ge.lookahead===0&&(ze(ge),ge.lookahead===0)){if(Me===m)return z;break}if(ge.match_length=0,Le=c._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++,Le&&(X(ge,!1),ge.strm.avail_out===0))return z}return ge.insert=0,Me===g?(X(ge,!0),ge.strm.avail_out===0?W:K):ge.last_lit&&(X(ge,!1),ge.strm.avail_out===0)?z:Q})(Z,ie):Z.strategy===3?(function(ge,Me){for(var Le,De,We,Et,lt=ge.window;;){if(ge.lookahead<=U){if(ze(ge),ge.lookahead<=U&&Me===m)return z;if(ge.lookahead===0)break}if(ge.match_length=0,ge.lookahead>=I&&0<ge.strstart&&(De=lt[We=ge.strstart-1])===lt[++We]&&De===lt[++We]&&De===lt[++We]){Et=ge.strstart+U;do;while(De===lt[++We]&&De===lt[++We]&&De===lt[++We]&&De===lt[++We]&&De===lt[++We]&&De===lt[++We]&&De===lt[++We]&&De===lt[++We]&&We<Et);ge.match_length=U-(Et-We),ge.match_length>ge.lookahead&&(ge.match_length=ge.lookahead)}if(ge.match_length>=I?(Le=c._tr_tally(ge,1,ge.match_length-I),ge.lookahead-=ge.match_length,ge.strstart+=ge.match_length,ge.match_length=0):(Le=c._tr_tally(ge,0,ge.window[ge.strstart]),ge.lookahead--,ge.strstart++),Le&&(X(ge,!1),ge.strm.avail_out===0))return z}return ge.insert=0,Me===g?(X(ge,!0),ge.strm.avail_out===0?W:K):ge.last_lit&&(X(ge,!1),ge.strm.avail_out===0)?z:Q})(Z,ie):s[Z.level].func(Z,ie);if(Re!==W&&Re!==K||(Z.status=666),Re===z||Re===W)return q.avail_out===0&&(Z.last_flush=-1),v;if(Re===Q&&(ie===1?c._tr_align(Z):ie!==5&&(c._tr_stored_block(Z,0,0,!1),ie===3&&(xe(Z.head),Z.lookahead===0&&(Z.strstart=0,Z.block_start=0,Z.insert=0))),G(q),q.avail_out===0))return Z.last_flush=-1,v}return ie!==g?v:Z.wrap<=0?1:(Z.wrap===2?(de(Z,255&q.adler),de(Z,q.adler>>8&255),de(Z,q.adler>>16&255),de(Z,q.adler>>24&255),de(Z,255&q.total_in),de(Z,q.total_in>>8&255),de(Z,q.total_in>>16&255),de(Z,q.total_in>>24&255)):(ce(Z,q.adler>>>16),ce(Z,65535&q.adler)),G(q),0<Z.wrap&&(Z.wrap=-Z.wrap),Z.pending!==0?v:1)},i.deflateEnd=function(q){var ie;return q&&q.state?(ie=q.state.status)!==P&&ie!==69&&ie!==73&&ie!==91&&ie!==103&&ie!==F&&ie!==666?te(q,b):(q.state=null,ie===F?te(q,-3):v):b},i.deflateSetDictionary=function(q,ie){var le,Z,ee,oe,Te,Re,ge,Me,Le=ie.length;if(!q||!q.state||(oe=(le=q.state).wrap)===2||oe===1&&le.status!==P||le.lookahead)return b;for(oe===1&&(q.adler=f(q.adler,ie,Le,0)),le.wrap=0,Le>=le.w_size&&(oe===0&&(xe(le.head),le.strstart=0,le.block_start=0,le.insert=0),Me=new o.Buf8(le.w_size),o.arraySet(Me,ie,Le-le.w_size,le.w_size,0),ie=Me,Le=le.w_size),Te=q.avail_in,Re=q.next_in,ge=q.input,q.avail_in=Le,q.next_in=0,q.input=ie,ze(le);le.lookahead>=I;){for(Z=le.strstart,ee=le.lookahead-(I-1);le.ins_h=(le.ins_h<<le.hash_shift^le.window[Z+I-1])&le.hash_mask,le.prev[Z&le.w_mask]=le.head[le.ins_h],le.head[le.ins_h]=Z,Z++,--ee;);le.strstart=Z,le.lookahead=I-1,ze(le)}return le.strstart+=le.lookahead,le.block_start=le.strstart,le.insert=le.lookahead,le.lookahead=0,le.match_length=le.prev_length=I-1,le.match_available=0,q.next_in=Re,q.input=ge,q.avail_in=Te,le.wrap=oe,v},i.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(n,r,i){r.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(n,r,i){r.exports=function(s,o){var c,f,d,h,m,g,v,b,w,S,C,R,N,O,k,D,M,j,I,U,B,P,F,z,Q;c=s.state,f=s.next_in,z=s.input,d=f+(s.avail_in-5),h=s.next_out,Q=s.output,m=h-(o-s.avail_out),g=h+(s.avail_out-257),v=c.dmax,b=c.wsize,w=c.whave,S=c.wnext,C=c.window,R=c.hold,N=c.bits,O=c.lencode,k=c.distcode,D=(1<<c.lenbits)-1,M=(1<<c.distbits)-1;e:do{N<15&&(R+=z[f++]<<N,N+=8,R+=z[f++]<<N,N+=8),j=O[R&D];t:for(;;){if(R>>>=I=j>>>24,N-=I,(I=j>>>16&255)===0)Q[h++]=65535&j;else{if(!(16&I)){if((64&I)==0){j=O[(65535&j)+(R&(1<<I)-1)];continue t}if(32&I){c.mode=12;break e}s.msg="invalid literal/length code",c.mode=30;break e}U=65535&j,(I&=15)&&(N<I&&(R+=z[f++]<<N,N+=8),U+=R&(1<<I)-1,R>>>=I,N-=I),N<15&&(R+=z[f++]<<N,N+=8,R+=z[f++]<<N,N+=8),j=k[R&M];n:for(;;){if(R>>>=I=j>>>24,N-=I,!(16&(I=j>>>16&255))){if((64&I)==0){j=k[(65535&j)+(R&(1<<I)-1)];continue n}s.msg="invalid distance code",c.mode=30;break e}if(B=65535&j,N<(I&=15)&&(R+=z[f++]<<N,(N+=8)<I&&(R+=z[f++]<<N,N+=8)),v<(B+=R&(1<<I)-1)){s.msg="invalid distance too far back",c.mode=30;break e}if(R>>>=I,N-=I,(I=h-m)<B){if(w<(I=B-I)&&c.sane){s.msg="invalid distance too far back",c.mode=30;break e}if(F=C,(P=0)===S){if(P+=b-I,I<U){for(U-=I;Q[h++]=C[P++],--I;);P=h-B,F=Q}}else if(S<I){if(P+=b+S-I,(I-=S)<U){for(U-=I;Q[h++]=C[P++],--I;);if(P=0,S<U){for(U-=I=S;Q[h++]=C[P++],--I;);P=h-B,F=Q}}}else if(P+=S-I,I<U){for(U-=I;Q[h++]=C[P++],--I;);P=h-B,F=Q}for(;2<U;)Q[h++]=F[P++],Q[h++]=F[P++],Q[h++]=F[P++],U-=3;U&&(Q[h++]=F[P++],1<U&&(Q[h++]=F[P++]))}else{for(P=h-B;Q[h++]=Q[P++],Q[h++]=Q[P++],Q[h++]=Q[P++],2<(U-=3););U&&(Q[h++]=Q[P++],1<U&&(Q[h++]=Q[P++]))}break}}break}}while(f<d&&h<g);f-=U=N>>3,R&=(1<<(N-=U<<3))-1,s.next_in=f,s.next_out=h,s.avail_in=f<d?d-f+5:5-(f-d),s.avail_out=h<g?g-h+257:257-(h-g),c.hold=R,c.bits=N}},{}],49:[function(n,r,i){var s=n("../utils/common"),o=n("./adler32"),c=n("./crc32"),f=n("./inffast"),d=n("./inftrees"),h=1,m=2,g=0,v=-2,b=1,w=852,S=592;function C(P){return(P>>>24&255)+(P>>>8&65280)+((65280&P)<<8)+((255&P)<<24)}function R(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function N(P){var F;return P&&P.state?(F=P.state,P.total_in=P.total_out=F.total=0,P.msg="",F.wrap&&(P.adler=1&F.wrap),F.mode=b,F.last=0,F.havedict=0,F.dmax=32768,F.head=null,F.hold=0,F.bits=0,F.lencode=F.lendyn=new s.Buf32(w),F.distcode=F.distdyn=new s.Buf32(S),F.sane=1,F.back=-1,g):v}function O(P){var F;return P&&P.state?((F=P.state).wsize=0,F.whave=0,F.wnext=0,N(P)):v}function k(P,F){var z,Q;return P&&P.state?(Q=P.state,F<0?(z=0,F=-F):(z=1+(F>>4),F<48&&(F&=15)),F&&(F<8||15<F)?v:(Q.window!==null&&Q.wbits!==F&&(Q.window=null),Q.wrap=z,Q.wbits=F,O(P))):v}function D(P,F){var z,Q;return P?(Q=new R,(P.state=Q).window=null,(z=k(P,F))!==g&&(P.state=null),z):v}var M,j,I=!0;function U(P){if(I){var F;for(M=new s.Buf32(512),j=new s.Buf32(32),F=0;F<144;)P.lens[F++]=8;for(;F<256;)P.lens[F++]=9;for(;F<280;)P.lens[F++]=7;for(;F<288;)P.lens[F++]=8;for(d(h,P.lens,0,288,M,0,P.work,{bits:9}),F=0;F<32;)P.lens[F++]=5;d(m,P.lens,0,32,j,0,P.work,{bits:5}),I=!1}P.lencode=M,P.lenbits=9,P.distcode=j,P.distbits=5}function B(P,F,z,Q){var W,K=P.state;return K.window===null&&(K.wsize=1<<K.wbits,K.wnext=0,K.whave=0,K.window=new s.Buf8(K.wsize)),Q>=K.wsize?(s.arraySet(K.window,F,z-K.wsize,K.wsize,0),K.wnext=0,K.whave=K.wsize):(Q<(W=K.wsize-K.wnext)&&(W=Q),s.arraySet(K.window,F,z-Q,W,K.wnext),(Q-=W)?(s.arraySet(K.window,F,z-Q,Q,0),K.wnext=Q,K.whave=K.wsize):(K.wnext+=W,K.wnext===K.wsize&&(K.wnext=0),K.whave<K.wsize&&(K.whave+=W))),0}i.inflateReset=O,i.inflateReset2=k,i.inflateResetKeep=N,i.inflateInit=function(P){return D(P,15)},i.inflateInit2=D,i.inflate=function(P,F){var z,Q,W,K,te,ne,xe,G,X,de,ce,ve,ze,je,Fe,fe,Ce,Ve,Ne,ft,q,ie,le,Z,ee=0,oe=new s.Buf8(4),Te=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!P||!P.state||!P.output||!P.input&&P.avail_in!==0)return v;(z=P.state).mode===12&&(z.mode=13),te=P.next_out,W=P.output,xe=P.avail_out,K=P.next_in,Q=P.input,ne=P.avail_in,G=z.hold,X=z.bits,de=ne,ce=xe,ie=g;e:for(;;)switch(z.mode){case b:if(z.wrap===0){z.mode=13;break}for(;X<16;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(2&z.wrap&&G===35615){oe[z.check=0]=255&G,oe[1]=G>>>8&255,z.check=c(z.check,oe,2,0),X=G=0,z.mode=2;break}if(z.flags=0,z.head&&(z.head.done=!1),!(1&z.wrap)||(((255&G)<<8)+(G>>8))%31){P.msg="incorrect header check",z.mode=30;break}if((15&G)!=8){P.msg="unknown compression method",z.mode=30;break}if(X-=4,q=8+(15&(G>>>=4)),z.wbits===0)z.wbits=q;else if(q>z.wbits){P.msg="invalid window size",z.mode=30;break}z.dmax=1<<q,P.adler=z.check=1,z.mode=512&G?10:12,X=G=0;break;case 2:for(;X<16;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(z.flags=G,(255&z.flags)!=8){P.msg="unknown compression method",z.mode=30;break}if(57344&z.flags){P.msg="unknown header flags set",z.mode=30;break}z.head&&(z.head.text=G>>8&1),512&z.flags&&(oe[0]=255&G,oe[1]=G>>>8&255,z.check=c(z.check,oe,2,0)),X=G=0,z.mode=3;case 3:for(;X<32;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}z.head&&(z.head.time=G),512&z.flags&&(oe[0]=255&G,oe[1]=G>>>8&255,oe[2]=G>>>16&255,oe[3]=G>>>24&255,z.check=c(z.check,oe,4,0)),X=G=0,z.mode=4;case 4:for(;X<16;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}z.head&&(z.head.xflags=255&G,z.head.os=G>>8),512&z.flags&&(oe[0]=255&G,oe[1]=G>>>8&255,z.check=c(z.check,oe,2,0)),X=G=0,z.mode=5;case 5:if(1024&z.flags){for(;X<16;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}z.length=G,z.head&&(z.head.extra_len=G),512&z.flags&&(oe[0]=255&G,oe[1]=G>>>8&255,z.check=c(z.check,oe,2,0)),X=G=0}else z.head&&(z.head.extra=null);z.mode=6;case 6:if(1024&z.flags&&(ne<(ve=z.length)&&(ve=ne),ve&&(z.head&&(q=z.head.extra_len-z.length,z.head.extra||(z.head.extra=new Array(z.head.extra_len)),s.arraySet(z.head.extra,Q,K,ve,q)),512&z.flags&&(z.check=c(z.check,Q,ve,K)),ne-=ve,K+=ve,z.length-=ve),z.length))break e;z.length=0,z.mode=7;case 7:if(2048&z.flags){if(ne===0)break e;for(ve=0;q=Q[K+ve++],z.head&&q&&z.length<65536&&(z.head.name+=String.fromCharCode(q)),q&&ve<ne;);if(512&z.flags&&(z.check=c(z.check,Q,ve,K)),ne-=ve,K+=ve,q)break e}else z.head&&(z.head.name=null);z.length=0,z.mode=8;case 8:if(4096&z.flags){if(ne===0)break e;for(ve=0;q=Q[K+ve++],z.head&&q&&z.length<65536&&(z.head.comment+=String.fromCharCode(q)),q&&ve<ne;);if(512&z.flags&&(z.check=c(z.check,Q,ve,K)),ne-=ve,K+=ve,q)break e}else z.head&&(z.head.comment=null);z.mode=9;case 9:if(512&z.flags){for(;X<16;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(G!==(65535&z.check)){P.msg="header crc mismatch",z.mode=30;break}X=G=0}z.head&&(z.head.hcrc=z.flags>>9&1,z.head.done=!0),P.adler=z.check=0,z.mode=12;break;case 10:for(;X<32;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}P.adler=z.check=C(G),X=G=0,z.mode=11;case 11:if(z.havedict===0)return P.next_out=te,P.avail_out=xe,P.next_in=K,P.avail_in=ne,z.hold=G,z.bits=X,2;P.adler=z.check=1,z.mode=12;case 12:if(F===5||F===6)break e;case 13:if(z.last){G>>>=7&X,X-=7&X,z.mode=27;break}for(;X<3;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}switch(z.last=1&G,X-=1,3&(G>>>=1)){case 0:z.mode=14;break;case 1:if(U(z),z.mode=20,F!==6)break;G>>>=2,X-=2;break e;case 2:z.mode=17;break;case 3:P.msg="invalid block type",z.mode=30}G>>>=2,X-=2;break;case 14:for(G>>>=7&X,X-=7&X;X<32;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if((65535&G)!=(G>>>16^65535)){P.msg="invalid stored block lengths",z.mode=30;break}if(z.length=65535&G,X=G=0,z.mode=15,F===6)break e;case 15:z.mode=16;case 16:if(ve=z.length){if(ne<ve&&(ve=ne),xe<ve&&(ve=xe),ve===0)break e;s.arraySet(W,Q,K,ve,te),ne-=ve,K+=ve,xe-=ve,te+=ve,z.length-=ve;break}z.mode=12;break;case 17:for(;X<14;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(z.nlen=257+(31&G),G>>>=5,X-=5,z.ndist=1+(31&G),G>>>=5,X-=5,z.ncode=4+(15&G),G>>>=4,X-=4,286<z.nlen||30<z.ndist){P.msg="too many length or distance symbols",z.mode=30;break}z.have=0,z.mode=18;case 18:for(;z.have<z.ncode;){for(;X<3;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}z.lens[Te[z.have++]]=7&G,G>>>=3,X-=3}for(;z.have<19;)z.lens[Te[z.have++]]=0;if(z.lencode=z.lendyn,z.lenbits=7,le={bits:z.lenbits},ie=d(0,z.lens,0,19,z.lencode,0,z.work,le),z.lenbits=le.bits,ie){P.msg="invalid code lengths set",z.mode=30;break}z.have=0,z.mode=19;case 19:for(;z.have<z.nlen+z.ndist;){for(;fe=(ee=z.lencode[G&(1<<z.lenbits)-1])>>>16&255,Ce=65535&ee,!((Fe=ee>>>24)<=X);){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(Ce<16)G>>>=Fe,X-=Fe,z.lens[z.have++]=Ce;else{if(Ce===16){for(Z=Fe+2;X<Z;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(G>>>=Fe,X-=Fe,z.have===0){P.msg="invalid bit length repeat",z.mode=30;break}q=z.lens[z.have-1],ve=3+(3&G),G>>>=2,X-=2}else if(Ce===17){for(Z=Fe+3;X<Z;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}X-=Fe,q=0,ve=3+(7&(G>>>=Fe)),G>>>=3,X-=3}else{for(Z=Fe+7;X<Z;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}X-=Fe,q=0,ve=11+(127&(G>>>=Fe)),G>>>=7,X-=7}if(z.have+ve>z.nlen+z.ndist){P.msg="invalid bit length repeat",z.mode=30;break}for(;ve--;)z.lens[z.have++]=q}}if(z.mode===30)break;if(z.lens[256]===0){P.msg="invalid code -- missing end-of-block",z.mode=30;break}if(z.lenbits=9,le={bits:z.lenbits},ie=d(h,z.lens,0,z.nlen,z.lencode,0,z.work,le),z.lenbits=le.bits,ie){P.msg="invalid literal/lengths set",z.mode=30;break}if(z.distbits=6,z.distcode=z.distdyn,le={bits:z.distbits},ie=d(m,z.lens,z.nlen,z.ndist,z.distcode,0,z.work,le),z.distbits=le.bits,ie){P.msg="invalid distances set",z.mode=30;break}if(z.mode=20,F===6)break e;case 20:z.mode=21;case 21:if(6<=ne&&258<=xe){P.next_out=te,P.avail_out=xe,P.next_in=K,P.avail_in=ne,z.hold=G,z.bits=X,f(P,ce),te=P.next_out,W=P.output,xe=P.avail_out,K=P.next_in,Q=P.input,ne=P.avail_in,G=z.hold,X=z.bits,z.mode===12&&(z.back=-1);break}for(z.back=0;fe=(ee=z.lencode[G&(1<<z.lenbits)-1])>>>16&255,Ce=65535&ee,!((Fe=ee>>>24)<=X);){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(fe&&(240&fe)==0){for(Ve=Fe,Ne=fe,ft=Ce;fe=(ee=z.lencode[ft+((G&(1<<Ve+Ne)-1)>>Ve)])>>>16&255,Ce=65535&ee,!(Ve+(Fe=ee>>>24)<=X);){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}G>>>=Ve,X-=Ve,z.back+=Ve}if(G>>>=Fe,X-=Fe,z.back+=Fe,z.length=Ce,fe===0){z.mode=26;break}if(32&fe){z.back=-1,z.mode=12;break}if(64&fe){P.msg="invalid literal/length code",z.mode=30;break}z.extra=15&fe,z.mode=22;case 22:if(z.extra){for(Z=z.extra;X<Z;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}z.length+=G&(1<<z.extra)-1,G>>>=z.extra,X-=z.extra,z.back+=z.extra}z.was=z.length,z.mode=23;case 23:for(;fe=(ee=z.distcode[G&(1<<z.distbits)-1])>>>16&255,Ce=65535&ee,!((Fe=ee>>>24)<=X);){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if((240&fe)==0){for(Ve=Fe,Ne=fe,ft=Ce;fe=(ee=z.distcode[ft+((G&(1<<Ve+Ne)-1)>>Ve)])>>>16&255,Ce=65535&ee,!(Ve+(Fe=ee>>>24)<=X);){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}G>>>=Ve,X-=Ve,z.back+=Ve}if(G>>>=Fe,X-=Fe,z.back+=Fe,64&fe){P.msg="invalid distance code",z.mode=30;break}z.offset=Ce,z.extra=15&fe,z.mode=24;case 24:if(z.extra){for(Z=z.extra;X<Z;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}z.offset+=G&(1<<z.extra)-1,G>>>=z.extra,X-=z.extra,z.back+=z.extra}if(z.offset>z.dmax){P.msg="invalid distance too far back",z.mode=30;break}z.mode=25;case 25:if(xe===0)break e;if(ve=ce-xe,z.offset>ve){if((ve=z.offset-ve)>z.whave&&z.sane){P.msg="invalid distance too far back",z.mode=30;break}ze=ve>z.wnext?(ve-=z.wnext,z.wsize-ve):z.wnext-ve,ve>z.length&&(ve=z.length),je=z.window}else je=W,ze=te-z.offset,ve=z.length;for(xe<ve&&(ve=xe),xe-=ve,z.length-=ve;W[te++]=je[ze++],--ve;);z.length===0&&(z.mode=21);break;case 26:if(xe===0)break e;W[te++]=z.length,xe--,z.mode=21;break;case 27:if(z.wrap){for(;X<32;){if(ne===0)break e;ne--,G|=Q[K++]<<X,X+=8}if(ce-=xe,P.total_out+=ce,z.total+=ce,ce&&(P.adler=z.check=z.flags?c(z.check,W,ce,te-ce):o(z.check,W,ce,te-ce)),ce=xe,(z.flags?G:C(G))!==z.check){P.msg="incorrect data check",z.mode=30;break}X=G=0}z.mode=28;case 28:if(z.wrap&&z.flags){for(;X<32;){if(ne===0)break e;ne--,G+=Q[K++]<<X,X+=8}if(G!==(4294967295&z.total)){P.msg="incorrect length check",z.mode=30;break}X=G=0}z.mode=29;case 29:ie=1;break e;case 30:ie=-3;break e;case 31:return-4;case 32:default:return v}return P.next_out=te,P.avail_out=xe,P.next_in=K,P.avail_in=ne,z.hold=G,z.bits=X,(z.wsize||ce!==P.avail_out&&z.mode<30&&(z.mode<27||F!==4))&&B(P,P.output,P.next_out,ce-P.avail_out)?(z.mode=31,-4):(de-=P.avail_in,ce-=P.avail_out,P.total_in+=de,P.total_out+=ce,z.total+=ce,z.wrap&&ce&&(P.adler=z.check=z.flags?c(z.check,W,ce,P.next_out-ce):o(z.check,W,ce,P.next_out-ce)),P.data_type=z.bits+(z.last?64:0)+(z.mode===12?128:0)+(z.mode===20||z.mode===15?256:0),(de==0&&ce===0||F===4)&&ie===g&&(ie=-5),ie)},i.inflateEnd=function(P){if(!P||!P.state)return v;var F=P.state;return F.window&&(F.window=null),P.state=null,g},i.inflateGetHeader=function(P,F){var z;return P&&P.state?(2&(z=P.state).wrap)==0?v:((z.head=F).done=!1,g):v},i.inflateSetDictionary=function(P,F){var z,Q=F.length;return P&&P.state?(z=P.state).wrap!==0&&z.mode!==11?v:z.mode===11&&o(1,F,Q,0)!==z.check?-3:B(P,F,Q,Q)?(z.mode=31,-4):(z.havedict=1,g):v},i.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(n,r,i){var s=n("../utils/common"),o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],c=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],f=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],d=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];r.exports=function(h,m,g,v,b,w,S,C){var R,N,O,k,D,M,j,I,U,B=C.bits,P=0,F=0,z=0,Q=0,W=0,K=0,te=0,ne=0,xe=0,G=0,X=null,de=0,ce=new s.Buf16(16),ve=new s.Buf16(16),ze=null,je=0;for(P=0;P<=15;P++)ce[P]=0;for(F=0;F<v;F++)ce[m[g+F]]++;for(W=B,Q=15;1<=Q&&ce[Q]===0;Q--);if(Q<W&&(W=Q),Q===0)return b[w++]=20971520,b[w++]=20971520,C.bits=1,0;for(z=1;z<Q&&ce[z]===0;z++);for(W<z&&(W=z),P=ne=1;P<=15;P++)if(ne<<=1,(ne-=ce[P])<0)return-1;if(0<ne&&(h===0||Q!==1))return-1;for(ve[1]=0,P=1;P<15;P++)ve[P+1]=ve[P]+ce[P];for(F=0;F<v;F++)m[g+F]!==0&&(S[ve[m[g+F]]++]=F);if(M=h===0?(X=ze=S,19):h===1?(X=o,de-=257,ze=c,je-=257,256):(X=f,ze=d,-1),P=z,D=w,te=F=G=0,O=-1,k=(xe=1<<(K=W))-1,h===1&&852<xe||h===2&&592<xe)return 1;for(;;){for(j=P-te,U=S[F]<M?(I=0,S[F]):S[F]>M?(I=ze[je+S[F]],X[de+S[F]]):(I=96,0),R=1<<P-te,z=N=1<<K;b[D+(G>>te)+(N-=R)]=j<<24|I<<16|U|0,N!==0;);for(R=1<<P-1;G&R;)R>>=1;if(R!==0?(G&=R-1,G+=R):G=0,F++,--ce[P]==0){if(P===Q)break;P=m[g+S[F]]}if(W<P&&(G&k)!==O){for(te===0&&(te=W),D+=z,ne=1<<(K=P-te);K+te<Q&&!((ne-=ce[K+te])<=0);)K++,ne<<=1;if(xe+=1<<K,h===1&&852<xe||h===2&&592<xe)return 1;b[O=G&k]=W<<24|K<<16|D-w|0}}return G!==0&&(b[D+G]=P-te<<24|64<<16|0),C.bits=W,0}},{"../utils/common":41}],51:[function(n,r,i){r.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(n,r,i){var s=n("../utils/common"),o=0,c=1;function f(ee){for(var oe=ee.length;0<=--oe;)ee[oe]=0}var d=0,h=29,m=256,g=m+1+h,v=30,b=19,w=2*g+1,S=15,C=16,R=7,N=256,O=16,k=17,D=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],I=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],U=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],B=new Array(2*(g+2));f(B);var P=new Array(2*v);f(P);var F=new Array(512);f(F);var z=new Array(256);f(z);var Q=new Array(h);f(Q);var W,K,te,ne=new Array(v);function xe(ee,oe,Te,Re,ge){this.static_tree=ee,this.extra_bits=oe,this.extra_base=Te,this.elems=Re,this.max_length=ge,this.has_stree=ee&&ee.length}function G(ee,oe){this.dyn_tree=ee,this.max_code=0,this.stat_desc=oe}function X(ee){return ee<256?F[ee]:F[256+(ee>>>7)]}function de(ee,oe){ee.pending_buf[ee.pending++]=255&oe,ee.pending_buf[ee.pending++]=oe>>>8&255}function ce(ee,oe,Te){ee.bi_valid>C-Te?(ee.bi_buf|=oe<<ee.bi_valid&65535,de(ee,ee.bi_buf),ee.bi_buf=oe>>C-ee.bi_valid,ee.bi_valid+=Te-C):(ee.bi_buf|=oe<<ee.bi_valid&65535,ee.bi_valid+=Te)}function ve(ee,oe,Te){ce(ee,Te[2*oe],Te[2*oe+1])}function ze(ee,oe){for(var Te=0;Te|=1&ee,ee>>>=1,Te<<=1,0<--oe;);return Te>>>1}function je(ee,oe,Te){var Re,ge,Me=new Array(S+1),Le=0;for(Re=1;Re<=S;Re++)Me[Re]=Le=Le+Te[Re-1]<<1;for(ge=0;ge<=oe;ge++){var De=ee[2*ge+1];De!==0&&(ee[2*ge]=ze(Me[De]++,De))}}function Fe(ee){var oe;for(oe=0;oe<g;oe++)ee.dyn_ltree[2*oe]=0;for(oe=0;oe<v;oe++)ee.dyn_dtree[2*oe]=0;for(oe=0;oe<b;oe++)ee.bl_tree[2*oe]=0;ee.dyn_ltree[2*N]=1,ee.opt_len=ee.static_len=0,ee.last_lit=ee.matches=0}function fe(ee){8<ee.bi_valid?de(ee,ee.bi_buf):0<ee.bi_valid&&(ee.pending_buf[ee.pending++]=ee.bi_buf),ee.bi_buf=0,ee.bi_valid=0}function Ce(ee,oe,Te,Re){var ge=2*oe,Me=2*Te;return ee[ge]<ee[Me]||ee[ge]===ee[Me]&&Re[oe]<=Re[Te]}function Ve(ee,oe,Te){for(var Re=ee.heap[Te],ge=Te<<1;ge<=ee.heap_len&&(ge<ee.heap_len&&Ce(oe,ee.heap[ge+1],ee.heap[ge],ee.depth)&&ge++,!Ce(oe,Re,ee.heap[ge],ee.depth));)ee.heap[Te]=ee.heap[ge],Te=ge,ge<<=1;ee.heap[Te]=Re}function Ne(ee,oe,Te){var Re,ge,Me,Le,De=0;if(ee.last_lit!==0)for(;Re=ee.pending_buf[ee.d_buf+2*De]<<8|ee.pending_buf[ee.d_buf+2*De+1],ge=ee.pending_buf[ee.l_buf+De],De++,Re===0?ve(ee,ge,oe):(ve(ee,(Me=z[ge])+m+1,oe),(Le=M[Me])!==0&&ce(ee,ge-=Q[Me],Le),ve(ee,Me=X(--Re),Te),(Le=j[Me])!==0&&ce(ee,Re-=ne[Me],Le)),De<ee.last_lit;);ve(ee,N,oe)}function ft(ee,oe){var Te,Re,ge,Me=oe.dyn_tree,Le=oe.stat_desc.static_tree,De=oe.stat_desc.has_stree,We=oe.stat_desc.elems,Et=-1;for(ee.heap_len=0,ee.heap_max=w,Te=0;Te<We;Te++)Me[2*Te]!==0?(ee.heap[++ee.heap_len]=Et=Te,ee.depth[Te]=0):Me[2*Te+1]=0;for(;ee.heap_len<2;)Me[2*(ge=ee.heap[++ee.heap_len]=Et<2?++Et:0)]=1,ee.depth[ge]=0,ee.opt_len--,De&&(ee.static_len-=Le[2*ge+1]);for(oe.max_code=Et,Te=ee.heap_len>>1;1<=Te;Te--)Ve(ee,Me,Te);for(ge=We;Te=ee.heap[1],ee.heap[1]=ee.heap[ee.heap_len--],Ve(ee,Me,1),Re=ee.heap[1],ee.heap[--ee.heap_max]=Te,ee.heap[--ee.heap_max]=Re,Me[2*ge]=Me[2*Te]+Me[2*Re],ee.depth[ge]=(ee.depth[Te]>=ee.depth[Re]?ee.depth[Te]:ee.depth[Re])+1,Me[2*Te+1]=Me[2*Re+1]=ge,ee.heap[1]=ge++,Ve(ee,Me,1),2<=ee.heap_len;);ee.heap[--ee.heap_max]=ee.heap[1],(function(lt,mr){var Ts,Cr,Es,Tt,ln,gr,Rt=mr.dyn_tree,Tl=mr.max_code,pa=mr.stat_desc.static_tree,Bc=mr.stat_desc.has_stree,_i=mr.stat_desc.extra_bits,As=mr.stat_desc.extra_base,Kt=mr.stat_desc.max_length,Nr=0;for(Tt=0;Tt<=S;Tt++)lt.bl_count[Tt]=0;for(Rt[2*lt.heap[lt.heap_max]+1]=0,Ts=lt.heap_max+1;Ts<w;Ts++)Kt<(Tt=Rt[2*Rt[2*(Cr=lt.heap[Ts])+1]+1]+1)&&(Tt=Kt,Nr++),Rt[2*Cr+1]=Tt,Tl<Cr||(lt.bl_count[Tt]++,ln=0,As<=Cr&&(ln=_i[Cr-As]),gr=Rt[2*Cr],lt.opt_len+=gr*(Tt+ln),Bc&&(lt.static_len+=gr*(pa[2*Cr+1]+ln)));if(Nr!==0){do{for(Tt=Kt-1;lt.bl_count[Tt]===0;)Tt--;lt.bl_count[Tt]--,lt.bl_count[Tt+1]+=2,lt.bl_count[Kt]--,Nr-=2}while(0<Nr);for(Tt=Kt;Tt!==0;Tt--)for(Cr=lt.bl_count[Tt];Cr!==0;)Tl<(Es=lt.heap[--Ts])||(Rt[2*Es+1]!==Tt&&(lt.opt_len+=(Tt-Rt[2*Es+1])*Rt[2*Es],Rt[2*Es+1]=Tt),Cr--)}})(ee,oe),je(Me,Et,ee.bl_count)}function q(ee,oe,Te){var Re,ge,Me=-1,Le=oe[1],De=0,We=7,Et=4;for(Le===0&&(We=138,Et=3),oe[2*(Te+1)+1]=65535,Re=0;Re<=Te;Re++)ge=Le,Le=oe[2*(Re+1)+1],++De<We&&ge===Le||(De<Et?ee.bl_tree[2*ge]+=De:ge!==0?(ge!==Me&&ee.bl_tree[2*ge]++,ee.bl_tree[2*O]++):De<=10?ee.bl_tree[2*k]++:ee.bl_tree[2*D]++,Me=ge,Et=(De=0)===Le?(We=138,3):ge===Le?(We=6,3):(We=7,4))}function ie(ee,oe,Te){var Re,ge,Me=-1,Le=oe[1],De=0,We=7,Et=4;for(Le===0&&(We=138,Et=3),Re=0;Re<=Te;Re++)if(ge=Le,Le=oe[2*(Re+1)+1],!(++De<We&&ge===Le)){if(De<Et)for(;ve(ee,ge,ee.bl_tree),--De!=0;);else ge!==0?(ge!==Me&&(ve(ee,ge,ee.bl_tree),De--),ve(ee,O,ee.bl_tree),ce(ee,De-3,2)):De<=10?(ve(ee,k,ee.bl_tree),ce(ee,De-3,3)):(ve(ee,D,ee.bl_tree),ce(ee,De-11,7));Me=ge,Et=(De=0)===Le?(We=138,3):ge===Le?(We=6,3):(We=7,4)}}f(ne);var le=!1;function Z(ee,oe,Te,Re){ce(ee,(d<<1)+(Re?1:0),3),(function(ge,Me,Le,De){fe(ge),de(ge,Le),de(ge,~Le),s.arraySet(ge.pending_buf,ge.window,Me,Le,ge.pending),ge.pending+=Le})(ee,oe,Te)}i._tr_init=function(ee){le||((function(){var oe,Te,Re,ge,Me,Le=new Array(S+1);for(ge=Re=0;ge<h-1;ge++)for(Q[ge]=Re,oe=0;oe<1<<M[ge];oe++)z[Re++]=ge;for(z[Re-1]=ge,ge=Me=0;ge<16;ge++)for(ne[ge]=Me,oe=0;oe<1<<j[ge];oe++)F[Me++]=ge;for(Me>>=7;ge<v;ge++)for(ne[ge]=Me<<7,oe=0;oe<1<<j[ge]-7;oe++)F[256+Me++]=ge;for(Te=0;Te<=S;Te++)Le[Te]=0;for(oe=0;oe<=143;)B[2*oe+1]=8,oe++,Le[8]++;for(;oe<=255;)B[2*oe+1]=9,oe++,Le[9]++;for(;oe<=279;)B[2*oe+1]=7,oe++,Le[7]++;for(;oe<=287;)B[2*oe+1]=8,oe++,Le[8]++;for(je(B,g+1,Le),oe=0;oe<v;oe++)P[2*oe+1]=5,P[2*oe]=ze(oe,5);W=new xe(B,M,m+1,g,S),K=new xe(P,j,0,v,S),te=new xe(new Array(0),I,0,b,R)})(),le=!0),ee.l_desc=new G(ee.dyn_ltree,W),ee.d_desc=new G(ee.dyn_dtree,K),ee.bl_desc=new G(ee.bl_tree,te),ee.bi_buf=0,ee.bi_valid=0,Fe(ee)},i._tr_stored_block=Z,i._tr_flush_block=function(ee,oe,Te,Re){var ge,Me,Le=0;0<ee.level?(ee.strm.data_type===2&&(ee.strm.data_type=(function(De){var We,Et=4093624447;for(We=0;We<=31;We++,Et>>>=1)if(1&Et&&De.dyn_ltree[2*We]!==0)return o;if(De.dyn_ltree[18]!==0||De.dyn_ltree[20]!==0||De.dyn_ltree[26]!==0)return c;for(We=32;We<m;We++)if(De.dyn_ltree[2*We]!==0)return c;return o})(ee)),ft(ee,ee.l_desc),ft(ee,ee.d_desc),Le=(function(De){var We;for(q(De,De.dyn_ltree,De.l_desc.max_code),q(De,De.dyn_dtree,De.d_desc.max_code),ft(De,De.bl_desc),We=b-1;3<=We&&De.bl_tree[2*U[We]+1]===0;We--);return De.opt_len+=3*(We+1)+5+5+4,We})(ee),ge=ee.opt_len+3+7>>>3,(Me=ee.static_len+3+7>>>3)<=ge&&(ge=Me)):ge=Me=Te+5,Te+4<=ge&&oe!==-1?Z(ee,oe,Te,Re):ee.strategy===4||Me===ge?(ce(ee,2+(Re?1:0),3),Ne(ee,B,P)):(ce(ee,4+(Re?1:0),3),(function(De,We,Et,lt){var mr;for(ce(De,We-257,5),ce(De,Et-1,5),ce(De,lt-4,4),mr=0;mr<lt;mr++)ce(De,De.bl_tree[2*U[mr]+1],3);ie(De,De.dyn_ltree,We-1),ie(De,De.dyn_dtree,Et-1)})(ee,ee.l_desc.max_code+1,ee.d_desc.max_code+1,Le+1),Ne(ee,ee.dyn_ltree,ee.dyn_dtree)),Fe(ee),Re&&fe(ee)},i._tr_tally=function(ee,oe,Te){return ee.pending_buf[ee.d_buf+2*ee.last_lit]=oe>>>8&255,ee.pending_buf[ee.d_buf+2*ee.last_lit+1]=255&oe,ee.pending_buf[ee.l_buf+ee.last_lit]=255&Te,ee.last_lit++,oe===0?ee.dyn_ltree[2*Te]++:(ee.matches++,oe--,ee.dyn_ltree[2*(z[Te]+m+1)]++,ee.dyn_dtree[2*X(oe)]++),ee.last_lit===ee.lit_bufsize-1},i._tr_align=function(ee){ce(ee,2,3),ve(ee,N,B),(function(oe){oe.bi_valid===16?(de(oe,oe.bi_buf),oe.bi_buf=0,oe.bi_valid=0):8<=oe.bi_valid&&(oe.pending_buf[oe.pending++]=255&oe.bi_buf,oe.bi_buf>>=8,oe.bi_valid-=8)})(ee)}},{"../utils/common":41}],53:[function(n,r,i){r.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(n,r,i){(function(s){(function(o,c){if(!o.setImmediate){var f,d,h,m,g=1,v={},b=!1,w=o.document,S=Object.getPrototypeOf&&Object.getPrototypeOf(o);S=S&&S.setTimeout?S:o,f={}.toString.call(o.process)==="[object process]"?function(O){process.nextTick(function(){R(O)})}:(function(){if(o.postMessage&&!o.importScripts){var O=!0,k=o.onmessage;return o.onmessage=function(){O=!1},o.postMessage("","*"),o.onmessage=k,O}})()?(m="setImmediate$"+Math.random()+"$",o.addEventListener?o.addEventListener("message",N,!1):o.attachEvent("onmessage",N),function(O){o.postMessage(m+O,"*")}):o.MessageChannel?((h=new MessageChannel).port1.onmessage=function(O){R(O.data)},function(O){h.port2.postMessage(O)}):w&&"onreadystatechange"in w.createElement("script")?(d=w.documentElement,function(O){var k=w.createElement("script");k.onreadystatechange=function(){R(O),k.onreadystatechange=null,d.removeChild(k),k=null},d.appendChild(k)}):function(O){setTimeout(R,0,O)},S.setImmediate=function(O){typeof O!="function"&&(O=new Function(""+O));for(var k=new Array(arguments.length-1),D=0;D<k.length;D++)k[D]=arguments[D+1];var M={callback:O,args:k};return v[g]=M,f(g),g++},S.clearImmediate=C}function C(O){delete v[O]}function R(O){if(b)setTimeout(R,0,O);else{var k=v[O];if(k){b=!0;try{(function(D){var M=D.callback,j=D.args;switch(j.length){case 0:M();break;case 1:M(j[0]);break;case 2:M(j[0],j[1]);break;case 3:M(j[0],j[1],j[2]);break;default:M.apply(c,j)}})(k)}finally{C(O),b=!1}}}}function N(O){O.source===o&&typeof O.data=="string"&&O.data.indexOf(m)===0&&R(+O.data.slice(m.length))}})(typeof self>"u"?s===void 0?this:s:self)}).call(this,typeof Za<"u"?Za:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(B_)),B_.exports}var J1e=X1e();const Q1e=ws(J1e),Z1e=()=>{const{dispatch:t}=Ge(),e=async()=>{try{const r=new Q1e;Object.entries(Y1e).forEach(([s,o])=>{r.file(`${s}.md`,o)});const i=await r.generateAsync({type:"blob"});VV.saveAs(i,"LifeOS_AI_Protocols.zip"),t.addToast("Protocols Downloaded Successfully","success")}catch(r){console.error("Failed to download guides:",r),t.addToast("Download Failed","error")}},n=[{id:"questForge",title:"Quest Forge (Tasks)",icon:xn,color:"text-indigo-400",bg:"bg-indigo-500/20",border:"border-indigo-500/30",tag:"AI_TASK_GEN"},{id:"habitProtocol",title:"Protocol Foundry (Habits)",icon:hn,color:"text-emerald-400",bg:"bg-emerald-500/20",border:"border-emerald-500/30",tag:"AI_HABIT_GEN"},{id:"shopProtocol",title:"Shop Archives",icon:z4,color:"text-pink-400",bg:"bg-pink-500/20",border:"border-pink-500/30",tag:"AI_SHOP_DOCS"},{id:"economyProtocol",title:"Treasury Archive (Economy)",icon:Kn,color:"text-amber-400",bg:"bg-amber-500/20",border:"border-amber-500/30",tag:"AI_ECON_DOCS"},{id:"raidProtocol",title:"The War Room (Raids)",icon:md,color:"text-red-400",bg:"bg-red-500/20",border:"border-red-500/30",tag:"AI_RAID_OPS"},{id:"codexArbiter",title:"Codex Arbiter (Laws)",icon:qy,color:"text-indigo-400",bg:"bg-indigo-500/20",border:"border-indigo-500/30",tag:"AI_CODEX_GEN"},{id:"badgeProtocol",title:"Badge Architect",icon:T0,color:"text-yellow-400",bg:"bg-yellow-500/20",border:"border-yellow-500/30",tag:"AI_BADGE_GEN"},{id:"skillProtocol",title:"Skill Tree Architect",icon:xn,color:"text-blue-400",bg:"bg-blue-500/20",border:"border-blue-500/30",tag:"AI_SKILL_GEN"}];return l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:l.jsxs("div",{className:"bg-life-black border border-life-gold/30 rounded-2xl w-full max-w-md max-h-[85vh] flex flex-col shadow-2xl shadow-life-gold/10",children:[l.jsxs("div",{className:"p-4 border-b border-life-muted/20 flex items-center justify-between bg-life-paper/50 rounded-t-2xl",children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:"p-2 bg-life-gold/10 rounded-lg text-life-gold border border-life-gold/20",children:l.jsx(Pd,{size:20})}),l.jsxs("div",{children:[l.jsx("h2",{className:"text-sm font-black uppercase tracking-widest text-life-gold flex items-center gap-2",children:"System Protocols"}),l.jsx("p",{className:"text-[10px] text-life-muted font-mono",children:"AI Generation Guides"})]})]}),l.jsx("button",{onClick:()=>t.setModal("none"),className:"text-life-muted hover:text-white transition-colors",children:l.jsx(wt,{size:20})})]}),l.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 custom-scrollbar",children:[l.jsxs("button",{onClick:e,className:"w-full flex items-center justify-center gap-2 p-4 rounded-xl bg-life-gold text-life-black hover:bg-yellow-400 transition-all shadow-lg shadow-life-gold/20 mb-4",children:[l.jsx(yl,{size:18}),l.jsx("span",{className:"text-xs font-black uppercase tracking-widest",children:"Download All Protocols (ZIP)"})]}),l.jsx("div",{className:"w-full h-px bg-life-muted/20 mb-4"}),n.map(r=>{const i=r.icon;return l.jsxs("button",{onClick:()=>t.setModal(r.id),className:`w-full flex items-center justify-between p-4 rounded-xl bg-zinc-900/50 border ${r.border} hover:bg-zinc-800 transition-all group`,children:[l.jsxs("div",{className:"flex items-center gap-3",children:[l.jsx("div",{className:`p-1.5 ${r.bg} rounded-lg ${r.color}`,children:l.jsx(i,{size:16})}),l.jsx("span",{className:"text-[10px] font-black uppercase tracking-widest text-zinc-200 group-hover:text-white",children:r.title})]}),l.jsx("span",{className:`text-[8px] font-mono ${r.color} opacity-60 bg-black/50 px-2 py-1 rounded border ${r.border}`,children:r.tag})]},r.id)})]})]})})},e_e={silver:"text-gray-300 border-gray-300 bg-gray-300/10",gold:"text-yellow-400 border-yellow-400 bg-yellow-400/10",diamond:"text-cyan-400 border-cyan-400 bg-cyan-400/10",crimson:"text-red-600 border-red-600 bg-red-600/10 shadow-[0_0_20px_rgba(220,38,38,0.4)]"},t_e=({data:t,onClose:e})=>{var M;const{badge:n,currentTier:r,history:i,currentValue:s}=t,{state:o,dispatch:c}=Ge(),{user:f}=o,d=()=>{if(!r)return 0;const j=n.levels.findIndex(I=>I.tier===r);return j>=0?j:0},[h,m]=L.useState(d()),g=n.levels[h],v=g.tier,b=!!i[v],w=!b&&(h===0||!!i[n.levels[h-1].tier]),S=e_e[v],C=S.split(" ")[0],R=(M=f.featuredBadges)==null?void 0:M.includes(n.id),N=()=>{let j=[...f.featuredBadges||[]];if(R)j=j.filter(I=>I!==n.id),c.addToast("Badge unpinned","info");else{if(j.length>=3){c.addToast("Max 3 pinned badges allowed","error");return}j.push(n.id),c.addToast("Badge pinned to Profile","success")}c.updateUser({featuredBadges:j})},O=j=>{j.stopPropagation(),h>0&&m(h-1)},k=j=>{j.stopPropagation(),h<n.levels.length-1&&m(h+1)};let D=0;if(b)D=100;else if(w){const j=h>0?n.levels[h-1].target:0;g.target-j,D=Math.min(100,s/g.target*100)}else D=0;return l.jsx("div",{onClick:e,className:"fixed inset-0 z-[60] flex items-center justify-center p-4 bg-black/90 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:j=>j.stopPropagation(),className:"w-full max-w-sm bg-life-paper border border-life-muted/20 rounded-2xl overflow-hidden shadow-2xl animate-in zoom-in-95 slide-in-from-bottom-4 flex flex-col",children:[l.jsxs("div",{className:`relative p-6 text-center border-b border-life-muted/10 overflow-hidden transition-colors duration-500 ${v==="crimson"?"bg-red-900/10":""}`,children:[l.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-48 h-48 bg-current opacity-10 blur-[60px] rounded-full pointer-events-none transition-colors duration-500 ${C}`}),l.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-life-muted hover:text-white z-20",children:l.jsx(wt,{size:20})}),r&&l.jsx("button",{onClick:N,className:`absolute top-4 left-4 p-2 rounded-full border transition-all z-20 ${R?"bg-life-gold text-life-black border-life-gold":"bg-transparent text-life-muted border-life-muted/20 hover:text-white"}`,title:R?"Unpin":"Pin to Profile",children:l.jsx(KY,{size:16,className:R?"fill-current":""})}),l.jsxs("div",{className:"flex items-center justify-between mt-2 mb-4 relative z-10",children:[l.jsx("button",{onClick:O,disabled:h===0,className:`p-2 rounded-full transition-all ${h===0?"opacity-0 pointer-events-none":"text-life-gold hover:bg-life-gold/10 hover:scale-110"}`,children:l.jsx(Vy,{size:32,strokeWidth:3})}),l.jsx("div",{className:`w-28 h-28 rounded-full border-4 flex items-center justify-center text-5xl shadow-2xl transition-all duration-500 bg-life-black ${S} ${b?"scale-100":"scale-90 opacity-50 grayscale"}`,children:b?n.icon:l.jsx(jd,{size:40})}),l.jsx("button",{onClick:k,disabled:h===n.levels.length-1,className:`p-2 rounded-full transition-all ${h===n.levels.length-1?"opacity-0 pointer-events-none":"text-life-gold hover:bg-life-gold/10 hover:scale-110"}`,children:l.jsx(jr,{size:32,strokeWidth:3})})]}),l.jsx("h2",{className:"text-2xl font-black uppercase tracking-tight text-white mb-1",children:n.name}),l.jsx("div",{className:`inline-block px-3 py-0.5 rounded text-[10px] font-black uppercase tracking-[0.2em] border transition-colors duration-500 ${S}`,children:v})]}),l.jsxs("div",{className:"p-6 space-y-6 flex-1 bg-life-paper relative",children:[l.jsx("div",{className:"text-center flex flex-col items-center justify-center min-h-[40px]",children:l.jsxs("p",{className:"text-sm italic font-serif text-life-muted/80 leading-relaxed animate-in fade-in duration-500",children:['"',g.quote,'"']},h)}),l.jsxs("div",{className:"bg-life-black/40 rounded-xl p-3 border border-life-muted/10 text-center relative overflow-hidden",children:[l.jsx("div",{className:"absolute left-0 top-0 bottom-0 w-1 bg-life-gold/50"}),l.jsxs("span",{className:"text-[9px] text-life-muted uppercase font-bold tracking-widest block mb-1 flex items-center justify-center gap-1",children:[l.jsx(Gi,{size:10})," Requirement"]}),l.jsxs("p",{className:"text-xs text-life-text font-medium leading-relaxed",children:[n.description," ",l.jsx("br",{}),l.jsxs("span",{className:"text-life-gold font-bold bg-life-gold/10 px-2 py-0.5 rounded mt-1 inline-block",children:["Target: ",g.target]})]})]}),l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex justify-between text-[10px] font-mono font-bold uppercase tracking-wider",children:[l.jsx("span",{className:"text-life-muted",children:"Progress"}),l.jsx("span",{className:b?"text-life-easy":"text-life-gold",children:b?"COMPLETE":`${s} / ${g.target}`})]}),l.jsx("div",{className:"h-2 bg-life-black rounded-full overflow-hidden border border-life-muted/20",children:l.jsx("div",{className:`h-full transition-all duration-500 ${b?"bg-life-easy":"bg-life-gold"}`,style:{width:`${D}%`}})})]}),l.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-4",children:[l.jsxs("div",{className:`p-3 rounded-xl border flex flex-col items-center justify-center gap-1 transition-colors duration-500 ${b?"bg-life-easy/10 border-life-easy/30":"bg-life-black border-life-muted/20"}`,children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Status"}),l.jsx("span",{className:`text-xs font-black uppercase tracking-wider ${b?"text-life-easy":"text-life-muted"}`,children:b?"ACQUIRED":"LOCKED"})]}),b&&i[v]?l.jsxs("div",{className:"p-3 rounded-xl bg-life-black border border-life-muted/20 flex flex-col items-center justify-center gap-1",children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Unlocked"}),l.jsx("span",{className:"text-[10px] font-mono text-life-text",children:(()=>{const j=i[v]||"";return j.length>=6?`20${j.substring(0,2)}-${j.substring(2,4)}-${j.substring(4,6)}`:"Unknown"})()})]}):l.jsxs("div",{className:"p-3 rounded-xl bg-life-black border border-life-muted/20 flex flex-col items-center justify-center gap-1 opacity-60",children:[l.jsx("span",{className:"text-[9px] text-life-muted uppercase font-bold",children:"Reward"}),l.jsxs("span",{className:"text-xs font-bold text-life-gold",children:[g.rewards.gold," G"]})]})]})]}),l.jsx("div",{className:"p-4 bg-life-black border-t border-life-muted/10 flex justify-center gap-2",children:n.levels.map((j,I)=>l.jsx("div",{className:`w-1.5 h-1.5 rounded-full transition-all duration-300 ${I===h?"bg-life-gold w-3":"bg-life-muted/30"}`},I))})]})})},JO=[{id:"all",label:"All"},{id:"raids",label:"Raids"},{id:"habits",label:"Habits"},{id:"skills",label:"Skills"},{id:"mastery",label:"Stats"},{id:"consequences",label:"Consequences"},{id:"shop",label:"Shop"},{id:"campaign",label:"Campaign"},{id:"honor",label:"Honor"},{id:"progression",label:"Progression"}],n_e=()=>{const{getAllBadges:t}=nL(),e=t(),[n,r]=L.useState("all"),[i,s]=L.useState(null),[o,c]=L.useState(!1),f=n==="all"?e:n==="honor"?e.filter(b=>b.badge.id.startsWith("bdg_honor_")):e.filter(b=>b.badge.category===n),d=i?e.find(b=>b.badge.id===i):null,h=b=>l.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 gap-3",children:b.map(w=>{const{badge:S,currentTier:C,isUnlocked:R}=w;let N="border-life-muted/10",O="text-life-muted/20",k="";return C==="silver"&&(N="border-gray-400/50",O="text-gray-300"),C==="gold"&&(N="border-yellow-500/50",O="text-yellow-400",k="shadow-[0_0_15px_rgba(250,204,21,0.1)]"),C==="diamond"&&(N="border-cyan-500/50",O="text-cyan-400",k="shadow-[0_0_20px_rgba(34,211,238,0.2)]"),C==="crimson"&&(N="border-red-600",O="text-red-500",k="shadow-[0_0_25px_rgba(220,38,38,0.3)] bg-red-900/10"),l.jsxs("button",{onClick:()=>s(S.id),className:`
                            aspect-square rounded-xl border bg-life-paper relative flex flex-col items-center justify-center p-2 group transition-all
                            ${N} ${k}
                            ${R?"hover:scale-105 active:scale-95 cursor-pointer":"opacity-50 grayscale hover:opacity-70"}
                        `,children:[l.jsx("div",{className:`text-3xl mb-2 transition-transform group-hover:scale-110 ${O}`,children:R?S.icon:l.jsx(jd,{size:24})}),l.jsx("div",{className:"text-[8px] font-bold text-center uppercase leading-tight text-life-text/80 line-clamp-2",children:S.name}),C&&l.jsx("div",{className:`absolute top-1 right-1 w-2 h-2 rounded-full ${O.replace("text-","bg-")}`})]},S.id)})}),m=e.filter(b=>b.isUnlocked).length,g=Math.round(m/e.length*100),v={silver:e.filter(b=>b.currentTier==="silver").length,gold:e.filter(b=>b.currentTier==="gold").length,diamond:e.filter(b=>b.currentTier==="diamond").length,crimson:e.filter(b=>b.currentTier==="crimson").length};return l.jsxs("div",{className:"pb-24 animate-in fade-in slide-in-from-bottom-4 duration-500",children:[l.jsxs("div",{className:"flex items-end justify-between mb-6 px-1",children:[l.jsxs("div",{children:[l.jsx("h2",{className:"text-2xl font-black text-life-text tracking-tight flex items-center gap-2",children:"HALL OF GLORY"}),l.jsxs("p",{className:"text-xs text-life-muted uppercase tracking-widest mt-1",children:["The Crimson Legacy  ",g,"% Complete"]})]}),l.jsx("div",{className:"text-life-crimson opacity-50 animate-pulse-slow",children:l.jsx(gl,{size:28})})]}),l.jsxs("button",{onClick:()=>c(!o),className:"w-full mb-6 py-3 px-4 bg-life-black border border-life-muted/20 rounded-xl flex items-center justify-between hover:bg-life-muted/5 transition-all group shadow-sm",children:[l.jsxs("div",{className:"flex items-center gap-2 text-life-muted group-hover:text-life-text",children:[l.jsx(k4,{size:16}),l.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest",children:"Protocol Analysis"})]}),o?l.jsx(Ui,{size:16,className:"text-life-muted"}):l.jsx(Wr,{size:16,className:"text-life-muted"})]}),o&&l.jsxs("div",{className:"grid grid-cols-4 gap-2 mb-6 animate-in slide-in-from-top-2",children:[l.jsxs("div",{className:"bg-life-black border border-gray-400/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-gray-400",children:v.silver}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Silver"})]}),l.jsxs("div",{className:"bg-life-black border border-yellow-500/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-yellow-500",children:v.gold}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Gold"})]}),l.jsxs("div",{className:"bg-life-black border border-cyan-500/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-cyan-400",children:v.diamond}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Diamond"})]}),l.jsxs("div",{className:"bg-life-black border border-red-600/20 p-2 rounded-lg text-center",children:[l.jsx("span",{className:"block text-lg font-black text-red-500",children:v.crimson}),l.jsx("span",{className:"text-[8px] text-life-muted uppercase font-bold",children:"Crimson"})]})]}),l.jsx("div",{className:"flex gap-2 overflow-x-auto no-scrollbar mb-6 pb-2",children:JO.map(b=>l.jsx("button",{onClick:()=>r(b.id),className:`
                            px-3 py-1.5 rounded-lg text-[10px] font-bold uppercase tracking-wider whitespace-nowrap border transition-all
                            ${n===b.id?"bg-life-gold text-life-black border-life-gold":"bg-life-black text-life-muted border-life-muted/20 hover:border-life-gold/50"}
                        `,children:b.label},b.id))}),l.jsx("div",{className:"space-y-8",children:n==="all"?JO.filter(b=>b.id!=="all").map(b=>{const w=b.id==="honor"?e.filter(S=>S.badge.id.startsWith("bdg_honor_")):e.filter(S=>S.badge.category===b.id);return w.length===0?null:l.jsxs("div",{className:"animate-in fade-in duration-500",children:[l.jsxs("div",{className:"flex items-center gap-2 mb-4 px-1",children:[l.jsx("div",{className:"h-px flex-1 bg-life-muted/20"}),l.jsx("h3",{className:"text-[10px] font-black uppercase tracking-[0.3em] text-life-gold",children:b.label}),l.jsx("div",{className:"h-px flex-1 bg-life-muted/20"})]}),h(w)]},b.id)}):l.jsx("div",{children:f.length>0?h(f):l.jsx("div",{className:"py-12 text-center text-life-muted italic text-xs",children:"No badges found in this category yet."})})}),d&&l.jsx(t_e,{data:d,onClose:()=>s(null)})]})},r_e=()=>{const{state:t,dispatch:e}=Ge(),{modalData:n}=t.ui;if(!n||!n.badge)return null;const{badge:r,tier:i,rewards:s}=n,o=()=>{e.setModal("none")};let c="text-gray-300 border-gray-300",f="bg-gray-500";return i==="gold"&&(c="text-yellow-400 border-yellow-400",f="bg-yellow-500"),i==="diamond"&&(c="text-cyan-400 border-cyan-400",f="bg-cyan-500"),i==="crimson"&&(c="text-red-600 border-red-600",f="bg-red-600"),l.jsx("div",{onClick:o,className:"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-black/95 backdrop-blur-md animate-in fade-in duration-300",children:l.jsxs("div",{onClick:d=>d.stopPropagation(),className:"relative w-full max-w-sm flex flex-col items-center text-center animate-in zoom-in-50 slide-in-from-bottom-8 duration-700",children:[l.jsx("div",{className:`absolute inset-0 ${f} blur-[120px] opacity-20 rounded-full animate-pulse-slow pointer-events-none`}),l.jsxs("div",{className:"relative mb-6 group",children:[l.jsx("div",{className:`w-32 h-32 rounded-full border-4 flex items-center justify-center text-6xl bg-life-black shadow-[0_0_50px_currentColor] animate-bounce ${c}`,children:r.icon}),l.jsxs("div",{className:"absolute inset-0 animate-[spin_4s_linear_infinite] pointer-events-none",children:[l.jsx(T0,{size:24,className:`absolute -top-4 left-1/2 -translate-x-1/2 ${c.split(" ")[0]} fill-current`}),l.jsx(T0,{size:24,className:`absolute -bottom-4 left-1/2 -translate-x-1/2 ${c.split(" ")[0]} fill-current`})]})]}),l.jsxs("div",{className:"space-y-2 mb-8 relative z-10",children:[l.jsx("h3",{className:`text-sm font-black uppercase tracking-[0.3em] ${c.split(" ")[0]}`,children:"Protocol Achievement"}),l.jsx("h1",{className:"text-4xl font-black text-white tracking-tighter drop-shadow-xl",children:r.name}),l.jsxs("div",{className:`inline-block px-3 py-1 rounded border text-xs font-black uppercase tracking-widest bg-black/50 ${c}`,children:[i," Rank"]})]}),l.jsxs("div",{className:"flex gap-4 mb-8",children:[l.jsxs("div",{className:"bg-life-paper/80 border border-life-muted/30 px-4 py-2 rounded-xl",children:[l.jsx("span",{className:"block text-[10px] text-life-muted uppercase font-bold",children:"XP Gain"}),l.jsxs("span",{className:"text-lg font-mono font-bold text-white",children:["+",s.xp]})]}),l.jsxs("div",{className:"bg-life-paper/80 border border-life-muted/30 px-4 py-2 rounded-xl",children:[l.jsx("span",{className:"block text-[10px] text-life-muted uppercase font-bold",children:"Gold"}),l.jsxs("span",{className:"text-lg font-mono font-bold text-life-gold",children:["+",s.gold]})]})]}),l.jsx("button",{onClick:o,className:`w-full py-4 rounded-xl font-black uppercase tracking-widest text-black shadow-xl hover:scale-105 active:scale-95 transition-all ${f.replace("bg-","bg-")}`,children:"Claim Glory"})]})})},i_e=({toast:t,onDismiss:e})=>{const[n,r]=L.useState(null),[i,s]=L.useState(0),[o,c]=L.useState(!1),f=(t.message||"").split("|"),d=f[0].trim(),h=f.length>1?f[1].trim():null,m=w=>{r(w.targetTouches[0].clientX)},g=w=>{if(n===null)return;const C=w.targetTouches[0].clientX-n;C>0&&s(C)},v=()=>{i>100?b():(s(0),r(null))},b=()=>{c(!0),s(500),setTimeout(()=>{e(t.id)},200)};return l.jsxs("div",{onTouchStart:m,onTouchMove:g,onTouchEnd:v,onClick:b,style:{transform:`translateX(${i}px)`,opacity:o?0:1-i/300,transition:n!==null?"none":"all 0.2s ease-out"},className:`
                pointer-events-auto cursor-pointer relative overflow-hidden touch-pan-y
                min-w-[280px] max-w-sm w-full backdrop-blur-xl border shadow-2xl rounded-xl p-3
                flex items-center gap-3 animate-in slide-in-from-top-4 fade-in duration-300
                ${t.type==="error"?"bg-red-950/90 border-red-500/50 shadow-red-900/20":t.type==="level-up"?"bg-life-gold/20 border-life-gold bg-black/90 shadow-life-gold/20":t.type==="success"?"bg-green-950/90 border-green-500/50 shadow-green-900/20":"bg-life-black/90 border-life-muted/30 shadow-black/50"}
            `,children:[l.jsxs("div",{className:`
                w-10 h-10 rounded-full flex items-center justify-center shrink-0 border
                ${t.type==="error"?"bg-red-500/20 border-red-500 text-red-500":t.type==="level-up"?"bg-life-gold text-black border-life-gold animate-bounce":t.type==="success"?"bg-green-500/20 border-green-500 text-green-500":"bg-life-muted/20 border-life-muted text-life-muted"}
            `,children:[t.type==="error"&&l.jsx(yo,{size:20}),t.type==="level-up"&&l.jsx(Gy,{size:20,strokeWidth:2.5}),t.type==="success"&&l.jsx(xs,{size:20}),t.type==="info"&&l.jsx(gY,{size:20}),t.type==="crit"&&l.jsx(St,{size:20})]}),l.jsxs("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[l.jsx("span",{className:"text-xs font-bold text-white leading-tight",children:d}),h&&l.jsx("span",{className:`text-[10px] font-mono font-bold uppercase tracking-wider mt-1 truncate ${t.type==="error"?"text-red-300":"text-life-gold"}`,children:h})]}),l.jsx("div",{className:"text-life-muted/50 hover:text-white transition-colors",children:l.jsx(wt,{size:14})})]})},s_e=()=>{const{state:t,dispatch:e}=Ge(),{toasts:n}=t.ui;return n.length===0?null:l.jsx("div",{className:"fixed top-20 left-0 right-0 z-[150] flex flex-col items-center gap-2 pointer-events-none px-4",children:n.map(r=>l.jsx(i_e,{toast:r,onDismiss:i=>e.removeToast(i)},r.id))})},o_e=({onGuestLogin:t})=>{const[e,n]=L.useState(null),[r,i]=L.useState(!1),s=async()=>{i(!0),n(null);const c=new Js;try{await H5(Qs,c)}catch(f){console.error("Login Error:",f),f.code==="auth/unauthorized-domain"?n(`Domain not authorized: ${window.location.hostname}. Please add this domain to Firebase Console > Authentication > Settings.`):n(f.message||"Access Denied. Neural Link Failed."),i(!1)}},o=()=>{navigator.clipboard.writeText(window.location.hostname),alert("Domain copied to clipboard!")};return l.jsxs("div",{className:"min-h-screen bg-life-black text-life-text flex flex-col items-center justify-center p-6 relative overflow-hidden font-mono selection:bg-life-gold selection:text-life-black",children:[l.jsxs("div",{className:"absolute inset-0 pointer-events-none",children:[l.jsx("div",{className:"absolute top-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-life-gold/50 to-transparent opacity-50"}),l.jsx("div",{className:"absolute bottom-0 left-0 w-full h-1 bg-gradient-to-r from-transparent via-life-gold/50 to-transparent opacity-50"}),l.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(18,18,18,0)_50%,rgba(0,0,0,0.25)_50%),linear-gradient(90deg,rgba(255,0,0,0.06),rgba(0,255,0,0.02),rgba(0,0,255,0.06))] z-[1] bg-[length:100%_2px,3px_100%] pointer-events-none"}),l.jsx("div",{className:"absolute top-1/4 left-1/4 w-96 h-96 bg-life-gold/5 rounded-full blur-[100px] animate-pulse"}),l.jsx("div",{className:"absolute bottom-1/4 right-1/4 w-64 h-64 bg-life-crimson/5 rounded-full blur-[80px] animate-pulse delay-1000"})]}),l.jsxs("div",{className:"relative z-10 w-full max-w-md bg-life-paper/80 backdrop-blur-xl border border-zinc-800 p-8 rounded-2xl shadow-2xl animate-in fade-in zoom-in-95 duration-500 group",children:[l.jsx("div",{className:"absolute -top-1 -left-1 w-4 h-4 border-t-2 border-l-2 border-life-gold rounded-tl-lg"}),l.jsx("div",{className:"absolute -top-1 -right-1 w-4 h-4 border-t-2 border-r-2 border-life-gold rounded-tr-lg"}),l.jsx("div",{className:"absolute -bottom-1 -left-1 w-4 h-4 border-b-2 border-l-2 border-life-gold rounded-bl-lg"}),l.jsx("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 border-b-2 border-r-2 border-life-gold rounded-br-lg"}),l.jsxs("div",{className:"text-center mb-8",children:[l.jsx("div",{className:"w-20 h-20 bg-life-black border-2 border-life-gold rounded-full flex items-center justify-center mx-auto mb-6 shadow-[0_0_20px_rgba(251,191,36,0.3)] group-hover:shadow-[0_0_30px_rgba(251,191,36,0.5)] transition-all duration-500",children:l.jsx(St,{size:40,className:"text-life-gold animate-pulse"})}),l.jsx("h1",{className:"text-4xl font-black uppercase tracking-tighter text-white mb-2 glitch-text","data-text":"LIFE OS",children:"LIFE OS"}),l.jsx("p",{className:"text-xs text-life-gold font-bold uppercase tracking-[0.3em] opacity-80",children:"Neural Interface v2.0"})]}),l.jsxs("div",{className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2",children:[l.jsxs("div",{className:"flex items-center gap-3 text-xs text-life-muted font-mono border-b border-zinc-800 pb-2",children:[l.jsx(Or,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["System Status: ",l.jsx("span",{className:"text-life-easy",children:"ONLINE"})]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-life-muted font-mono border-b border-zinc-800 pb-2",children:[l.jsx(ms,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["Security Protocol: ",l.jsx("span",{className:"text-life-easy",children:"ACTIVE"})]})]}),l.jsxs("div",{className:"flex items-center gap-3 text-xs text-life-muted font-mono border-b border-zinc-800 pb-2",children:[l.jsx(lY,{size:14,className:"text-life-gold"}),l.jsxs("span",{children:["Network Uplink: ",l.jsx("span",{className:"text-life-easy",children:"READY"})]})]})]}),e&&l.jsxs("div",{className:"bg-life-hard/10 border border-life-hard/30 text-life-hard text-xs p-3 rounded-lg text-center font-bold animate-shake flex flex-col gap-2",children:[l.jsxs("span",{children:[" ",e]}),e.includes("Domain not authorized")&&l.jsx("button",{onClick:o,className:"text-[10px] underline text-life-gold hover:text-white",children:"Copy Domain"}),l.jsx("button",{onClick:t,className:"mt-2 py-2 px-4 bg-life-muted/20 hover:bg-life-muted/30 text-life-muted hover:text-white rounded border border-life-muted/30 text-[10px] uppercase tracking-wider transition-colors",children:"Continue as Guest (Dev Mode)"})]}),l.jsx("button",{onClick:s,disabled:r,className:"w-full py-4 bg-life-gold hover:bg-yellow-400 text-life-black font-black uppercase tracking-widest rounded-xl shadow-[0_0_20px_rgba(251,191,36,0.2)] hover:shadow-[0_0_30px_rgba(251,191,36,0.4)] transition-all active:scale-95 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-3 group/btn",children:r?l.jsx("span",{className:"animate-pulse",children:"Initializing..."}):l.jsxs(l.Fragment,{children:[l.jsxs("svg",{className:"w-5 h-5",viewBox:"0 0 24 24",children:[l.jsx("path",{fill:"currentColor",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),l.jsx("path",{fill:"currentColor",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),l.jsx("path",{fill:"currentColor",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),l.jsx("path",{fill:"currentColor",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Sign in with Google"]})}),l.jsx("p",{className:"text-[10px] text-life-muted text-center uppercase tracking-wider opacity-60",children:"By connecting, you accept the Neural Link Protocol."})]})]}),l.jsxs("div",{className:"absolute bottom-6 text-[10px] text-life-muted font-mono opacity-40",children:["SYSTEM_ID: ",Math.random().toString(36).substring(7).toUpperCase()," // SECURE_CONNECTION"]})]})},a_e=()=>{const{state:t,dispatch:e}=Ge(),{ui:n,user:r}=t,[i,s]=L.useState(!1);if(L.useEffect(()=>{const c=()=>{s(!0),setTimeout(()=>s(!1),500)};return window.addEventListener("trigger-shake",c),()=>window.removeEventListener("trigger-shake",c)},[]),!r.hasOnboarded)return l.jsx(jJ,{});const o=()=>{switch(n.currentView){case"profile":return l.jsx(lQ,{});case"shop":return l.jsx(YJ,{});case"tasks":return l.jsx(VJ,{});case"habits":return l.jsx(HJ,{});case"raids":return l.jsx($J,{});case"campaign":return l.jsx(dQ,{});case"skills":return l.jsx(pQ,{});case"hall_of_fame":return l.jsx(n_e,{});default:return null}};return l.jsxs("div",{className:`flex flex-col h-[100dvh] bg-life-black text-life-text overflow-hidden select-none font-sans ${i?"animate-shake":""} pt-[env(safe-area-inset-top)] pb-[env(safe-area-inset-bottom)]`,children:[l.jsx(MJ,{}),l.jsx(s_e,{}),l.jsx(rJ,{}),l.jsxs("main",{className:"flex-1 overflow-y-auto relative p-4 scroll-smooth",children:[l.jsx("div",{className:"absolute inset-0 opacity-[0.03] pointer-events-none",style:{backgroundImage:"linear-gradient(#333 1px, transparent 1px), linear-gradient(90deg, #333 1px, transparent 1px)",backgroundSize:"20px 20px"}}),l.jsx("div",{className:"max-w-md mx-auto h-full",children:o()})]}),n.activeModal==="addTask"&&l.jsx(v1e,{}),n.activeModal==="levelUp"&&l.jsx(x1e,{}),n.activeModal==="badgeUnlock"&&l.jsx(r_e,{}),n.activeModal==="streak"&&l.jsx(b1e,{}),n.activeModal==="devConsole"&&l.jsx(j1e,{}),n.activeModal==="itemDetails"&&l.jsx(M1e,{}),n.activeModal==="resetConfirm"&&l.jsx(D1e,{}),n.activeModal==="confirmation"&&l.jsx(O1e,{}),n.activeModal==="loot"&&l.jsx(L1e,{}),n.activeModal==="quickSubtask"&&l.jsx(z1e,{}),n.activeModal==="dataExchange"&&l.jsx(U1e,{}),n.activeModal==="login"&&l.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/90 backdrop-blur-sm animate-in fade-in",children:l.jsxs("div",{className:"relative w-full max-w-md",children:[l.jsx("button",{onClick:()=>e.setModal("none"),className:"absolute top-4 right-4 z-50 text-life-muted hover:text-white",children:""}),l.jsx(o_e,{onGuestLogin:()=>e.setModal("none")})]})}),n.activeModal==="honorBreakdown"&&l.jsx(V1e,{})," ",n.activeModal==="questForge"&&l.jsx(F1e,{})," ",n.activeModal==="habitProtocol"&&l.jsx(B1e,{})," ",n.activeModal==="economyProtocol"&&l.jsx(H1e,{})," ",n.activeModal==="raidProtocol"&&l.jsx(q1e,{})," ",n.activeModal==="skillProtocol"&&l.jsx($1e,{})," ",n.activeModal==="shopProtocol"&&l.jsx(G1e,{})," ",n.activeModal==="codexArbiter"&&l.jsx(K1e,{})," ",n.activeModal==="badgeProtocol"&&l.jsx(W1e,{})," ",n.activeModal==="guidesMenu"&&l.jsx(Z1e,{})," ",l.jsx(PJ,{}),l.jsx(Ppe,{}),l.jsx(Mpe,{}),l.jsx(JX,{})]})},l_e=()=>{const[t,e]=L.useState(null),[n,r]=L.useState(!0);return L.useEffect(()=>{const i=US(Qs,s=>{e(s),r(!1)});return()=>i()},[]),n?l.jsx("div",{className:"h-screen bg-life-black flex items-center justify-center text-life-gold font-mono animate-pulse",children:"INITIALIZING SYSTEM..."}):l.jsx(a_e,{})},c_e="YOUR_GOOGLE_CLIENT_ID_HERE",u_e="YOUR_GOOGLE_API_KEY_HERE",d_e="https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest",f_e="https://www.googleapis.com/auth/calendar.events";let vh,h_e=!1;const p_e=async()=>new Promise((t,e)=>{window.gapi?window.gapi.load("client",async()=>{try{await window.gapi.client.init({apiKey:u_e,discoveryDocs:[d_e]}),h_e=!0,t()}catch(n){e(n)}}):e("GAPI not loaded")}),m_e=()=>new Promise((t,e)=>{window.google?(vh=window.google.accounts.oauth2.initTokenClient({client_id:c_e,scope:f_e,callback:""}),t()):e("GIS not loaded")}),g_e=()=>new Promise((t,e)=>{if(!vh)return e("Token Client not initialized");vh.callback=async n=>{n.error!==void 0&&e(n),t()},window.gapi.client.getToken()===null?vh.requestAccessToken({prompt:"consent"}):vh.requestAccessToken({prompt:""})}),y_e=()=>{const t=window.gapi.client.getToken();t!==null&&(window.google.accounts.oauth2.revoke(t.access_token),window.gapi.client.setToken(""))},v_e=async()=>{try{return(await window.gapi.client.calendar.calendars.insert({resource:{summary:"LifeOS Protocol",description:"Synced tasks and habits from LifeOS.",timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}})).result.id}catch(t){return console.error("Error creating calendar",t),null}},x_e=async()=>{try{const n=(await window.gapi.client.calendar.calendarList.list()).result.items.find(r=>r.summary==="LifeOS Protocol");return n?n.id:null}catch(t){return console.error("Error listing calendars",t),null}},QO=async(t,e)=>{try{await window.gapi.client.calendar.events.insert({calendarId:t,resource:e})}catch(n){console.error("Error syncing event",n)}},b_e=L.createContext(void 0),__e=({children:t})=>{const[e,n]=L.useState(!1),[r,i]=L.useState(!1),{taskState:s}=Er(),{habitState:o}=Ar(),{raidState:c}=Qr(),{dispatch:f}=Ge();L.useEffect(()=>{(async()=>{try{await p_e(),await m_e()}catch(v){console.error("GAPI Init Error (Expected if no keys set):",v)}})()},[]);const d=async()=>{try{await g_e(),n(!0),f.addToast("Google Calendar Connected","success")}catch(g){f.addToast("Connection Failed. Check Console/Keys.","error"),console.error(g)}},h=()=>{y_e(),n(!1),f.addToast("Disconnected from Calendar","info")},m=async()=>{if(e){i(!0),f.addToast("Syncing with Google Calendar...","info");try{let g=await x_e();if(g||(g=await v_e()),!g)throw new Error("Could not create/find calendar.");const v=s.tasks.filter(b=>!b.isCompleted&&!b.isArchived&&(b.deadline||b.scheduledTime));for(const b of v){const w=b.scheduledTime||b.deadline,S=new Date(new Date(w).getTime()+3600*1e3).toISOString(),C={summary:`[Task] ${b.title}`,description:b.description||"",start:{dateTime:w,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:S,timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone}};await QO(g,C)}for(const b of o.habits){if(b.isArchived)continue;let w="RRULE:FREQ=DAILY";if(b.type==="specific_days"&&b.specificDays){const C=["SU","MO","TU","WE","TH","FR","SA"];w=`RRULE:FREQ=WEEKLY;BYDAY=${b.specificDays.map(N=>C[N]).join(",")}`}else b.type==="interval"&&b.intervalValue&&(w=`RRULE:FREQ=DAILY;INTERVAL=${b.intervalValue}`);const S={summary:`[Habit] ${b.title}`,start:{dateTime:new Date().toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},end:{dateTime:new Date(Date.now()+30*6e4).toISOString(),timeZone:Intl.DateTimeFormat().resolvedOptions().timeZone},recurrence:[w]};await QO(g,S)}f.addToast("Sync Complete!","success")}catch(g){console.error(g),f.addToast("Sync Failed","error")}finally{i(!1)}}};return l.jsx(b_e.Provider,{value:{isAuthorized:e,isSyncing:r,connectCalendar:d,disconnectCalendar:h,syncNow:m},children:t})};class w_e extends L.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,n){console.error("Uncaught error:",e,n)}render(){var e;return this.state.hasError?l.jsxs("div",{className:"min-h-screen bg-black text-white flex flex-col items-center justify-center p-6 text-center",children:[l.jsxs("div",{className:"bg-red-500/10 border border-red-500/50 rounded-2xl p-8 max-w-md w-full backdrop-blur-sm animate-in fade-in zoom-in duration-300",children:[l.jsx("div",{className:"w-16 h-16 bg-red-500/20 rounded-full flex items-center justify-center mx-auto mb-6 text-red-500",children:l.jsx(yo,{size:32})}),l.jsx("h1",{className:"text-2xl font-black uppercase tracking-tight mb-2",children:"System Failure"}),l.jsx("p",{className:"text-sm text-gray-400 mb-6 font-mono",children:((e=this.state.error)==null?void 0:e.message)||"An unexpected error occurred."}),l.jsxs("button",{onClick:()=>window.location.reload(),className:"w-full py-3 bg-red-600 hover:bg-red-700 text-white rounded-xl font-bold uppercase tracking-widest flex items-center justify-center gap-2 transition-all",children:[l.jsx(ST,{size:16})," Reboot System"]})]}),l.jsx("p",{className:"mt-8 text-[10px] text-gray-600 font-mono uppercase",children:"LifeOS Kernel Panic  v0.0.1"})]}):this.props.children}}IF.createRoot(document.getElementById("root")).render(l.jsx(NS.StrictMode,{children:l.jsx(w_e,{children:l.jsx(oW,{children:l.jsx(nJ,{children:l.jsx(pJ,{children:l.jsx(xJ,{children:l.jsx(SJ,{children:l.jsx(KJ,{children:l.jsx(DJ,{children:l.jsx(JJ,{children:l.jsxs(__e,{children:[" ",l.jsx(l_e,{})]})})})})})})})})})})}));"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/service-worker.js").then(t=>{console.log("SW registered: ",t)}).catch(t=>{console.log("SW registration failed: ",t)})});export{Bu as I,Eh as N,vT as W};
